<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Prometheus监控之API接口实践</title>
      <link href="/archives/94ebcc6.html"/>
      <url>/archives/94ebcc6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Prometheus提供了一组API促进自动化和其他系统集成。</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>Prometheus提供了两类接口，一类是管理Prometheus实例的操作，例如健康检查、就绪检查、加载配置及退出。第二类则是对Prometheus数据的操作，包括增删改查4大大类。</p><p>接口能做什么？例如: 监控数据自动备份、统计Prometheus实例信息、监控完整性检查、资源利用率系统数据来源等等</p><h1 id="API接口"><a href="#API接口" class="headerlink" title="API接口"></a>API接口</h1><h2 id="查询接口"><a href="#查询接口" class="headerlink" title="查询接口"></a>查询接口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"># Instant queries</span><br><span class="line">GET /api/v1/query</span><br><span class="line">POST /api/v1/query</span><br><span class="line"></span><br><span class="line"># Range queries</span><br><span class="line">GET /api/v1/query_range</span><br><span class="line">POST /api/v1/query_range</span><br><span class="line"></span><br><span class="line"># Formatting query expressions</span><br><span class="line">GET /api/v1/format_query</span><br><span class="line">POST /api/v1/format_query</span><br><span class="line"></span><br><span class="line"># Querying metadata</span><br><span class="line">GET /api/v1/series</span><br><span class="line">POST /api/v1/series</span><br><span class="line"></span><br><span class="line">GET /api/v1/labels</span><br><span class="line">POST /api/v1/labels</span><br><span class="line"></span><br><span class="line">GET /api/v1/label/&lt;label_name&gt;/values</span><br><span class="line"></span><br><span class="line">GET /api/v1/query_exemplars</span><br><span class="line">POST /api/v1/query_exemplars</span><br><span class="line"></span><br><span class="line"># Targets</span><br><span class="line">GET /api/v1/targets</span><br><span class="line"></span><br><span class="line"># Rules</span><br><span class="line">GET /api/v1/rules</span><br><span class="line"></span><br><span class="line"># Alerts</span><br><span class="line">GET /api/v1/alerts</span><br><span class="line"></span><br><span class="line"># Querying target metadata</span><br><span class="line">GET /api/v1/targets/metadata</span><br><span class="line"></span><br><span class="line"># Querying metric metadata</span><br><span class="line">GET /api/v1/metadata</span><br><span class="line"></span><br><span class="line"># Alertmanagers</span><br><span class="line">GET /api/v1/alertmanagers</span><br><span class="line"></span><br><span class="line"># Status</span><br><span class="line"># Config</span><br><span class="line">GET /api/v1/status/config</span><br><span class="line"></span><br><span class="line"># Flags</span><br><span class="line">GET /api/v1/status/flags</span><br><span class="line"></span><br><span class="line"># Runtime Information</span><br><span class="line">GET /api/v1/status/runtimeinfo</span><br><span class="line"></span><br><span class="line"># Build Information</span><br><span class="line">GET /api/v1/status/buildinfo</span><br><span class="line"></span><br><span class="line"># TSDB Stats</span><br><span class="line">GET /api/v1/status/tsdb</span><br><span class="line"></span><br><span class="line"># WAL Replay Stats</span><br><span class="line">GET /api/v1/status/walreplay</span><br><span class="line"></span><br><span class="line"># Snapshot</span><br><span class="line">POST /api/v1/admin/tsdb/snapshot</span><br><span class="line">PUT /api/v1/admin/tsdb/snapshot</span><br><span class="line"></span><br><span class="line"># Delete Series</span><br><span class="line">POST /api/v1/admin/tsdb/delete_series</span><br><span class="line">PUT /api/v1/admin/tsdb/delete_series</span><br><span class="line"></span><br><span class="line"># Clean Tombstones</span><br><span class="line">POST /api/v1/admin/tsdb/clean_tombstones</span><br><span class="line">PUT /api/v1/admin/tsdb/clean_tombstones</span><br><span class="line"></span><br><span class="line"># Remote Write Receiver(依赖配置--web.enable-remote-write-receiver)</span><br><span class="line">/api/v1/write</span><br></pre></td></tr></table></figure><h2 id="管理接口"><a href="#管理接口" class="headerlink" title="管理接口"></a>管理接口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 健康检查Health check</span><br><span class="line">GET /-/healthy</span><br><span class="line">HEAD /-/healthy</span><br><span class="line"></span><br><span class="line"># 就绪检查Readiness check</span><br><span class="line">GET /-/ready</span><br><span class="line">HEAD /-/ready</span><br><span class="line"></span><br><span class="line"># 重新加载配置Reload(依赖配置--web.enable-lifecycle)</span><br><span class="line">PUT  /-/reload</span><br><span class="line">POST /-/reload</span><br><span class="line"></span><br><span class="line"># 退出Quit(依赖配置--web.enable-lifecycle)</span><br><span class="line">PUT  /-/quit</span><br><span class="line">POST /-/quit</span><br></pre></td></tr></table></figure><h1 id="接口实践"><a href="#接口实践" class="headerlink" title="接口实践"></a>接口实践</h1><blockquote><p>利用监控接口实现Prometheus实例信息监控</p></blockquote><p><img src="/archives/94ebcc6/01.jpg" alt></p><h1 id="参照资料"><a href="#参照资料" class="headerlink" title="参照资料"></a>参照资料</h1><ul><li><a href="https://prometheus.io/docs/prometheus/latest/querying/api/" target="_blank" rel="noopener">https://prometheus.io/docs/prometheus/latest/querying/api/</a></li><li><a href="https://prometheus.io/docs/prometheus/latest/management_api/" target="_blank" rel="noopener">https://prometheus.io/docs/prometheus/latest/management_api/</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/94ebcc6.html">https://mds1455975151.github.io/archives/94ebcc6.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Prometheus </tag>
            
            <tag> Thanos </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>容器化案例四:Java服务容器化</title>
      <link href="/archives/bc1fe45c.html"/>
      <url>/archives/bc1fe45c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>包括Springboot,Dubbo,Tomcat三个类型</p></blockquote><a id="more"></a><h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -Dmaven.test.skip=true -T 1C -Dmaven.compile.fork=true -P production --settings /root/.m2/settings.xml</span><br></pre></td></tr></table></figure><h1 id="Dockerfile文件编写"><a href="#Dockerfile文件编写" class="headerlink" title="Dockerfile文件编写"></a>Dockerfile文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FROM harbor.k8s.xxx.com/iflow_public/java-app:oraclejdk-8u321-jre-alpine-1.0.61</span><br><span class="line"></span><br><span class="line">COPY ./target/*.gz /data/source/</span><br><span class="line"></span><br><span class="line">ENV JAVA_OPTS=&quot;-XX:ActiveProcessorCount=2 -XX:MaxRAMPercentage=75.0 -XX:InitialRAMPercentage=75.0 -XX:MinRAMPercentage=75.0 -XX:+DisableExplicitGC -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=70 -XX:+ExplicitGCInvokesConcurrentAndUnloadsClasses -XX:+CMSClassUnloadingEnabled -XX:+ParallelRefProcEnabled -XX:+CMSScavengeBeforeRemark -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintHeapAtGC -XX:+PrintGCApplicationStoppedTime -XX:+PrintGCDateStamps -XX:ErrorFile=/data/var/log/hs_err_pid%p.log -XX:HeapDumpPath=/data/var/log/ -Xloggc:/data/var/log/gc%t.log -XX:+PrintGC -XX:+CMSParallelRemarkEnabled -XX:LargePageSizeInBytes=128m -XX:MaxTenuringThreshold=15 -XX:SurvivorRatio=6 -Dfile.encoding=UTF-8&quot;</span><br><span class="line"></span><br><span class="line">ENV START_CLASS=&quot;com.xxx.aigc.plateform.PlateformApplication&quot;</span><br><span class="line"></span><br><span class="line">ENV ENABLE_PP_AGENT=&quot;1&quot;</span><br><span class="line">ENV PP_AGENT_PATH=&quot;/usr/local/pinpoint-agent2&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;start_app.sh&quot; ]</span><br></pre></td></tr></table></figure><h1 id="Deployment及Service文件编写"><a href="#Deployment及Service文件编写" class="headerlink" title="Deployment及Service文件编写"></a>Deployment及Service文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;$MODULE := &quot;serve&quot; &#125;&#125;</span><br><span class="line">&#123;&#123;$TRUE_APP_NAME := (printf &quot;%v-%v&quot; .Env.FLOW_STANDARD_NAME $MODULE)&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-deploy</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  replicas: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;1&#123;&#123;else&#125;&#125;1&#123;&#123;end&#125;&#125;</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">      project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">      module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      annotations:</span><br><span class="line">        alibabacloud.com/burst-resource: eci</span><br><span class="line">      labels:</span><br><span class="line">        rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">        app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">        project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">        module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">    spec:</span><br><span class="line">      dnsConfig:</span><br><span class="line">        options:</span><br><span class="line">          - name: ndots</span><br><span class="line">            value: &quot;3&quot;</span><br><span class="line">      imagePullSecrets:</span><br><span class="line">        - name: harbor-registry</span><br><span class="line">      containers:</span><br><span class="line">        - name: serve</span><br><span class="line">          image: &#123;&#123;.Env.IMAGE_NAME&#125;&#125;</span><br><span class="line">          imagePullPolicy: Always</span><br><span class="line">          startupProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: 8080</span><br><span class="line">            initialDelaySeconds: 15</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 30</span><br><span class="line">          livenessProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: 8080</span><br><span class="line">            initialDelaySeconds: 10</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 15</span><br><span class="line">          env:</span><br><span class="line">          - name: JAVA_APP_OPTS</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;-Denv=PRO -Didc=pre&quot;&#123;&#123;else&#125;&#125;&quot;-Denv=PRO&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          - name: ENABLE_PP_AGENT</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;0&quot;&#123;&#123;else&#125;&#125;&quot;1&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          resources:</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 200m</span><br><span class="line">              memory: 4094Mi</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 100m</span><br><span class="line">              memory: 2048Mi</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">              name: web</span><br><span class="line">              protocol: TCP</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">          - name: filebeat-data</span><br><span class="line">            mountPath: /data/var/log</span><br><span class="line">        - name: filebeat-sidecar</span><br><span class="line">          image: harbor.k8s.xxx.com/iflow/custom-filebeat:7.10.1-5</span><br><span class="line">          resources:</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 50m</span><br><span class="line">              memory: &quot;100Mi&quot;</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 50m</span><br><span class="line">              memory: &quot;100Mi&quot;</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">          - name: filebeat-data</span><br><span class="line">            mountPath: /data/var/log</span><br><span class="line">      volumes:</span><br><span class="line">      - name: logs</span><br><span class="line">        emptyDir: &#123;&#125;</span><br><span class="line">      - name: filebeat-data</span><br><span class="line">        emptyDir: &#123;&#125;</span><br><span class="line">...</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-svc</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  type: ClusterIP</span><br><span class="line">  selector:</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  ports:</span><br><span class="line">    - name: web</span><br><span class="line">      protocol: TCP</span><br><span class="line">      port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">      targetPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/bc1fe45c.html">https://mds1455975151.github.io/archives/bc1fe45c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> 容器化 </tag>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
            <tag> Dubbo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>容器化案例三:NodeJS服务容器化</title>
      <link href="/archives/76a112a5.html"/>
      <url>/archives/76a112a5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>公司部分教研、课件服务使用Nodejs实现，这篇文章记录相关服务容器化内容。</p></blockquote><a id="more"></a><h1 id="编译打包"><a href="#编译打包" class="headerlink" title="编译打包"></a>编译打包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><h1 id="Dockerfile文件编写"><a href="#Dockerfile文件编写" class="headerlink" title="Dockerfile文件编写"></a>Dockerfile文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM harbor.k8s.xxx.com/iflow_public/slide:node-pdf.1.0.6</span><br><span class="line"></span><br><span class="line">ADD ./target.tar.gz /data/source/node-pdf</span><br><span class="line"></span><br><span class="line">RUN echo &apos;127.0.0.1 local.xxx.com&apos; &gt;&gt; /etc/hosts</span><br><span class="line"></span><br><span class="line">WORKDIR /data/source/node-pdf</span><br></pre></td></tr></table></figure><h1 id="Deployment及Service文件编写"><a href="#Deployment及Service文件编写" class="headerlink" title="Deployment及Service文件编写"></a>Deployment及Service文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;$MODULE := &quot;serve&quot; &#125;&#125;</span><br><span class="line">&#123;&#123;$TRUE_APP_NAME := (printf &quot;%v-%v&quot; .Env.FLOW_STANDARD_NAME $MODULE)&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-deploy</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  replicas: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;1&#123;&#123;else&#125;&#125;2&#123;&#123;end&#125;&#125;</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">      project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">      module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      annotations:</span><br><span class="line">        alibabacloud.com/burst-resource: eci</span><br><span class="line">      labels:</span><br><span class="line">        rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">        app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">        project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">        module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">    spec:</span><br><span class="line">      dnsConfig:</span><br><span class="line">        options:</span><br><span class="line">          - name: ndots</span><br><span class="line">            value: &quot;3&quot;</span><br><span class="line">      imagePullSecrets:</span><br><span class="line">        - name: harbor-registry</span><br><span class="line">      containers:</span><br><span class="line">        - name: serve</span><br><span class="line">          startupProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">            initialDelaySeconds: 15</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 30</span><br><span class="line">          livenessProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">            initialDelaySeconds: 10</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 15</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">              name: web</span><br><span class="line">              protocol: TCP</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">          - name: filebeat-data</span><br><span class="line">            mountPath: /data/var/log</span><br><span class="line">          image: &#123;&#123;.Env.IMAGE_NAME&#125;&#125;</span><br><span class="line">          imagePullPolicy: Always</span><br><span class="line">          command: [&quot;sh&quot;, &quot;-c&quot;, &quot;pm2-runtime start src/index.js&quot;]</span><br><span class="line">          resources:</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 1000m</span><br><span class="line">              memory: 2048Mi</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 70m</span><br><span class="line">              memory: 512Mi</span><br><span class="line">          env:</span><br><span class="line">            - name: TZ</span><br><span class="line">              value: Asia/Shanghai</span><br><span class="line">            - name: NODE_ENV</span><br><span class="line">              value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;prod&quot;&#125;&#125;&quot;prod&quot;&#123;&#123;else&#125;&#125;&quot;prod&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">        - name: filebeat-sidecar</span><br><span class="line">          image: harbor.k8s.xxx.com/iflow/custom-filebeat:7.10.1-5</span><br><span class="line">          resources:</span><br><span class="line">            limits:</span><br><span class="line">              memory: &quot;200Mi&quot;</span><br><span class="line">            requests:</span><br><span class="line">              memory: &quot;50Mi&quot;</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">          - name: filebeat-data</span><br><span class="line">            mountPath: /data/var/log</span><br><span class="line">      volumes:</span><br><span class="line">      - name: logs</span><br><span class="line">        emptyDir: &#123;&#125;</span><br><span class="line">      - name: filebeat-data</span><br><span class="line">        emptyDir: &#123;&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-svc</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  type: ClusterIP</span><br><span class="line">  selector:</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  ports:</span><br><span class="line">    - name: web</span><br><span class="line">      protocol: TCP</span><br><span class="line">      port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">      targetPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/76a112a5.html">https://mds1455975151.github.io/archives/76a112a5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> NodeJS项目容器化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> Nodejs </tag>
            
            <tag> pm2 </tag>
            
            <tag> 容器化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>容器化案例二:Python服务容器化</title>
      <link href="/archives/acd906c.html"/>
      <url>/archives/acd906c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>公司的AI项目和运维项目基本都是Python项目，这里记录下Python项目的容器化知识。</p></blockquote><a id="more"></a><h1 id="Dockerfile文件编写"><a href="#Dockerfile文件编写" class="headerlink" title="Dockerfile文件编写"></a>Dockerfile文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3.6.8-slim</span><br><span class="line"></span><br><span class="line">LABEL Maintainer=&quot;mdscdpc@gmail.com&quot; \</span><br><span class="line">      Description=&quot;Python Project based on Alpine Linux.&quot;</span><br><span class="line"></span><br><span class="line"># Enable unbuffered logging</span><br><span class="line">ENV PYTHONUNBUFFERED=1</span><br><span class="line"></span><br><span class="line"># Enable Profiler</span><br><span class="line">ENV ENABLE_PROFILER=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUN set -x \</span><br><span class="line">    &amp;&amp; echo &quot;deb http://mirrors.aliyun.com/debian/ stretch main non-free contrib&quot; &gt; /etc/apt/sources.list \</span><br><span class="line">    &amp;&amp; echo &quot;deb http://mirrors.aliyun.com/debian/ stretch-proposed-updates main non-free contrib&quot; &gt;&gt; /etc/apt/sources.list \</span><br><span class="line">    &amp;&amp; echo &quot;deb-src http://mirrors.aliyun.com/debian/ stretch main non-free contrib&quot; &gt;&gt; /etc/apt/sources.list \</span><br><span class="line">    &amp;&amp; echo &quot;deb-src http://mirrors.aliyun.com/debian/ stretch-proposed-updates main non-free contrib&quot; &gt;&gt; /etc/apt/sources.list \</span><br><span class="line">    &amp;&amp; apt-get update \</span><br><span class="line">    &amp;&amp; apt-get install -y --no-install-recommends --no-install-recommends curl telnet net-tools g++ \</span><br><span class="line">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class="line"></span><br><span class="line"># get packages</span><br><span class="line">COPY requirements.txt .</span><br><span class="line"></span><br><span class="line">RUN pip install --upgrade pip -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com</span><br><span class="line"></span><br><span class="line">RUN pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com</span><br><span class="line"></span><br><span class="line">WORKDIR /data/source/</span><br><span class="line"></span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">RUN \cp $&#123;project_name&#125;/_settings_prod.py $&#123;project_name&#125;/settings.py</span><br><span class="line"></span><br><span class="line">RUN sed -i &apos;/if query is not None:/d&apos; /usr/local/lib/python3.6/site-packages/django/db/backends/mysql/operations.py &amp;&amp; \</span><br><span class="line">    sed -i &apos;/query = query.decode/d&apos; /usr/local/lib/python3.6/site-packages/django/db/backends/mysql/operations.py</span><br><span class="line"></span><br><span class="line">EXPOSE 9999</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [ &quot;python&quot;, &quot;manage.py&quot;, &quot;runserver&quot;,&quot;0.0.0.0:9999&quot; ]</span><br></pre></td></tr></table></figure><h1 id="Deployment及Service文件编写"><a href="#Deployment及Service文件编写" class="headerlink" title="Deployment及Service文件编写"></a>Deployment及Service文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;$MODULE := &quot;serve&quot; &#125;&#125;</span><br><span class="line">&#123;&#123;$TRUE_APP_NAME := (printf &quot;%v-%v&quot; .Env.FLOW_STANDARD_NAME $MODULE)&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-deploy</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  replicas: &#123;&#123;.Env.D_STATUS_REPLICAS&#125;&#125;</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">      project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">      module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      annotations:</span><br><span class="line">        alibabacloud.com/burst-resource: eci</span><br><span class="line">      labels:</span><br><span class="line">        rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">        app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">        project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">        module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">    spec:</span><br><span class="line">      dnsConfig:</span><br><span class="line">        options:</span><br><span class="line">          - name: ndots</span><br><span class="line">            value: &quot;3&quot;</span><br><span class="line">      imagePullSecrets:</span><br><span class="line">        - name: harbor-registry</span><br><span class="line">      containers:</span><br><span class="line">        - name: serve</span><br><span class="line">          image: &#123;&#123;.Env.IMAGE_NAME&#125;&#125;</span><br><span class="line">          imagePullPolicy: Always</span><br><span class="line">          readinessProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">            initialDelaySeconds: 15</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 30</span><br><span class="line">          env:</span><br><span class="line">          - name: JAVA_APP_OPTS</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;-Denv=PRO -Didc=pre&quot;&#123;&#123;else&#125;&#125;&quot;-Denv=PRO&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          - name: ENABLE_PP_AGENT</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;0&quot;&#123;&#123;else&#125;&#125;&quot;1&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          resources:</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 3000m</span><br><span class="line">              memory: 4096Mi</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 2000m</span><br><span class="line">              memory: 2048Mi</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">              name: web</span><br><span class="line">              protocol: TCP</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">          - name: xxx</span><br><span class="line">            mountPath: /data/xxx</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">      volumes:</span><br><span class="line">      - name: xxx</span><br><span class="line">        persistentVolumeClaim:</span><br><span class="line">          claimName: xxx</span><br><span class="line">      - name: logs</span><br><span class="line">        emptyDir: &#123;&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-svc</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  type: ClusterIP</span><br><span class="line">  selector:</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  ports:</span><br><span class="line">    - name: web</span><br><span class="line">      protocol: TCP</span><br><span class="line">      port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">      targetPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/acd906c.html">https://mds1455975151.github.io/archives/acd906c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> Python </tag>
            
            <tag> Kubernetes </tag>
            
            <tag> 容器化 </tag>
            
            <tag> uwsgi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>容器化案例一:.NET服务容器化</title>
      <link href="/archives/4b774b02.html"/>
      <url>/archives/4b774b02.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>公司教研系统、课件系统、截图服务还有一些其他零散的后台管理系统使用.NET服务编写，这篇文章记录相关服务容器化内容。</p></blockquote><a id="more"></a><h1 id="编译打包"><a href="#编译打包" class="headerlink" title="编译打包"></a>编译打包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dotnet restore --configfile &quot;NuGet.config&quot; &quot;ContractFile/ContractFile.csproj&quot;</span><br><span class="line">cd ContractFile</span><br><span class="line">dotnet build &quot;ContractFile.csproj&quot; -c Release -o ./app/ContractFile</span><br><span class="line">dotnet publish &quot;ContractFile.csproj&quot; -c Release -o ./app/ContractFile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dotnet restore --configfile &quot;NuGet.config&quot; &quot;ContractFile.WorkerService/ContractFile.WorkerService.csproj&quot;</span><br><span class="line">cd ContractFile.WorkerService</span><br><span class="line">dotnet build &quot;ContractFile.WorkerService.csproj&quot; -c Release -o ./app/ContractFile.WorkerService</span><br><span class="line">dotnet publish &quot;ContractFile.WorkerService.csproj&quot; -c Release -o ./app/ContractFile.WorkerService</span><br></pre></td></tr></table></figure><blockquote><p>该项目分多个模块，分别单独部署</p></blockquote><h1 id="Dockerfile文件编写"><a href="#Dockerfile文件编写" class="headerlink" title="Dockerfile文件编写"></a>Dockerfile文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">FROM harbor.k8s.xxx.com/public/dot_net6.0</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">RUN set -e</span><br><span class="line"></span><br><span class="line">RUN apt-get -y update &amp;&amp; \</span><br><span class="line">    apt-get install -y traceroute inetutils-ping telnet net-tools curl</span><br><span class="line"></span><br><span class="line">RUN sed -i &apos;s/TLSv1.2/TLSv1/g&apos; /etc/ssl/openssl.cnf &amp;&amp; \</span><br><span class="line">    sed -i &apos;s/DEFAULT@SECLEVEL=2/DEFAULT@SECLEVEL=1/g&apos; /etc/ssl/openssl.cnf</span><br><span class="line"></span><br><span class="line">COPY /AXX_ContractFile/app/AXX_ContractFile /app/</span><br><span class="line"></span><br><span class="line">ENV ASPNETCORE_URLS=http://*:80</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;dotnet&quot;, &quot;ContractFile.dll&quot;]</span><br></pre></td></tr></table></figure><h1 id="deployment文件编写"><a href="#deployment文件编写" class="headerlink" title="deployment文件编写"></a>deployment文件编写</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;$MODULE := &quot;contractfileapi&quot; &#125;&#125;</span><br><span class="line">&#123;&#123;$TRUE_APP_NAME := (printf &quot;%v-%v&quot; .Env.FLOW_STANDARD_NAME $MODULE)&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-deploy</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  replicas: &#123;&#123;.Env.D_STATUS_REPLICAS&#125;&#125;</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">      project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">      module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      annotations:</span><br><span class="line">        alibabacloud.com/burst-resource: eci</span><br><span class="line">      labels:</span><br><span class="line">        rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">        app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">        project-name: &#123;&#123;.Env.FLOW_PROJECT_NAME&#125;&#125;</span><br><span class="line">        module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">    spec:</span><br><span class="line">      dnsConfig:</span><br><span class="line">        options:</span><br><span class="line">          - name: ndots</span><br><span class="line">            value: &quot;3&quot;</span><br><span class="line">      imagePullSecrets:</span><br><span class="line">        - name: harbor-registry</span><br><span class="line">      containers:</span><br><span class="line">        - name: serve</span><br><span class="line">          image: &#123;&#123;.Env.IMAGE_NAME&#125;&#125;</span><br><span class="line">          imagePullPolicy: Always</span><br><span class="line">          startupProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: &#123;&#123;.Env.CMP_PORT &#125;&#125;</span><br><span class="line">            initialDelaySeconds: 15</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 30</span><br><span class="line">          livenessProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: &#123;&#123;.Env.CMP_PORT &#125;&#125;</span><br><span class="line">            initialDelaySeconds: 10</span><br><span class="line">            periodSeconds: 10</span><br><span class="line">            timeoutSeconds: 1</span><br><span class="line">            successThreshold: 1</span><br><span class="line">            failureThreshold: 15</span><br><span class="line">          env:</span><br><span class="line">          - name: JAVA_APP_OPTS</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;-Denv=PRO -Didc=pre&quot;&#123;&#123;else&#125;&#125;&quot;-Denv=PRO&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          - name: ENABLE_PP_AGENT</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;0&quot;&#123;&#123;else&#125;&#125;&quot;1&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          - name:  ASPNETCORE_ENVIRONMENT</span><br><span class="line">            value: &#123;&#123;if eq .Env.FLOW_DIST_ENV &quot;pre&quot;&#125;&#125;&quot;iflowStaging&quot;&#123;&#123;else&#125;&#125;&quot;Production&quot;&#123;&#123;end&#125;&#125;</span><br><span class="line">          resources:</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 1000m</span><br><span class="line">              memory: 2048Mi</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 40m</span><br><span class="line">              memory: 1024Mi</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">              name: web</span><br><span class="line">              protocol: TCP</span><br><span class="line">          volumeMounts:</span><br><span class="line">          - name: logs</span><br><span class="line">            mountPath: /tmp/log</span><br><span class="line">          - name: filebeat-data</span><br><span class="line">            mountPath: /data/var/log</span><br><span class="line"></span><br><span class="line">      volumes:</span><br><span class="line">      - name: logs</span><br><span class="line">        persistentVolumeClaim:</span><br><span class="line">          claimName: log-nas</span><br><span class="line">      - name: filebeat-data</span><br><span class="line">        emptyDir: &#123;&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: &#123;&#123;$TRUE_APP_NAME&#125;&#125;-svc</span><br><span class="line">  labels:</span><br><span class="line">    rd: &#123;&#123;.Env.CMP_RD&#125;&#125;</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">spec:</span><br><span class="line">  type: ClusterIP</span><br><span class="line">  selector:</span><br><span class="line">    app: &#123;&#123;.Env.FLOW_STANDARD_NAME&#125;&#125;</span><br><span class="line">    module: &#123;&#123;$MODULE&#125;&#125;</span><br><span class="line">  ports:</span><br><span class="line">    - name: web</span><br><span class="line">      protocol: TCP</span><br><span class="line">      port: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">      targetPort: &#123;&#123;.Env.CMP_PORT&#125;&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h1 id="常用的dotnet命令说明"><a href="#常用的dotnet命令说明" class="headerlink" title="常用的dotnet命令说明"></a>常用的dotnet命令说明</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dotnet new</span><br><span class="line">dotnet test</span><br><span class="line">dotnet clean</span><br><span class="line">dotnet restore  下载依赖</span><br><span class="line">dotnet build     构建</span><br><span class="line">dotnet run       运行</span><br><span class="line">dotnet publish   将应用程序及其依赖项发布到文件夹以部署到托管系统</span><br></pre></td></tr></table></figure><ul><li>所有CLI命令说明: <a href="https://learn.microsoft.com/zh-cn/dotnet/core/tools/" target="_blank" rel="noopener">https://learn.microsoft.com/zh-cn/dotnet/core/tools/</a></li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li>第一手准确资料<a href="https://docs.microsoft.com/zh-cn/visualstudio/containers/container-build?view=vs-2019&WT.mc_id=visualstudio_containers_aka_containerfastmode" target="_blank" rel="noopener">微软官网</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4b774b02.html">https://mds1455975151.github.io/archives/4b774b02.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> .NET </tag>
            
            <tag> Dotnet </tag>
            
            <tag> Deployment </tag>
            
            <tag> Service </tag>
            
            <tag> 微软 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多云管理系统建设</title>
      <link href="/archives/3f64b2ab.html"/>
      <url>/archives/3f64b2ab.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>本文介绍建设一个完整的企业运维系统设计的功能模块思考</p></blockquote><a id="more"></a><p><img src="/archives/3f64b2ab/%E6%82%9F%E7%A9%BA%E5%A4%9A%E4%BA%91%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.png" alt></p><p>部分系统待更新</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/3f64b2ab.html">https://mds1455975151.github.io/archives/3f64b2ab.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客添加文章热度排行页面</title>
      <link href="/archives/1814249.html"/>
      <url>/archives/1814249.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p><a href="https://blog.garryde.com/archives/48665.html" target="_blank" rel="noopener">参考资料</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1814249.html">https://mds1455975151.github.io/archives/1814249.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 文章热度排行 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Next </tag>
            
            <tag> 热度 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次Kubernetes排查问题记录</title>
      <link href="/archives/600c4e5a.html"/>
      <url>/archives/600c4e5a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/600c4e5a.html">https://mds1455975151.github.io/archives/600c4e5a.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GPU基础知识总结</title>
      <link href="/archives/4ba15f98.html"/>
      <url>/archives/4ba15f98.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>GPU基础知识总结</p></blockquote><a id="more"></a><h1 id="nvidia驱动下载"><a href="#nvidia驱动下载" class="headerlink" title="nvidia驱动下载"></a>nvidia驱动下载</h1><p><a href="https://www.nvidia.com/Download/Find.aspx" target="_blank" rel="noopener">https://www.nvidia.com/Download/Find.aspx</a></p><h1 id="查看资源使用情况工具"><a href="#查看资源使用情况工具" class="headerlink" title="查看资源使用情况工具"></a>查看资源使用情况工具</h1><h2 id="命令行工具"><a href="#命令行工具" class="headerlink" title="命令行工具"></a>命令行工具</h2><ul><li>nvidia-smi</li><li>nvtop</li><li>gpustat</li></ul><h2 id="编程工具"><a href="#编程工具" class="headerlink" title="编程工具"></a>编程工具</h2><ul><li>py3nvml</li><li>py3smi</li></ul><h1 id="资源监控方案"><a href="#资源监控方案" class="headerlink" title="资源监控方案"></a>资源监控方案</h1><ul><li><a href="https://github.com/NVIDIA/gpu-monitoring-tools" target="_blank" rel="noopener">https://github.com/NVIDIA/gpu-monitoring-tools</a></li><li><a href="https://github.com/XuehaiPan/nvitop" target="_blank" rel="noopener">https://github.com/XuehaiPan/nvitop</a></li></ul><h1 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h1><ul><li>CUDA<blockquote><p>CUDA（Compute Unified Device Architecture）是显卡厂商 NVIDIA 推出的运算平台。CUDA™ 是一种由 NVIDIA 推出的通用并行计算架构，该架构使 GPU 能够解决复杂的计算问题。它包含了 CUDA 指令集架构（ISA）以及 GPU 内部的并行计算引擎。 开发人员目前可使用 C 语言、C++ 及 FORTRAN 来为 CUDA™ 架构编写程序，所编写出的程序可在支持 CUDA™ 的处理器上以超高性能运行。<br>GPU 云服务器采用 NVIDIA 显卡，则需要安装 CUDA 开发运行环境。</p></blockquote></li></ul><h1 id="推荐资料"><a href="#推荐资料" class="headerlink" title="推荐资料"></a>推荐资料</h1><ul><li><a href="https://www.cnblogs.com/timlly/p/11471507.html" target="_blank" rel="noopener">深入GPU硬件架构及运行机制</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4ba15f98.html">https://mds1455975151.github.io/archives/4ba15f98.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> GPU </tag>
            
            <tag> AI </tag>
            
            <tag> Prometheus </tag>
            
            <tag> 显存 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在线教育公司列表</title>
      <link href="/archives/4480c66.html"/>
      <url>/archives/4480c66.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>在线教育公司</p></blockquote><a id="more"></a><table><thead><tr><th>公司名称</th><th>公司规模</th><th>公司性质</th><th>公司地址</th><th>官网地址</th></tr></thead><tbody><tr><td>北京新东方教育科技(集团)有限公司</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>中公教育</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>学而思国际教育集团</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>沪江网校</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>vipkid 北京大米未来科技有限公司</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>北京东大正保科技有限公司</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>作业帮 小船出海教育科技(北京)有限公司</td><td>2000人以上</td><td>上市公司</td><td>北京市海淀区上地信息产业基地开拓路1号4层4001</td><td><a href="https://www.zybang.com/" target="_blank" rel="noopener">https://www.zybang.com/</a></td></tr><tr><td>达内</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>一起作业</td><td>-</td><td>上市公司</td><td>北京海淀区</td><td></td></tr><tr><td>伴鱼少儿英语</td><td>-</td><td>上市公司</td><td>北京市海淀区花园路街道马甸东路金澳国际大厦写字楼北门</td><td><a href="https://ipalfish.zhiye.com/home" target="_blank" rel="noopener">https://ipalfish.zhiye.com/home</a></td></tr><tr><td>高思教育</td><td>-</td><td>上市公司</td><td>北京市海淀区</td><td>-</td></tr><tr><td>爱学习教育</td><td>-</td><td>上市公司</td><td>北京市海淀区</td><td>-</td></tr><tr><td>无忧英语 深圳大生知行教育科技有限公司</td><td>-</td><td>上市公司</td><td>北京市海淀区</td><td><a href="https://www.51talk.com/" target="_blank" rel="noopener">https://www.51talk.com/</a></td></tr><tr><td>美术宝</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>火花思维</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>瑞思英语</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>编程猫</td><td>-</td><td>-</td><td>-</td><td>-</td></tr></tbody></table><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4480c66.html">https://mds1455975151.github.io/archives/4480c66.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> 在线教育 </tag>
            
            <tag> 双减 </tag>
            
            <tag> 素质教育 </tag>
            
            <tag> 职业教育 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm私服部署-verdaccio方案</title>
      <link href="/archives/eb9965ee.html"/>
      <url>/archives/eb9965ee.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>npm私服verdaccio</p></blockquote><a id="more"></a><h1 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h1><ul><li>公司内部组件库统一管理，非公开项目</li><li>私有仓库缓存，提高下包速度</li></ul><h1 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h1><h2 id="付费类型"><a href="#付费类型" class="headerlink" title="付费类型"></a>付费类型</h2><ul><li>MyGet</li><li>NPM Org</li></ul><h2 id="免费"><a href="#免费" class="headerlink" title="免费"></a>免费</h2><ul><li>Git</li><li>Nexus</li><li>DIY NPM</li><li>verdaccio(推荐)</li></ul><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># docker run -d -it \</span><br><span class="line">--name verdaccio \</span><br><span class="line">-p 4873:4873 \</span><br><span class="line">verdaccio/verdaccio</span><br><span class="line">ca3a819c02eac338c69a02aa62b0fc4c28f446a8429524898edacfce2e7bfdc6</span><br><span class="line"># docker ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS                                                                      NAMES</span><br><span class="line">ca3a819c02ea   verdaccio/verdaccio   &quot;uid_entrypoint /bin…&quot;   3 seconds ago   Up 2 seconds   0.0.0.0:4873-&gt;4873/tcp                                                     verdaccio</span><br></pre></td></tr></table></figure><p><img src="/archives/eb9965ee/03.png" alt></p><h1 id="上传第一个组件"><a href="#上传第一个组件" class="headerlink" title="上传第一个组件"></a>上传第一个组件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"># npm adduser --registry http://127.0.0.1:4873/</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">Email: (this IS public) mdscdpc@gmail.com</span><br><span class="line">Logged in as admin on http://127.0.0.1:4873/.</span><br><span class="line"># mkdir nodejs-demo</span><br><span class="line"># cd nodejs-demo</span><br><span class="line"># npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See `npm help init` for definitive documentation on these fields</span><br><span class="line">and exactly what they do.</span><br><span class="line"></span><br><span class="line">Use `npm install &lt;pkg&gt;` afterwards to install a package and</span><br><span class="line">save it as a dependency in the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">package name: (nodejs-demo)</span><br><span class="line">version: (1.0.0)</span><br><span class="line">description: NPM私服测试组件</span><br><span class="line">entry point: (index.js)</span><br><span class="line">test command:</span><br><span class="line">git repository:</span><br><span class="line">keywords: NPM私服</span><br><span class="line">author: mdscdpc@gmail.com</span><br><span class="line">license: (ISC)</span><br><span class="line">About to write to /Users/madongsheng/nodejs-demo/package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;nodejs-demo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;NPM私服测试组件&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keywords&quot;: [</span><br><span class="line">    &quot;NPM私服&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;author&quot;: &quot;mdscdpc@gmail.com&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is this OK? (yes) yes</span><br><span class="line"># tree</span><br><span class="line">.</span><br><span class="line">└── package.json</span><br><span class="line"></span><br><span class="line">0 directories, 1 file</span><br><span class="line"># npm install</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN nodejs-demo@1.0.0 No repository field.</span><br><span class="line"></span><br><span class="line"># npm publish --registry http://127.0.0.1:4873/</span><br><span class="line">up to date in 0.455s</span><br><span class="line">npm notice</span><br><span class="line">npm notice 📦  nodejs-demo@1.0.0</span><br><span class="line">npm notice === Tarball Contents ===</span><br><span class="line">npm notice 202B package.json</span><br><span class="line">npm notice === Tarball Details ===</span><br><span class="line">npm notice name:          nodejs-demo</span><br><span class="line">npm notice version:       1.0.0</span><br><span class="line">npm notice package size:  234 B</span><br><span class="line">npm notice unpacked size: 202 B</span><br><span class="line">npm notice shasum:        05a9efab992cf8567fe7d34af7f35febad57eb8a</span><br><span class="line">npm notice integrity:     sha512-8pFEZ500Enm/S[...]KMN9VYgshcg9A==</span><br><span class="line">npm notice total files:   1</span><br><span class="line">npm notice</span><br><span class="line">+ nodejs-demo@1.0.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   ╭────────────────────────────────────────────────────────────────╮</span><br><span class="line">   │                                                                │</span><br><span class="line">   │      New major version of npm available! 6.14.5 → 7.21.1       │</span><br><span class="line">   │   Changelog: https://github.com/npm/cli/releases/tag/v7.21.1   │</span><br><span class="line">   │               Run npm install -g npm to update!                │</span><br><span class="line">   │                                                                │</span><br><span class="line">   ╰────────────────────────────────────────────────────────────────╯</span><br></pre></td></tr></table></figure><p><img src="/archives/eb9965ee/04.png" alt><br><img src="/archives/eb9965ee/05.png" alt><br><img src="/archives/eb9965ee/06.png" alt><br><img src="/archives/eb9965ee/07.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://verdaccio.org/" target="_blank" rel="noopener">官网地址</a></li><li><a href="https://github.com/verdaccio/verdaccio/" target="_blank" rel="noopener">Verdaccio GitHub地址</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/eb9965ee.html">https://mds1455975151.github.io/archives/eb9965ee.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> npm私服 </tag>
            
            <tag> verdaccio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes资源分析工具汇总</title>
      <link href="/archives/840cb72e.html"/>
      <url>/archives/840cb72e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>公司业务全面容器化后，Kubernetes集群的稳定性，可用性就非常重要。如何了解集群的整体运行状态，及时发现集群运行的不稳定性因素变的至关重要。推荐几款集群管理工具，帮助我们定期检查集群状态，排查解决集群异常状态。</p></blockquote><a id="more"></a><h1 id="工具概述"><a href="#工具概述" class="headerlink" title="工具概述"></a>工具概述</h1><ul><li>kube-score: 一款静态代码分析工具，可用于Helm、Kustomize和标准YAML文件</li><li>polaris: 一款具有仪表盘的资源分析工具，用于验证webhook或CLI工具</li><li>popeye: 用于扫描kubernetes集群并报告配置中的潜在问题</li></ul><h1 id="kube-score"><a href="#kube-score" class="headerlink" title="kube-score"></a>kube-score</h1><p>GitHub地址: <a href="https://github.com/zegl/kube-score" target="_blank" rel="noopener">https://github.com/zegl/kube-score</a></p><p>项目支持macOS,Linux和window各个平台,安装简单可以快速上手.</p><h2 id="原生YAMLs文件"><a href="#原生YAMLs文件" class="headerlink" title="原生YAMLs文件"></a>原生YAMLs文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"># docker run -v $(pwd):/project zegl/kube-score:v1.10.0 score --output-format ci templates/deployment-nginx.yaml</span><br><span class="line">[OK] nginx apps/v1/Deployment</span><br><span class="line">[OK] nginx apps/v1/Deployment</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: (nginx) ImagePullPolicy is not set to Always</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: The pod does not have a matching NetworkPolicy</span><br><span class="line">[OK] nginx apps/v1/Deployment: The pod is not targeted by a service, skipping probe checks.</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: (nginx) Container has no configured security context</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: (nginx) CPU limit is not set</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: (nginx) Memory limit is not set</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: (nginx) CPU request is not set</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: (nginx) Memory request is not set</span><br><span class="line">[OK] nginx apps/v1/Deployment</span><br><span class="line">[CRITICAL] nginx apps/v1/Deployment: No matching PodDisruptionBudget was found</span><br><span class="line">[WARNING] nginx apps/v1/Deployment: Deployment does not have a host podAntiAffinity set</span><br><span class="line">[SKIPPED] nginx apps/v1/Deployment: Skipped because the deployment is not targeted by a HorizontalPodAutoscaler</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># docker run -v $(pwd):/project zegl/kube-score:v1.10.0 score templates/deployment-nginx.yaml  </span><br><span class="line">apps/v1/Deployment nginx                                                      💥</span><br><span class="line">    [CRITICAL] Container Image Pull Policy</span><br><span class="line">        · nginx -&gt; ImagePullPolicy is not set to Always</span><br><span class="line">            It&apos;s recommended to always set the ImagePullPolicy to Always, to</span><br><span class="line">            make sure that the imagePullSecrets are always correct, and to</span><br><span class="line">            always get the image you want.</span><br><span class="line">    [CRITICAL] Pod NetworkPolicy</span><br><span class="line">        · The pod does not have a matching NetworkPolicy</span><br><span class="line">            Create a NetworkPolicy that targets this pod to control who/what</span><br><span class="line">            can communicate with this pod. Note, this feature needs to be</span><br><span class="line">            supported by the CNI implementation used in the Kubernetes cluster</span><br><span class="line">            to have an effect.</span><br><span class="line">    [CRITICAL] Container Security Context</span><br><span class="line">        · nginx -&gt; Container has no configured security context</span><br><span class="line">            Set securityContext to run the container in a more secure context.</span><br><span class="line">    [CRITICAL] Container Resources</span><br><span class="line">        · nginx -&gt; CPU limit is not set</span><br><span class="line">            Resource limits are recommended to avoid resource DDOS. Set</span><br><span class="line">            resources.limits.cpu</span><br><span class="line">        · nginx -&gt; Memory limit is not set</span><br><span class="line">            Resource limits are recommended to avoid resource DDOS. Set</span><br><span class="line">            resources.limits.memory</span><br><span class="line">        · nginx -&gt; CPU request is not set</span><br><span class="line">            Resource requests are recommended to make sure that the application</span><br><span class="line">            can start and run without crashing. Set resources.requests.cpu</span><br><span class="line">        · nginx -&gt; Memory request is not set</span><br><span class="line">            Resource requests are recommended to make sure that the application</span><br><span class="line">            can start and run without crashing. Set resources.requests.memory</span><br><span class="line">    [CRITICAL] Deployment has PodDisruptionBudget</span><br><span class="line">        · No matching PodDisruptionBudget was found</span><br><span class="line">            It&apos;s recommended to define a PodDisruptionBudget to avoid</span><br><span class="line">            unexpected downtime during Kubernetes maintenance operations, such</span><br><span class="line">            as when draining a node.</span><br><span class="line">    [WARNING] Deployment has host PodAntiAffinity</span><br><span class="line">        · Deployment does not have a host podAntiAffinity set</span><br><span class="line">            It&apos;s recommended to set a podAntiAffinity that stops multiple pods</span><br><span class="line">            from a deployment from being scheduled on the same node. This</span><br><span class="line">            increases availability in case the node becomes unavailable.</span><br></pre></td></tr></table></figure><blockquote><p>注释:</p><ul><li>–output-format 支持不同的输出格式(human、json、ci,默认为human格式)</li></ul></blockquote><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>还可以配置更加详细的检测参数，可以更加深入了解。</p><h1 id="polaris"><a href="#polaris" class="headerlink" title="polaris"></a>polaris</h1><p>GitHub地址:<a href="https://github.com/FairwindsOps/polaris" target="_blank" rel="noopener">https://github.com/FairwindsOps/polaris</a></p><p>官网文档:<a href="https://polaris.docs.fairwinds.com/dashboard/#installation" target="_blank" rel="noopener">https://polaris.docs.fairwinds.com/dashboard/</a></p><p>项目支持YAML、Helm、本地二进制文件、Docker等多种运行方式,博客Docker为大家演示效果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -d \</span><br><span class="line">  -p 8080:8080 \</span><br><span class="line">  -v ~/kube-config:/opt/app/config quay.io/fairwinds/polaris:1.2 \</span><br><span class="line">  polaris dashboard --kubeconfig /opt/app/config</span><br></pre></td></tr></table></figure><p>体验视频: <a href="https://youtu.be/dbYYqezmcYg" target="_blank" rel="noopener">https://youtu.be/dbYYqezmcYg</a></p><h1 id="popeye"><a href="#popeye" class="headerlink" title="popeye"></a>popeye</h1><ul><li>官网地址: <a href="https://popeyecli.io/" target="_blank" rel="noopener">https://popeyecli.io/</a></li><li>GitHub地址: <a href="https://github.com/derailed/popeye/" target="_blank" rel="noopener">https://github.com/derailed/popeye/</a></li></ul><h2 id="部署并执行检测"><a href="#部署并执行检测" class="headerlink" title="部署并执行检测"></a>部署并执行检测</h2><ul><li>支持Linux, Window及macOS各个平台</li><li>支持常见的Kubernetes资源类型,<a href="https://popeyecli.io/#sanitizers" target="_blank" rel="noopener">支持清单</a></li><li>支持不同的<a href="https://popeyecli.io/#output-formats" target="_blank" rel="noopener">输出格式</a>,保存位置等等</li></ul><p>以Docker启动方式作为说明</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it \</span><br><span class="line">  -v $HOME/.kube:/root/.kube \</span><br><span class="line">  -v /tmp:/tmp \</span><br><span class="line">  quay.io/derailed/popeye --save --out html --output-file report.html</span><br></pre></td></tr></table></figure><h2 id="结果说明"><a href="#结果说明" class="headerlink" title="结果说明"></a>结果说明</h2><p>报告格式:<a href="https://www.mdslq.cn/report.html" target="_blank" rel="noopener">案例</a></p><p>常见问题:</p><ul><li>[POP-100] Untagged docker image in use</li><li>[POP-101] Image tagged “latest” in use</li><li>[POP-106] No resources requests/limits defined</li><li>[POP-107] No resource limits defined</li><li>[POP-112] Memory Current/Limit (110Mi/128Mi) reached user 80% threshold (85%)</li><li>[POP-206] No PodDisruptionBudget defined</li><li>[POP-300] Using “default” ServiceAccount</li><li>[POP-301] Connects to API Server? ServiceAccount token is mounted</li><li>[POP-302] Pod could be running as root user. Check SecurityContext/Image</li><li>[POP-400] Used? Unable to locate resource reference</li><li>[POP-403] Deprecated Ingress API group “extensions/v1beta1”. Use “networking.k8s.io/v1beta1” instead</li><li>[POP-501] Unhealthy 11 desired but have 3 available</li><li>[POP-712] Found only one master node</li><li>[POP-708] No node metrics available</li><li>[POP-1000] Available</li><li>[POP-1100] No pods match service selector</li><li>[POP-1105] No associated endpoints</li><li>[POP-1120] Unhealthy ReplicaSet 11 desired but have 3 ready</li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul><li>kube-score主要检测YAML文件规范，可以检测YAML中的不规范问题,例如: 镜像tag标识,镜像拉取策略，资源配额缺失，容器安全等各种问题</li><li>polaris和popeye功能类似,都支持可视化结果展示,popeye相对而已检测更全部些，都值得推荐</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/840cb72e.html">https://mds1455975151.github.io/archives/840cb72e.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> K8S </tag>
            
            <tag> 容器 </tag>
            
            <tag> 资源分享 </tag>
            
            <tag> polaris </tag>
            
            <tag> kube-score </tag>
            
            <tag> popeye </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 6.x yum源无法使用解决</title>
      <link href="/archives/1cc34111.html"/>
      <url>/archives/1cc34111.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>CentOS 6.x yum源无法使用解决</p></blockquote><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">os_version=`awk <span class="string">'&#123;print $3&#125;'</span> /etc/redhat-release`</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-6.repo</span><br><span class="line">sed -i <span class="string">"s#mirrors.aliyun.com/centos/\$releasever#mirrors.aliyun.com/centos-vault/<span class="variable">$&#123;os_version&#125;</span>#g"</span> CentOS-Base.repo</span><br><span class="line">sed -i <span class="string">"s#mirrors.aliyuncs.com/centos/\$releasever#mirrors.aliyun.com/centos-vault/<span class="variable">$&#123;os_version&#125;</span>#g"</span> CentOS-Base.repo</span><br><span class="line">sed -i <span class="string">"s#mirrors.cloud.aliyuncs.com/centos/\$releasever#mirrors.aliyun.com/centos-vault/<span class="variable">$&#123;os_version&#125;</span>#g"</span> CentOS-Base.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1cc34111.html">https://mds1455975151.github.io/archives/1cc34111.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>自动化测试工具appium部署</title>
      <link href="/archives/134400db.html"/>
      <url>/archives/134400db.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>协助公司测试同事部署下自动化测试工具Appium</p></blockquote><a id="more"></a><p>记录下，共享给有需要的朋友。安装不得方法，各种报错让人抓狂。</p><p>要点:</p><ul><li>安装最新稳定版本node，系统默认的版本都比较低</li><li>使用cnmp替代npm(解决下载依赖速度问题)</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget https://nodejs.org/dist/v12.16.3/node-v12.16.3-linux-x64.tar.xz</span><br><span class="line">xz -d node-v12.16.3-linux-x64.tar.xz</span><br><span class="line">tar -xf node-v12.16.3-linux-x64.tar -C /usr/local/</span><br><span class="line">cd /usr/local/ &amp;&amp; ln -s node-v12.16.3-linux-x64 node</span><br><span class="line">cat&gt;&gt;/etc/profile&lt;&lt;EOF</span><br><span class="line"></span><br><span class="line"># set for nodejs</span><br><span class="line">export NODE_HOME=/usr/local/node</span><br><span class="line">export PATH=\$NODE_HOME/bin:\$PATH</span><br><span class="line">EOF</span><br><span class="line">source  /etc/profile</span><br><span class="line">node -v</span><br><span class="line"></span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">cnpm install -g appium</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/134400db.html">https://mds1455975151.github.io/archives/134400db.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> 自动化测试 </tag>
            
            <tag> Appium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>运维工程师-非专业安全人员如何确保企业信息安全</title>
      <link href="/archives/c747a9a8.html"/>
      <url>/archives/c747a9a8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>企业信息安全守则</p></blockquote><a id="more"></a><ul><li>关于权限，各类授权都遵循最小化授权原则，能授权IP不授权网段，能授权指定端口不授权ALL</li><li>各类服务使用普通账号启动，软件目录授权最小化</li><li>各类密码复杂度要求，并要求定期3个月更新</li><li>线上操作行为审计需要部署堡垒机</li><li>公司外部办公使用OpenVPN+堡垒机方式</li><li>员工电脑全部要求按照杀毒软件，确保企业内部网络安全</li><li>做好业务监控发现问题及时纠正解决</li><li>各类应用软件隐藏版本信息，及时更新到最新稳定版本</li><li>使用Openresty实现web应用防火墙，可以阻挡一些安全攻击，例如：SQL注释，CC攻击、API接口安全</li><li>定期员工培训，强调企业安全防范意识</li><li>时刻关注各类安全事件，加强防范意识</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c747a9a8.html">https://mds1455975151.github.io/archives/c747a9a8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 企业信息安全 </tag>
            
            <tag> 运维工程师 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashiCorp Vault入门介绍</title>
      <link href="/archives/ff02dc0f.html"/>
      <url>/archives/ff02dc0f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>HashiCorp Vault是一款企业级私密信息管理工具。说起Vault，不得不提它的创造者HashiCorp公司。HashiCorp是一家专注于DevOps工具链的公司，其旗下明星级产品包括Vagrant、Packer、Terraform、Consul、Nomad等，再加上Vault，这些工具贯穿了持续交付的整个流程。</p></blockquote><a id="more"></a><p><img src="/archives/ff02dc0f/04.png" alt="image"></p><h1 id="为什么使用HashiCorp-Vault？"><a href="#为什么使用HashiCorp-Vault？" class="headerlink" title="为什么使用HashiCorp Vault？"></a>为什么使用HashiCorp Vault？</h1><p>企业内各类私密信息安全存储问题需求，例如:ssh key,各类API认证信息，数据库权限等等</p><h1 id="HashiCorp-Vault优势"><a href="#HashiCorp-Vault优势" class="headerlink" title="HashiCorp Vault优势"></a>HashiCorp Vault优势</h1><p>HashiCorp Vault作为集中化的私密信息管理工具，具有以下特点：</p><ul><li>存储私密信息<br>不仅可以存放现有的私密信息，还可以动态生成用于管理第三方资源的私密信息。所有存放的数据都是加密的，任何动态生成的私密信息都有租期，并且到期会自动回收。</li><li>滚动更新秘钥<br>用户可以随时更新存放的私密信息。Vault提供了加密即服务（encryption-as-a-service）的功能，可以随时将密钥滚动到新的密钥版本，同时保留对使用过去密钥版本加密的值进行解密的能力。 对于动态生成的秘密，可配置的最大租赁寿命确保密钥滚动易于实施。</li><li>审计日志<br>保管库存储所有经过身份验证的客户端交互的详细审核日志：身份验证，令牌创建，私密信息访问，私密信息撤销等。 可以将审核日志发送到多个后端以确保冗余副本。</li></ul><p>另外，HaishiCorp Vault提供了多种方式来管理私密信息。用户可以通过命令行、HTTP API等集成到应用中来获取私密信息。HashiCorp Vault也能与Ansible、Chef、Consul等DevOps工具链无缝结合使用。</p><h1 id="HashiCorp-Vault实践"><a href="#HashiCorp-Vault实践" class="headerlink" title="HashiCorp Vault实践"></a>HashiCorp Vault实践</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">[root@node01 ~]# wget https://releases.hashicorp.com/vault/1.4.0/vault_1.4.0_linux_arm64.zip</span><br><span class="line">[root@node01 ~]# unzip vault_1.4.0_linux_arm64.zip</span><br><span class="line">[root@node01 ~]# install vault /usr/local/bin/</span><br><span class="line"></span><br><span class="line">[root@node01 ~]# vault server -dev-listen-address=0.0.0.0:8200 --dev</span><br><span class="line">==&gt; Vault server configuration:</span><br><span class="line"></span><br><span class="line">             Api Address: http://0.0.0.0:8200</span><br><span class="line">                     Cgo: disabled</span><br><span class="line">         Cluster Address: https://0.0.0.0:8201</span><br><span class="line">              Listener 1: tcp (addr: &quot;0.0.0.0:8200&quot;, cluster address: &quot;0.0.0.0:8201&quot;, max_request_duration: &quot;1m30s&quot;, max_request_size: &quot;33554432&quot;, tls: &quot;disabled&quot;)</span><br><span class="line">               Log Level: info</span><br><span class="line">                   Mlock: supported: true, enabled: false</span><br><span class="line">           Recovery Mode: false</span><br><span class="line">                 Storage: inmem</span><br><span class="line">                 Version: Vault v1.4.0</span><br><span class="line"></span><br><span class="line">WARNING! dev mode is enabled! In this mode, Vault runs entirely in-memory</span><br><span class="line">and starts unsealed with a single unseal key. The root token is already</span><br><span class="line">authenticated to the CLI, so you can immediately begin using Vault.</span><br><span class="line"></span><br><span class="line">You may need to set the following environment variable:</span><br><span class="line"></span><br><span class="line">    $ export VAULT_ADDR=&apos;http://0.0.0.0:8200&apos;</span><br><span class="line"></span><br><span class="line">The unseal key and root token are displayed below in case you want to</span><br><span class="line">seal/unseal the Vault or re-authenticate.</span><br><span class="line"></span><br><span class="line">Unseal Key: t8B6LCmjcX4mc2cx5XDjzLkYzd1ZSX1Fn3rkq3p50P4=</span><br><span class="line">Root Token: s.yOXkEpKd27M5eYRC1Knv3T6D</span><br><span class="line"></span><br><span class="line">Development mode should NOT be used in production installations!</span><br><span class="line"></span><br><span class="line">==&gt; Vault server started! Log data will stream in below:</span><br><span class="line"></span><br><span class="line">2020-04-11T10:55:49.813+0800 [INFO]  proxy environment: http_proxy= https_proxy= no_proxy=</span><br><span class="line">2020-04-11T10:55:49.813+0800 [WARN]  no `api_addr` value specified in config or in VAULT_API_ADDR; falling back to detection if possible, but this value should be manually set</span><br><span class="line">2020-04-11T10:55:49.813+0800 [ERROR] core: no seal config found, can&apos;t determine if legacy or new-style shamir</span><br><span class="line">2020-04-11T10:55:49.813+0800 [ERROR] core: no seal config found, can&apos;t determine if legacy or new-style shamir</span><br><span class="line">2020-04-11T10:55:49.813+0800 [INFO]  core: security barrier not initialized</span><br><span class="line">2020-04-11T10:55:49.813+0800 [INFO]  core: security barrier initialized: stored=1 shares=1 threshold=1</span><br><span class="line">2020-04-11T10:55:49.814+0800 [INFO]  core: post-unseal setup starting</span><br><span class="line">2020-04-11T10:55:49.824+0800 [INFO]  core: loaded wrapping token key</span><br><span class="line">2020-04-11T10:55:49.824+0800 [INFO]  core: successfully setup plugin catalog: plugin-directory=</span><br><span class="line">2020-04-11T10:55:49.824+0800 [INFO]  core: no mounts; adding default mount table</span><br><span class="line">2020-04-11T10:55:49.825+0800 [INFO]  core: successfully mounted backend: type=cubbyhole path=cubbyhole/</span><br><span class="line">2020-04-11T10:55:49.825+0800 [INFO]  core: successfully mounted backend: type=system path=sys/</span><br><span class="line">2020-04-11T10:55:49.826+0800 [INFO]  core: successfully mounted backend: type=identity path=identity/</span><br><span class="line">2020-04-11T10:55:49.827+0800 [INFO]  core: successfully enabled credential backend: type=token path=token/</span><br><span class="line">2020-04-11T10:55:49.827+0800 [INFO]  core: restoring leases</span><br><span class="line">2020-04-11T10:55:49.827+0800 [INFO]  rollback: starting rollback manager</span><br><span class="line">2020-04-11T10:55:49.828+0800 [INFO]  expiration: lease restore complete</span><br><span class="line">2020-04-11T10:55:49.831+0800 [INFO]  identity: entities restored</span><br><span class="line">2020-04-11T10:55:49.831+0800 [INFO]  identity: groups restored</span><br><span class="line">2020-04-11T10:55:49.831+0800 [INFO]  core: post-unseal setup complete</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: root token generated</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: pre-seal teardown starting</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  rollback: stopping rollback manager</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: pre-seal teardown complete</span><br><span class="line">2020-04-11T10:55:49.832+0800 [ERROR] core: no seal config found, can&apos;t determine if legacy or new-style shamir</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core.cluster-listener.tcp: starting listener: listener_address=0.0.0.0:8201</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core.cluster-listener: serving cluster requests: cluster_listen_address=[::]:8201</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: post-unseal setup starting</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: loaded wrapping token key</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: successfully setup plugin catalog: plugin-directory=</span><br><span class="line">2020-04-11T10:55:49.832+0800 [INFO]  core: successfully mounted backend: type=system path=sys/</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  core: successfully mounted backend: type=identity path=identity/</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  core: successfully mounted backend: type=cubbyhole path=cubbyhole/</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  core: successfully enabled credential backend: type=token path=token/</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  core: restoring leases</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  rollback: starting rollback manager</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  identity: entities restored</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  identity: groups restored</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  core: post-unseal setup complete</span><br><span class="line">2020-04-11T10:55:49.833+0800 [INFO]  core: vault is unsealed</span><br><span class="line">2020-04-11T10:55:49.835+0800 [INFO]  core: successful mount: namespace= path=secret/ type=kv</span><br><span class="line">2020-04-11T10:55:49.836+0800 [INFO]  expiration: lease restore complete</span><br><span class="line">2020-04-11T10:55:49.836+0800 [INFO]  secrets.kv.kv_bb6143ab: collecting keys to upgrade</span><br><span class="line">2020-04-11T10:55:49.836+0800 [INFO]  secrets.kv.kv_bb6143ab: done collecting keys: num_keys=1</span><br><span class="line">2020-04-11T10:55:49.836+0800 [INFO]  secrets.kv.kv_bb6143ab: upgrading keys finished</span><br></pre></td></tr></table></figure><p>运行起来后检查下应用信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@node01 ~]# vault status</span><br><span class="line">Key             Value</span><br><span class="line">---             -----</span><br><span class="line">Seal Type       shamir</span><br><span class="line">Initialized     true</span><br><span class="line">Sealed          false</span><br><span class="line">Total Shares    1</span><br><span class="line">Threshold       1</span><br><span class="line">Version         1.4.0</span><br><span class="line">Cluster Name    vault-cluster-7a108e78</span><br><span class="line">Cluster ID      87b55947-d512-6a0f-a6ab-91e89ea3f4f9</span><br><span class="line">HA Enabled      false</span><br><span class="line">[root@node01 ~]# vault auth list</span><br><span class="line">Path      Type     Accessor               Description</span><br><span class="line">----      ----     --------               -----------</span><br><span class="line">token/    token    auth_token_d4a43357    token based credentials</span><br></pre></td></tr></table></figure><h1 id="UI界面体验"><a href="#UI界面体验" class="headerlink" title="UI界面体验"></a>UI界面体验</h1><p>登陆地址: http://{ip}:8200/ui/<br><img src="/archives/ff02dc0f/01.png" alt="image"><br>启动后默认会生成一个token信息，每次都会变化，使用该token登陆。Vault支持很多主流认证方式，根据需要增加其他认证方式，本人测试使用的是OpenLDAP。<br><img src="/archives/ff02dc0f/02.png" alt="image"><br>支持的密钥引擎<br><img src="/archives/ff02dc0f/03.png" alt="image"><br>界面就这么内容，很多操作还是依赖于命令行操作。</p><h1 id="启用OpenLDAP认证"><a href="#启用OpenLDAP认证" class="headerlink" title="启用OpenLDAP认证"></a>启用OpenLDAP认证</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vault auth enable ldap</span><br><span class="line"></span><br><span class="line">vault write auth/ldap/config \</span><br><span class="line">    url=&quot;ldap://master-ldap.xxx.com:389&quot; \</span><br><span class="line">    userdn=&quot;cn=Users,dc=xxx,dc=com&quot; \</span><br><span class="line">    groupfilter=&quot;(&amp;(objectClass=person)(uid=&#123;&#123;.Username&#125;&#125;))&quot; \</span><br><span class="line">    groupattr=&quot;memberOf&quot; \</span><br><span class="line">    binddn=&quot;cn=admin,dc=xxx,dc=com&quot; \</span><br><span class="line">    bindpass=&apos;xxx&apos; \</span><br><span class="line">    insecure_tls=false \</span><br><span class="line">    starttls=false</span><br></pre></td></tr></table></figure><blockquote><p>修改配置信息重新执行命令即可更新</p></blockquote><h1 id="业务实践"><a href="#业务实践" class="headerlink" title="业务实践"></a>业务实践</h1><p>基于Vault实现Linux服务器一次性SSH密码登陆</p><ul><li><a href="https://learn.hashicorp.com/vault/secrets-management/sm-ssh-otp" target="_blank" rel="noopener">官网案例</a></li><li><a href="https://releases.hashicorp.com/vault-ssh-helper" target="_blank" rel="noopener">vault-ssh-helper</a></li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://github.com/hashicorp/vault-ssh-helper" target="_blank" rel="noopener">https://github.com/hashicorp/vault-ssh-helper</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ff02dc0f.html">https://mds1455975151.github.io/archives/ff02dc0f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HashiCorp </tag>
            
            <tag> Vault </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YAPI高效易用功能强大的API开发者设计的管理平台</title>
      <link href="/archives/a8bd9fbc.html"/>
      <url>/archives/a8bd9fbc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><p>每天都有大量的API增长，随着移动应用以及智能设备爆发增长，同时越来越多的零售商、媒体、政府和金融服务公司开始公开Web API，未来API将会使用的越来越多，包括更多的M2M（机器到机器）的通信。现在，每日API调用量在不断飙升，如何能够安全有效将这些API管理起来对于企业而言并不容易。</p><a id="more"></a><h1 id="YAPI概述"><a href="#YAPI概述" class="headerlink" title="YAPI概述"></a>YAPI概述</h1><p>这里推荐一款API管理工具，可以让企业内部接口开发更简单高效，让接口的管理更具可读性、可维护性，让团队协作更合理。</p><ul><li>GitHub地址: <a href="https://github.com/YMFE/yapi" target="_blank" rel="noopener">https://github.com/YMFE/yapi</a></li><li>官网地址: <a href="http://yapi.demo.qunar.com/" target="_blank" rel="noopener">http://yapi.demo.qunar.com/</a></li><li>官网文档: <a href="https://hellosean1025.github.io/yapi/documents/index.html" target="_blank" rel="noopener">https://hellosean1025.github.io/yapi/documents/index.html</a></li></ul><p>优势:</p><ul><li>提供基本的项目分组，项目管理，接口管理功能(对接已有管理平台)</li><li>友好的接口文档，基于websocket的多人协作接口编辑功能和类postman测试工具，让多人协作成倍提升开发效率</li><li>基于Mockjs,使用简单功能强大</li></ul><h1 id="部署实践-快速高效Docker部署方式"><a href="#部署实践-快速高效Docker部署方式" class="headerlink" title="部署实践(快速高效Docker部署方式)"></a>部署实践(快速高效Docker部署方式)</h1><p><a href="https://github.com/jinfeijie/yapi" target="_blank" rel="noopener">https://github.com/jinfeijie/yapi</a><br><a href="https://github.com/fjc0k/docker-YApi" target="_blank" rel="noopener">https://github.com/fjc0k/docker-YApi</a></p><p>ymfe.org</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name yapi-mongo -p 27017:27017 mongo</span><br><span class="line">npm install -g yapi-cli --registry https://registry.npm.taobao.org</span><br><span class="line">yapi server</span><br></pre></td></tr></table></figure><h1 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h1><ul><li>关闭注册</li><li>OpenLDAP接入<h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a8bd9fbc.html">https://mds1455975151.github.io/archives/a8bd9fbc.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> API管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenLDAP </tag>
            
            <tag> YAPI </tag>
            
            <tag> API管理 </tag>
            
            <tag> Opay </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/archives/4a17b156.html"/>
      <url>/archives/4a17b156.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4a17b156.html">https://mds1455975151.github.io/archives/4a17b156.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>运维监控体系总结</title>
      <link href="/archives/a5e4dbc5.html"/>
      <url>/archives/a5e4dbc5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>运维监控体系总结</p></blockquote><p>总结归纳运维工作中的监控内容。</p><a id="more"></a><h1 id="监控目标"><a href="#监控目标" class="headerlink" title="监控目标"></a>监控目标</h1><p>明白监控的重要性以及使用监控要实现的业务目标<br>通常包括以下三点:</p><ul><li>对目标系统进行实时监控</li><li>监控可以实时反馈目标系统的当前状态<br>目标系统硬件、软件、业务是否正常、目前处于何种状态</li><li>保证目标系统可靠性，业务可以持续稳定运行<br>有问题第一时间反馈出来，便于运维人员处理</li></ul><h1 id="监控方法"><a href="#监控方法" class="headerlink" title="监控方法"></a>监控方法</h1><ul><li>了解监控对象<br>例如:CPU如何工作？</li><li>性能基准指标<br>例如: CPU使用率、负载、用户态、内核态、上下文切换</li><li>报警阈值定义<br>例如: CPU负载高的定义，内核态、用户态多少算高</li><li>故障处理流程<br>如何更高效处理故障的流程</li></ul><h1 id="监控核心"><a href="#监控核心" class="headerlink" title="监控核心"></a>监控核心</h1><ul><li>发现问题</li><li>定位问题</li><li>解决问题</li><li>总结问题，对故障原因及问题防范进行归纳总结，避免以后重复出现</li></ul><h1 id="监控工具"><a href="#监控工具" class="headerlink" title="监控工具"></a>监控工具</h1><ul><li>老牌监控<ul><li>Cacti</li><li>Nagios</li><li>smokeping</li><li>等等产品</li></ul></li><li>流行监控<ul><li>Zabbix</li><li>OpenFalcon</li><li>Prometheus+Grafana</li><li>滴滴开源夜莺Nightingale</li><li>smartping(专用于网络监控)</li><li>LEPUS天兔(专用于监控数据库)</li></ul></li><li>自研</li><li>第三方监控<ul><li>监控宝</li><li>听云</li></ul></li></ul><h1 id="监控流程"><a href="#监控流程" class="headerlink" title="监控流程"></a>监控流程</h1><ul><li>采集<br>通过SNMP、Agent、ICMP、SSH、IPMI等对系统进行数据采集</li><li>存储<br>各类数据库服务,MySQL、PostgreSQL</li><li>分析<br>提供图形及时间线情况信息，方便我们定位故障所在</li><li>展示<br>指标信息、指标趋势展示</li><li>报警<br>电话、邮件、微信、短信、报警升级机制</li><li>处理<br>故障级别判定，找响应人员进行快速处理</li></ul><h1 id="监控指标"><a href="#监控指标" class="headerlink" title="监控指标"></a>监控指标</h1><ul><li>硬件监控<ul><li>机器硬件:CPU温度、物理磁盘、虚拟磁盘、主板温度、磁盘阵列</li><li>IPMI工具无法获取到硬件的状态，可以借助MegaCli工具探测Raid磁盘队列状态</li><li><a href="https://www.ibm.com/developerworks/cn/linux/l-ipmi/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/linux/l-ipmi/</a></li></ul></li><li>系统监控<ul><li>主机存活</li><li>CPU、内存、硬盘、使用率</li><li>inode</li><li>负载</li><li>网卡出入带宽</li><li>TCP连接数</li><li>磁盘读写、只读</li></ul></li><li>应用监控<ul><li>MySQL<ul><li>服务可用性</li><li>内存使用率</li><li>磁盘使用</li><li>主从不同步及延迟</li><li>备份情况</li><li>连接数</li></ul></li><li>Redis、Redis Cluster<ul><li>负载</li><li>内存使用率</li><li>连接数量</li><li>qps</li></ul></li><li>Nginx<ul><li>状态码</li><li>连接状态信息</li></ul></li><li>RabbitMQ</li><li>PHP-FPM</li><li>OpenLDAP<ul><li>接入IP</li><li>调用次数</li></ul></li><li>Zimbra</li><li>OpenVPN<ul><li>版本信息、当前在线</li><li>用户、分配IP、客户端连接IP、通过IP获取地址位置、接收发送流量 连接时间 时长 连接ID</li></ul></li><li>ELK</li><li>Graylog</li><li>GitLab</li><li>Jenkins</li><li>MongoDB</li><li>HAproxy</li></ul></li><li>网络监控<ul><li>网络质量</li><li>公网出口</li><li>专线带宽</li><li>网络设备</li></ul></li><li>流量分析</li><li>日志监控</li><li>安全监控</li><li>URL、API监控<ul><li><a href="https://github.com/brotandgames/ciao" target="_blank" rel="noopener">https://github.com/brotandgames/ciao</a> 简单易用</li><li><a href="https://github.com/710leo/urlooker" target="_blank" rel="noopener">https://github.com/710leo/urlooker</a></li><li>自研</li><li>阿里云方案</li></ul></li><li>性能监控(APM)java|php|go|nodejs|分布式链路追踪<ul><li>PinPoint</li><li>Zipkin</li><li>SkyWalking</li><li>CAT、Jaeger</li></ul></li><li>业务监控<ul><li>电商业务为例<ul><li>每分钟产生多少订单</li><li>每分钟注册多少用户</li><li>每分钟多少活跃用户</li><li>每天有多少推广活动</li><li>推广活动引入多少用户</li><li>推广活动引入多少流量</li><li>推广活动引入多少利润</li></ul></li></ul></li><li>其他<ul><li>SSL证书监控</li><li>存活性 进程是否还在，端口监听、Log滚动</li><li>健康指标 MQ消息堆积量</li><li>接口监控 API成功率，延迟情况，QPS等等</li></ul></li></ul><h1 id="监控报警"><a href="#监控报警" class="headerlink" title="监控报警"></a>监控报警</h1><ul><li>邮件</li><li>短信</li><li>钉钉、微信、企业微信等其他即时通信软件</li><li>电话</li></ul><h1 id="报警处理"><a href="#报警处理" class="headerlink" title="报警处理"></a>报警处理</h1><ul><li>故障自愈: 服务器宕机自动启动。利用软件机制supervisor,systemd或者自定义脚本实现</li></ul><h1 id="面试监控"><a href="#面试监控" class="headerlink" title="面试监控"></a>面试监控</h1><ul><li>硬件监控<br>通过SNMP来进行路由器交换机的监控、其他内容使用IPMI实现。如果都是公有云，可以忽略这部分内容。案例:<a href="https://www.mdslq.cn/archives/186e54d8.html" target="_blank" rel="noopener">Open-Falcon监控H3C-ER3260G2路由器</a></li><li>系统监控</li><li>服务监控<ul><li>服务自带<ul><li>Nginx自带status模块</li><li>PHP相应status模块</li><li>MySQL利用percona官方工具进行监控</li></ul></li><li>通过自定义方法获取数据<ul><li>MySQL show global status xxx;</li><li>Redis info指令信息</li></ul></li></ul></li><li>网络监控(混合云架构)<ul><li>smokeping</li><li>smartping</li></ul></li><li>安全监控<ul><li>云服务直接用云安全组即可，或者补充本机iptables</li><li>硬件防火墙</li><li>Web服务使用Nginx+Lua实现Web层面的防火墙，或者Openresty</li></ul></li><li>日志监控<br>ELK、Graylog实现异常日志，错误日志关键字的监控</li><li>业务监控<br>确定监控指标，监控起来，业务不同各不相同</li><li>流量分析<br>建议使用百度统计，google统计，商业，研发嵌入代码实现。或者使用<a href="http://www.piwik.cn/" target="_blank" rel="noopener">piwik</a></li><li>可视化<br>dashboard</li><li>自动化监控<br>通过API,批量操作</li></ul><h1 id="监控总结"><a href="#监控总结" class="headerlink" title="监控总结"></a>监控总结</h1><p>完整的监控系统，需要对业务有详尽的了解，软件只是手段。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://blog.csdn.net/Z_GodGirl/article/details/81562455" target="_blank" rel="noopener">https://blog.csdn.net/Z_GodGirl/article/details/81562455</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a5e4dbc5.html">https://mds1455975151.github.io/archives/a5e4dbc5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> 监控 </tag>
            
            <tag> Zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>运维系统开发</title>
      <link href="/archives/fba70938.html"/>
      <url>/archives/fba70938.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>运维系统开发展示</p></blockquote><p>Python3+Flask+Bootstrap+javascript快速开发运维系统</p><a id="more"></a><h1 id="涉及技术"><a href="#涉及技术" class="headerlink" title="涉及技术"></a>涉及技术</h1><p>1、语言及框架Python3+Flask+MySQL+Redis+Celery+Bootstrap+Echarts<br>2、应用公有云及各类服务SDK调用各类服务API实现业务需求</p><h1 id="实现功能"><a href="#实现功能" class="headerlink" title="实现功能"></a>实现功能</h1><p>1、CMDB实现各类资源信息汇总，提供API接口供业务调用(支持多种公有云、Exsi、JumpServer等系统)<br>2、域名解析、免费SSL证书申请及上传到指定公有云功能<br>3、JumpServer 自动化工具，包括用户初始化、批量授权、信息统计<br>4、OpenLDAP管理，实现用户组、用户的增删改查、密码重置、入职离职账号管理<br>5、运维信息展示面板便于运维信息查找及便捷操作(Gitlab、Phabricator、Jenkins、Zabbix、Granfana 等各类信息)<br>6、容器管理平台(支持自建、阿里云或者基于rancher管理的容器集群)<br>7、知识库功能，可以编写文章或者上传PDF格式文档，便于各项目信息汇总及文档规范<br>8、数据备份功能，可以展示及汇总各业务数据备份情况<br>9、系统登录、操作行为审计、可以查看用户进行的各类操作<br>10、基于prometheu+consul+consul-template实现监控对象的动态管理<br>11、使用Casbin实现系统权限管理，可以针对服务和接口实现精细化授权<br>12、成本中心功能，计算汇总各项目各类费用支出情况，便于项目成本掌控</p><h1 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h1><h2 id="首页展示"><a href="#首页展示" class="headerlink" title="首页展示"></a>首页展示</h2><p><img src="/archives/fba70938/01.png" alt><br><img src="/archives/fba70938/02.png" alt></p><h2 id="资产分类"><a href="#资产分类" class="headerlink" title="资产分类"></a>资产分类</h2><p><img src="/archives/fba70938/03.png" alt></p><h2 id="主机资产"><a href="#主机资产" class="headerlink" title="主机资产"></a>主机资产</h2><p><img src="/archives/fba70938/03-1.png" alt></p><h2 id="域名管理"><a href="#域名管理" class="headerlink" title="域名管理"></a>域名管理</h2><p><img src="/archives/fba70938/04.png" alt></p><h2 id="证书管理"><a href="#证书管理" class="headerlink" title="证书管理"></a>证书管理</h2><p><img src="/archives/fba70938/05.png" alt><br><img src="/archives/fba70938/06.png" alt></p><h2 id="项目管理"><a href="#项目管理" class="headerlink" title="项目管理"></a>项目管理</h2><p><img src="/archives/fba70938/07.png" alt></p><h2 id="导航服务"><a href="#导航服务" class="headerlink" title="导航服务"></a>导航服务</h2><p><img src="/archives/fba70938/08.png" alt></p><h2 id="LDAP管理"><a href="#LDAP管理" class="headerlink" title="LDAP管理"></a>LDAP管理</h2><p><img src="/archives/fba70938/09.png" alt><br><img src="/archives/fba70938/10.png" alt></p><h2 id="OpenVPN监控"><a href="#OpenVPN监控" class="headerlink" title="OpenVPN监控"></a>OpenVPN监控</h2><p><img src="/archives/fba70938/11.png" alt><br><img src="/archives/fba70938/12.png" alt></p><h2 id="文档中心"><a href="#文档中心" class="headerlink" title="文档中心"></a>文档中心</h2><p><img src="/archives/fba70938/13.png" alt></p><h2 id="备份功能"><a href="#备份功能" class="headerlink" title="备份功能"></a>备份功能</h2><p><img src="/archives/fba70938/14.png" alt></p><h2 id="日志记录"><a href="#日志记录" class="headerlink" title="日志记录"></a>日志记录</h2><p><img src="/archives/fba70938/15.png" alt></p><h2 id="登录审计"><a href="#登录审计" class="headerlink" title="登录审计"></a>登录审计</h2><p><img src="/archives/fba70938/16.png" alt></p><h2 id="容器集群"><a href="#容器集群" class="headerlink" title="容器集群"></a>容器集群</h2><p><img src="/archives/fba70938/17.png" alt></p><h2 id="费用信息"><a href="#费用信息" class="headerlink" title="费用信息"></a>费用信息</h2><p><img src="/archives/fba70938/18.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li><a href="https://www.toutiao.com/c/user/3916271538/#mid=1560038863835138" target="_blank" rel="noopener">今日头条</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fba70938.html">https://mds1455975151.github.io/archives/fba70938.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 运维系统开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
            <tag> Flask </tag>
            
            <tag> Python3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenLDAP集中认证管理知识汇总</title>
      <link href="/archives/5724c435.html"/>
      <url>/archives/5724c435.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>OpenLDAP集中认证管理知识汇总</p></blockquote><a id="more"></a><h1 id="OpenLDAP介绍"><a href="#OpenLDAP介绍" class="headerlink" title="OpenLDAP介绍"></a>OpenLDAP介绍</h1><p>OpenLDAP是一款轻量级目录访问协议（Lightweight Directory Access Protocol，LDAP），属于开源集中账号管理架构的实现，且支持众多系统版本，被广大互联网公司所采用。</p><p>正常端口389或者使用加密端口636。</p><h1 id="OpenLDAP应用点讲解"><a href="#OpenLDAP应用点讲解" class="headerlink" title="OpenLDAP应用点讲解"></a>OpenLDAP应用点讲解</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p><a href="http://www.openldap.org/doc/admin24/" target="_blank" rel="noopener">http://www.openldap.org/doc/admin24/</a></p><h2 id="OpenLDAP部署及配置"><a href="#OpenLDAP部署及配置" class="headerlink" title="OpenLDAP部署及配置"></a>OpenLDAP部署及配置</h2><ul><li>常规安装方式</li><li>Docker安装方式，推荐使用<a href="https://github.com/osixia/docker-openldap" target="_blank" rel="noopener">osixia</a></li></ul><h2 id="监控及日常管理"><a href="#监控及日常管理" class="headerlink" title="监控及日常管理"></a>监控及日常管理</h2><ul><li>添加、删除、修改组及人员信息</li><li>定期监控OpenLDAP使用情况<br><img src="/archives/5724c435/03.png" alt><br><img src="/archives/5724c435/04.png" alt></li><li>TLS协议加密</li><li>主从架构、双主架构</li></ul><h2 id="Web化管理工具"><a href="#Web化管理工具" class="headerlink" title="Web化管理工具"></a>Web化管理工具</h2><ul><li>服务phpldapadmin<br><img src="/archives/5724c435/01.png" alt></li><li>自助密码找回及重置功能实现Self Service Password<br><img src="/archives/5724c435/02.png" alt></li><li>自研(一般实现账号、组增删改查、密码重置及日常统计信息即可)<br><img src="/archives/5724c435/05.png" alt></li></ul><h2 id="window客户端管理工具"><a href="#window客户端管理工具" class="headerlink" title="window客户端管理工具"></a>window客户端管理工具</h2><ul><li>Apache Directory Studio</li><li><a href="http://www.ldapadmin.org/download/ldapadmin.html" target="_blank" rel="noopener">LdapAdmin</a></li></ul><h2 id="用户分组划分问题"><a href="#用户分组划分问题" class="headerlink" title="用户分组划分问题"></a>用户分组划分问题</h2><ul><li>如果公司架构相对稳定可以将用户之间划分到预设的不同部门的LDAP组中，如果不固定，则添加到默认组，然后根据需要将用户添加到不同的组中</li></ul><h1 id="OpenLDAP与其他应用结合"><a href="#OpenLDAP与其他应用结合" class="headerlink" title="OpenLDAP与其他应用结合"></a>OpenLDAP与其他应用结合</h1><ul><li>源码管理：SVN、GitLab、Gogs、Phabricator</li><li>企业应用：Bug管理Jira、Wiki应用Conflunce</li><li>日志解决方案：GrayLog、ELK(付费功能)</li><li>远程办公应用：OpenVPN、L2TP</li><li>企业级文件共享：群晖NAS、Samba、vsftpd,proftpd</li><li>服务器权限管理：SSH、Kerberos、Jumpserver</li><li>BI数据分析方案：Redash</li><li>监控解决方案：Grafana,Zabbix,OpenFalcon</li><li>CI/CD：Jenkins</li><li>Web服务：Apache、Nginx</li><li>配置管理: Vault</li><li>其他自定义接入解决方案</li></ul><p>OpenLDAP应用非常广泛，还有很多很多，目前列举了中小企业常见的应用场景，其他就不一一列举了。</p><h1 id="OpenLDAP接入案例"><a href="#OpenLDAP接入案例" class="headerlink" title="OpenLDAP接入案例"></a>OpenLDAP接入案例</h1><ul><li><a href="http://www.mdslq.cn/archives/56a056be.html" target="_blank" rel="noopener">OpenLDAP之Confluence接入设置</a></li><li><a href="http://www.mdslq.cn/archives/ff02dc0f.html" target="_blank" rel="noopener">OpenLDAP之HashiCorp Vault接入配置</a></li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="http://www.openldap.org/" target="_blank" rel="noopener">OpenLDAP官网</a></li><li><a href="http://phpldapadmin.sourceforge.net/wiki/index.php/Main_Page" target="_blank" rel="noopener">phpLDAPadmin</a></li><li><a href="https://github.com/ltb-project" target="_blank" rel="noopener">Self Service Password</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5724c435.html">https://mds1455975151.github.io/archives/5724c435.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenLDAP </tag>
            
            <tag> 权限认证 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Aliyun+OSS+PostgreSQL+Redash+OpenLDAP部署业务数据分析平台</title>
      <link href="/archives/a136f7d4.html"/>
      <url>/archives/a136f7d4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>基于Aliyun OSS+PostgreSQL+Redash+OpenLDAP部署业务数据分析平台</p></blockquote><a id="more"></a><h1 id="项目概述"><a href="#项目概述" class="headerlink" title="项目概述"></a>项目概述</h1><p>利用开源产品迅速实现业务数据存储、分析、展示的业务平台。<br>redash 是一款开源的 BI 工具，提供了基于web的数据库查询和数据可视化功能。<br><img src="/archives/a136f7d4/01.gif" alt><br>支持多种数据源：<br><img src="/archives/a136f7d4/05.png" alt></p><h1 id="实现功能列表"><a href="#实现功能列表" class="headerlink" title="实现功能列表"></a>实现功能列表</h1><ul><li>使用CentOS 7.x Docker-Compose方式快速部署Redash</li><li>Redash基于Let’s encrypt 免费SSL证书实现HTTPS安全访问</li><li>配合OpenLDAP做统一账号权限管理</li><li>配置邮件通知、分析告警功能</li><li>Python+Shell实现OSS数据分流压缩上传及定时入库</li><li>截止到文章发布前Aliyun OSS数据存储1.2T,PostgreSQL数据量存储1.74T</li></ul><h1 id="项目展示"><a href="#项目展示" class="headerlink" title="项目展示"></a>项目展示</h1><p><img src="/archives/a136f7d4/01.png" alt><br><img src="/archives/a136f7d4/02.png" alt><br><img src="/archives/a136f7d4/03.png" alt><br><img src="/archives/a136f7d4/04.png" alt><br><img src="/archives/a136f7d4/01.webp" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://redash.io/" target="_blank" rel="noopener">redash 官网</a></li><li><a href="https://help.aliyun.com/product/31815.html" target="_blank" rel="noopener">Aliyun OSS</a></li><li><a href="https://help.aliyun.com/product/35364.html" target="_blank" rel="noopener">Aliyu PostgreSQL</a></li><li><a href="https://help.aliyun.com/document_detail/35457.html" target="_blank" rel="noopener">Aliyu PostgreSQL OSS外部表使用</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a136f7d4.html">https://mds1455975151.github.io/archives/a136f7d4.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenLDAP </tag>
            
            <tag> docker-compose </tag>
            
            <tag> Redash </tag>
            
            <tag> PostgreSQL </tag>
            
            <tag> Aliyun OSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jira实现钉钉群任务信息通知</title>
      <link href="/archives/739486c6.html"/>
      <url>/archives/739486c6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Jira实现钉钉群任务信息通知</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>设置Jira任务信息通知到钉钉工作群，及时通知给相关人员。</p><h1 id="添加钉钉机器人生成token"><a href="#添加钉钉机器人生成token" class="headerlink" title="添加钉钉机器人生成token"></a>添加钉钉机器人生成token</h1><p>群设置–&gt;智能群助手–&gt;添加更多–&gt;添加机器人–&gt;现在Jira–&gt;添加–&gt;设置机器人名字–&gt;点击完成，记录webhook地址–&gt;点击完成</p><blockquote><p>第一次设置，可以在最后一步查看参考设置说明</p></blockquote><h1 id="Jira设置"><a href="#Jira设置" class="headerlink" title="Jira设置"></a>Jira设置</h1><p>Jira版本： v7.8.1</p><p>系统–网络钩子–创建网络钩子–&gt;设置webhook名称等相关信息–&gt;选择通知事件–&gt;点击完成，案例如下。</p><p><img src="/archives/739486c6/01.png" alt></p><h1 id="验证设置效果"><a href="#验证设置效果" class="headerlink" title="验证设置效果"></a>验证设置效果</h1><p><img src="/archives/739486c6/02.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/739486c6.html">https://mds1455975151.github.io/archives/739486c6.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jira </tag>
            
            <tag> dingding </tag>
            
            <tag> 钉钉 </tag>
            
            <tag> 高效办公 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ELK实践分享</title>
      <link href="/archives/628093c8.html"/>
      <url>/archives/628093c8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>ELK实践分享</p></blockquote><a id="more"></a><h1 id="ELK简介"><a href="#ELK简介" class="headerlink" title="ELK简介"></a>ELK简介</h1><p>ELK是三个开源项目的首字母缩写：Elasticsearch，Logstash和Kibana。Elasticsearch是一个搜索和分析引擎。Logstash是一个服务器端数据处理管道，它同时从多个源中提取数据，对其进行转换，然后将其发送到像Elasticsearch这样的存储。Kibana允许用户使用Elasticsearch中的图表和图形来可视化数据。</p><h1 id="实践说明"><a href="#实践说明" class="headerlink" title="实践说明"></a>实践说明</h1><ul><li>服务器使用两台4核8GB阿里云主机<ul><li>10.2.1.200 Filebeat、Logstash、Elasticsearch、Kibana</li><li>10.2.1.201 Kafka</li></ul></li><li>所有应用部署使用ansible-playbook方式实现</li></ul><h1 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h1><ul><li>filebeat-7.3.1-1.x86_64</li><li>kafka_2.11-2.1.1</li><li>elasticsearch-7.3.1-1.x86_64</li><li>logstash-7.3.1-1.noarch</li><li>kibana-7.3.1-1.x86_64</li></ul><h1 id="实践架构"><a href="#实践架构" class="headerlink" title="实践架构"></a>实践架构</h1><ul><li>Filebeat–&gt;Kafka–&gt;Logstash–&gt;Elasticsearch–&gt;Kibana(使用X-Pack保障集群安全)</li></ul><h1 id="Elasticsearch部署"><a href="#Elasticsearch部署" class="headerlink" title="Elasticsearch部署"></a>Elasticsearch部署</h1><h2 id="安装JDK及设置环境变量"><a href="#安装JDK及设置环境变量" class="headerlink" title="安装JDK及设置环境变量"></a>安装JDK及设置环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># rpm -ivh jdk-8u161-linux-x64.rpm</span><br><span class="line"># cat&gt;&gt;/etc/profile&lt;&lt;EOF</span><br><span class="line"></span><br><span class="line"># JAVA bin PATH setup</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_161/</span><br><span class="line">export CLASSPATH=.:\$JAVA_HOME/jre/lib/rt.jar:\$JAVA_HOME/lib/dt.jar:\$JAVA_HOME/lib/tools.jar</span><br><span class="line">export PATH=\$PATH:\$JAVA_HOME/bin</span><br><span class="line">EOF</span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"># cat&gt;&gt;~/.bashrc&lt;&lt;EOF</span><br><span class="line"></span><br><span class="line"># JAVA bin PATH setup</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_161/</span><br><span class="line">export CLASSPATH=.:\$JAVA_HOME/jre/lib/rt.jar:\$JAVA_HOME/lib/dt.jar:\$JAVA_HOME/lib/tools.jar</span><br><span class="line">export PATH=\$PATH:\$JAVA_HOME/bin</span><br><span class="line">EOF</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><h2 id="Elasticsearch安装"><a href="#Elasticsearch安装" class="headerlink" title="Elasticsearch安装"></a>Elasticsearch安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># rpm -ivh elasticsearch-7.3.1-x86_64.rpm</span><br><span class="line"># grep -vE &quot;^#|^$&quot; /etc/elasticsearch/elasticsearch.yml</span><br><span class="line">cluster.name: version_test</span><br><span class="line">path.data:</span><br><span class="line">  - /data0/elasticsearch/data</span><br><span class="line">path.logs: /data0/elasticsearch/logs</span><br><span class="line">network.host: 10.2.1.201</span><br><span class="line">http.port: 9200</span><br><span class="line">discovery.seed_hosts:</span><br><span class="line">  - 10.2.1.201</span><br><span class="line">cluster.initial_master_nodes: [&apos;10.2.1.201&apos;]</span><br><span class="line">bootstrap.system_call_filter: false</span><br><span class="line">node.attr.zone: cn-hangzhou</span><br><span class="line">node.attr.box_type: hot</span><br><span class="line">path.repo:</span><br><span class="line">  - &quot;/es-ossfs/snapshots&quot;</span><br><span class="line">http.max_initial_line_length: 8k</span><br><span class="line">http.max_header_size: 16k</span><br><span class="line">xpack.security.enabled: true</span><br><span class="line">xpack.security.transport.ssl.enabled: true</span><br><span class="line">xpack.security.transport.ssl.verification_mode: certificate</span><br><span class="line">xpack.security.transport.ssl.keystore.path: elastic-certificates.p12</span><br><span class="line">xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</span><br><span class="line">xpack.monitoring.enabled: true</span><br><span class="line"></span><br><span class="line"># systemctl start elasticsearch.service</span><br><span class="line"># systemctl enable elasticsearch.service</span><br></pre></td></tr></table></figure><h2 id="配置TLS和身份验证"><a href="#配置TLS和身份验证" class="headerlink" title="配置TLS和身份验证"></a>配置TLS和身份验证</h2><p>第一件事是生成证书，通过这些证书便能允许节点安全地通行。我们这里使用elasticsearch-certutil命令。</p><ul><li>步骤1：Elasticsearch master node配置TLS<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># /usr/share/elasticsearch/bin/elasticsearch-certutil --help</span><br><span class="line"># /usr/share/elasticsearch/bin/elasticsearch-certutil cert -out config/elastic-certificates.p12 -pass &quot;&quot;</span><br><span class="line"># cd /etc/elasticsearch &amp;&amp; cp /usr/share/elasticsearch/config/elastic-certificates.p12 .</span><br><span class="line"># vim /etc/elasticsearch/elasticsearch.yml</span><br><span class="line">xpack.security.enabled: true</span><br><span class="line">xpack.security.transport.ssl.enabled: true</span><br><span class="line">xpack.security.transport.ssl.verification_mode: certificate</span><br><span class="line">xpack.security.transport.ssl.keystore.path: elastic-certificates.p12</span><br><span class="line">xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>修改配置文件后，便可以重启主节点</p></blockquote><ul><li>步骤2：Elasticsearch集群密码<blockquote><p>主节点重启后，便可以为集群设置密码了。 使用命令/usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto生成随机密码或使用/usr/share/elasticsearch/bin/elasticsearch-setup-passwords interactive命令手动定义密码。记录这些密码。</p></blockquote></li></ul><h1 id="Kibana部署"><a href="#Kibana部署" class="headerlink" title="Kibana部署"></a>Kibana部署</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># rpm -ivh kibana-7.3.1-x86_64.rpm</span><br><span class="line"># grep -vE &quot;^$|^#&quot; /etc/kibana/kibana.yml</span><br><span class="line">server.host: &quot;10.2.1.201&quot;</span><br><span class="line">elasticsearch.hosts: [&quot;http://10.2.1.201:9200&quot;]</span><br><span class="line">elasticsearch.username: &quot;elastic&quot;</span><br><span class="line">elasticsearch.password: &quot;xxx&quot;</span><br><span class="line">xpack.monitoring.enabled: true</span><br><span class="line"># systemctl start kibana.service</span><br><span class="line"># systemctl enable kibana.service</span><br></pre></td></tr></table></figure><p><img src="/archives/628093c8/01.png" alt><br><img src="/archives/628093c8/02.png" alt></p><h1 id="kafka部署-单节点"><a href="#kafka部署-单节点" class="headerlink" title="kafka部署(单节点)"></a>kafka部署(单节点)</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># tar -zxf kafka_2.11-2.1.1.tgz /usr/local/</span><br><span class="line"># ln -s /usr/local/kafka_2.11-2.1.1 kafka</span><br><span class="line"># grep -vE &quot;^$|^#&quot; server.properties</span><br><span class="line">broker.id=0</span><br><span class="line">listeners=PLAINTEXT://10.2.1.200:9092</span><br><span class="line">num.network.threads=3</span><br><span class="line">num.io.threads=8</span><br><span class="line">socket.send.buffer.bytes=102400</span><br><span class="line">socket.receive.buffer.bytes=102400</span><br><span class="line">socket.request.max.bytes=104857600</span><br><span class="line">log.dirs=/tmp/kafka-logs</span><br><span class="line">num.partitions=1</span><br><span class="line">num.recovery.threads.per.data.dir=1</span><br><span class="line">offsets.topic.replication.factor=1</span><br><span class="line">transaction.state.log.replication.factor=1</span><br><span class="line">transaction.state.log.min.isr=1</span><br><span class="line">log.retention.hours=168</span><br><span class="line">log.segment.bytes=1073741824</span><br><span class="line">log.retention.check.interval.ms=300000</span><br><span class="line">zookeeper.connect=localhost:2181</span><br><span class="line">zookeeper.connection.timeout.ms=6000</span><br><span class="line">group.initial.rebalance.delay.ms=0</span><br><span class="line"># /usr/local/kafka/bin/zookeeper-server-start.sh -daemon /usr/local/kafka/config/zookeeper.properties</span><br><span class="line"># /usr/local/kafka/bin/kafka-server-start.sh -daemon /usr/local/kafka/config/server.properties</span><br><span class="line"># netstat -tunlp|grep java        </span><br><span class="line">tcp        0      0 10.2.1.200:9092         0.0.0.0:*               LISTEN      11427/java          </span><br><span class="line">tcp        0      0 0.0.0.0:2181            0.0.0.0:*               LISTEN      10716/java</span><br></pre></td></tr></table></figure><h1 id="filebeat部署"><a href="#filebeat部署" class="headerlink" title="filebeat部署"></a>filebeat部署</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># rpm -ivh filebeat-7.3.1-x86_64.rpm</span><br><span class="line"># grep -vE &quot;^$|^#&quot; /etc/filebeat/filebeat.yml</span><br><span class="line">filebeat.inputs:</span><br><span class="line">- type: log</span><br><span class="line">  enabled: true</span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/*.log</span><br><span class="line">filebeat.config.modules:</span><br><span class="line">  path: $&#123;path.config&#125;/modules.d/*.yml</span><br><span class="line">  reload.enabled: true</span><br><span class="line">  reload.period: 10s</span><br><span class="line">setup.template.settings:</span><br><span class="line">  index.number_of_shards: 1</span><br><span class="line">  #index.codec: best_compression</span><br><span class="line">  #_source.enabled: false</span><br><span class="line">setup.kibana:</span><br><span class="line">  host: &quot;10.2.1.201:5601&quot;</span><br><span class="line">  # Kibana Space ID</span><br><span class="line">  # ID of the Kibana Space into which the dashboards should be loaded. By default,</span><br><span class="line">  # the Default Space will be used.</span><br><span class="line">  #space.id:</span><br><span class="line">output.kafka:</span><br><span class="line">  enabled: true</span><br><span class="line">  hosts: [&quot;10.2.1.200:9092&quot;]</span><br><span class="line">  topic: &apos;logs&apos;</span><br><span class="line">  partition.round_robin:</span><br><span class="line">    reachable_only: false</span><br><span class="line"></span><br><span class="line">  required_acks: 1</span><br><span class="line">  compression: gzip</span><br><span class="line">  max_message_bytes: 1000000</span><br><span class="line">processors:</span><br><span class="line">  - add_host_metadata: ~</span><br><span class="line">  - add_cloud_metadata: ~</span><br><span class="line">logging.level: info</span><br><span class="line">logging.to_files: true</span><br><span class="line">logging.files:</span><br><span class="line">  path: /var/log/filebeat</span><br><span class="line">  name: filebeat</span><br><span class="line">  keepfiles: 7</span><br><span class="line">  permissions: 0644</span><br></pre></td></tr></table></figure><h1 id="Logstash部署"><a href="#Logstash部署" class="headerlink" title="Logstash部署"></a>Logstash部署</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># rpm -ivh logstash-7.3.1.rpm</span><br><span class="line"># grep -vE &quot;^$|^#&quot; /etc/logstash/logstash.yml</span><br><span class="line">path.data: /var/lib/logstash</span><br><span class="line">http.host: &quot;10.2.1.201&quot;</span><br><span class="line">path.logs: /var/log/logstash                               </span><br><span class="line"># grep -vE &quot;^$|^#&quot; /etc/logstash/conf.d/logstash-input-kafka.conf</span><br><span class="line">input &#123;</span><br><span class="line">  kafka &#123;</span><br><span class="line">    bootstrap_servers =&gt; [&quot;10.2.1.200:9092&quot;]</span><br><span class="line">    auto_offset_reset =&gt; &quot;latest&quot;</span><br><span class="line">    consumer_threads =&gt; 5</span><br><span class="line">    topics =&gt; [&quot;logs&quot;]</span><br><span class="line">    decorate_events =&gt; true</span><br><span class="line">    codec =&gt; &quot;json&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">    hosts =&gt; [&quot;http://10.2.1.201:9200&quot;]</span><br><span class="line">    index =&gt; &quot;%&#123;[@metadata][beat]&#125;-%&#123;[@metadata][version]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">    user =&gt; &quot;elastic&quot;</span><br><span class="line">    password =&gt; &quot;xxx&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="验证中间环节工作正常"><a href="#验证中间环节工作正常" class="headerlink" title="验证中间环节工作正常"></a>验证中间环节工作正常</h1><h2 id="filebeat到kafka通信验证"><a href="#filebeat到kafka通信验证" class="headerlink" title="filebeat到kafka通信验证"></a>filebeat到kafka通信验证</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># /usr/local/kafka/bin/kafka-topics.sh --list --zookeeper localhost:2181    确保存在topic名为logs</span><br><span class="line">__consumer_offsets</span><br><span class="line">logs</span><br><span class="line">test</span><br></pre></td></tr></table></figure><h2 id="kafka到logstash"><a href="#kafka到logstash" class="headerlink" title="kafka到logstash"></a>kafka到logstash</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># /usr/local/kafka/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 10.2.1.200:9092 --topic logs --time -1</span><br><span class="line">logs:0:10022</span><br><span class="line"># /usr/local/kafka/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 10.2.1.200:9092 --topic logs --time -2</span><br><span class="line">logs:0:0</span><br></pre></td></tr></table></figure><h2 id="端到端验证日志"><a href="#端到端验证日志" class="headerlink" title="端到端验证日志"></a>端到端验证日志</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在安装filebeat的主机上执行三次生成三条日志</span><br><span class="line"># echo &quot;111&quot; &gt;&gt; /var/log/yum.log</span><br><span class="line"></span><br><span class="line">验证kafka消费记录</span><br><span class="line"># /usr/local/kafka/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 10.2.1.200:9092 --topic logs --time -1</span><br><span class="line">logs:0:10025</span><br><span class="line"># /usr/local/kafka/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 10.2.1.200:9092 --topic logs --time -2</span><br><span class="line">logs:0:0</span><br></pre></td></tr></table></figure><p>kibana验证日志数据<br><img src="/archives/628093c8/03.png" alt></p><h1 id="关于X-Pack几点说明"><a href="#关于X-Pack几点说明" class="headerlink" title="关于X-Pack几点说明"></a>关于X-Pack几点说明</h1><ul><li>在7.x版本中X-Pack已经内置，无需单独安装</li><li>启用X-Pack后需要掌握Kibana中配置基于角色的访问控制(RBAC)</li><li>启用X-Pack后使用API的方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># curl -u elastic:xxx &quot;http://10.2.1.201:9200/_cluster/health?pretty&quot;  # 无交互调用API</span><br><span class="line"># curl -X GET -u elastic &apos;10.2.1.201:9200/_xpack/security/role&apos;        # 交互式调用API</span><br></pre></td></tr></table></figure></li></ul><h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><ul><li>Elasticsearch权限解决方案<ul><li>1、X-Pack</li><li>2、SearchGuard插件</li></ul></li></ul><p>ELK暂时介绍到这里，有任何问题，可以留言。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/628093c8.html">https://mds1455975151.github.io/archives/628093c8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> ELK </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
            <tag> ELK </tag>
            
            <tag> X-Pack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树莓派之使用FRP实现内网穿透</title>
      <link href="/archives/4b72728b.html"/>
      <url>/archives/4b72728b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4b72728b.html">https://mds1455975151.github.io/archives/4b72728b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>树莓派之树莓派系统安装</title>
      <link href="/archives/1b81c224.html"/>
      <url>/archives/1b81c224.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>树莓派系统安装</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>树莓派(是为学习计算机编程教育而设计)，只有信用卡大小的微型电脑，其系统基于Linux。随着Windows 10 IoT的发布，我们也将可以用上运行Windows的树莓派。2014年刚知道有树莓派的时候好奇买了一块，型号：Raspberry Pi Model B Rev 2。当时安装完系统玩了几天，就丢一边吃灰去了，今天闲来无事，将其重新安装了以下，特此记录。</p><h1 id="树莓派能做什么？"><a href="#树莓派能做什么？" class="headerlink" title="树莓派能做什么？"></a>树莓派能做什么？</h1><p>功能强大，只要有创造力，一切皆有可能，折腾起来吧。目前的一些应用列表<a href="http://shumeipai.nxez.com/what-raspi-used-for" target="_blank" rel="noopener">参考</a>。</p><h1 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h1><h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><ul><li>PC一台</li><li>树莓派一台</li><li>TF(Micro SD)卡一个8GB(建议买32GB以上的高速卡)</li><li>读卡器一个<h2 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h2></li><li>官网镜像</li><li>SD Card Formatter(格式化TF卡)</li><li>Win32DiskImager(镜像写入工具)<h1 id="操作记录"><a href="#操作记录" class="headerlink" title="操作记录"></a>操作记录</h1><h2 id="树莓派系统下载"><a href="#树莓派系统下载" class="headerlink" title="树莓派系统下载"></a>树莓派系统下载</h2>系统下载地址：<a href="https://www.raspberrypi.org/downloads/" target="_blank" rel="noopener">https://www.raspberrypi.org/downloads/</a><br>树莓派除了支持该系统外，还支持一些第三方系统，大家可以根据需求更换适合自己的操作系统镜像。<br><img src="/archives/1b81c224/01.png" alt></li></ul><p>可用的第三方系统<br><img src="/archives/1b81c224/02.png" alt></p><h2 id="格式化TF卡"><a href="#格式化TF卡" class="headerlink" title="格式化TF卡"></a>格式化TF卡</h2><p>工具下载地址：<a href="https://www.sdcard.org/downloads/formatter/eula_windows/index.html" target="_blank" rel="noopener">SD Card Formatter</a><br><img src="/archives/1b81c224/03.png" alt></p><h2 id="将下载好的系统镜像写入TF卡"><a href="#将下载好的系统镜像写入TF卡" class="headerlink" title="将下载好的系统镜像写入TF卡"></a>将下载好的系统镜像写入TF卡</h2><p><img src="/archives/1b81c224/04.png" alt></p><h2 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h2><ul><li><p>设置开启SSH服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 在TF卡根目录下添加一个名为SSH的空文件</span><br></pre></td></tr></table></figure></li><li><p>设置HDMI配置(不设置的话显示器可能显示无信号导致黑屏)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 取消以下两项注释</span><br><span class="line">hdmi_force_hotplug=1       # 启用HDMI热插拔功能</span><br><span class="line">config_hdmi_boost=4        # 加强HDMI信号</span><br></pre></td></tr></table></figure></li></ul><h2 id="插上显示器、键盘、鼠标、通电"><a href="#插上显示器、键盘、鼠标、通电" class="headerlink" title="插上显示器、键盘、鼠标、通电"></a>插上显示器、键盘、鼠标、通电</h2><p>略</p><h2 id="获取树莓派IP地址"><a href="#获取树莓派IP地址" class="headerlink" title="获取树莓派IP地址"></a>获取树莓派IP地址</h2><ul><li>有显示器的情况<br>使用xshell、SecreCRT等终端工具登录系统后，使用ifconfig命令查看，默认账号：pi 密码：raspberrypi<br><img src="/archives/1b81c224/05.png" alt></li><li>无显示器的情况<br>方法1：通过查看路由器界面获取IP地址<br>一般后台显示树莓派的名字为raspberrypi，例如：我使用openwrt路由器web界面显示如下<br><img src="/archives/1b81c224/06.png" alt><br>方法2：使用局域网扫描工具</li></ul><blockquote><p>最佳实践：设置路由器绑定MAC地址，使树莓派使用固定IP地址</p></blockquote><h2 id="开启VNC便于后期不使用显示器连接pi"><a href="#开启VNC便于后期不使用显示器连接pi" class="headerlink" title="开启VNC便于后期不使用显示器连接pi"></a>开启VNC便于后期不使用显示器连接pi</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~ $ sudo raspi-config</span><br></pre></td></tr></table></figure><p><img src="/archives/1b81c224/07.png" alt><br><img src="/archives/1b81c224/08.png" alt><br><img src="/archives/1b81c224/09.png" alt><br><img src="/archives/1b81c224/10.png" alt></p><h2 id="更换国内软件源"><a href="#更换国内软件源" class="headerlink" title="更换国内软件源"></a>更换国内软件源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i.bak &apos;s@http://raspbian.raspberrypi.org/raspbian/@http://mirrors.ustc.edu.cn/raspbian/raspbian/@g&apos; /etc/apt/sources.list</span><br><span class="line">sudo sed -i.bak &apos;s@http://archive.raspberrypi.org/debian/@http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/@g&apos; /etc/apt/sources.list.d/raspi.list</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><h2 id="为了便于查看树莓派运行状况可以安装pi-dashboard工具"><a href="#为了便于查看树莓派运行状况可以安装pi-dashboard工具" class="headerlink" title="为了便于查看树莓派运行状况可以安装pi-dashboard工具"></a>为了便于查看树莓派运行状况可以安装pi-dashboard工具</h2><p>详细安装过程参考后续博客(待补充)</p><h1 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h1><p><img src="/archives/1b81c224/11.png" alt><br><img src="/archives/1b81c224/12.png" alt></p><h1 id="总结及后续"><a href="#总结及后续" class="headerlink" title="总结及后续"></a>总结及后续</h1><p>以上是树莓派的基本安装及配置过程，目前树莓派已经到3b+版本，后续可能会剁手在买一块，玩玩树莓派的一些集群功能，再分享给大家。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.raspberrypi.org/" target="_blank" rel="noopener">树莓派官网</a></li><li><a href="https://github.com/spoonysonny/pi-dashboard" target="_blank" rel="noopener">pi-dashboard</a></li><li><a href="http://shumeipai.nxez.com/" target="_blank" rel="noopener">树莓派实验室</a></li><li><a href="https://elinux.org/R-Pi_Troubleshooting" target="_blank" rel="noopener">R-Pi_Troubleshooting</a></li><li><a href="https://www.jianshu.com/p/c022c6f28c3a" target="_blank" rel="noopener">树莓派用HDMI连接电视显示”无信号”问题</a></li><li><a href="https://www.jianshu.com/p/654ee08d2b3a" target="_blank" rel="noopener">树莓派开启SSH的N种方法</a></li><li><a href="https://www.jianshu.com/p/eeebc735514b" target="_blank" rel="noopener">树莓派无法开机？</a></li><li><a href="http://shumeipai.nxez.com/2018/08/31/raspberry-pi-vnc-viewer-configuration-tutorial.html" target="_blank" rel="noopener">树莓派VNC Viewer远程桌面配置教程</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1b81c224.html">https://mds1455975151.github.io/archives/1b81c224.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 树莓派 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> Raspberry Pi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>福利贴01:免费FRP内网穿透工具</title>
      <link href="/archives/926ff624.html"/>
      <url>/archives/926ff624.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>福利贴01:免费FRP内网穿透工具</p></blockquote><a id="more"></a><p><a href="https://www.freefrp.xyz:444/" target="_blank" rel="noopener">https://www.freefrp.xyz:444/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/926ff624.html">https://mds1455975151.github.io/archives/926ff624.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 福利贴 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 福利贴 </tag>
            
            <tag> FRP </tag>
            
            <tag> 内网穿透 </tag>
            
            <tag> 无公网IP </tag>
            
            <tag> 花生壳 </tag>
            
            <tag> ngrok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>电影2019</title>
      <link href="/archives/2a14730.html"/>
      <url>/archives/2a14730.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><h1 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h1><ul><li><del>无双</del></li><li><del>天劫逃生</del></li><li><del>星际穿越</del></li><li><del>罪爱</del></li><li><del>脱缰之马</del></li><li><del>偷心女盗</del></li><li><del>黑衣人：全球追缉</del></li><li><del>寄生虫</del></li><li><del>移动城市：致命引擎</del></li><li><del>X战警：黑凤凰</del></li><li><strong>燃点</strong>(期待)</li><li><strong>窃听风暴</strong>(期待)</li><li><strong>无懈可击</strong>(期待)</li><li><strong>一切为了她</strong>(期待)</li><li><strong>勇敢的人</strong>(期待)</li><li><strong>四兄弟</strong>(期待)</li><li><strong>超级礼物 超级人生</strong>(期待)</li><li><strong>赌王之王</strong>(期待)</li><li><strong>重生男人</strong>(期待)</li><li><strong>神鬼奇谋</strong>(期待)</li><li>战栗空间</li><li><strong>丑闻</strong>韩国</li><li><strong>门锁</strong>韩国</li><li><strong>浪潮</strong></li></ul><h1 id="动漫"><a href="#动漫" class="headerlink" title="动漫"></a>动漫</h1><ul><li><strong>风语咒</strong></li><li><strong>精灵旅社3：疯狂假期</strong></li></ul><h1 id="电视剧"><a href="#电视剧" class="headerlink" title="电视剧"></a>电视剧</h1><ul><li><strong>怒晴湘西</strong></li><li><strong>长安十二时辰</strong></li><li><strong>日剧：轮到你了</strong></li><li><strong>风光大嫁</strong></li></ul><h1 id="美剧"><a href="#美剧" class="headerlink" title="美剧"></a>美剧</h1><ul><li><strong>盲点</strong></li><li><strong>黑洞频率</strong></li><li><strong>性教育第一季</strong></li></ul><h1 id="综艺节目"><a href="#综艺节目" class="headerlink" title="综艺节目"></a>综艺节目</h1><ul><li><strong>风味人间</strong></li><li><strong>风味原产地：潮汕</strong></li><li><strong>宵夜江湖</strong></li><li><strong>非正式会谈</strong></li></ul><h1 id="动漫-1"><a href="#动漫-1" class="headerlink" title="动漫"></a>动漫</h1><ul><li><strong>斗罗大陆</strong></li><li><strong>不良人3</strong></li><li><strong>哪吒 电影院</strong></li><li><strong>爱宠大机密2 电影院</strong></li></ul><h1 id="纪录片"><a href="#纪录片" class="headerlink" title="纪录片"></a>纪录片</h1><ul><li><del>美国工程-曹德旺</del></li></ul><h1 id="小说"><a href="#小说" class="headerlink" title="小说"></a>小说</h1><h1 id="音频-喜马拉雅"><a href="#音频-喜马拉雅" class="headerlink" title="音频(喜马拉雅)"></a>音频(喜马拉雅)</h1><ul><li>佛度有缘人</li><li>晓说</li><li>观复嘟嘟 马未都</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2a14730.html">https://mds1455975151.github.io/archives/2a14730.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电影 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏界名称解释(转)</title>
      <link href="/archives/78b6d9db.html"/>
      <url>/archives/78b6d9db.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏界名称解释</p></blockquote><a id="more"></a><p><img src="/archives/78b6d9db/01.jpg" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/78b6d9db.html">https://mds1455975151.github.io/archives/78b6d9db.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 名称解释 </tag>
            
            <tag> 独立游戏 </tag>
            
            <tag> 小众游戏 </tag>
            
            <tag> 卡牌 </tag>
            
            <tag> 激活码测试 </tag>
            
            <tag> 自研引擎 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搬瓦工VPS</title>
      <link href="/archives/d31e7a12.html"/>
      <url>/archives/d31e7a12.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>搬瓦工VPS</p></blockquote><a id="more"></a><h1 id="搬瓦工VPS概述"><a href="#搬瓦工VPS概述" class="headerlink" title="搬瓦工VPS概述"></a>搬瓦工VPS概述</h1><p>搬瓦工(BandwagonHost) VPS，隶属于美国知名主机提供商IT7.NET公司旗下，由于其具有超低廉的价格和超高品质的服务，一直倍受中国用户好评。搬瓦工(BandwagonHost)VPS在中国市场占有率也是遥遥领先，对新手操作也十分友好，甚至是许多国人的第一台VPS。</p><p>  2017年后，搬瓦工逐步从低端OpenVZ方案升级为了KVM方案，并针对中国用户非常关心的网络连接质量做了大量优化，先后推出 中国联通、电信直连优化方案和针对电信网络特别优化的CN2方案。中美间访问仅需 170ms。</p><blockquote><p>搬瓦工现已推出支付宝(Alipay)付款，无需信用卡即可轻松付款。</p></blockquote><h1 id="机房选择"><a href="#机房选择" class="headerlink" title="机房选择"></a>机房选择</h1><p>搬瓦工VPS主要有洛杉矶、凤凰城、荷兰、加拿大等9个全球机房<br>美国西海岸4个[首选]：洛杉矶QNET、洛杉矶MCOM、硅谷费利蒙(Fremont)、凤凰城(Phoenix)<br>其他4处为：纽约(New York)、佛罗里达(Florida)、加拿大温哥华、荷兰阿姆斯特丹</p><h1 id="方案选择"><a href="#方案选择" class="headerlink" title="方案选择"></a>方案选择</h1><h1 id="购买教程"><a href="#购买教程" class="headerlink" title="购买教程"></a>购买教程</h1><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d31e7a12.html">https://mds1455975151.github.io/archives/d31e7a12.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> GFW </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻墙 </tag>
            
            <tag> 搬瓦工 </tag>
            
            <tag> VPS </tag>
            
            <tag> 科学上网 </tag>
            
            <tag> KVM </tag>
            
            <tag> OpenVZ </tag>
            
            <tag> BandwagonHost </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Packer之Packer应用场景及常用概念介绍</title>
      <link href="/archives/22e81506.html"/>
      <url>/archives/22e81506.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Packer之Packer应用场景及常用概念介绍</p></blockquote><a id="more"></a><h1 id="Packer应用场景分析"><a href="#Packer应用场景分析" class="headerlink" title="Packer应用场景分析"></a>Packer应用场景分析</h1><p><img src="/archives/22e81506/03.png" alt></p><h2 id="场景1：自定义镜像"><a href="#场景1：自定义镜像" class="headerlink" title="场景1：自定义镜像"></a>场景1：自定义镜像</h2><p>用户需要定制特定版本的操作系统镜像，制作过程复杂，技术要求高，而且制作周期长。而使用packer，镜像的上传变的自动化，并且提供了一些可以参考的基础模板，用户只需要修改源ISO，就可以创建出指定版本的基础镜像，大大降低了镜像制作的门槛。<br><img src="/archives/22e81506/01.png" alt></p><h2 id="场景2：镜像更安全，制作更效率"><a href="#场景2：镜像更安全，制作更效率" class="headerlink" title="场景2：镜像更安全，制作更效率"></a>场景2：镜像更安全，制作更效率</h2><p>镜像市场中第三方镜像包含的内容是什么，对平台和用户都是不透明的。无法清晰的看到镜像中是否有安全隐患。为了确保安全，需要进行大量的安全扫描，一方面，使用发布第三方镜像的周期更长，另一方面，通过扫描二进制文件，很难完全避免安全风险。通过packer模板文件制作的镜像，我们可以清晰的看到脚本中执行的命令，相比二进制文件，安全扫描也更容易，同时也方便做镜像的版本管理，及多平台的镜像制作，提高镜像制作效率，不需要一遍遍的手动制作。</p><h2 id="场景3：弹性伸缩场景下，镜像的制作问题"><a href="#场景3：弹性伸缩场景下，镜像的制作问题" class="headerlink" title="场景3：弹性伸缩场景下，镜像的制作问题"></a>场景3：弹性伸缩场景下，镜像的制作问题</h2><p>在弹性伸缩场景中，镜像的生成是否方便高效起着重要的作用，当检测到工作负载达到阀值的时候，需要使用镜像来生成新的实例，当弹性伸缩的应用数量达到一定规模的时候，通过手工来创建镜像是难以接受的。特别是当需要升级应用时，如果使用传统的方式，直接在运行时实例上在线升级应用，一方面，在线升级的速度较慢，而且会影响在线用户的检验，另一方面，当出现错误的时候，回滚也比较困难，很容易形成较长时间的当机，而采用Packer,结合Jenkins和Terraform等工具，能够将应用的从代码到镜像升级，产生更新后实例的过程完全自动化。当Jenkins检测到有代码提交时，可以触发Packer根据模板使用更新后代码创建新的镜像，然后Jenkins触发Terraform来创建新ECS实例，将新实例加入伸缩组，并将旧实例移出伸缩组，这样就完成了应用的更新，当检测到新代码出现问题的时候，又可以将旧实例重新加入伸缩组而移除新实例来完成回滚。<br><img src="/archives/22e81506/02.png" alt></p><h1 id="Packer术语"><a href="#Packer术语" class="headerlink" title="Packer术语"></a>Packer术语</h1><ul><li><p>artifacts<br>单个构建的结果，通常是一组ID或文件来表示机器images。每个构建器都会生成一个工件。例如，对于Amazon EC2构建器，工件时一组AMI ID。对于VMware构建器，工件时包含已创建虚拟机的文件目录</p></li><li><p>builds<br>是一项单一任务，最终为单个平台生成images。多个构建并行运行。句子中的用法示例：packer构建生成了一个AMI来运行我们的web应用程序。或者packer现在正在为VMware，AWS或VirtualBox运行构建。</p></li><li><p>builders<br>是Packer组件，能够为单个平台创建机器images。构建器读取一些配置并使用它来运行和生成机器images。构建器作为构建的一部分被调用，以便创建实际的结果images。示例构建器包括VMware，AWS或VirtualBox。可以以插件的形式创建构建器并将其添加到Packer。</p></li><li><p>Commands<br>是Packer执行某项工作的程序的子命令。示例命令是build，它被调用为packer build。packer附带一组开箱即用的命令，以便定义其命令行界面。</p></li><li><p>post-Processors<br>Packer的组件，它获取构建器或其他后处理器的结果，并处理该组件以创建新工件。后处理器的示例是压缩以压缩工件，上传到上载工件等。</p></li><li><p>Provisioners<br>Packer的组件是在该机器被转换为静态映像之前在正在运行的机器中安装和配置软件的组件。他们执行使图像包含有用软件的主要工作。示例配置文件包括shell脚本，Chef，Puppet等。</p></li><li><p>Templates<br>是JSON文件，它通过配置Packer的各种组件来定义一个或多个构建。Packer能够读取模板并使用该信息并行创建多个机器映像。</p></li></ul><h1 id="模板文件案例讲解"><a href="#模板文件案例讲解" class="headerlink" title="模板文件案例讲解"></a>模板文件案例讲解</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># cat template.json</span><br><span class="line">&#123;</span><br><span class="line"> &quot;variables&quot;: &#123;</span><br><span class="line">       &quot;access_key&quot;: &quot;&#123;&#123;env `ALICLOUD_ACCESS_KEY`&#125;&#125;&quot;,</span><br><span class="line">       &quot;secret_key&quot;: &quot;&#123;&#123;env `ALICLOUD_SECRET_KEY`&#125;&#125;&quot;</span><br><span class="line">     &#125;,</span><br><span class="line"> &quot;builders&quot;: [&#123;</span><br><span class="line">       &quot;type&quot;:&quot;alicloud-ecs&quot;,</span><br><span class="line">       &quot;access_key&quot;:&quot;&#123;&#123;user `access_key`&#125;&#125;&quot;,</span><br><span class="line">       &quot;secret_key&quot;:&quot;&#123;&#123;user `secret_key`&#125;&#125;&quot;,</span><br><span class="line">       &quot;region&quot;:&quot;cn-beijing&quot;,</span><br><span class="line">       &quot;image_name&quot;:&quot;codepipe_demo&quot;,</span><br><span class="line">       &quot;source_image&quot;:&quot;ubuntu_16_0402_64_40G_alibase_20170711.vhd&quot;,</span><br><span class="line">       &quot;ssh_username&quot;:&quot;root&quot;,</span><br><span class="line">       &quot;instance_type&quot;:&quot;ecs.n1.medium&quot;,</span><br><span class="line">       &quot;io_optimized&quot;:&quot;true&quot;,</span><br><span class="line">       &quot;image_force_delete&quot;:&quot;true&quot;,</span><br><span class="line">       &quot;ssh_password&quot;:&quot;Test12345&quot;</span><br><span class="line">     &#125;],</span><br><span class="line"> &quot;provisioners&quot;: [&#123;</span><br><span class="line">      &quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">      &quot;inline&quot;: [</span><br><span class="line">             &quot;apt-get update -yy&quot;,</span><br><span class="line">             &quot;apt-get install openjdk-8-jdk tomcat8 -yy&quot;,</span><br><span class="line">             &quot;mkdir -p /var/lib/tomcat8/webapps/&quot;</span><br><span class="line">            ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">             &quot;type&quot;: &quot;file&quot;,</span><br><span class="line">             &quot;source&quot;: &quot;target/demo.war&quot;,</span><br><span class="line">             &quot;destination&quot;: &quot;/var/lib/tomcat8/webapps/&quot;</span><br><span class="line">      &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注释：</p><ul><li>variables：部分用于定义各类变量，最常用的各个平台的API key及secret、region等等</li><li>builders:部分为单个平台images构建镜像所需的配置信息</li><li>provisioners: 机器在被转为静态镜像之前进行的自定义软件及配置操作，可以是shell脚本，或者其他配置管理工具Ansible、Chef等编排脚本。</li></ul></blockquote><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/22e81506.html">https://mds1455975151.github.io/archives/22e81506.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Packer </tag>
            
            <tag> 镜像制作 </tag>
            
            <tag> Aliyun </tag>
            
            <tag> 资源编排 </tag>
            
            <tag> google Cloud </tag>
            
            <tag> googlecompute </tag>
            
            <tag> 应用场景 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Packer之实战Packer创建Jenkins镜像</title>
      <link href="/archives/6a8f9b85.html"/>
      <url>/archives/6a8f9b85.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Packer之实战Packer创建Jenkins镜像</p></blockquote><a id="more"></a><h1 id="准备内容"><a href="#准备内容" class="headerlink" title="准备内容"></a>准备内容</h1><ul><li>google cloud账号一个</li><li>本地服务器安装Packer，请<a href="http://www.mdslq.cn/archives/bc880644.html" target="_blank" rel="noopener">安装Packer</a></li></ul><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="创建Service-Account"><a href="#创建Service-Account" class="headerlink" title="创建Service Account"></a>创建Service Account</h2><p>google云允许你创建并下载一个认证文件，我们可以使用Packer在任何地方使用googlecompute进行构建操作。根据以下步骤获取认证文件：</p><ul><li>登录<a href="https://console.developers.google.com/" target="_blank" rel="noopener">Google Developers Console</a>选择一个项目</li><li>点击IAM和管理–服务账号</li><li>点击创建服务账号，输入服务账号–&gt;给服务账号授予项目权限(可选)–&gt;给用户授予访问服务账号权限(可选)</li><li>最后选择刚创建的服务账号，点击操作部分选择创建密钥下载json或者P12格式密钥文件</li></ul><h2 id="编写模板文件"><a href="#编写模板文件" class="headerlink" title="编写模板文件"></a>编写模板文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># cat jenkins.json</span><br><span class="line">&#123;</span><br><span class="line"> &quot;builders&quot;: [&#123;</span><br><span class="line">       &quot;type&quot;: &quot;googlecompute&quot;,</span><br><span class="line">       &quot;account_file&quot;: &quot;account.json&quot;,</span><br><span class="line">       &quot;project_id&quot;: &quot;axiomatic-port-221011&quot;,</span><br><span class="line">       &quot;source_image_family&quot;: &quot;centos-7&quot;,</span><br><span class="line">       &quot;ssh_username&quot;: &quot;packer&quot;,</span><br><span class="line">       &quot;machine_type&quot;: &quot;n1-standard-1&quot;,</span><br><span class="line">       &quot;image_name&quot;: &quot;centos-4-jenkins-&#123;&#123; timestamp &#125;&#125;&quot;,   # 自定义images名称，默认为packer-&#123;&#123; timestamp &#125;&#125;</span><br><span class="line">       &quot;zone&quot;: &quot;asia-east2-a&quot;</span><br><span class="line">     &#125;],</span><br><span class="line"> &quot;provisioners&quot;: [&#123;</span><br><span class="line">      &quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">      &quot;inline&quot;: [</span><br><span class="line">             &quot;sudo yum update -y&quot;,</span><br><span class="line">             &quot;sudo yum install -y java-1.8.0-openjdk wget&quot;,</span><br><span class="line">             &quot;wget https://pkg.jenkins.io/redhat-stable/jenkins.repo&quot;,</span><br><span class="line">             &quot;sudo cp jenkins.repo /etc/yum.repos.d/jenkins.repo&quot;,</span><br><span class="line">             &quot;sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key&quot;,</span><br><span class="line">             &quot;sudo yum install -y jenkins&quot;,</span><br><span class="line">             &quot;sudo /etc/init.d/jenkins start&quot;,</span><br><span class="line">             &quot;sudo systemctl enable jenkins&quot;</span><br><span class="line">            ]</span><br><span class="line">      &#125;</span><br><span class="line">      ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="执行构建命令"><a href="#执行构建命令" class="headerlink" title="执行构建命令"></a>执行构建命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br></pre></td><td class="code"><pre><span class="line"># /usr/local/terraform/bin/packer validate jenkins.json   # 执行前检查下语法，避免无用功</span><br><span class="line">Template validated successfully.</span><br><span class="line"># /usr/local/terraform/bin/packer build jenkins.json</span><br><span class="line">googlecompute output will be in this color.</span><br><span class="line"></span><br><span class="line">==&gt; googlecompute: Checking image does not exist...</span><br><span class="line">==&gt; googlecompute: Creating temporary SSH key for instance...</span><br><span class="line">==&gt; googlecompute: Using image: centos-7-v20181011                      # 选择源镜像</span><br><span class="line">==&gt; googlecompute: Creating instance...</span><br><span class="line">    googlecompute: Loading zone: asia-east2-a                           # 指定的可用区</span><br><span class="line">    googlecompute: Loading machine type: n1-standard-1                  # 指定的配置型号</span><br><span class="line">    googlecompute: Requesting instance creation...                      # 开始创建实例</span><br><span class="line">    googlecompute: Waiting for creation operation to complete...</span><br><span class="line">    googlecompute: Instance has been created!</span><br><span class="line">==&gt; googlecompute: Waiting for the instance to become running...</span><br><span class="line">    googlecompute: IP: 35.241.127.139</span><br><span class="line">==&gt; googlecompute: Using ssh communicator to connect: 35.241.127.139</span><br><span class="line">==&gt; googlecompute: Waiting for SSH to become available...</span><br><span class="line">==&gt; googlecompute: Connected to SSH!</span><br><span class="line">==&gt; googlecompute: Provisioning with shell script: /tmp/packer-shell044651127   # 开始进行自定义软件安装及配置</span><br><span class="line">    googlecompute: Loaded plugins: fastestmirror</span><br><span class="line">    googlecompute: Determining fastest mirrors</span><br><span class="line">    googlecompute:  * base: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line">    googlecompute:  * extras: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * updates: mirror.fileplanet.com</span><br><span class="line">    googlecompute: Resolving Dependencies</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package google-cloud-sdk.noarch 0:220.0.0-1.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package google-cloud-sdk.noarch 0:223.0.0-1.el7 will be an update</span><br><span class="line">    googlecompute: ---&gt; Package google-compute-engine.noarch 0:2.8.6-1.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package google-compute-engine.noarch 0:2.8.8-1.el7 will be an update</span><br><span class="line">    googlecompute: ---&gt; Package python-google-compute-engine.noarch 0:2.8.6-1.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package python-google-compute-engine.noarch 0:2.8.8-1.el7 will be an update</span><br><span class="line">    googlecompute: ---&gt; Package tzdata.noarch 0:2018e-3.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package tzdata.noarch 0:2018f-2.el7 will be an update</span><br><span class="line">    googlecompute: --&gt; Finished Dependency Resolution</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependencies Resolved</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute:  Package                      Arch   Version         Repository            Size</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Updating:</span><br><span class="line">    googlecompute:  google-cloud-sdk             noarch 223.0.0-1.el7   google-cloud-sdk      29 M</span><br><span class="line">    googlecompute:  google-compute-engine        noarch 2.8.8-1.el7     google-cloud-compute  16 k</span><br><span class="line">    googlecompute:  python-google-compute-engine noarch 2.8.8-1.el7     google-cloud-compute 100 k</span><br><span class="line">    googlecompute:  tzdata                       noarch 2018f-2.el7     updates              484 k</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Transaction Summary</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Upgrade  4 Packages</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Total download size: 29 M</span><br><span class="line">    googlecompute: Downloading packages:</span><br><span class="line">    googlecompute: Delta RPMs disabled because /usr/bin/applydeltarpm not installed.</span><br><span class="line">    googlecompute: --------------------------------------------------------------------------------</span><br><span class="line">    googlecompute: Total                                               21 MB/s |  29 MB  00:01</span><br><span class="line">    googlecompute: Running transaction check</span><br><span class="line">    googlecompute: Running transaction test</span><br><span class="line">    googlecompute: Transaction test succeeded</span><br><span class="line">    googlecompute: Running transaction</span><br><span class="line">    googlecompute:   Updating   : python-google-compute-engine-2.8.8-1.el7.noarch              1/8</span><br><span class="line">    googlecompute:   Updating   : google-compute-engine-2.8.8-1.el7.noarch                     2/8</span><br><span class="line">    googlecompute:   Updating   : tzdata-2018f-2.el7.noarch                                    3/8</span><br><span class="line">    googlecompute:   Updating   : google-cloud-sdk-223.0.0-1.el7.noarch                        4/8</span><br><span class="line">    googlecompute:   Cleanup    : google-compute-engine-2.8.6-1.el7.noarch                     5/8</span><br><span class="line">    googlecompute:   Cleanup    : python-google-compute-engine-2.8.6-1.el7.noarch              6/8</span><br><span class="line">    googlecompute:   Cleanup    : tzdata-2018e-3.el7.noarch                                    7/8</span><br><span class="line">    googlecompute:   Cleanup    : google-cloud-sdk-220.0.0-1.el7.noarch                        8/8</span><br><span class="line">    googlecompute:   Verifying  : google-compute-engine-2.8.8-1.el7.noarch                     1/8</span><br><span class="line">    googlecompute:   Verifying  : python-google-compute-engine-2.8.8-1.el7.noarch              2/8</span><br><span class="line">    googlecompute:   Verifying  : google-cloud-sdk-223.0.0-1.el7.noarch                        3/8</span><br><span class="line">    googlecompute:   Verifying  : tzdata-2018f-2.el7.noarch                                    4/8</span><br><span class="line">    googlecompute:   Verifying  : google-cloud-sdk-220.0.0-1.el7.noarch                        5/8</span><br><span class="line">    googlecompute:   Verifying  : python-google-compute-engine-2.8.6-1.el7.noarch              6/8</span><br><span class="line">    googlecompute:   Verifying  : tzdata-2018e-3.el7.noarch                                    7/8</span><br><span class="line">    googlecompute:   Verifying  : google-compute-engine-2.8.6-1.el7.noarch                     8/8</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Updated:</span><br><span class="line">    googlecompute:   google-cloud-sdk.noarch 0:223.0.0-1.el7</span><br><span class="line">    googlecompute:   google-compute-engine.noarch 0:2.8.8-1.el7</span><br><span class="line">    googlecompute:   python-google-compute-engine.noarch 0:2.8.8-1.el7</span><br><span class="line">    googlecompute:   tzdata.noarch 0:2018f-2.el7</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Complete!</span><br><span class="line">    googlecompute: Loaded plugins: fastestmirror</span><br><span class="line">    googlecompute: Loading mirror speeds from cached hostfile</span><br><span class="line">    googlecompute:  * base: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line">    googlecompute:  * extras: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * updates: mirror.fileplanet.com</span><br><span class="line">    googlecompute: Resolving Dependencies</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package java-1.8.0-openjdk.x86_64 1:1.8.0.191.b12-0.el7_5 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: java-1.8.0-openjdk-headless(x86-64) = 1:1.8.0.191.b12-0.el7_5 for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: xorg-x11-fonts-Type1 for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libpng15.so.15(PNG15_0)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjvm.so(SUNWprivate_1.1)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjpeg.so.62(LIBJPEG_6.2)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjava.so(SUNWprivate_1.1)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: fontconfig(x86-64) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libpng15.so.15()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjvm.so()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjpeg.so.62()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjava.so()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libgif.so.4()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXtst.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXrender.so.1()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXi.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXext.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXcomposite.so.1()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libX11.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package wget.x86_64 0:1.14-15.el7_4.1 will be installed</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package fontconfig.x86_64 0:2.10.95-11.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: fontpackages-filesystem for package: fontconfig-2.10.95-11.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: font(:lang=en) for package: fontconfig-2.10.95-11.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package giflib.x86_64 0:4.1.6-9.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libSM.so.6()(64bit) for package: giflib-4.1.6-9.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libICE.so.6()(64bit) for package: giflib-4.1.6-9.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package java-1.8.0-openjdk-headless.x86_64 1:1.8.0.191.b12-0.el7_5 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: tzdata-java &gt;= 2015d for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: copy-jdk-configs &gt;= 2.2 for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: lksctp-tools(x86-64) for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: jpackage-utils for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package libX11.x86_64 0:1.6.5-1.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libX11-common &gt;= 1.6.5-1.el7 for package: libX11-1.6.5-1.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libxcb.so.1()(64bit) for package: libX11-1.6.5-1.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package libXcomposite.x86_64 0:0.4.4-4.1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXext.x86_64 0:1.3.3-3.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXi.x86_64 0:1.7.9-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXrender.x86_64 0:0.9.10-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXtst.x86_64 0:1.2.3-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libjpeg-turbo.x86_64 0:1.2.90-5.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libpng.x86_64 2:1.5.13-7.el7_2 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package xorg-x11-fonts-Type1.noarch 0:7.5-9.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: ttmkfdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: ttmkfdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: mkfontdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: mkfontdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package copy-jdk-configs.noarch 0:3.3-10.el7_5 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package fontpackages-filesystem.noarch 0:1.44-8.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package javapackages-tools.noarch 0:3.4.1-11.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: python-javapackages = 3.4.1-11.el7 for package: javapackages-tools-3.4.1-11.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libxslt for package: javapackages-tools-3.4.1-11.el7.noarch</span><br><span class="line">    googlecompute: ---&gt; Package libICE.x86_64 0:1.0.9-9.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libSM.x86_64 0:1.2.2-2.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libX11-common.noarch 0:1.6.5-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libxcb.x86_64 0:1.12-1.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXau.so.6()(64bit) for package: libxcb-1.12-1.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package lksctp-tools.x86_64 0:1.0.17-2.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package lyx-fonts.noarch 0:2.2.3-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package ttmkfdir.x86_64 0:3.0.9-42.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package tzdata-java.noarch 0:2018f-2.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package xorg-x11-font-utils.x86_64 1:7.5-20.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libfontenc.so.1()(64bit) for package: 1:xorg-x11-font-utils-7.5-20.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXfont.so.1()(64bit) for package: 1:xorg-x11-font-utils-7.5-20.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package libXau.x86_64 0:1.0.8-2.1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXfont.x86_64 0:1.5.2-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libfontenc.x86_64 0:1.1.3-3.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libxslt.x86_64 0:1.1.28-5.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package python-javapackages.noarch 0:3.4.1-11.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: python-lxml for package: python-javapackages-3.4.1-11.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package python-lxml.x86_64 0:3.2.1-4.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Finished Dependency Resolution</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependencies Resolved</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute:  Package                      Arch    Version                    Repository</span><br><span class="line">    googlecompute:                                                                            Size</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Installing:</span><br><span class="line">    googlecompute:  java-1.8.0-openjdk           x86_64  1:1.8.0.191.b12-0.el7_5    updates  252 k</span><br><span class="line">    googlecompute:  wget                         x86_64  1.14-15.el7_4.1            base     547 k</span><br><span class="line">    googlecompute: Installing for dependencies:</span><br><span class="line">    googlecompute:  copy-jdk-configs             noarch  3.3-10.el7_5               updates   21 k</span><br><span class="line">    googlecompute:  fontconfig                   x86_64  2.10.95-11.el7             base     229 k</span><br><span class="line">    googlecompute:  fontpackages-filesystem      noarch  1.44-8.el7                 base     9.9 k</span><br><span class="line">    googlecompute:  giflib                       x86_64  4.1.6-9.el7                base      40 k</span><br><span class="line">    googlecompute:  java-1.8.0-openjdk-headless  x86_64  1:1.8.0.191.b12-0.el7_5    updates   32 M</span><br><span class="line">    googlecompute:  javapackages-tools           noarch  3.4.1-11.el7               base      73 k</span><br><span class="line">    googlecompute:  libICE                       x86_64  1.0.9-9.el7                base      66 k</span><br><span class="line">    googlecompute:  libSM                        x86_64  1.2.2-2.el7                base      39 k</span><br><span class="line">    googlecompute:  libX11                       x86_64  1.6.5-1.el7                base     606 k</span><br><span class="line">    googlecompute:  libX11-common                noarch  1.6.5-1.el7                base     164 k</span><br><span class="line">    googlecompute:  libXau                       x86_64  1.0.8-2.1.el7              base      29 k</span><br><span class="line">    googlecompute:  libXcomposite                x86_64  0.4.4-4.1.el7              base      22 k</span><br><span class="line">    googlecompute:  libXext                      x86_64  1.3.3-3.el7                base      39 k</span><br><span class="line">    googlecompute:  libXfont                     x86_64  1.5.2-1.el7                base     152 k</span><br><span class="line">    googlecompute:  libXi                        x86_64  1.7.9-1.el7                base      40 k</span><br><span class="line">    googlecompute:  libXrender                   x86_64  0.9.10-1.el7               base      26 k</span><br><span class="line">    googlecompute:  libXtst                      x86_64  1.2.3-1.el7                base      20 k</span><br><span class="line">    googlecompute:  libfontenc                   x86_64  1.1.3-3.el7                base      31 k</span><br><span class="line">    googlecompute:  libjpeg-turbo                x86_64  1.2.90-5.el7               base     134 k</span><br><span class="line">    googlecompute:  libpng                       x86_64  2:1.5.13-7.el7_2           base     213 k</span><br><span class="line">    googlecompute:  libxcb                       x86_64  1.12-1.el7                 base     211 k</span><br><span class="line">    googlecompute:  libxslt                      x86_64  1.1.28-5.el7               base     242 k</span><br><span class="line">    googlecompute:  lksctp-tools                 x86_64  1.0.17-2.el7               base      88 k</span><br><span class="line">    googlecompute:  lyx-fonts                    noarch  2.2.3-1.el7                epel     159 k</span><br><span class="line">    googlecompute:  python-javapackages          noarch  3.4.1-11.el7               base      31 k</span><br><span class="line">    googlecompute:  python-lxml                  x86_64  3.2.1-4.el7                base     758 k</span><br><span class="line">    googlecompute:  ttmkfdir                     x86_64  3.0.9-42.el7               base      48 k</span><br><span class="line">    googlecompute:  tzdata-java                  noarch  2018f-2.el7                updates  186 k</span><br><span class="line">    googlecompute:  xorg-x11-font-utils          x86_64  1:7.5-20.el7               base      87 k</span><br><span class="line">    googlecompute:  xorg-x11-fonts-Type1         noarch  7.5-9.el7                  base     521 k</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Transaction Summary</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Install  2 Packages (+30 Dependent packages)</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Total download size: 37 M</span><br><span class="line">    googlecompute: Installed size: 117 M</span><br><span class="line">    googlecompute: Downloading packages:</span><br><span class="line">    googlecompute: --------------------------------------------------------------------------------</span><br><span class="line">    googlecompute: Total                                              7.2 MB/s |  37 MB  00:05</span><br><span class="line">    googlecompute: Running transaction check</span><br><span class="line">    googlecompute: Running transaction test</span><br><span class="line">    googlecompute: Transaction test succeeded</span><br><span class="line">    googlecompute: Running transaction</span><br><span class="line">    googlecompute:   Installing : libfontenc-1.1.3-3.el7.x86_64                               1/32</span><br><span class="line">    googlecompute:   Installing : libxslt-1.1.28-5.el7.x86_64                                 2/32</span><br><span class="line">    googlecompute:   Installing : fontpackages-filesystem-1.44-8.el7.noarch                   3/32</span><br><span class="line">    googlecompute:   Installing : libjpeg-turbo-1.2.90-5.el7.x86_64                           4/32</span><br><span class="line">    googlecompute:   Installing : libICE-1.0.9-9.el7.x86_64                                   5/32</span><br><span class="line">    googlecompute:   Installing : libSM-1.2.2-2.el7.x86_64                                    6/32</span><br><span class="line">    googlecompute:   Installing : lyx-fonts-2.2.3-1.el7.noarch                                7/32</span><br><span class="line">    googlecompute:   Installing : fontconfig-2.10.95-11.el7.x86_64                            8/32</span><br><span class="line">    googlecompute:   Installing : python-lxml-3.2.1-4.el7.x86_64                              9/32</span><br><span class="line">    googlecompute:   Installing : python-javapackages-3.4.1-11.el7.noarch                    10/32</span><br><span class="line">    googlecompute:   Installing : javapackages-tools-3.4.1-11.el7.noarch                     11/32</span><br><span class="line">    googlecompute:   Installing : libXfont-1.5.2-1.el7.x86_64                                12/32</span><br><span class="line">    googlecompute:   Installing : 1:xorg-x11-font-utils-7.5-20.el7.x86_64                    13/32</span><br><span class="line">    googlecompute:   Installing : libXau-1.0.8-2.1.el7.x86_64                                14/32</span><br><span class="line">    googlecompute:   Installing : libxcb-1.12-1.el7.x86_64                                   15/32</span><br><span class="line">    googlecompute:   Installing : libX11-common-1.6.5-1.el7.noarch                           16/32</span><br><span class="line">    googlecompute:   Installing : libX11-1.6.5-1.el7.x86_64                                  17/32</span><br><span class="line">    googlecompute:   Installing : libXext-1.3.3-3.el7.x86_64                                 18/32</span><br><span class="line">    googlecompute:   Installing : libXi-1.7.9-1.el7.x86_64                                   19/32</span><br><span class="line">    googlecompute:   Installing : libXtst-1.2.3-1.el7.x86_64                                 20/32</span><br><span class="line">    googlecompute:   Installing : giflib-4.1.6-9.el7.x86_64                                  21/32</span><br><span class="line">    googlecompute:   Installing : libXrender-0.9.10-1.el7.x86_64                             22/32</span><br><span class="line">    googlecompute:   Installing : libXcomposite-0.4.4-4.1.el7.x86_64                         23/32</span><br><span class="line">    googlecompute:   Installing : lksctp-tools-1.0.17-2.el7.x86_64                           24/32</span><br><span class="line">    googlecompute:   Installing : tzdata-java-2018f-2.el7.noarch                             25/32</span><br><span class="line">    googlecompute:   Installing : copy-jdk-configs-3.3-10.el7_5.noarch                       26/32</span><br><span class="line">    googlecompute:   Installing : 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_   27/32</span><br><span class="line">    googlecompute:   Installing : ttmkfdir-3.0.9-42.el7.x86_64                               28/32</span><br><span class="line">    googlecompute:   Installing : xorg-x11-fonts-Type1-7.5-9.el7.noarch                      29/32</span><br><span class="line">    googlecompute:   Installing : 2:libpng-1.5.13-7.el7_2.x86_64                             30/32</span><br><span class="line">    googlecompute:   Installing : 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64          31/32</span><br><span class="line">    googlecompute:   Installing : wget-1.14-15.el7_4.1.x86_64                                32/32</span><br><span class="line">    googlecompute:   Verifying  : libXext-1.3.3-3.el7.x86_64                                  1/32</span><br><span class="line">    googlecompute:   Verifying  : libX11-1.6.5-1.el7.x86_64                                   2/32</span><br><span class="line">    googlecompute:   Verifying  : libXi-1.7.9-1.el7.x86_64                                    3/32</span><br><span class="line">    googlecompute:   Verifying  : libICE-1.0.9-9.el7.x86_64                                   4/32</span><br><span class="line">    googlecompute:   Verifying  : giflib-4.1.6-9.el7.x86_64                                   5/32</span><br><span class="line">    googlecompute:   Verifying  : libjpeg-turbo-1.2.90-5.el7.x86_64                           6/32</span><br><span class="line">    googlecompute:   Verifying  : libXrender-0.9.10-1.el7.x86_64                              7/32</span><br><span class="line">    googlecompute:   Verifying  : lyx-fonts-2.2.3-1.el7.noarch                                8/32</span><br><span class="line">    googlecompute:   Verifying  : libXfont-1.5.2-1.el7.x86_64                                 9/32</span><br><span class="line">    googlecompute:   Verifying  : python-lxml-3.2.1-4.el7.x86_64                             10/32</span><br><span class="line">    googlecompute:   Verifying  : 2:libpng-1.5.13-7.el7_2.x86_64                             11/32</span><br><span class="line">    googlecompute:   Verifying  : fontpackages-filesystem-1.44-8.el7.noarch                  12/32</span><br><span class="line">    googlecompute:   Verifying  : ttmkfdir-3.0.9-42.el7.x86_64                               13/32</span><br><span class="line">    googlecompute:   Verifying  : 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64          14/32</span><br><span class="line">    googlecompute:   Verifying  : copy-jdk-configs-3.3-10.el7_5.noarch                       15/32</span><br><span class="line">    googlecompute:   Verifying  : python-javapackages-3.4.1-11.el7.noarch                    16/32</span><br><span class="line">    googlecompute:   Verifying  : 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_   17/32</span><br><span class="line">    googlecompute:   Verifying  : libXcomposite-0.4.4-4.1.el7.x86_64                         18/32</span><br><span class="line">    googlecompute:   Verifying  : libXtst-1.2.3-1.el7.x86_64                                 19/32</span><br><span class="line">    googlecompute:   Verifying  : tzdata-java-2018f-2.el7.noarch                             20/32</span><br><span class="line">    googlecompute:   Verifying  : lksctp-tools-1.0.17-2.el7.x86_64                           21/32</span><br><span class="line">    googlecompute:   Verifying  : libxcb-1.12-1.el7.x86_64                                   22/32</span><br><span class="line">    googlecompute:   Verifying  : wget-1.14-15.el7_4.1.x86_64                                23/32</span><br><span class="line">    googlecompute:   Verifying  : libxslt-1.1.28-5.el7.x86_64                                24/32</span><br><span class="line">    googlecompute:   Verifying  : xorg-x11-fonts-Type1-7.5-9.el7.noarch                      25/32</span><br><span class="line">    googlecompute:   Verifying  : javapackages-tools-3.4.1-11.el7.noarch                     26/32</span><br><span class="line">    googlecompute:   Verifying  : libX11-common-1.6.5-1.el7.noarch                           27/32</span><br><span class="line">    googlecompute:   Verifying  : libXau-1.0.8-2.1.el7.x86_64                                28/32</span><br><span class="line">    googlecompute:   Verifying  : libSM-1.2.2-2.el7.x86_64                                   29/32</span><br><span class="line">    googlecompute:   Verifying  : fontconfig-2.10.95-11.el7.x86_64                           30/32</span><br><span class="line">    googlecompute:   Verifying  : libfontenc-1.1.3-3.el7.x86_64                              31/32</span><br><span class="line">    googlecompute:   Verifying  : 1:xorg-x11-font-utils-7.5-20.el7.x86_64                    32/32</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Installed:</span><br><span class="line">    googlecompute:   java-1.8.0-openjdk.x86_64 1:1.8.0.191.b12-0.el7_5</span><br><span class="line">    googlecompute:   wget.x86_64 0:1.14-15.el7_4.1</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependency Installed:</span><br><span class="line">    googlecompute:   copy-jdk-configs.noarch 0:3.3-10.el7_5</span><br><span class="line">    googlecompute:   fontconfig.x86_64 0:2.10.95-11.el7</span><br><span class="line">    googlecompute:   fontpackages-filesystem.noarch 0:1.44-8.el7</span><br><span class="line">    googlecompute:   giflib.x86_64 0:4.1.6-9.el7</span><br><span class="line">    googlecompute:   java-1.8.0-openjdk-headless.x86_64 1:1.8.0.191.b12-0.el7_5</span><br><span class="line">    googlecompute:   javapackages-tools.noarch 0:3.4.1-11.el7</span><br><span class="line">    googlecompute:   libICE.x86_64 0:1.0.9-9.el7</span><br><span class="line">    googlecompute:   libSM.x86_64 0:1.2.2-2.el7</span><br><span class="line">    googlecompute:   libX11.x86_64 0:1.6.5-1.el7</span><br><span class="line">    googlecompute:   libX11-common.noarch 0:1.6.5-1.el7</span><br><span class="line">    googlecompute:   libXau.x86_64 0:1.0.8-2.1.el7</span><br><span class="line">    googlecompute:   libXcomposite.x86_64 0:0.4.4-4.1.el7</span><br><span class="line">    googlecompute:   libXext.x86_64 0:1.3.3-3.el7</span><br><span class="line">    googlecompute:   libXfont.x86_64 0:1.5.2-1.el7</span><br><span class="line">    googlecompute:   libXi.x86_64 0:1.7.9-1.el7</span><br><span class="line">    googlecompute:   libXrender.x86_64 0:0.9.10-1.el7</span><br><span class="line">    googlecompute:   libXtst.x86_64 0:1.2.3-1.el7</span><br><span class="line">    googlecompute:   libfontenc.x86_64 0:1.1.3-3.el7</span><br><span class="line">    googlecompute:   libjpeg-turbo.x86_64 0:1.2.90-5.el7</span><br><span class="line">    googlecompute:   libpng.x86_64 2:1.5.13-7.el7_2</span><br><span class="line">    googlecompute:   libxcb.x86_64 0:1.12-1.el7</span><br><span class="line">    googlecompute:   libxslt.x86_64 0:1.1.28-5.el7</span><br><span class="line">    googlecompute:   lksctp-tools.x86_64 0:1.0.17-2.el7</span><br><span class="line">    googlecompute:   lyx-fonts.noarch 0:2.2.3-1.el7</span><br><span class="line">    googlecompute:   python-javapackages.noarch 0:3.4.1-11.el7</span><br><span class="line">    googlecompute:   python-lxml.x86_64 0:3.2.1-4.el7</span><br><span class="line">    googlecompute:   ttmkfdir.x86_64 0:3.0.9-42.el7</span><br><span class="line">    googlecompute:   tzdata-java.noarch 0:2018f-2.el7</span><br><span class="line">    googlecompute:   xorg-x11-font-utils.x86_64 1:7.5-20.el7</span><br><span class="line">    googlecompute:   xorg-x11-fonts-Type1.noarch 0:7.5-9.el7</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Complete!</span><br><span class="line">    googlecompute: --2018-11-06 07:42:41--  https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line">    googlecompute: Resolving pkg.jenkins.io (pkg.jenkins.io)... 52.202.51.185</span><br><span class="line">    googlecompute: Connecting to pkg.jenkins.io (pkg.jenkins.io)|52.202.51.185|:443... connected.</span><br><span class="line">    googlecompute: HTTP request sent, awaiting response... 200 OK</span><br><span class="line">    googlecompute: Length: 85</span><br><span class="line">    googlecompute: Saving to: ‘jenkins.repo’</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute:      0K                                                       100% 3.16M=0s</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: 2018-11-06 07:42:42 (3.16 MB/s) - ‘jenkins.repo’ saved [85/85]</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Loaded plugins: fastestmirror</span><br><span class="line">    googlecompute: Loading mirror speeds from cached hostfile</span><br><span class="line">    googlecompute:  * base: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line">    googlecompute:  * extras: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * updates: mirror.fileplanet.com</span><br><span class="line">    googlecompute: Resolving Dependencies</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package jenkins.noarch 0:2.138.2-1.1 will be installed</span><br><span class="line">    googlecompute: --&gt; Finished Dependency Resolution</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependencies Resolved</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute:  Package          Arch            Version                Repository        Size</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Installing:</span><br><span class="line">    googlecompute:  jenkins          noarch          2.138.2-1.1            jenkins           72 M</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Transaction Summary</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Install  1 Package</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Total download size: 72 M</span><br><span class="line">    googlecompute: Installed size: 72 M</span><br><span class="line">    googlecompute: Downloading packages:</span><br><span class="line">    googlecompute: Running transaction check</span><br><span class="line">    googlecompute: Running transaction test</span><br><span class="line">    googlecompute: Transaction test succeeded</span><br><span class="line">    googlecompute: Running transaction</span><br><span class="line">    googlecompute:   Installing : jenkins-2.138.2-1.1.noarch                                   1/1</span><br><span class="line">    googlecompute:   Verifying  : jenkins-2.138.2-1.1.noarch                                   1/1</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Installed:</span><br><span class="line">    googlecompute:   jenkins.noarch 0:2.138.2-1.1</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Complete!</span><br><span class="line">    googlecompute: Starting jenkins (via systemctl):  [  OK  ]</span><br><span class="line">    googlecompute: jenkins.service is not a native service, redirecting to /sbin/chkconfig.</span><br><span class="line">    googlecompute: Executing /sbin/chkconfig jenkins on</span><br><span class="line">==&gt; googlecompute: Deleting instance...</span><br><span class="line">    googlecompute: Instance has been deleted!</span><br><span class="line">==&gt; googlecompute: Creating image...</span><br><span class="line">==&gt; googlecompute: Deleting disk...</span><br><span class="line">    googlecompute: Disk has been deleted!</span><br><span class="line">Build &apos;googlecompute&apos; finished.</span><br><span class="line"></span><br><span class="line">==&gt; Builds finished. The artifacts of successful builds are:</span><br><span class="line">--&gt; googlecompute: A disk image was created: centos-4-jenkins-1541491568        # 输出镜像名称</span><br></pre></td></tr></table></figure><p><img src="/archives/6a8f9b85/01.png" alt></p><h2 id="验证镜像可用性"><a href="#验证镜像可用性" class="headerlink" title="验证镜像可用性"></a>验证镜像可用性</h2><p>利用terraform调用刚刚生成的镜像创建Jenkins服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"># cat main.tf</span><br><span class="line">resource &quot;google_compute_instance&quot; &quot;vm_instance&quot; &#123;</span><br><span class="line">  name         = &quot;jenkins-instance&quot;</span><br><span class="line">  machine_type = &quot;$&#123;var.machine_type&#125;&quot;</span><br><span class="line">  tags         = [&quot;instance&quot;]</span><br><span class="line"></span><br><span class="line">  boot_disk &#123;</span><br><span class="line">    initialize_params &#123;</span><br><span class="line">      image = &quot;$&#123;var.image&#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  network_interface &#123;</span><br><span class="line">    # A default network is created for all GCP projects</span><br><span class="line">    network = &quot;$&#123;google_compute_network.vpc_network.self_link&#125;&quot;</span><br><span class="line">    access_config = &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#-----------------------------------------------------------------------</span><br><span class="line">resource &quot;google_compute_network&quot; &quot;vpc_network&quot; &#123;</span><br><span class="line">  name                    = &quot;terraform-network&quot;</span><br><span class="line">  auto_create_subnetworks = &quot;true&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#-----------------------------------------------------------------------</span><br><span class="line">resource &quot;google_compute_firewall&quot; &quot;vpc_firewall&quot; &#123;</span><br><span class="line">  name    = &quot;terraform-firewall&quot;</span><br><span class="line">  network = &quot;$&#123;google_compute_network.vpc_network.name&#125;&quot;</span><br><span class="line"></span><br><span class="line">  allow &#123;</span><br><span class="line">    protocol = &quot;icmp&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  allow &#123;</span><br><span class="line">    protocol = &quot;tcp&quot;</span><br><span class="line">    ports    = [&quot;22&quot;, &quot;80&quot;, &quot;443&quot;, &quot;3389&quot;, &quot;8080&quot;]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  source_ranges = [&quot;0.0.0.0/0&quot;]</span><br><span class="line">  source_tags = [&quot;web&quot;]</span><br><span class="line">&#125;</span><br><span class="line">#-----------------------------------------------------------------------</span><br><span class="line">output &quot;lan_ip&quot; &#123;</span><br><span class="line">  value = &quot;$&#123;google_compute_instance.vm_instance.network_interface.0.address&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line">output &quot;wan_ip&quot; &#123;</span><br><span class="line">  value = &quot;$&#123;google_compute_instance.vm_instance.network_interface.0.access_config.0.nat_ip&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># terraform apply</span><br><span class="line">google_compute_network.vpc_network: Refreshing state... (ID: terraform-network)</span><br><span class="line">google_compute_firewall.vpc_firewall: Refreshing state... (ID: terraform-firewall)</span><br><span class="line"></span><br><span class="line">An execution plan has been generated and is shown below.</span><br><span class="line">Resource actions are indicated with the following symbols:</span><br><span class="line">  + create</span><br><span class="line"></span><br><span class="line">Terraform will perform the following actions:</span><br><span class="line"></span><br><span class="line">  + google_compute_instance.vm_instance</span><br><span class="line">      id:                                                  &lt;computed&gt;</span><br><span class="line">      boot_disk.#:                                         &quot;1&quot;</span><br><span class="line">      boot_disk.0.auto_delete:                             &quot;true&quot;</span><br><span class="line">      boot_disk.0.device_name:                             &lt;computed&gt;</span><br><span class="line">      boot_disk.0.disk_encryption_key_sha256:              &lt;computed&gt;</span><br><span class="line">      boot_disk.0.initialize_params.#:                     &quot;1&quot;</span><br><span class="line">      boot_disk.0.initialize_params.0.image:               &quot;centos-4-jenkins-1541491568&quot;</span><br><span class="line">      boot_disk.0.initialize_params.0.size:                &lt;computed&gt;</span><br><span class="line">      boot_disk.0.initialize_params.0.type:                &lt;computed&gt;</span><br><span class="line">      can_ip_forward:                                      &quot;false&quot;</span><br><span class="line">      cpu_platform:                                        &lt;computed&gt;</span><br><span class="line">      create_timeout:                                      &quot;4&quot;</span><br><span class="line">      deletion_protection:                                 &quot;false&quot;</span><br><span class="line">      guest_accelerator.#:                                 &lt;computed&gt;</span><br><span class="line">      instance_id:                                         &lt;computed&gt;</span><br><span class="line">      label_fingerprint:                                   &lt;computed&gt;</span><br><span class="line">      machine_type:                                        &quot;n1-standard-1&quot;</span><br><span class="line">      metadata_fingerprint:                                &lt;computed&gt;</span><br><span class="line">      name:                                                &quot;jenkins-instance&quot;</span><br><span class="line">      network_interface.#:                                 &quot;1&quot;</span><br><span class="line">      network_interface.0.access_config.#:                 &quot;1&quot;</span><br><span class="line">      network_interface.0.access_config.0.assigned_nat_ip: &lt;computed&gt;</span><br><span class="line">      network_interface.0.access_config.0.nat_ip:          &lt;computed&gt;</span><br><span class="line">      network_interface.0.access_config.0.network_tier:    &lt;computed&gt;</span><br><span class="line">      network_interface.0.address:                         &lt;computed&gt;</span><br><span class="line">      network_interface.0.name:                            &lt;computed&gt;</span><br><span class="line">      network_interface.0.network:                         &quot;https://www.googleapis.com/compute/v1/projects/axiomatic-port-221011/global/networks/terraform-network&quot;</span><br><span class="line">      network_interface.0.network_ip:                      &lt;computed&gt;</span><br><span class="line">      network_interface.0.subnetwork_project:              &lt;computed&gt;</span><br><span class="line">      project:                                             &lt;computed&gt;</span><br><span class="line">      scheduling.#:                                        &lt;computed&gt;</span><br><span class="line">      self_link:                                           &lt;computed&gt;</span><br><span class="line">      tags.#:                                              &quot;1&quot;</span><br><span class="line">      tags.1110487518:                                     &quot;instance&quot;</span><br><span class="line">      tags_fingerprint:                                    &lt;computed&gt;</span><br><span class="line">      zone:                                                &lt;computed&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Plan: 1 to add, 0 to change, 0 to destroy.</span><br><span class="line"></span><br><span class="line">Do you want to perform these actions?</span><br><span class="line">  Terraform will perform the actions described above.</span><br><span class="line">  Only &apos;yes&apos; will be accepted to approve.</span><br><span class="line"></span><br><span class="line">  Enter a value: yes</span><br><span class="line"></span><br><span class="line">google_compute_instance.vm_instance: Creating...</span><br><span class="line">  boot_disk.#:                                         &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  boot_disk.0.auto_delete:                             &quot;&quot; =&gt; &quot;true&quot;</span><br><span class="line">  boot_disk.0.device_name:                             &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  boot_disk.0.disk_encryption_key_sha256:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  boot_disk.0.initialize_params.#:                     &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  boot_disk.0.initialize_params.0.image:               &quot;&quot; =&gt; &quot;centos-4-jenkins-1541491568&quot;</span><br><span class="line">  boot_disk.0.initialize_params.0.size:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  boot_disk.0.initialize_params.0.type:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  can_ip_forward:                                      &quot;&quot; =&gt; &quot;false&quot;</span><br><span class="line">  cpu_platform:                                        &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  create_timeout:                                      &quot;&quot; =&gt; &quot;4&quot;</span><br><span class="line">  deletion_protection:                                 &quot;&quot; =&gt; &quot;false&quot;</span><br><span class="line">  guest_accelerator.#:                                 &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  instance_id:                                         &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  label_fingerprint:                                   &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  machine_type:                                        &quot;&quot; =&gt; &quot;n1-standard-1&quot;</span><br><span class="line">  metadata_fingerprint:                                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  name:                                                &quot;&quot; =&gt; &quot;jenkins-instance&quot;</span><br><span class="line">  network_interface.#:                                 &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  network_interface.0.access_config.#:                 &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  network_interface.0.access_config.0.assigned_nat_ip: &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.access_config.0.nat_ip:          &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.access_config.0.network_tier:    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.address:                         &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.name:                            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.network:                         &quot;&quot; =&gt; &quot;https://www.googleapis.com/compute/v1/projects/axiomatic-port-221011/global/networks/terraform-network&quot;</span><br><span class="line">  network_interface.0.network_ip:                      &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.subnetwork_project:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  project:                                             &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  scheduling.#:                                        &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  self_link:                                           &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  tags.#:                                              &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  tags.1110487518:                                     &quot;&quot; =&gt; &quot;instance&quot;</span><br><span class="line">  tags_fingerprint:                                    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  zone:                                                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">google_compute_instance.vm_instance: Still creating... (10s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Still creating... (20s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Creation complete after 29s (ID: jenkins-instance)</span><br><span class="line"></span><br><span class="line">Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</span><br><span class="line"></span><br><span class="line">Outputs:</span><br><span class="line"></span><br><span class="line">lan_ip = 10.170.0.2</span><br><span class="line">wan_ip = 35.241.127.139</span><br></pre></td></tr></table></figure><p>访问服务：<a href="http://35.241.127.139:8080/" target="_blank" rel="noopener">http://35.241.127.139:8080/</a><br>可以在镜像制作过程中直接将jenkins服务配置更完善，这边直接应用服务<br><img src="/archives/6a8f9b85/02.png" alt></p><h2 id="验证完毕，销毁资源"><a href="#验证完毕，销毁资源" class="headerlink" title="验证完毕，销毁资源"></a>验证完毕，销毁资源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">terraform destroy</span><br><span class="line">google_compute_network.vpc_network: Refreshing state... (ID: terraform-network)</span><br><span class="line">google_compute_firewall.vpc_firewall: Refreshing state... (ID: terraform-firewall)</span><br><span class="line">google_compute_instance.vm_instance: Refreshing state... (ID: jenkins-instance)</span><br><span class="line"></span><br><span class="line">An execution plan has been generated and is shown below.</span><br><span class="line">Resource actions are indicated with the following symbols:</span><br><span class="line">  - destroy</span><br><span class="line"></span><br><span class="line">Terraform will perform the following actions:</span><br><span class="line"></span><br><span class="line">  - google_compute_firewall.vpc_firewall</span><br><span class="line"></span><br><span class="line">  - google_compute_instance.vm_instance</span><br><span class="line"></span><br><span class="line">  - google_compute_network.vpc_network</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Plan: 0 to add, 0 to change, 3 to destroy.</span><br><span class="line"></span><br><span class="line">Do you really want to destroy all resources?</span><br><span class="line">  Terraform will destroy all your managed infrastructure, as shown above.</span><br><span class="line">  There is no undo. Only &apos;yes&apos; will be accepted to confirm.</span><br><span class="line"></span><br><span class="line">  Enter a value: yes</span><br><span class="line"></span><br><span class="line">google_compute_firewall.vpc_firewall: Destroying... (ID: terraform-firewall)</span><br><span class="line">google_compute_instance.vm_instance: Destroying... (ID: jenkins-instance)</span><br><span class="line">google_compute_firewall.vpc_firewall: Still destroying... (ID: terraform-firewall, 10s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Still destroying... (ID: jenkins-instance, 10s elapsed)</span><br><span class="line">google_compute_firewall.vpc_firewall: Destruction complete after 11s</span><br><span class="line">google_compute_instance.vm_instance: Still destroying... (ID: jenkins-instance, 20s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Destruction complete after 26s</span><br><span class="line">google_compute_network.vpc_network: Destroying... (ID: terraform-network)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 10s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 20s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 30s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 40s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 50s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 1m0s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Destruction complete after 1m9s</span><br><span class="line"></span><br><span class="line">Destroy complete! Resources: 3 destroyed.</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li>Packer官网：<a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/6a8f9b85.html">https://mds1455975151.github.io/archives/6a8f9b85.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Jenkins </tag>
            
            <tag> Packer </tag>
            
            <tag> 镜像制作 </tag>
            
            <tag> Aliyun </tag>
            
            <tag> 资源编排 </tag>
            
            <tag> google Cloud </tag>
            
            <tag> googlecompute </tag>
            
            <tag> 应用场景 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Packer之Packer介绍</title>
      <link href="/archives/bc880644.html"/>
      <url>/archives/bc880644.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Packer之Packer介绍</p></blockquote><a id="more"></a><h1 id="Packer介绍"><a href="#Packer介绍" class="headerlink" title="Packer介绍"></a>Packer介绍</h1><p>所谓的镜像，就是一个包含预先配置好操作系统和预装软件的静态单元，通过它可以快速的创建新的虚拟机运行实例，不同的平台支持不同的镜像格式，例如AWS的EC2支持AMIs，VMware支持VMDK/VMX,Alicloud的ECS支持RAW和VHD格式等等。各云平台都提供了大量的基础镜像供用户使用，但是随着云平台用户成熟度的增加，用户对镜像个性化的需要越来越强烈，同时出于商业的考虑，用户也希望自己的系统具有在不同云平台之间迁移的能力，当然也包含个性化的镜像迁移的能力。尽管各大云平台都提供了WEB界面工具使得用户可以手工创建自定义镜像，也开放了相应的API使得通过自动化的脚本来创建个性化的自定义镜像成为可能。但是都存在一定的局限性而难以满足用户的最终需求，Packer就在这种背景下诞生了。</p><p>Packer是一个从单一的模板文件来创建多平台一致性镜像的轻量级开源工具，它能够运行在常用的主流操作系统如Windows、Linux和Mac os上，能够高效的并行创建多平台例如AWS、Azure和Alicloud的镜像，它的目的并不是取代Puppet/Chef等配置管理工具，实际上，当制作镜像的时候，Packer可以使用Chef或者Puppet等工具来安装镜像所需要的软件。通过Packer自动化的创建各种平台的镜像是非常容易的。</p><p>优势：</p><ul><li>基础设施部署迅速</li><li>可以移植性</li><li>镜像制作自动化，提升效率，降低误操作</li><li>支持所有常见的公有云厂商</li><li>支持自定义插件(可自增强)</li><li>开源(成熟、透明)</li></ul><h1 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h1><p>大致流程：模板–&gt;基于公有云基础镜像–&gt;创建主机、自定义设置–&gt;创建镜像–上传镜像–&gt;删除主机–&gt;返回镜像信息</p><h1 id="Packer安装部署"><a href="#Packer安装部署" class="headerlink" title="Packer安装部署"></a>Packer安装部署</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># wget https://releases.hashicorp.com/packer/1.3.2/packer_1.3.2_linux_amd64.zip</span><br><span class="line"># unzip packer_1.3.2_linux_amd64.zip</span><br><span class="line"># packer --version</span><br><span class="line">1.3.2</span><br><span class="line"># packer -h</span><br><span class="line">Usage: packer [--version] [--help] &lt;command&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">Available commands are:</span><br><span class="line">    build       build image(s) from template</span><br><span class="line">    fix         fixes templates from old versions of packer</span><br><span class="line">    inspect     see components of a template</span><br><span class="line">    validate    check that a template is valid</span><br><span class="line">    version     Prints the Packer version</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>: 下载解压后使用的时候建议使用包的绝对路径执行，因为包名和Linux下另外一个二进制包重名了，或者将packer重命名，例如：packer.io等等</p></blockquote><h1 id="基于google-Cloud案例"><a href="#基于google-Cloud案例" class="headerlink" title="基于google Cloud案例"></a>基于google Cloud案例</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># cat google.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;builders&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;googlecompute&quot;,</span><br><span class="line">      &quot;account_file&quot;: &quot;account.json&quot;,</span><br><span class="line">      &quot;project_id&quot;: &quot;xxx&quot;,</span><br><span class="line">      &quot;source_image&quot;: &quot;debian-7-wheezy-v20150127&quot;,</span><br><span class="line">      &quot;ssh_username&quot;: &quot;packer&quot;,</span><br><span class="line">      &quot;zone&quot;: &quot;us-central1-a&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ./packer build google.json</span><br><span class="line">googlecompute output will be in this color.</span><br><span class="line"></span><br><span class="line">==&gt; googlecompute: Checking image does not exist...</span><br><span class="line">==&gt; googlecompute: Creating temporary SSH key for instance...</span><br><span class="line">==&gt; googlecompute: Using image: debian-7-wheezy-v20150127</span><br><span class="line">==&gt; googlecompute: Creating instance...</span><br><span class="line">    googlecompute: Loading zone: us-central1-a</span><br><span class="line">    googlecompute: Loading machine type: n1-standard-1</span><br><span class="line">    googlecompute: Requesting instance creation...</span><br><span class="line">    googlecompute: Waiting for creation operation to complete...</span><br><span class="line">    googlecompute: Instance has been created!</span><br><span class="line">==&gt; googlecompute: Waiting for the instance to become running...</span><br><span class="line">    googlecompute: IP: 35.202.237.72</span><br><span class="line">==&gt; googlecompute: Using ssh communicator to connect: 35.202.237.72</span><br><span class="line">==&gt; googlecompute: Waiting for SSH to become available...</span><br><span class="line">==&gt; googlecompute: Connected to SSH!</span><br><span class="line">==&gt; googlecompute: Deleting instance...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    googlecompute: Instance has been deleted!</span><br><span class="line">==&gt; googlecompute: Creating image...</span><br><span class="line">==&gt; googlecompute: Deleting disk...</span><br><span class="line">    googlecompute: Disk has been deleted!</span><br><span class="line">Build &apos;googlecompute&apos; finished.</span><br><span class="line"></span><br><span class="line">==&gt; Builds finished. The artifacts of successful builds are:</span><br><span class="line">--&gt; googlecompute: A disk image was created: packer-1541417917</span><br></pre></td></tr></table></figure><p><img src="/archives/bc880644/01.png" alt></p><h1 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h1><ul><li>Packer官网：<a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/bc880644.html">https://mds1455975151.github.io/archives/bc880644.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
            <tag> Packer </tag>
            
            <tag> 镜像制作 </tag>
            
            <tag> Aliyun </tag>
            
            <tag> 资源编排 </tag>
            
            <tag> google Cloud </tag>
            
            <tag> googlecompute </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Open-Falcon微信告警设置记录</title>
      <link href="/archives/d5569d0d.html"/>
      <url>/archives/d5569d0d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Open-Falcon微信告警设置记录</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>为了方便查看，计划开启微信报警功能。</p><h1 id="设置实践"><a href="#设置实践" class="headerlink" title="设置实践"></a>设置实践</h1><p><a href="https://github.com/Yanjunhui/chat" target="_blank" rel="noopener">插件GitHub地址</a>写的已经很详细了，但是企业微信发展后页面位置有些变化，记录下最新版本企业微信后操作过程 截止到2018.11.02</p><h2 id="申请企业号"><a href="#申请企业号" class="headerlink" title="申请企业号"></a>申请企业号</h2><p>申请企业号, 不通过企业认证的话,有200人的限制,用于故障告警够用。</p><h2 id="获取对接权限"><a href="#获取对接权限" class="headerlink" title="获取对接权限"></a>获取对接权限</h2><ul><li>获取corpid<br>我的企业–&gt;企业信息–&gt;企业ID<br><img src="/archives/d5569d0d/01.png" alt></li><li>开启回调模式获取key<br>应用与小程序–&gt;自建–&gt;创建应用–&gt;获取AgentId及Secret<br><img src="/archives/d5569d0d/02.png" alt><br><img src="/archives/d5569d0d/03.png" alt></li><li>使用微信关注企业号才可以从微信收到信息，否则只能从企业微信APP中收到信息<br><img src="/archives/d5569d0d/04.png" alt></li></ul><h2 id="插件安装及配置"><a href="#插件安装及配置" class="headerlink" title="插件安装及配置"></a>插件安装及配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git clone https://www.github.com/yanjunhui/chat.git</span><br><span class="line">cd chat</span><br><span class="line"># cat config.conf</span><br><span class="line">[http]</span><br><span class="line">port = 4567</span><br><span class="line"></span><br><span class="line">[weixin]</span><br><span class="line">CorpID = xxx</span><br><span class="line">AgentId = xxx</span><br><span class="line">Secret = xxx</span><br><span class="line"># ./control.sh -h</span><br><span class="line">./control.sh start|stop|restart|status</span><br></pre></td></tr></table></figure><h2 id="Open-Falcon-alarm报警配置"><a href="#Open-Falcon-alarm报警配置" class="headerlink" title="Open-Falcon alarm报警配置"></a>Open-Falcon alarm报警配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># vim alarm/config/cfg.json</span><br><span class="line">    &quot;api&quot;: &#123;</span><br><span class="line">        &quot;im&quot;: &quot;http://127.0.0.1:4567/send&quot;,</span><br><span class="line">        &quot;sms&quot;: &quot;http://127.0.0.1:1986/&quot;,</span><br><span class="line">        &quot;mail&quot;: &quot;http://127.0.0.1:4000/sender/mail&quot;,</span><br><span class="line">        &quot;dashboard&quot;: &quot;http://127.0.0.1:8081&quot;,</span><br><span class="line">        &quot;plus_api&quot;:&quot;http://127.0.0.1:8080&quot;,</span><br><span class="line">        &quot;plus_api_token&quot;: &quot;default-token-used-in-server-side&quot;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">修改im部分为chat服务的IP及定义的端口号，然后重启alarm服务</span><br><span class="line">./open-falcon restart alarm</span><br></pre></td></tr></table></figure><p>在dashboard的user部分完善各个用户IM信息，需要注意这块的IM账号为企业微信中的用户信息非个人微信账号。<br><img src="/archives/d5569d0d/05.png" alt><br><img src="/archives/d5569d0d/06.png" alt></p><h2 id="测试报警"><a href="#测试报警" class="headerlink" title="测试报警"></a>测试报警</h2><p>插件接收的参数为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tos     企业微信显示的用户名非微信号名称</span><br><span class="line">content 信息内容</span><br><span class="line"></span><br><span class="line">使用curl命令测试报警</span><br><span class="line">curl http://127.0.0.1:4567/send -d &quot;tos=xxx&amp;content=host is up&quot;</span><br></pre></td></tr></table></figure><p><img src="/archives/d5569d0d/07.png" alt></p><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><ul><li>报警内容会被过滤，例如：报警信息中的[]等服号会被处理掉</li><li>出现问题可以查看chat和alarm日志进行排查</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://github.com/Yanjunhui/chat" target="_blank" rel="noopener">插件地址</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d5569d0d.html">https://mds1455975151.github.io/archives/d5569d0d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Open-Falcon </tag>
            
            <tag> 小米监控 </tag>
            
            <tag> 微信报警 </tag>
            
            <tag> 报警 </tag>
            
            <tag> 告警 </tag>
            
            <tag> IM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客添加Google AdSense</title>
      <link href="/archives/3a06bb38.html"/>
      <url>/archives/3a06bb38.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Hexo博客添加Google AdSense</p></blockquote><p>部署了站点，肯定要发挥站点的作用到极致。我们如何添加Google AdSense赚取零花钱呢？</p><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>部署了站点，肯定要发挥站点的作用到极致。我们如何添加Google AdSense赚取零花钱呢？</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="大致流程"><a href="#大致流程" class="headerlink" title="大致流程"></a>大致流程</h2><ul><li>注册<a href="https://www.google.com/adsense" target="_blank" rel="noopener">google adsense</a></li><li>获取代码</li><li>新建模板</li><li>添加到页面模板的指定位置</li><li>生成并发布站点</li><li>验证</li></ul><h2 id="分步讲解"><a href="#分步讲解" class="headerlink" title="分步讲解"></a>分步讲解</h2><p>1、注册略<br>2、代码格式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  (adsbygoogle = window.adsbygoogle || []).push(&#123;</span><br><span class="line">    google_ad_client: &quot;ca-pub-xxx&quot;,</span><br><span class="line">    enable_page_level_ads: true</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>3、新建AdSense模板</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/next/layout/_custom/google_adsense.ejs</span><br></pre></td></tr></table></figure><p>在next主题下的layout/_custom文件夹下创建一个google_adsense.ejs文件<br>然后将Google AdSense的代码复制到google_adsense.ejs</p><p>编辑 _layout.swig</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Google AdSense start --&gt;</span><br><span class="line">&#123;% include &apos;_custom/google_adsense.ejs&apos; %&#125;</span><br><span class="line">&lt;!-- Google AdSense end --&gt;</span><br></pre></td></tr></table></figure><p>根据Google AdSense 的要求将代码放置在</p><head><meta name="generator" content="Hexo 3.9.0">和</head>标记之间<p></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://darrenliuwei.com/hexo-next-blog.html" target="_blank" rel="noopener">搭建hexo next主题的博客教程</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/3a06bb38.html">https://mds1455975151.github.io/archives/3a06bb38.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> AdSense </tag>
            
            <tag> next </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为何翻墙</title>
      <link href="/archives/326daa60.html"/>
      <url>/archives/326daa60.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>为何翻墙</p></blockquote><a id="more"></a><p>存在即有其合理性？</p><h1 id="翻墙优劣"><a href="#翻墙优劣" class="headerlink" title="翻墙优劣"></a>翻墙优劣</h1><h2 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h2><ul><li>优质的科研文章、学习资料</li><li>不同文化信仰</li><li>IT互联网交流<br>…..</li></ul><h2 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h2><ul><li>成人视频网站及色情论坛污染</li><li>狂人的宗教信仰网站</li><li>各类博彩网站<br>….</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/326daa60.html">https://mds1455975151.github.io/archives/326daa60.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> GFW </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻墙 </tag>
            
            <tag> GFW </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>什么是GFW</title>
      <link href="/archives/ade99d4c.html"/>
      <url>/archives/ade99d4c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>什么是GFW</p></blockquote><a id="more"></a><p>GFW即中国国家防火墙，也俗称墙、防火墙等，是我国在互联网编辑审查系统的统称。此系统起步于998年。网友所说的”被墙”即指网站内容被防火长城所屏蔽或者服务器的通信被封阻。</p><p>防火长城的主要设计者方滨兴。</p><p>涉及主要技术：</p><ul><li>域名解析服务缓存污染</li><li>针对境外的IP地址封锁</li><li>IP地址特定端口封锁</li><li>无状态TCP连接重置</li><li>对加密连接的干扰</li><li>TCP关键字阻断</li><li>CA证书检测</li><li>对破网软件的反制</li><li>间歇性完全封锁</li><li>深度包检测</li><li>针对IPv6协议的审查</li><li>对电子邮件通讯的拦截</li><li>网上攻击</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ade99d4c.html">https://mds1455975151.github.io/archives/ade99d4c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> GFW </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻墙 </tag>
            
            <tag> GFW </tag>
            
            <tag> 墙 </tag>
            
            <tag> 梯子 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>群晖系列之源码管理</title>
      <link href="/archives/883339a4.html"/>
      <url>/archives/883339a4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>群晖系列之源码管理</p></blockquote><a id="more"></a><p>没入手群晖之前自己的代码管理都是使用VMware虚拟机自己部署的SVN服务器，有了群晖以后可以使用群晖套件。电脑也不用24小时开机了，而且使用群晖数据的安全性也大大提高，整合了资源，专业的设备做专业的事。</p><p>套件支持SVN和Git，我选择使用SVN，SVN安装上手都比较简单，给大家简单介绍下。</p><h1 id="群晖部署SVN服务"><a href="#群晖部署SVN服务" class="headerlink" title="群晖部署SVN服务"></a>群晖部署SVN服务</h1><p>1、安装SVN套件<br><img src="/archives/883339a4/01.png" alt><br>2、点击新增、键入存储库名称，会自动生成访问地址，需要记录下<br><img src="/archives/883339a4/02.png" alt><br>3、添加用户及设置权限<br><img src="/archives/883339a4/03.png" alt><br>4、本地检索存储库并上传文件<br>略</p><h1 id="群晖部署Git服务"><a href="#群晖部署Git服务" class="headerlink" title="群晖部署Git服务"></a>群晖部署Git服务</h1><p>Git相对SVN就要复杂一些，接着我们讲解下Git服务的部署及使用<br>1、安装Git套件<br>2、创建Git仓库共享目录<br>3、登录服务器创建仓库<br>4、window主机clone测试</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/883339a4.html">https://mds1455975151.github.io/archives/883339a4.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 群晖 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 群晖 </tag>
            
            <tag> NAS </tag>
            
            <tag> 源码管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>群晖系列之群晖介绍</title>
      <link href="/archives/ed6edbb9.html"/>
      <url>/archives/ed6edbb9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>群晖系列之群晖介绍</p></blockquote><a id="more"></a><p>群晖科技（Synology ）创立于 2000 年，自始便专注于打造高效能、可靠、功能丰富且绿色环保的 NAS 服务器，是全球少数几家以单纯的提供网络存储解决方案获得世界认同的华人企业。</p><p>群晖官网:<a href="https://www.synology.com/zh-cn" target="_blank" rel="noopener">https://www.synology.com/zh-cn</a></p><p>入手型号：DS418play 双核心 4盘位NAS网络存储服务器</p><p>需求：</p><ul><li>存储资料备份</li><li>音频及视频存储</li><li>代码管理(svn\git套件)</li><li>图片备份</li><li>Docker应用</li><li>监控视频存储</li><li>网络存储同步</li><li>下载服务器</li><li>其他</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ed6edbb9.html">https://mds1455975151.github.io/archives/ed6edbb9.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 群晖 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 群晖 </tag>
            
            <tag> NAS </tag>
            
            <tag> 存储 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenWrt软路由系列之OpenWrt概述</title>
      <link href="/archives/858af81e.html"/>
      <url>/archives/858af81e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>OpenWrt软路由系列之OpenWrt概述</p></blockquote><a id="more"></a><h1 id="OpenWrt概述"><a href="#OpenWrt概述" class="headerlink" title="OpenWrt概述"></a>OpenWrt概述</h1><p>OpenWrt 可以被描述为一个嵌入式的 Linux 发行版，（主流路由器固件有 dd-wrt,tomato,openwrt三类）而不是试图建立一个单一的、静态的系统。OpenWrt的包管理提供了一个完全可写的文件系统，从应用程序供应商提供的选择和配置，并允许您自定义的设备，以适应任何应用程序。</p><p>对于开发人员，OpenWrt 是使用框架来构建应用程序，而无需建立一个完整的固件来支持；对于用户来说，这意味着其拥有完全定制的能力，可以用前所未有的方式使用该设备。</p><h1 id="OpenWrt效果展示show-time"><a href="#OpenWrt效果展示show-time" class="headerlink" title="OpenWrt效果展示show time"></a>OpenWrt效果展示show time</h1><p><img src="/archives/858af81e/01.png" alt><br><img src="/archives/858af81e/02.png" alt><br><img src="/archives/858af81e/03.png" alt><br><img src="/archives/858af81e/04.png" alt><br><img src="/archives/858af81e/05.png" alt></p><h1 id="选择OpenWrt的原因"><a href="#选择OpenWrt的原因" class="headerlink" title="选择OpenWrt的原因"></a>选择OpenWrt的原因</h1><ul><li>技能</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/858af81e.html">https://mds1455975151.github.io/archives/858af81e.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> OpenWrt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenWrt </tag>
            
            <tag> 软路由 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>歌曲之天仙子</title>
      <link href="/archives/8d5c7183.html"/>
      <url>/archives/8d5c7183.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>歌曲之天仙子</p></blockquote><a id="more"></a><p>天仙子是《剑侠情缘》中即已产生，在2000年金山公司推出的游戏《剑侠情缘2》时对其谱曲，并作为暴机结束曲。同年，这首歌被由金庸作品《侠客行》同名电视剧采用当片尾曲及插曲。</p><p><a href="https://youtu.be/siGSp_n-fhc" target="_blank" rel="noopener">https://youtu.be/siGSp_n-fhc</a></p><p>歌词</p><p>冰雪少女入凡尘<br>西子湖畔初见睛<br>是非难解虚如影<br>一腔爱<br>一身恨<br>一缕清风<br>一丝魂<br>仗剑携酒江湖行<br>多少恩怨醉梦中<br>蓦然回首万事空<br>几重幕<br>几棵松<br>几层远峦<br>几声钟</p><p>冰雪少女入凡尘<br>西子湖畔初见睛<br>是非难解虚如影<br>一腔爱<br>一身恨<br>一缕清风<br>一丝魂<br>仗剑携酒江湖行<br>多少恩怨醉梦中<br>蓦然回首万事空<br>几重幕<br>几棵松<br>几层远峦<br>几声钟<br>几层远峦<br>几声钟</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8d5c7183.html">https://mds1455975151.github.io/archives/8d5c7183.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 音乐 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌曲 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Open-Falcon监控H3C-ER3260G2路由器</title>
      <link href="/archives/186e54d8.html"/>
      <url>/archives/186e54d8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>本文讲述如何使用Open-Falcon监控H3C ER3260G2路由器信息，保证运维人员可以实时掌握路由器性能及流量使用问题。</p></blockquote><a id="more"></a><h1 id="部署Open-Falcon监控程序"><a href="#部署Open-Falcon监控程序" class="headerlink" title="部署Open-Falcon监控程序"></a>部署Open-Falcon监控程序</h1><p>参考资料：<a href="https://book.open-falcon.org/zh_0_2/usage/switch.html" target="_blank" rel="noopener">https://book.open-falcon.org/zh_0_2/usage/switch.html</a></p><p>利用<a href="https://github.com/gaochao1/swcollector" target="_blank" rel="noopener">swcollector</a>来实现对路由器、交换机设备的监控指标采集。</p><p>这里使用源码安装，起初使用二进制安装但是安装完成后程序无法启动，也没有日志信息，所以改为源码安装了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">配置go环境，可以使用以下脚本快速部署</span><br><span class="line">wget https://raw.githubusercontent.com/mds1455975151/tools/master/go/go_install.sh</span><br><span class="line">sh go_install.sh</span><br><span class="line"></span><br><span class="line">go get github.com/gaochao1/swcollector</span><br><span class="line">cd $GOPATH/src/github.com/gaochao1/swcollector</span><br><span class="line">go build</span><br><span class="line">go pack</span><br><span class="line">ls -al falcon-swcollector-4.0.6.3.tar.gz</span><br><span class="line">mkdir -p /usr/local/falcon-swcollector-4.0.6.3</span><br><span class="line">tar -zxf falcon-swcollector-4.0.6.3.tar.gz -C /usr/local/falcon-swcollector-4.0.6.3</span><br><span class="line">cd /usr/local/falcon-swcollector-4.0.6.3</span><br><span class="line">参考文档配置相关配置文件，cfg.json等</span><br><span class="line">./control start</span><br><span class="line">tail -f var/app.log</span><br><span class="line">到此为止监控程序部署就完毕了，因为还未设置路由器的snmp设置现在应该报连接错误，dashboard只有switch.Ping值</span><br></pre></td></tr></table></figure><h1 id="H3C路由器配置"><a href="#H3C路由器配置" class="headerlink" title="H3C路由器配置"></a>H3C路由器配置</h1><p><img src="/archives/186e54d8/01.png" alt></p><p>使用snmpwalk测试下snmp配置正确性，保证可以正常获取到相关信息</p><ul><li><p>首先在服务器安装snmp工具</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install net-snmp-utils snmp-libs snmp-devel snmp</span><br></pre></td></tr></table></figure></li><li><p>验证snmp配置正确性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># snmpwalk -v 2c -c public 10.1.16.1   # 路由器wan口地址</span><br><span class="line">SNMPv2-MIB::sysDescr.0 = STRING: H3C Product Version ERHMG2-MNW100-R1116</span><br><span class="line">H3C ERHMG2</span><br><span class="line">Copyright(c) 2014-2017 New H3C Technologies Co., Ltd. All rights reserved.</span><br><span class="line">SNMPv2-MIB::sysObjectID.0 = OID: SNMPv2-SMI::enterprises.25506.1.1160</span><br><span class="line">DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (771062000) 89 days, 5:50:20.00</span><br><span class="line">SNMPv2-MIB::sysContact.0 = STRING: R&amp;D Hangzhou, New H3C Technologies Co., Ltd.</span><br><span class="line">SNMPv2-MIB::sysName.0 = STRING: H3C</span><br><span class="line">SNMPv2-MIB::sysLocation.0 = STRING: Hangzhou, China</span><br><span class="line">SNMPv2-MIB::sysServices.0 = INTEGER: 78</span><br><span class="line">SNMPv2-MIB::sysORLastChange.0 = Timeticks: (22) 0:00:00.22</span><br><span class="line">SNMPv2-MIB::sysORID.1 = OID: SNMPv2-MIB::snmpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.2 = OID: TCP-MIB::tcpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.3 = OID: IP-MIB::ip</span><br><span class="line">SNMPv2-MIB::sysORID.4 = OID: UDP-MIB::udpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.5 = OID: SNMP-VIEW-BASED-ACM-MIB::vacmBasicGroup</span><br><span class="line">SNMPv2-MIB::sysORID.6 = OID: SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.7 = OID: SNMP-MPD-MIB::snmpMPDCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.8 = OID: SNMP-USER-BASED-SM-MIB::usmMIBCompliance</span><br><span class="line">SNMPv2-MIB::sysORDescr.1 = STRING: The MIB module for SNMPv2 entities</span><br><span class="line">SNMPv2-MIB::sysORDescr.2 = STRING: The MIB module for managing TCP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.3 = STRING: The MIB module for managing IP and ICMP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.4 = STRING: The MIB module for managing UDP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.5 = STRING: View-based Access Control Model for SNMP.</span><br><span class="line">SNMPv2-MIB::sysORDescr.6 = STRING: The SNMP Management Architecture MIB.</span><br><span class="line">SNMPv2-MIB::sysORDescr.7 = STRING: The MIB for Message Processing and Dispatching.</span><br><span class="line">SNMPv2-MIB::sysORDescr.8 = STRING: The management information definitions for the SNMP User-based Security Model.</span><br><span class="line">SNMPv2-MIB::sysORUpTime.1 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.2 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.3 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.4 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.5 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.6 = Timeticks: (22) 0:00:00.22</span><br><span class="line">SNMPv2-MIB::sysORUpTime.7 = Timeticks: (22) 0:00:00.22</span><br><span class="line">SNMPv2-MIB::sysORUpTime.8 = Timeticks: (22) 0:00:00.22</span><br><span class="line">IF-MIB::ifNumber.0 = INTEGER: 7</span><br><span class="line">................................省略</span><br></pre></td></tr></table></figure></li></ul><h1 id="检查并验证监控信息"><a href="#检查并验证监控信息" class="headerlink" title="检查并验证监控信息"></a>检查并验证监控信息</h1><p>打开dashboard查看路由器的相关信息<br><img src="/archives/186e54d8/02.png" alt><br><img src="/archives/186e54d8/03.png" alt></p><p>另外如果开启http 可以查看web界面 <a href="http://10.1.16.151:1989/" target="_blank" rel="noopener">http://10.1.16.151:1989/</a><br><img src="/archives/186e54d8/04.png" alt></p><h1 id="配置监控模板及设置报警规则"><a href="#配置监控模板及设置报警规则" class="headerlink" title="配置监控模板及设置报警规则"></a>配置监控模板及设置报警规则</h1><p>省略</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.cnblogs.com/lei0213/p/8868080.html" target="_blank" rel="noopener">centos7之zabbix的监控H3C ER3200G2流量</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/186e54d8.html">https://mds1455975151.github.io/archives/186e54d8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Open-Falcon </tag>
            
            <tag> H3C ER3260G2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Consul+upsync构建动态Nginx配置系统</title>
      <link href="/archives/c92739f9.html"/>
      <url>/archives/c92739f9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>基于Consul+upsync构建动态Nginx配置系统</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文介绍如何利用Consul+upsync来实现动态的管理Nginx后端服务器，实现动态增删后端服务器而无需reload Nginx服务。</p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><table><thead><tr><th>IP</th><th>os</th><th>role</th><th>remark</th></tr></thead><tbody><tr><td>192.168.200.101</td><td>CentOS 7.4</td><td>nginx-lb and consul</td><td></td></tr><tr><td>192.168.200.102</td><td>CentOS 7.4</td><td>nginx-server</td><td></td></tr><tr><td>192.168.200.103</td><td>CentOS 7.4</td><td>nginx-server</td><td></td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"># uname -r</span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"># uname -m</span><br><span class="line">x86_64</span><br><span class="line"># nginx -V</span><br><span class="line">nginx version: nginx/1.14.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-28) (GCC)</span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC&apos; --with-ld-opt=&apos;-Wl,-z,relro -Wl,-z,now -pie&apos; --add-module=/data0/src/nginx_upstream_check_module --add-module=/data0/src/nginx-upsync-module</span><br><span class="line"># consul version</span><br><span class="line">Consul v1.2.2</span><br><span class="line">Protocol 2 spoken by default, understands 2 to 3 (agent will automatically use protocol &gt;2 when speaking to compatible agents)</span><br></pre></td></tr></table></figure><h1 id="Nginx-Server安装"><a href="#Nginx-Server安装" class="headerlink" title="Nginx-Server安装"></a>Nginx-Server安装</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y pcre-devel openssl-devel</span><br><span class="line"># cat /etc/yum.repos.d/nginx.repo</span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"># yum install -y nginx</span><br><span class="line"># systemctl start nginx</span><br><span class="line"># systemctl enable nginx</span><br><span class="line"># echo &quot;linux-node03.example.com:192.168.47.102&quot; &gt;/usr/share/nginx/html/index.html</span><br><span class="line"># echo &quot;linux-node04.example.com:192.168.47.103&quot; &gt;/usr/share/nginx/html/index.html</span><br></pre></td></tr></table></figure><h1 id="Nginx-LB配置"><a href="#Nginx-LB配置" class="headerlink" title="Nginx-LB配置"></a>Nginx-LB配置</h1><h2 id="Nginx部署"><a href="#Nginx部署" class="headerlink" title="Nginx部署"></a>Nginx部署</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y pcre-devel openssl-devel</span><br><span class="line"># cat /etc/yum.repos.d/nginx.repo</span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"># yum install -y nginx</span><br><span class="line"># systemctl start nginx</span><br><span class="line"># systemctl enable nginx</span><br></pre></td></tr></table></figure><h2 id="nginx-upsync-module及nginx-upstream-check-module模块配置"><a href="#nginx-upsync-module及nginx-upstream-check-module模块配置" class="headerlink" title="nginx-upsync-module及nginx_upstream_check_module模块配置"></a>nginx-upsync-module及nginx_upstream_check_module模块配置</h2><p>upsync是微博开源的基于nginx的动态流量管理方案. github地址: <a href="https://github.com/weibocom/nginx-upsync-module" target="_blank" rel="noopener">https://github.com/weibocom/nginx-upsync-module</a>.</p><p>nginx-upsync-module，它的功能是拉取consul的后端server的列表，并更新Nginx的路由信息。此模块不依赖于任何第三方模块。 consul作为Nginx的db，利用consul的KV服务，每个Nginx work进程独立的去拉取各个upstream 的配置，并更新各自的路由。<br><img src="/archives/c92739f9/list_update.bmp" alt></p><p>模块相关信息可以参考GitHub文档信息：<a href="https://github.com/weibocom/nginx-upsync-module/tree/master/doc" target="_blank" rel="noopener">https://github.com/weibocom/nginx-upsync-module/tree/master/doc</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cd /data0/src</span><br><span class="line">git clone https://github.com/weibocom/nginx-upsync-module.git</span><br><span class="line">git clone https://github.com/xiaokai-wang/nginx_upstream_check_module.git</span><br><span class="line">wget http://nginx.org/download/nginx-1.14.0.tar.gz</span><br><span class="line">tar -zxf nginx-1.14.0.tar.gz</span><br><span class="line">cd nginx-1.14.0</span><br><span class="line">patch -p1 &lt; /data0/src/nginx_upstream_check_module/check_1.12.1+.patch</span><br><span class="line">./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC&apos; --with-ld-opt=&apos;-Wl,-z,relro -Wl,-z,now -pie&apos; --add-module=/data0/src/nginx_upstream_check_module --add-module=/data0/src/nginx-upsync-module</span><br><span class="line">make</span><br><span class="line">which nginx</span><br><span class="line">cp /usr/sbin/nginx&#123;,.20180804&#125;</span><br><span class="line">systemctl stop nginx</span><br><span class="line">cp /data0/src/nginx-1.14.0/objs/nginx /usr/sbin/</span><br><span class="line">systemctl start nginx</span><br><span class="line">nginx -V</span><br></pre></td></tr></table></figure><h1 id="Consul配置"><a href="#Consul配置" class="headerlink" title="Consul配置"></a>Consul配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /data0/src/</span><br><span class="line">wget https://releases.hashicorp.com/consul/1.2.2/consul_1.2.2_linux_amd64.zip</span><br><span class="line">unzip /data0/src/consul_1.2.2_linux_amd64.zip</span><br><span class="line">install /data0/src/consul /usr/local/bin/</span><br><span class="line">mkdir -p /data0/consul/&#123;data,logs&#125;</span><br><span class="line">consul agent --server --bind=192.168.200.101 --data-dir=/data0/consule/data -bootstrap-expect=1 -node=nginx-lb -client 0.0.0.0 -ui</span><br></pre></td></tr></table></figure><h1 id="调整Nginx配置并测试"><a href="#调整Nginx配置并测试" class="headerlink" title="调整Nginx配置并测试"></a>调整Nginx配置并测试</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    upstream test &#123;</span><br><span class="line">        server 127.0.0.1:11111;</span><br><span class="line">        upsync 192.168.200.101:8500/v1/kv/upstreams/test upsync_timeout=6m upsync_interval=500ms upsync_type=consul strong_dependency=off;</span><br><span class="line">        upsync_dump_path /etc/nginx/server/server.conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    upstream bar &#123;</span><br><span class="line">        server 192.168.200.102:80 weight=1 fail_timeout=10 max_fails=3;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line"></span><br><span class="line">        location = / &#123;</span><br><span class="line">        proxy_pass http://test;</span><br><span class="line">          proxy_set_header  Host  $host;</span><br><span class="line">          proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">          proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">          add_header    real $upstream_addr;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /Content|Scripts/ &#123;</span><br><span class="line">          proxy_pass http://test;</span><br><span class="line">          proxy_set_header  Host  $host;</span><br><span class="line">          proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">          proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /bar &#123;</span><br><span class="line">            proxy_pass http://bar;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /upstream_show &#123;</span><br><span class="line">            upstream_show;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /upstream_status &#123;</span><br><span class="line">            stub_status on;</span><br><span class="line">            access_log off;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建upsync_dump_path</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/nginx/server/</span><br></pre></td></tr></table></figure><h2 id="添加后端"><a href="#添加后端" class="headerlink" title="添加后端"></a>添加后端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.102:80</span><br><span class="line">curl -X PUT http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.103:80</span><br></pre></td></tr></table></figure><h2 id="查看通过consul添加的后端服务器信息"><a href="#查看通过consul添加的后端服务器信息" class="headerlink" title="查看通过consul添加的后端服务器信息"></a>查看通过consul添加的后端服务器信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/nginx/server/server.conf</span><br><span class="line">server 192.168.200.103:80 weight=1 max_fails=2 fail_timeout=10s;</span><br><span class="line">server 192.168.200.102:80 weight=1 max_fails=2 fail_timeout=10s;</span><br></pre></td></tr></table></figure><p><img src="/archives/c92739f9/03.png" alt></p><h2 id="验证nginx代理信息"><a href="#验证nginx代理信息" class="headerlink" title="验证nginx代理信息"></a>验证nginx代理信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># for i in `seq 100` ;do curl -s -I http://192.168.200.101|tail -2|head -1;done</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br></pre></td></tr></table></figure><blockquote><p>real地址就是后端服务器的地址</p></blockquote><h2 id="删除后端"><a href="#删除后端" class="headerlink" title="删除后端"></a>删除后端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X DELETE http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.102:80</span><br><span class="line">curl -X DELETE http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.103:80</span><br></pre></td></tr></table></figure><h1 id="测试并验证"><a href="#测试并验证" class="headerlink" title="测试并验证"></a>测试并验证</h1><p><img src="/archives/c92739f9/01.png" alt><br><img src="/archives/c92739f9/02.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c92739f9.html">https://mds1455975151.github.io/archives/c92739f9.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> upsync </tag>
            
            <tag> consul </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之配置多jobs执行</title>
      <link href="/archives/de5dd2ef.html"/>
      <url>/archives/de5dd2ef.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Jenkins之配置多jobs执行</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>使用jenkins中，当有多个jobs需要互相关联时，就需要设置jobs的上下游关联关系。比如job_A运行后触发job_B。</p><h1 id="多jobs无关联参数"><a href="#多jobs无关联参数" class="headerlink" title="多jobs无关联参数"></a>多jobs无关联参数</h1><p>主要是上游配置及下游配置</p><h1 id="多jobs有关联参数"><a href="#多jobs有关联参数" class="headerlink" title="多jobs有关联参数"></a>多jobs有关联参数</h1><p>插件：Parameterized Trigger Plugin</p><p>场景：游戏打包及更新<br>打包项目：选择分支进行打包<br>更新项目：选择分支，选择包进行更新<br>即可以通过job关联起来，将打包的包名及分支名称传递给更新项目，简化及加快更新速度。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/de5dd2ef.html">https://mds1455975151.github.io/archives/de5dd2ef.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> 多jobs </tag>
            
            <tag> 并行 </tag>
            
            <tag> 串行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git之镜像仓库全攻略</title>
      <link href="/archives/177a4e8b.html"/>
      <url>/archives/177a4e8b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Git镜像仓库应用全攻略指南</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>以下案例以GitHub上的仓库作为原仓库，在国内或者公司局域网部署镜像仓库。使用<a href="https://github.com/mds1455975151/ansible-role-pip.git仓库作为原仓库。" target="_blank" rel="noopener">https://github.com/mds1455975151/ansible-role-pip.git仓库作为原仓库。</a></p><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul><li>加速访问GitHub仓库</li><li>GitHub负载均衡(类似MySQL的读写分离架构)</li></ul><h1 id="原生git-clone-–mirror实现"><a href="#原生git-clone-–mirror实现" class="headerlink" title="原生git clone –mirror实现"></a>原生git clone –mirror实现</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># cd /opt/</span><br><span class="line"># git clone --mirror https://github.com/mds1455975151/ansible-role-pip.git</span><br><span class="line"># ls -al</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x.  4 root root 4096 Jul  7 13:31 .</span><br><span class="line">dr-xr-xr-x. 20 root root 4096 Jul  7 13:33 ..</span><br><span class="line">drwxr-xr-x   7 root root 4096 Jul  7 13:31 ansible-role-pip.git</span><br><span class="line">drwxr-xr-x.  2 root root 4096 Mar 26  2015 rh</span><br><span class="line"># git clone 10.135.95.147:/opt/ansible-role-pip.git .</span><br><span class="line">Cloning into &apos;.&apos;...</span><br><span class="line">remote: Counting objects: 181, done.</span><br><span class="line">remote: Compressing objects: 100% (77/77), done.</span><br><span class="line">remote: Total 181 (delta 75), reused 181 (delta 75)</span><br><span class="line">Receiving objects: 100% (181/181), 18.78 KiB | 0 bytes/s, done.</span><br><span class="line">Resolving deltas: 100% (75/75), done.</span><br><span class="line">[root@VM_95_147_centos tmp]# ll</span><br><span class="line">total 36</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 defaults</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 handlers</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 meta</span><br><span class="line">-rw-r--r-- 1 root root 1233 Jul  7 13:35 README.md</span><br><span class="line">-rw-r--r-- 1 root root   28 Jul  7 13:35 requirements.yml</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 tasks</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 templates</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 tests</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 vars</span><br></pre></td></tr></table></figure><h1 id="利用gogs实现"><a href="#利用gogs实现" class="headerlink" title="利用gogs实现"></a>利用gogs实现</h1><p>查看迁移和镜像仓库设置<br>1、添加迁移外部仓库<br><img src="/archives/177a4e8b/01.png" alt><br>2、配置克隆地址、授权信息、迁移类型等信息<br><img src="/archives/177a4e8b/02.png" alt><br>3、设置仓库同步频率<br><img src="/archives/177a4e8b/03.png" alt><br>4、配置并立即同步<br><img src="/archives/177a4e8b/04.png" alt></p><h1 id="利用github-mirrors实现"><a href="#利用github-mirrors实现" class="headerlink" title="利用github-mirrors实现"></a>利用github-mirrors实现</h1><p><a href="https://docs.gitlab.com/ee/workflow/repository_mirroring.html" target="_blank" rel="noopener">https://docs.gitlab.com/ee/workflow/repository_mirroring.html</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/177a4e8b.html">https://mds1455975151.github.io/archives/177a4e8b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mirror </tag>
            
            <tag> 镜像仓库 </tag>
            
            <tag> webhook </tag>
            
            <tag> gitlab-mirrors </tag>
            
            <tag> gogs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS安装显示器黑屏解决</title>
      <link href="/archives/a542927a.html"/>
      <url>/archives/a542927a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>CentOS安装显示器黑屏解决</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>办公室有一台闲置台式机，重做系统安装CentOS做测试机器，安装过程显示器黑屏。</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>显示器型号：Dell E2214Hv<br>报错信息如下：<br><img src="/archives/a542927a/01.jpg" alt></p><h2 id="问题分析及解决办法"><a href="#问题分析及解决办法" class="headerlink" title="问题分析及解决办法"></a>问题分析及解决办法</h2><p><a href="https://www.centos.org/forums/viewtopic.php?t=23977" target="_blank" rel="noopener">https://www.centos.org/forums/viewtopic.php?t=23977</a><br>在安装界面使用tab键进行选择，添加如下参数，调整输出信号分辨率</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux resolution=1440X900</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.centos.org/forums/viewtopic.php?t=23977" target="_blank" rel="noopener">https://www.centos.org/forums/viewtopic.php?t=23977</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a542927a.html">https://mds1455975151.github.io/archives/a542927a.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> 黑屏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux如何管理本地多个公私钥对</title>
      <link href="/archives/8a44594a.html"/>
      <url>/archives/8a44594a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Linux如何管理本地多个公私钥对</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何在本机统一账号下使用不同的私钥访问不同的git仓库或者其他主机？</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><ul><li><p>新增ssh的配置文件，并修改权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch ~/.ssh/config</span><br><span class="line">chmod 600 ~/.ssh/config</span><br></pre></td></tr></table></figure></li><li><p>配置内容如下(还有别名，端口等参数)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Host *.xxxxxx.xxx</span><br><span class="line">    IdentityFile ~/.ssh/xxxxxxxx</span><br><span class="line">    User xxxxx</span><br><span class="line"></span><br><span class="line">Host github.com</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_for_github</span><br><span class="line">    User git</span><br></pre></td></tr></table></figure></li><li><p>这样配置后就可以不用-i选项来指定私钥了</p></li></ul><h1 id="如果同一主机不同项目使用私钥不同，目前还不知道如何解决"><a href="#如果同一主机不同项目使用私钥不同，目前还不知道如何解决" class="headerlink" title="如果同一主机不同项目使用私钥不同，目前还不知道如何解决?"></a>如果同一主机不同项目使用私钥不同，目前还不知道如何解决?</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eval &quot;$(ssh-agent -s)&quot;</span><br><span class="line">ssh-add ~/.ssh/key1</span><br><span class="line">ssh-add ~/.ssh/key2</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8a44594a.html">https://mds1455975151.github.io/archives/8a44594a.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 多个公私钥对 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Confluence重置管理员密码</title>
      <link href="/archives/21d5abc6.html"/>
      <url>/archives/21d5abc6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Confluence重置管理员密码</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>新公司之前部署的confluence、jira系统，由于相关人员离职，无法找回密码，只能想办法重置密码。</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="使用MySQL存储"><a href="#使用MySQL存储" class="headerlink" title="使用MySQL存储"></a>使用MySQL存储</h2><p>思路：找到对应的数据库存储字段，直接替换为已知密码串</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> jiradb</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> cwd_user;         // 用户列表</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> cwd_membership;   // 用户权限关系表</span><br><span class="line"></span><br><span class="line">// 重置密码语句 替换id内容为要重置用户的用户id</span><br><span class="line"><span class="keyword">update</span> cwd_user <span class="keyword">set</span> credential =  <span class="string">'x61Ey612Kl2gpFL56FT9weDnpSo4AV8j8+qx2AuTHdRyY036xxzTTrw10Wq3+4qQyB+XURPWx1ONxp3Y3pB37A=='</span>  <span class="keyword">where</span> <span class="keyword">id</span>=xxxxxx;</span><br><span class="line"></span><br><span class="line">// 如果你的密码是&#123;PKCS5S2&#125;前缀开头的，则用下面这个sql</span><br><span class="line"><span class="keyword">update</span> cwd_user <span class="keyword">set</span> credential =  <span class="string">'&#123;PKCS5S2&#125;ltrb9LlmZ0QDCJvktxd45WgYLOgPt2XTV8X7av2p0mhPvIwofs9bHYVz2OXQ6/kF'</span>  <span class="keyword">where</span> <span class="keyword">id</span>=xxxxx;</span><br><span class="line"></span><br><span class="line">修改后管理员密码为：Ab123456</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.cnblogs.com/linn/p/4647327.html" target="_blank" rel="noopener">https://www.cnblogs.com/linn/p/4647327.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/21d5abc6.html">https://mds1455975151.github.io/archives/21d5abc6.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Confluence </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenVPN最佳实践</title>
      <link href="/archives/8517c82a.html"/>
      <url>/archives/8517c82a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8517c82a.html">https://mds1455975151.github.io/archives/8517c82a.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>国外域名如何转入国内</title>
      <link href="/archives/adeb23f8.html"/>
      <url>/archives/adeb23f8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>国外域名如何转入国内</p></blockquote><a id="more"></a><h1 id="需求场景"><a href="#需求场景" class="headerlink" title="需求场景"></a>需求场景</h1><p>目前域名备案全国城市不支持境外注册域名，例如在godaddy注册的域名，如果购买国内的云主机的情况，如果要备案，只能转回国内。<br>那么域名能否转回国内，具体操作流程是怎样的？</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><p>godaddy的域名转入国内非常方便，基本上能做到10分钟就转到国内注册商。转移的过程一般流程是先解锁该域名，然后提取域名的转移码到whois邮箱。拿到域名转移码，到国内注册商（比如万网）提交域名转入。这个流程走过之后，会有个转入确认邮件发到你的域名whois邮箱。点击确认之后，再到godaddy后台释放这个域名。这样马上域名就会到国内注册商。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.zhihu.com/question/23014363" target="_blank" rel="noopener">https://www.zhihu.com/question/23014363</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/adeb23f8.html">https://mds1455975151.github.io/archives/adeb23f8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> godaddy </tag>
            
            <tag> 域名备案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Confluence部署实践</title>
      <link href="/archives/96133d02.html"/>
      <url>/archives/96133d02.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Confluence部署实践</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.cnblogs.com/kevingrace/p/7607442.html" target="_blank" rel="noopener">https://www.cnblogs.com/kevingrace/p/7607442.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/96133d02.html">https://mds1455975151.github.io/archives/96133d02.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Confluence </tag>
            
            <tag> wiki </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS禁用ipv6</title>
      <link href="/archives/7da246ab.html"/>
      <url>/archives/7da246ab.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>CentOS禁用ipv6</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何禁用ipv6?</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="根本解决办法"><a href="#根本解决办法" class="headerlink" title="根本解决办法"></a>根本解决办法</h2><blockquote><p>修改grub，在引导时就不加载IPV6模块</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/default/grub       // 第6行添加ipv6.disable=1参数</span></span><br><span class="line">GRUB_TIMEOUT=5</span><br><span class="line">GRUB_DISTRIBUTOR=<span class="string">"<span class="variable">$(sed 's, release .*$,,g' /etc/system-release)</span>"</span></span><br><span class="line">GRUB_DEFAULT=saved</span><br><span class="line">GRUB_DISABLE_SUBMENU=<span class="literal">true</span></span><br><span class="line">GRUB_TERMINAL_OUTPUT=<span class="string">"console"</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">"ipv6.disable=1 crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap biosdevname=0 net.ifnames=0 rhgb quiet"</span></span><br><span class="line">GRUB_DISABLE_RECOVERY=<span class="string">"true"</span></span><br><span class="line"><span class="comment"># grub2-mkconfig -o /boot/grub2/grub.cfg</span></span><br><span class="line">Generating grub configuration file ...</span><br><span class="line">Found linux image: /boot/vmlinuz-3.10.0-693.el7.x86_64</span><br><span class="line">Found initrd image: /boot/initramfs-3.10.0-693.el7.x86_64.img</span><br><span class="line">Found linux image: /boot/vmlinuz-0-rescue-02f22e022e08404a89d15e63ef1de03f</span><br><span class="line">Found initrd image: /boot/initramfs-0-rescue-02f22e022e08404a89d15e63ef1de03f.img</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># reboot</span></span><br><span class="line"><span class="comment"># lsmod|grep ipv6</span></span><br></pre></td></tr></table></figure><h2 id="修改内核参数"><a href="#修改内核参数" class="headerlink" title="修改内核参数"></a>修改内核参数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cat /proc/sys/net/ipv6/conf/all/disable_ipv6</span><br></pre></td></tr></table></figure><p><strong>If the output is 0, IPv6 is enabled.</strong><br><strong>If the output is 1, IPv6 is already disabled.</strong><br>修改前后ifconfig查看网卡信息区别<br><img src="/archives/7da246ab/01.png" alt><br><img src="/archives/7da246ab/02.png" alt><br>完整操作步骤：<br>Step 1: add this rule in /etc/sysctl.conf : net.ipv6.conf.all.disable_ipv6=1<br>Step 2: add this rule in /etc/sysconfig/network: NETWORKING_IPV6=no<br>Step 3: add this setting for each nic X (X is the corresponding number for each nic) in /etc/sysconfig/network-scripts/ifcfg-ethX: IPV6INIT=no<br>Step 4: disable the ip6tables service : chkconfig ip6tables off<br>Step 5: Reload the sysctl configuration: sysctl -p or reboot</p><h2 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h2><p>注意：禁用IPV6后，可能会导致某些服务无法启动,比如VSFTP，对于VSFTP，需要修改如下设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">listen=YES</span><br><span class="line">listen_ipv6=NO</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://blog.csdn.net/bluishglc/article/details/41390785" target="_blank" rel="noopener">https://blog.csdn.net/bluishglc/article/details/41390785</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/7da246ab.html">https://mds1455975151.github.io/archives/7da246ab.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> 禁用IPV6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Graylog+Elasticsearch+MongoDB+Nginx+Rsyslog日志集中收集解决方案</title>
      <link href="/archives/197f9391.html"/>
      <url>/archives/197f9391.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Graylog+Elasticsearch+MongoDB+Nginx+Rsyslog日志集中收集解决方案</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Graylog官网：<a href="https://www.graylog.org/" target="_blank" rel="noopener">https://www.graylog.org/</a><br>Graylog docs： <a href="https://www.graylog.org/" target="_blank" rel="noopener">https://www.graylog.org/</a><br>Graylog download：<a href="https://www.graylog.org/" target="_blank" rel="noopener">https://www.graylog.org/</a></p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node01 ~]# cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line">[root@linux-node01 ~]# uname -r</span><br><span class="line">3.10.0-693.el7.x86_64</span><br><span class="line">[root@linux-node01 ~]# uname -m</span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h2 id="MongoDB安装"><a href="#MongoDB安装" class="headerlink" title="MongoDB安装"></a>MongoDB安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y mongodb-*</span><br><span class="line"># grep -vE &quot;^$|^#&quot; /etc/mongod.conf</span><br><span class="line">bind_ip = 127.0.0.1</span><br><span class="line">port = 27017</span><br><span class="line">auth = true</span><br><span class="line"># systemctl enable mongod</span><br><span class="line"># systemctl start mongod</span><br><span class="line"># netstat -tunlp|grep mongod</span><br><span class="line">tcp        0      0 127.0.0.1:27017         0.0.0.0:*               LISTEN      3120/mongod</span><br><span class="line"># mongo</span><br><span class="line">MongoDB shell version: 2.6.12</span><br><span class="line">connecting to: test</span><br><span class="line">Welcome to the MongoDB shell.</span><br><span class="line">For interactive help, type &quot;help&quot;.</span><br><span class="line">For more comprehensive documentation, see</span><br><span class="line">        http://docs.mongodb.org/</span><br><span class="line">Questions? Try the support group</span><br><span class="line">        http://groups.google.com/group/mongodb-user</span><br><span class="line">Server has startup warnings:</span><br><span class="line">2018-04-22T12:08:56.915+0800 [initandlisten]</span><br><span class="line">2018-04-22T12:08:56.915+0800 [initandlisten] ** WARNING: Readahead for /var/lib/mongodb is set to 4096KB</span><br><span class="line">2018-04-22T12:08:56.915+0800 [initandlisten] **          We suggest setting it to 256KB (512 sectors) or less</span><br><span class="line">2018-04-22T12:08:56.915+0800 [initandlisten] **          http://dochub.mongodb.org/core/readahead</span><br><span class="line">&gt; use graylog2</span><br><span class="line">switched to db graylog2</span><br><span class="line">&gt; db.addUser(&quot;login&quot;,&quot;123456&quot;)</span><br><span class="line">WARNING: The &apos;addUser&apos; shell helper is DEPRECATED. Please use &apos;createUser&apos; instead</span><br><span class="line">Successfully added user: &#123; &quot;user&quot; : &quot;login&quot;, &quot;roles&quot; : [ &quot;dbOwner&quot; ] &#125;</span><br></pre></td></tr></table></figure><h2 id="JDK安装"><a href="#JDK安装" class="headerlink" title="JDK安装"></a>JDK安装</h2><blockquote><p>Graylog及Elasticsearch都需要java环境</p></blockquote><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">JDK下载地址</a>,下载jdk-8u171-linux-x64.rpm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u171-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_171/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.8.0_171"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_171-b11)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.171-b11, mixed mode)</span><br></pre></td></tr></table></figure><h2 id="Elasticsearch安装"><a href="#Elasticsearch安装" class="headerlink" title="Elasticsearch安装"></a>Elasticsearch安装</h2><p>官网地址：<a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener">https://www.elastic.co/products/elasticsearch</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.rpm</span></span><br><span class="line"><span class="comment"># rpm -ivh elasticsearch-6.2.4.rpm</span></span><br><span class="line"><span class="comment"># grep -vE "^$|^#" /etc/elasticsearch/elasticsearch.yml</span></span><br><span class="line">cluster.name: graylog</span><br><span class="line"><span class="comment"># systemctl daemon-reload</span></span><br><span class="line"><span class="comment"># systemctl enable elasticsearch.service</span></span><br><span class="line"><span class="comment"># systemctl start elasticsearch.service</span></span><br><span class="line"><span class="comment">#  curl -X GET http://localhost:9200</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"elcTqyk"</span>,</span><br><span class="line">  <span class="string">"cluster_name"</span> : <span class="string">"graylog"</span>,</span><br><span class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"NJjhhbAyToOw_6by88wG8A"</span>,</span><br><span class="line">  <span class="string">"version"</span> : &#123;</span><br><span class="line">    <span class="string">"number"</span> : <span class="string">"6.2.4"</span>,</span><br><span class="line">    <span class="string">"build_hash"</span> : <span class="string">"ccec39f"</span>,</span><br><span class="line">    <span class="string">"build_date"</span> : <span class="string">"2018-04-12T20:37:28.497551Z"</span>,</span><br><span class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"lucene_version"</span> : <span class="string">"7.2.1"</span>,</span><br><span class="line">    <span class="string">"minimum_wire_compatibility_version"</span> : <span class="string">"5.6.0"</span>,</span><br><span class="line">    <span class="string">"minimum_index_compatibility_version"</span> : <span class="string">"5.0.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">```/</span><br><span class="line"><span class="comment">## Graylog安装</span></span><br><span class="line">&gt; 参照官网RPM安装方式，[地址](http://docs.graylog.org/en/latest/pages/installation/operating_system_packages.html)</span><br><span class="line"></span><br><span class="line">``` bash</span><br><span class="line"><span class="comment"># yum install -y pwgen</span></span><br><span class="line"><span class="comment"># pwgen -N 1 -s 96</span></span><br><span class="line">b6lQupldhq7OdH7qac7jg0ulFHgYoVqAhwDZSpmzpLwFXTWJE3o9GqLFYA4Aac2DuXlPy91VradEgQXYvVfIcWbpT2gexAUb</span><br><span class="line"><span class="comment"># yum install -y perl-Digest-SHA</span></span><br><span class="line"><span class="comment"># echo -n 123456 | shasum -a 256</span></span><br><span class="line">8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92  -</span><br><span class="line"></span><br><span class="line"><span class="comment"># rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-2.4-repository_latest.rpm</span></span><br><span class="line"><span class="comment"># yum install -y graylog-server</span></span><br><span class="line"><span class="comment"># grep -vE "^$|^#" /etc/graylog/server/server.conf</span></span><br><span class="line">is_master = <span class="literal">true</span></span><br><span class="line">node_id_file = /etc/graylog/server/node-id</span><br><span class="line">root_username = admin</span><br><span class="line">root_password_sha2 = 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92</span><br><span class="line">plugin_dir = /usr/share/graylog-server/plugin</span><br><span class="line">rest_listen_uri = http://0.0.0.0:9000/api/</span><br><span class="line">rest_transport_uri = http://192.168.200.100:9000/api/</span><br><span class="line">web_listen_uri = http://0.0.0.0:9000/</span><br><span class="line">elasticsearch_hosts = http://127.0.0.1:9200</span><br><span class="line">rotation_strategy = count</span><br><span class="line">elasticsearch_max_docs_per_index = 20000000</span><br><span class="line">elasticsearch_max_number_of_indices = 20</span><br><span class="line">retention_strategy = delete</span><br><span class="line">elasticsearch_shards = 4</span><br><span class="line">elasticsearch_replicas = 0</span><br><span class="line">elasticsearch_index_prefix = graylog</span><br><span class="line">allow_leading_wildcard_searches = <span class="literal">false</span></span><br><span class="line">allow_highlighting = <span class="literal">false</span></span><br><span class="line">elasticsearch_analyzer = standard</span><br><span class="line">output_batch_size = 500</span><br><span class="line">output_flush_interval = 1</span><br><span class="line">output_fault_count_threshold = 5</span><br><span class="line">output_fault_penalty_seconds = 30</span><br><span class="line">processbuffer_processors = 5</span><br><span class="line">outputbuffer_processors = 3</span><br><span class="line">processor_wait_strategy = blocking</span><br><span class="line">ring_size = 65536</span><br><span class="line">inputbuffer_ring_size = 65536</span><br><span class="line">inputbuffer_processors = 2</span><br><span class="line">inputbuffer_wait_strategy = blocking</span><br><span class="line">message_journal_enabled = <span class="literal">true</span></span><br><span class="line">message_journal_dir = /var/lib/graylog-server/journal</span><br><span class="line">lb_recognition_period_seconds = 3</span><br><span class="line">mongodb_uri = mongodb://login:123456@localhost:27017/graylog2</span><br><span class="line">mongodb_max_connections = 1000</span><br><span class="line">mongodb_threads_allowed_to_block_multiplier = 5</span><br><span class="line">content_packs_dir = /usr/share/graylog-server/contentpacks</span><br><span class="line">content_packs_auto_load = grok-patterns.json</span><br><span class="line">proxied_requests_thread_pool_size = 32</span><br><span class="line"></span><br><span class="line"><span class="comment"># systemctl start graylog-server</span></span><br><span class="line"><span class="comment"># systemctl enable graylog-server</span></span><br></pre></td></tr></table></figure><h2 id="登录及测试"><a href="#登录及测试" class="headerlink" title="登录及测试"></a>登录及测试</h2><p><a href="http://192.168.200.100:9000/" target="_blank" rel="noopener">http://192.168.200.100:9000/</a><br>账号：admin<br>密码：123456</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/197f9391.html">https://mds1455975151.github.io/archives/197f9391.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志收集 </tag>
            
            <tag> Graylog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之实现自动构建Go项目</title>
      <link href="/archives/24256e32.html"/>
      <url>/archives/24256e32.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Jenkins之实现自动构建Go项目</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>项目需求：实现认证服务的自动构建，项目使用Go语言实现</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>[Manage Jenkins] -&gt; [Manage Plugins] -&gt; [Available] -&gt; [Go Plugin]<br><img src="/archives/24256e32/01.png" alt></p><blockquote><p>安装完成重启下jenkins</p></blockquote><h2 id="安装及配置Go环境"><a href="#安装及配置Go环境" class="headerlink" title="安装及配置Go环境"></a>安装及配置Go环境</h2><p><strong>安装Go环境</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tar -zxvf /data0/src/go1.10.linux-amd64.tar.gz -C /usr/local</span></span><br><span class="line">cat &gt;&gt;/etc/profile&lt;&lt;EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># Go bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/go/bin</span><br><span class="line"><span class="built_in">export</span> GOPATH=<span class="string">"/data0/workspace/go"</span></span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># mkdir -p /data0/workspace/go</span></span><br><span class="line"><span class="comment"># source  /etc/profile</span></span><br><span class="line"><span class="comment"># go env</span></span><br></pre></td></tr></table></figure><p><strong>配置Go环境</strong><br>全局工具管理–&gt;Go<br><img src="/archives/24256e32/02.png" alt></p><h2 id="添加构建项目"><a href="#添加构建项目" class="headerlink" title="添加构建项目"></a>添加构建项目</h2><p><strong>添加源码</strong><br><img src="/archives/24256e32/03.png" alt><br>默认情况下代码会checkout到$WORKSPACE/xxxx目录下，但是这样不符合Go项目的目录结构，需要将代码移动到正确的$GOPATH路径下</p><blockquote><p>$WORKSPACE/../src/github.com/xxxx/xxxx-auth</p></blockquote><p><strong>设置Go tools</strong><br><img src="/archives/24256e32/04.png" alt></p><p><strong>设置GOPATH</strong><br><img src="/archives/24256e32/05.png" alt></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create GOPATH</span></span><br><span class="line"><span class="built_in">export</span> GOPATH=<span class="variable">$WORKSPACE</span>/..</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$GOPATH</span>:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Print Go version</span></span><br><span class="line">go version</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run make to perform the build</span></span><br><span class="line">git_branch=`<span class="built_in">echo</span> <span class="variable">$&#123;GIT_BRANCH&#125;</span> |awk -F <span class="string">'/'</span> <span class="string">'&#123;print $2&#125;'</span>`</span><br><span class="line">git_commit=<span class="variable">$&#123;GIT_COMMIT:0:8&#125;</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/xxxx/xxxx-auth &amp;&amp; go build</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/xxxx/xxxx-auth &amp;&amp; tar -zcf <span class="variable">$WORKSPACE</span>/xxxx-auth-<span class="variable">$&#123;git_branch&#125;</span>-<span class="variable">$&#123;git_commit&#125;</span>-<span class="variable">$&#123;date_time&#125;</span>.tar.gz xxxx-auth configs scripts logs templates</span><br><span class="line"></span><br><span class="line">GIT_USER=`<span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/xxxx/xxxx-auth &amp;&amp; git <span class="built_in">log</span> --pretty=format:<span class="string">'%an'</span> -1`</span><br><span class="line">GIT_EMAIL=`<span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/xxxx/xxxx-auth &amp;&amp; git <span class="built_in">log</span> --pretty=format:<span class="string">'%ae'</span> -1`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$GIT_USER</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$GIT_EMAIL</span></span><br><span class="line"><span class="keyword">if</span> [ -f profile.txt ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    rm -f profile.txt</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"GIT_USER=<span class="variable">$GIT_USER</span>"</span>&gt;profile.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"GIT_EMAIL=<span class="variable">$GIT_EMAIL</span>"</span>&gt;&gt;profile.txt</span><br></pre></td></tr></table></figure><h2 id="检查并验证构建结果"><a href="#检查并验证构建结果" class="headerlink" title="检查并验证构建结果"></a>检查并验证构建结果</h2><p><img src="/archives/24256e32/06.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://zpjiang.me/2017/08/09/Setup-Jenkins-for-Go-Projects/" target="_blank" rel="noopener">http://zpjiang.me/2017/08/09/Setup-Jenkins-for-Go-Projects/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/24256e32.html">https://mds1455975151.github.io/archives/24256e32.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go之go get与git clone区别</title>
      <link href="/archives/c008c886.html"/>
      <url>/archives/c008c886.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c008c886.html">https://mds1455975151.github.io/archives/c008c886.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux之服务器修改SSH默认端口后git访问设置</title>
      <link href="/archives/bdb4d807.html"/>
      <url>/archives/bdb4d807.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Linux之服务器修改SSH默认端口后git访问设置</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>由于安全或者其它原因，可能会修改默认的SSH服务端口号，默认情况下，已有的git项目在pull或者push的时候会报错。<br>假设原来的项目的remote设置为<a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:mds1455975151/tools.git，将服务器SSH默认端口修改为4000后，导致pull或push出错。<br>报错信息如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git pull</span></span><br><span class="line">ssh: connect to host github.com port 4000: Connection timed out</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><h1 id="实践记录"><a href="#实践记录" class="headerlink" title="实践记录"></a>实践记录</h1><h2 id="解决方案1：直接修改URL为SSH-开头"><a href="#解决方案1：直接修改URL为SSH-开头" class="headerlink" title="解决方案1：直接修改URL为SSH://开头"></a>解决方案1：直接修改URL为SSH://开头</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># git remote -v</span><br><span class="line">origin  git@github.com:mds1455975151/tools.git (fetch)</span><br><span class="line">origin  git@github.com:mds1455975151/tools.git (push)</span><br><span class="line"># git remote set-url origin ssh://git@github.com:22/mds1455975151/tools.git</span><br><span class="line"># git pull</span><br></pre></td></tr></table></figure><blockquote><p>由于修改了访问方式需要添加github的deploy key</p></blockquote><h2 id="解决方案2：修改本地配置文件"><a href="#解决方案2：修改本地配置文件" class="headerlink" title="解决方案2：修改本地配置文件"></a>解决方案2：修改本地配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt;&gt;~/.ssh/config&lt;&lt;EOF</span></span><br><span class="line"></span><br><span class="line">host proxy.github.com</span><br><span class="line">   Hostname github.com</span><br><span class="line">   Port 22</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># git remote -v</span></span><br><span class="line">origin  git@github.com:mds1455975151/tools.git (fetch)</span><br><span class="line">origin  git@github.com:mds1455975151/tools.git (push)</span><br><span class="line"><span class="comment"># git remote set-url origin git@proxy.github.com:mds1455975151/tools.git</span></span><br><span class="line"><span class="comment"># git pull</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://blog.csdn.net/yuliying/article/details/68956765" target="_blank" rel="noopener">https://blog.csdn.net/yuliying/article/details/68956765</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/bdb4d807.html">https://mds1455975151.github.io/archives/bdb4d807.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenLDAP之Confluence接入设置</title>
      <link href="/archives/56a056be.html"/>
      <url>/archives/56a056be.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>OpenLDAP之Confluence接入设置</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><p>第一步：启用OpenLDAP的memberof功能，方法参考请点击<a href="https://raw.githubusercontent.com/mds1455975151/tools/master/openldap/Enable_MemberOf.md" target="_blank" rel="noopener">这里</a></p><p>第二步：配置Confluence<br>站点管理–用户&amp;安全–用户目录–添加目录<br><img src="/archives/56a056be/1.png" alt><br><img src="/archives/56a056be/2.png" alt><br><img src="/archives/56a056be/3.png" alt><br><img src="/archives/56a056be/4.png" alt><br><img src="/archives/56a056be/5.png" alt><br><img src="/archives/56a056be/6.png" alt><br><img src="/archives/56a056be/7.png" alt><br><img src="/archives/56a056be/8.png" alt></p><p>第三步：配置组权限<br>站点管理–用户&amp;安全–全局权限<br><img src="/archives/56a056be/9.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/56a056be.html">https://mds1455975151.github.io/archives/56a056be.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Confluence </tag>
            
            <tag> OpenLDAP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云数据库本地访问方法总结</title>
      <link href="/archives/5595fe34.html"/>
      <url>/archives/5595fe34.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>云数据库本地访问方法总结</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>越来越多的企业开始使用云数据库不在自建MySQL实例，云数据库默认没有开通公网IP地址，那本地如何连接到云数据进行日常工作呢？</p><h1 id="实践记录"><a href="#实践记录" class="headerlink" title="实践记录"></a>实践记录</h1><h2 id="使用云提供商方案"><a href="#使用云提供商方案" class="headerlink" title="使用云提供商方案"></a>使用云提供商方案</h2><p>使用云提供商解决方案，直接开通外放访问权限。<br>腾讯CDB案例：<br><img src="/archives/5595fe34/04.png" alt></p><h2 id="利用Navicat-for-MySQL工具实现（推荐）"><a href="#利用Navicat-for-MySQL工具实现（推荐）" class="headerlink" title="利用Navicat for MySQL工具实现（推荐）"></a>利用Navicat for MySQL工具实现（推荐）</h2><p>利用工具的SSH或者HTTP方式连接到服务器后然后跳转登录到MySQL实例<br>配置数据库登录信息<br><img src="/archives/5595fe34/01.png" alt><br>配置服务器的SSH登录信息<br><img src="/archives/5595fe34/02.png" alt><br>配置HTTP登录信息<br><img src="/archives/5595fe34/03.png" alt></p><blockquote><p>很多MySQL界面管理工具或者FTP客户端等都支持该功能</p></blockquote><h2 id="命令行登录"><a href="#命令行登录" class="headerlink" title="命令行登录"></a>命令行登录</h2><p>使用ssh转发<br><a href="https://www.cnblogs.com/hfdp/p/6089811.html" target="_blank" rel="noopener">https://www.cnblogs.com/hfdp/p/6089811.html</a><br><a href="https://segmentfault.com/a/1190000009299375" target="_blank" rel="noopener">https://segmentfault.com/a/1190000009299375</a></p><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><ul><li>SQLyog连接报错，提示SSH error: unable to authenticate<br>解答：ssh key要求使用PuTTy生成的密钥格式</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://cloud.tencent.com/document/product/236/3130" target="_blank" rel="noopener">https://cloud.tencent.com/document/product/236/3130</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5595fe34.html">https://mds1455975151.github.io/archives/5595fe34.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云数据库 </tag>
            
            <tag> 本地访问 </tag>
            
            <tag> SQLyog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用Navicat for MySQL生成MySQL差异sql规范</title>
      <link href="/archives/d6585fb.html"/>
      <url>/archives/d6585fb.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d6585fb.html">https://mds1455975151.github.io/archives/d6585fb.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Zsh</title>
      <link href="/archives/d911b12b.html"/>
      <url>/archives/d911b12b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Zsh</p></blockquote><a id="more"></a><h1 id="Zsh介绍"><a href="#Zsh介绍" class="headerlink" title="Zsh介绍"></a>Zsh介绍</h1><h1 id="Zsh部署"><a href="#Zsh部署" class="headerlink" title="Zsh部署"></a>Zsh部署</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y zsh</span><br><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br><span class="line">PS1=<span class="string">'%(!.%&#123;%F&#123;yellow&#125;%&#125;.)$USER @ %&#123;$fg[white]%&#125;%M %&#123;$fg_bold[red]%&#125; %&#123;$fg_bold[green]%&#125;%p %&#123;$fg[cyan]%&#125;%c %&#123;$fg_bold[blue]%&#125;$(git_prompt_info)%&#123;$fg_bold[blue]%&#125; % %&#123;$reset_color%&#125;'</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d911b12b.html">https://mds1455975151.github.io/archives/d911b12b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zsh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Open-Falcon数据库表结构</title>
      <link href="/archives/75152a89.html"/>
      <url>/archives/75152a89.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Open-Falcon数据库表结构</p></blockquote><a id="more"></a><h1 id="1-uic-db-schema-sql"><a href="#1-uic-db-schema-sql" class="headerlink" title="1_uic-db-schema.sql"></a>1_uic-db-schema.sql</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> uic</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">USE</span> uic;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> team;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`team`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`resume`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`creator`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`created`</span> <span class="built_in">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_team_name`</span> (<span class="string">`name`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * role: -1:blocked 0:normal 1:admin 2:root</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="string">`user`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`passwd`</span> <span class="built_in">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`cnname`</span> <span class="built_in">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`im`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`qq`</span> <span class="built_in">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`role`</span> <span class="built_in">tinyint</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">  <span class="string">`creator`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  <span class="string">`created`</span> <span class="built_in">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_user_name`</span> (<span class="string">`name`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="string">`rel_team_user`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`rel_team_user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`tid`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  <span class="string">`uid`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_rel_tid`</span> (<span class="string">`tid`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_rel_uid`</span> (<span class="string">`uid`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="string">`session`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`session`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`uid`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  <span class="string">`sig`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  <span class="string">`expired`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_session_uid`</span> (<span class="string">`uid`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_session_sig`</span> (<span class="string">`sig`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*900150983cd24fb0d6963f7d28e17f72*/</span></span><br><span class="line"><span class="comment">/*insert into `user`(`name`, `passwd`, `role`, `created`) values('root', md5('abc'), 2, now());*/</span></span><br></pre></td></tr></table></figure><h1 id="2-portal-db-schema-sql"><a href="#2-portal-db-schema-sql" class="headerlink" title="2_portal-db-schema.sql"></a>2_portal-db-schema.sql</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> falcon_portal</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">USE</span> falcon_portal;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这里的机器是从机器管理系统中同步过来的</span></span><br><span class="line"><span class="comment"> * 系统拿出来单独部署需要为hbs增加功能，心跳上来的机器写入host表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> host;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> host</span><br><span class="line">(</span><br><span class="line">  <span class="keyword">id</span>             <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  hostname       <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  ip             <span class="built_in">VARCHAR</span>(<span class="number">16</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  agent_version  <span class="built_in">VARCHAR</span>(<span class="number">16</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  plugin_version <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  maintain_begin <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  maintain_end   <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  update_at      <span class="built_in">TIMESTAMP</span>    <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> idx_host_hostname (hostname)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 机器分组信息</span></span><br><span class="line"><span class="comment"> * come_from 0: 从机器管理同步过来的；1: 从页面创建的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> grp;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`grp`</span> (</span><br><span class="line">  <span class="keyword">id</span>          <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  grp_name    <span class="built_in">VARCHAR</span>(<span class="number">255</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  create_user <span class="built_in">VARCHAR</span>(<span class="number">64</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  create_at   <span class="built_in">TIMESTAMP</span>        <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  come_from   <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> idx_host_grp_grp_name (grp_name)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> grp_host;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> grp_host</span><br><span class="line">(</span><br><span class="line">  grp_id  <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  host_id <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="keyword">KEY</span> idx_grp_host_grp_id (grp_id),</span><br><span class="line">  <span class="keyword">KEY</span> idx_grp_host_host_id (host_id)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 监控策略模板</span></span><br><span class="line"><span class="comment"> * tpl_name全局唯一，命名的时候可以适当带上一些前缀，比如：sa.falcon.base</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> tpl;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tpl</span><br><span class="line">(</span><br><span class="line">  <span class="keyword">id</span>          <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  tpl_name    <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  parent_id   <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  action_id   <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  create_user <span class="built_in">VARCHAR</span>(<span class="number">64</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  create_at   <span class="built_in">TIMESTAMP</span>    <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> idx_tpl_name (tpl_name),</span><br><span class="line">  <span class="keyword">KEY</span> idx_tpl_create_user (create_user)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> strategy;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`strategy`</span> (</span><br><span class="line">  <span class="string">`id`</span>          <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`metric`</span>      <span class="built_in">VARCHAR</span>(<span class="number">128</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`tags`</span>        <span class="built_in">VARCHAR</span>(<span class="number">256</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`max_step`</span>    <span class="built_in">INT</span>(<span class="number">11</span>)          <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span>,</span><br><span class="line">  <span class="string">`priority`</span>    <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`func`</span>        <span class="built_in">VARCHAR</span>(<span class="number">16</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'all(#1)'</span>,</span><br><span class="line">  <span class="string">`op`</span>          <span class="built_in">VARCHAR</span>(<span class="number">8</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`right_value`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`note`</span>        <span class="built_in">VARCHAR</span>(<span class="number">128</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`run_begin`</span>   <span class="built_in">VARCHAR</span>(<span class="number">16</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`run_end`</span>     <span class="built_in">VARCHAR</span>(<span class="number">16</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`tpl_id`</span>      <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_strategy_tpl_id`</span> (<span class="string">`tpl_id`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> expression;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`expression`</span> (</span><br><span class="line">  <span class="string">`id`</span>          <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`expression`</span>  <span class="built_in">VARCHAR</span>(<span class="number">1024</span>)    <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`func`</span>        <span class="built_in">VARCHAR</span>(<span class="number">16</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'all(#1)'</span>,</span><br><span class="line">  <span class="string">`op`</span>          <span class="built_in">VARCHAR</span>(<span class="number">8</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`right_value`</span> <span class="built_in">VARCHAR</span>(<span class="number">16</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`max_step`</span>    <span class="built_in">INT</span>(<span class="number">11</span>)          <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span>,</span><br><span class="line">  <span class="string">`priority`</span>    <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`note`</span>        <span class="built_in">VARCHAR</span>(<span class="number">1024</span>)    <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`action_id`</span>   <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`create_user`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`pause`</span>       <span class="built_in">TINYINT</span>(<span class="number">1</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> grp_tpl;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`grp_tpl`</span> (</span><br><span class="line">  <span class="string">`grp_id`</span>    <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`tpl_id`</span>    <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`bind_user`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_grp_tpl_grp_id`</span> (<span class="string">`grp_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_grp_tpl_tpl_id`</span> (<span class="string">`tpl_id`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`plugin_dir`</span> (</span><br><span class="line">  <span class="string">`id`</span>          <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`grp_id`</span>      <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`dir`</span>         <span class="built_in">VARCHAR</span>(<span class="number">255</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`create_user`</span> <span class="built_in">VARCHAR</span>(<span class="number">64</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`create_at`</span>   <span class="built_in">TIMESTAMP</span>        <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_plugin_dir_grp_id`</span> (<span class="string">`grp_id`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="keyword">action</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`action`</span> (</span><br><span class="line">  <span class="string">`id`</span>                   <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`uic`</span>                  <span class="built_in">VARCHAR</span>(<span class="number">255</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`url`</span>                  <span class="built_in">VARCHAR</span>(<span class="number">255</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`callback`</span>             <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`before_callback_sms`</span>  <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`before_callback_mail`</span> <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`after_callback_sms`</span>   <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`after_callback_mail`</span>  <span class="built_in">TINYINT</span>(<span class="number">4</span>)       <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * nodata mock config</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`mockcfg`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`mockcfg`</span> (</span><br><span class="line">  <span class="string">`id`</span>       <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span>     <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'name of mockcfg, used for uuid'</span>,</span><br><span class="line">  <span class="string">`obj`</span>      <span class="built_in">VARCHAR</span>(<span class="number">10240</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'desc of object'</span>,</span><br><span class="line">  <span class="string">`obj_type`</span> <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'type of object, host or group or other'</span>,</span><br><span class="line">  <span class="string">`metric`</span>   <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`tags`</span>     <span class="built_in">VARCHAR</span>(<span class="number">1024</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`dstype`</span>   <span class="built_in">VARCHAR</span>(<span class="number">32</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'GAUGE'</span>,</span><br><span class="line">  <span class="string">`step`</span>     <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">UNSIGNED</span>  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">60</span>,</span><br><span class="line">  <span class="string">`mock`</span>     <span class="keyword">DOUBLE</span>  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>  <span class="keyword">COMMENT</span> <span class="string">'mocked value when nodata occurs'</span>,</span><br><span class="line">  <span class="string">`creator`</span>  <span class="built_in">VARCHAR</span>(<span class="number">64</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`t_create`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'create time'</span>,</span><br><span class="line">  <span class="string">`t_modify`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'last modify time'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`uniq_name`</span> (<span class="string">`name`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line">  <span class="keyword">COLLATE</span>=utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  aggregator cluster metric config table</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`cluster`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`cluster`</span> (</span><br><span class="line">  <span class="string">`id`</span>          <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span>   <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`grp_id`</span>      <span class="built_in">INT</span>            <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`numerator`</span>   <span class="built_in">VARCHAR</span>(<span class="number">10240</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`denominator`</span> <span class="built_in">VARCHAR</span>(<span class="number">10240</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`endpoint`</span>    <span class="built_in">VARCHAR</span>(<span class="number">255</span>)   <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`metric`</span>      <span class="built_in">VARCHAR</span>(<span class="number">255</span>)   <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`tags`</span>        <span class="built_in">VARCHAR</span>(<span class="number">255</span>)   <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`ds_type`</span>     <span class="built_in">VARCHAR</span>(<span class="number">255</span>)   <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`step`</span>        <span class="built_in">INT</span>            <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`last_update`</span> <span class="built_in">TIMESTAMP</span>      <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  <span class="string">`creator`</span>     <span class="built_in">VARCHAR</span>(<span class="number">255</span>)   <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line">  <span class="keyword">COLLATE</span>=utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * alert links</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> alert_link;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> alert_link</span><br><span class="line">(</span><br><span class="line">  <span class="keyword">id</span>        <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">path</span>      <span class="built_in">VARCHAR</span>(<span class="number">16</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="keyword">content</span>   <span class="built_in">TEXT</span>         <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  create_at <span class="built_in">TIMESTAMP</span>    <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> alert_path(<span class="keyword">path</span>)</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8</span><br><span class="line">  <span class="keyword">COLLATE</span> =utf8_unicode_ci;</span><br></pre></td></tr></table></figure><h1 id="3-dashboard-db-schema-sql"><a href="#3-dashboard-db-schema-sql" class="headerlink" title="3_dashboard-db-schema.sql"></a>3_dashboard-db-schema.sql</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MySQL dump 10.13  Distrib 5.5.31, for Linux (x86_64)</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Host: 127.0.0.1    Database: dashboard</span></span><br><span class="line"><span class="comment">-- ------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- Server version5.5.31-log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET TIME_ZONE='+00:00' */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Table structure for table `dashboard_graph`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> dashboard</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">USE</span> dashboard;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`dashboard_graph`</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @saved_cs_client     = @@character_set_client */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = utf8 */</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`dashboard_graph`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">char</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`hosts`</span> <span class="built_in">varchar</span>(<span class="number">10240</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`counters`</span> <span class="built_in">varchar</span>(<span class="number">1024</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`screen_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`timespan`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'3600'</span>,</span><br><span class="line">  <span class="string">`graph_type`</span> <span class="built_in">char</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'h'</span>,</span><br><span class="line">  <span class="string">`method`</span> <span class="built_in">char</span>(<span class="number">8</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`position`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`falcon_tags`</span> <span class="built_in">varchar</span>(<span class="number">512</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_sid`</span> (<span class="string">`screen_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = @saved_cs_client */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Table structure for table `dashboard_screen`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`dashboard_screen`</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @saved_cs_client     = @@character_set_client */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = utf8 */</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`dashboard_screen`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`pid`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">char</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`time`</span> <span class="built_in">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_pid`</span> (<span class="string">`pid`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_pid_n`</span> (<span class="string">`pid`</span>,<span class="string">`name`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = @saved_cs_client */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Table structure for table `tmp_graph`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`tmp_graph`</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @saved_cs_client     = @@character_set_client */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = utf8 */</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`tmp_graph`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`endpoints`</span> <span class="built_in">varchar</span>(<span class="number">10240</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`counters`</span> <span class="built_in">varchar</span>(<span class="number">10240</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`ck`</span> <span class="built_in">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`time_`</span> <span class="built_in">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_ck`</span> (<span class="string">`ck`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"><span class="comment">/*!40101 SET character_set_client = @saved_cs_client */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span>;</span><br></pre></td></tr></table></figure><h1 id="4-graph-db-schema-sql"><a href="#4-graph-db-schema-sql" class="headerlink" title="4_graph-db-schema.sql"></a>4_graph-db-schema.sql</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> graph</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">USE</span> graph;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="string">`graph`</span>.<span class="string">`endpoint`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`graph`</span>.<span class="string">`endpoint`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`endpoint`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`ts`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`t_create`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'create time'</span>,</span><br><span class="line">  <span class="string">`t_modify`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'last modify time'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_endpoint`</span> (<span class="string">`endpoint`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="string">`graph`</span>.<span class="string">`endpoint_counter`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`graph`</span>.<span class="string">`endpoint_counter`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`endpoint_id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`counter`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`step`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="number">60</span> <span class="keyword">comment</span> <span class="string">'in second'</span>,</span><br><span class="line">  <span class="string">`type`</span> <span class="built_in">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'GAUGE|COUNTER|DERIVE'</span>,</span><br><span class="line">  <span class="string">`ts`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`t_create`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'create time'</span>,</span><br><span class="line">  <span class="string">`t_modify`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'last modify time'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_endpoint_id_counter`</span> (<span class="string">`endpoint_id`</span>, <span class="string">`counter`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">if</span> <span class="keyword">exists</span> <span class="string">`graph`</span>.<span class="string">`tag_endpoint`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`graph`</span>.<span class="string">`tag_endpoint`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`tag`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'srv=tv'</span>,</span><br><span class="line">  <span class="string">`endpoint_id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`ts`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`t_create`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'create time'</span>,</span><br><span class="line">  <span class="string">`t_modify`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">COMMENT</span> <span class="string">'last modify time'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`idx_tag_endpoint_id`</span> (<span class="string">`tag`</span>, <span class="string">`endpoint_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><h1 id="5-alarms-db-schema-sql"><a href="#5-alarms-db-schema-sql" class="headerlink" title="5_alarms-db-schema.sql"></a>5_alarms-db-schema.sql</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> alarms</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8</span><br><span class="line">  <span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="keyword">USE</span> alarms;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 建立告警归档资料表, 主要存储各个告警的最后触发状况</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> event_cases;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> event_cases(</span><br><span class="line">                <span class="keyword">id</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">                endpoint <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                metric <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                func <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">                cond <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                note <span class="built_in">VARCHAR</span>(<span class="number">500</span>),</span><br><span class="line">                max_step <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                current_step <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                <span class="keyword">priority</span> <span class="built_in">INT</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                <span class="keyword">status</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                <span class="built_in">timestamp</span> <span class="built_in">Timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                update_at <span class="built_in">Timestamp</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">                closed_at <span class="built_in">Timestamp</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">                closed_note <span class="built_in">VARCHAR</span>(<span class="number">250</span>),</span><br><span class="line">                user_modified <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                tpl_creator <span class="built_in">VARCHAR</span>(<span class="number">64</span>),</span><br><span class="line">                expression_id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                strategy_id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                template_id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                process_note MEDIUMINT,</span><br><span class="line">                process_status <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">'unresolved'</span>,</span><br><span class="line">                PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">                <span class="keyword">INDEX</span> (endpoint, strategy_id, template_id)</span><br><span class="line">)</span><br><span class="line">        <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">        <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 建立告警归档资料表, 存储各个告警触发状况的历史状态</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="keyword">events</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="keyword">events</span> (</span><br><span class="line">                <span class="keyword">id</span> MEDIUMINT <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">                event_caseId <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">                step <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">                cond <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">                <span class="keyword">status</span> <span class="built_in">int</span>(<span class="number">3</span>) <span class="keyword">unsigned</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">                <span class="built_in">timestamp</span> <span class="built_in">Timestamp</span>,</span><br><span class="line">                PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">                <span class="keyword">INDEX</span>(event_caseId),</span><br><span class="line">                <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (event_caseId) <span class="keyword">REFERENCES</span> event_cases(<span class="keyword">id</span>)</span><br><span class="line">                        <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span></span><br><span class="line">                        <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">)</span><br><span class="line">        <span class="keyword">ENGINE</span> =<span class="keyword">InnoDB</span></span><br><span class="line">        <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> =utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 告警留言表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> event_note (</span><br><span class="line">  <span class="keyword">id</span> MEDIUMINT <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  event_caseId <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">  note    <span class="built_in">VARCHAR</span>(<span class="number">300</span>),</span><br><span class="line">  case_id <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  <span class="keyword">status</span> <span class="built_in">VARCHAR</span>(<span class="number">15</span>),</span><br><span class="line">  <span class="built_in">timestamp</span> <span class="built_in">Timestamp</span>,</span><br><span class="line">  user_id <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">  <span class="keyword">INDEX</span> (event_caseId),</span><br><span class="line">  <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (event_caseId) <span class="keyword">REFERENCES</span> event_cases(<span class="keyword">id</span>)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span></span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span>,</span><br><span class="line">  <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (user_id) <span class="keyword">REFERENCES</span> uic.user(<span class="keyword">id</span>)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span></span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="常用比较重要的表"><a href="#常用比较重要的表" class="headerlink" title="常用比较重要的表"></a>常用比较重要的表</h1><ul><li>falcon_portal.strategy 报警规则表</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/75152a89.html">https://mds1455975151.github.io/archives/75152a89.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Open-Falcon </tag>
            
            <tag> 表结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Open-Falcon短信告警实现思路</title>
      <link href="/archives/634a8ea0.html"/>
      <url>/archives/634a8ea0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Open-Falcon短信告警实现思路</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>监控系统产生报警事件之后需要发送报警短信，基本上都是利用各类短信提供商，falcon为了适配各个公司，在接入方案上做了一个规范，需要各公司提供http的短信发送接口。<br><strong>短信发送http接口：</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">method:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">params:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">短信内容</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">tos:</span> <span class="string">使用逗号分隔的多个手机号</span></span><br></pre></td></tr></table></figure><p>整个逻辑流程如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">报警信息-----&gt;封装http短信接口-------------------&gt;运营商短信接口-----------------&gt;发送短信给用户</span><br><span class="line">              method: post</span><br><span class="line">              params:                           参数1：短信内容</span><br><span class="line">                - content: 短信内容              参数2：发送人列表</span><br><span class="line">                - tos: 使用逗号分隔的多个手机号   其他参数：app,key,短信模板等等</span><br></pre></td></tr></table></figure><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><blockquote><p>以腾讯云的短信作为运营商做说明</p></blockquote><h2 id="腾讯云sms服务调试流程"><a href="#腾讯云sms服务调试流程" class="headerlink" title="腾讯云sms服务调试流程"></a>腾讯云sms服务调试流程</h2><ul><li>注册腾讯云账号，开通腾讯云SMS服务</li><li>新建应用获取AppID及App Key完成后，创建签名及短信正文需要腾讯云审核通过才行</li><li>根据个人情况下载对应<a href="https://cloud.tencent.com/document/product/382/5804" target="_blank" rel="noopener">SDK包</a>，以Python为例进行讲解</li><li>安装Python SDK包，使用指定模板群发短信demon进行测试，不指定模板容易出现1014各类模板错误问题，最终结果保证短信发送成功</li></ul><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip install qcloudsms_py</span></span><br><span class="line"><span class="comment"># cat sendsms_id_m_version.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># _*_ coding:utf-8 _*_</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> qcloudsms_py <span class="keyword">import</span> SmsMultiSender</span><br><span class="line"><span class="keyword">from</span> qcloudsms_py.httpclient <span class="keyword">import</span> HTTPError</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> len(sys.argv) != <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Usages: python %s sms_to_userlist, sms_message"</span></span><br><span class="line">    exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">sms_to_userlist = sys.argv[<span class="number">1</span>]</span><br><span class="line">sms_message = sys.argv[<span class="number">2</span>]</span><br><span class="line">sms_to_userlist = sms_to_userlist.split(<span class="string">','</span>)</span><br><span class="line">sms_to_userlist = [ int(i) <span class="keyword">for</span> i <span class="keyword">in</span> sms_to_userlist ]</span><br><span class="line"></span><br><span class="line">appid=<span class="string">"xxx"</span></span><br><span class="line">appkey=<span class="string">"xxx"</span></span><br><span class="line">sms_sign=<span class="string">"xxx"</span></span><br><span class="line">phone_numbers = sms_to_userlist</span><br><span class="line">template_id = xxx</span><br><span class="line">sms_type = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">msender = SmsMultiSender(appid, appkey)</span><br><span class="line">params = [<span class="string">"%s"</span> % sms_message]</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    result = msender.send_with_param(<span class="number">86</span>, phone_numbers,</span><br><span class="line">        template_id, params, sign=sms_sign, extend=<span class="string">""</span>, ext=<span class="string">""</span>)</span><br><span class="line">    <span class="keyword">print</span> ok</span><br><span class="line"><span class="keyword">except</span> HTTPError <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"><span class="comment"># python sendsms_id_m_version.py  # 测试发送结果</span></span><br><span class="line">&#123;<span class="string">u'ext'</span>: <span class="string">u''</span>, <span class="string">u'result'</span>: <span class="number">0</span>, <span class="string">u'errmsg'</span>: <span class="string">u'OK'</span>, <span class="string">u'detail'</span>: [&#123;<span class="string">u'fee'</span>: <span class="number">3</span>, <span class="string">u'mobile'</span>: <span class="string">u'13693645328'</span>, <span class="string">u'result'</span>: <span class="number">0</span>, <span class="string">u'sid'</span>: <span class="string">u'8:tNIvGUXyuK41wH8PFsV20180404'</span>, <span class="string">u'nationcode'</span>: <span class="string">u'86'</span>, <span class="string">u'errmsg'</span>: <span class="string">u'OK'</span>&#125;]&#125;</span><br></pre></td></tr></table></figure><blockquote><p>其中脚本里面的变量可以配置yaml格式的配置文件，动态读取配置项，可以更灵活</p></blockquote><h2 id="封装http短信接口思路"><a href="#封装http短信接口思路" class="headerlink" title="封装http短信接口思路"></a>封装http短信接口思路</h2><blockquote><p>将Open-Falcon post发送的content(短信内容)及tos(使用逗号分隔的多个手机号)提取到然后调用上一步的短信发送脚本即可</p></blockquote><h2 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h2><p>python or go<br>略</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://book.open-falcon.org/zh_0_2/distributed_install/mail-sms.html" target="_blank" rel="noopener">http://book.open-falcon.org/zh_0_2/distributed_install/mail-sms.html</a><br><a href="https://cloud.tencent.com/document/product/382" target="_blank" rel="noopener">https://cloud.tencent.com/document/product/382</a><br><a href="https://github.com/qcloudsms/qcloudsms_py/" target="_blank" rel="noopener">https://github.com/qcloudsms/qcloudsms_py/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/634a8ea0.html">https://mds1455975151.github.io/archives/634a8ea0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Open-Falcon </tag>
            
            <tag> 腾讯云SMS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏资源存储的云解决方案</title>
      <link href="/archives/b0e63f7f.html"/>
      <url>/archives/b0e63f7f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏资源存储的云解决方案</p></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/b0e63f7f.html">https://mds1455975151.github.io/archives/b0e63f7f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云解决方案 </tag>
            
            <tag> 游戏资源存储 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis之快速部署测试环境</title>
      <link href="/archives/ed84650a.html"/>
      <url>/archives/ed84650a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Redis之快速部署测试环境</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>利用第三方RPM包快速部署指定版本的Redis，用于满足日常工作中的环境搭建需求。</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>官网：<a href="https://redis.io/" target="_blank" rel="noopener">https://redis.io/</a><br>RPM包：<a href="http://www.rpmfind.net/linux/rpm2html/search.php?query=redis(x86-64)" target="_blank" rel="noopener">http://www.rpmfind.net/linux/rpm2html/search.php?query=redis(x86-64)</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://www.rpmfind.net/linux/epel/7/x86_64/Packages/r/redis-3.2.10-2.el7.x86_64.rpm</span></span><br><span class="line"><span class="comment"># yum install -y jemalloc</span></span><br><span class="line"><span class="comment"># rpm -ivh redis-3.2.10-2.el7.x86_64.rpm</span></span><br><span class="line"><span class="comment"># systemctl start redis</span></span><br><span class="line"><span class="comment"># systemctl enable redis</span></span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h3><p>配置文件方案：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/redis.conf</span></span><br><span class="line">requirepass xxxxx</span><br><span class="line"><span class="comment"># systemctl restart redis</span></span><br><span class="line"><span class="comment"># redis-cli -h 127.0.0.1</span></span><br><span class="line">127.0.0.1:6379&gt; info</span><br><span class="line">NOAUTH Authentication required.</span><br></pre></td></tr></table></figure><p>线上修改方案：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis-cli -h 127.0.0.1</span></span><br><span class="line">127.0.0.1:6379&gt; config <span class="built_in">set</span> requirepass yourPassword</span><br></pre></td></tr></table></figure><h3 id="设置监听内网端口"><a href="#设置监听内网端口" class="headerlink" title="设置监听内网端口"></a>设置监听内网端口</h3><blockquote><p>安全策略</p></blockquote><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ed84650a.html">https://mds1455975151.github.io/archives/ed84650a.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL之快速部署测试环境</title>
      <link href="/archives/f72695e7.html"/>
      <url>/archives/f72695e7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>MySQL之快速部署测试环境</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>利用MySQL官网的Yum部署方法快速部署指定版本的MySQL，用于满足日常工作中的环境搭建需求。</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>官网下载Yum包地址：<a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/repo/yum/</a><br>官网文档：<a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/</a></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul><li><p>第一步：Adding the MySQL Yum Repository<br><img src="/archives/f72695e7/01.png" alt></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo rpm -Uvh platform-and-version-specific-package-name.rpm</span><br></pre></td></tr></table></figure></li><li><p>第二步：Selecting a Release Series</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum install -y yum-utils</span><br><span class="line">shell&gt; yum repolist all | grep mysql</span><br><span class="line">shell&gt; sudo yum-config-manager --<span class="built_in">disable</span> mysql57-community</span><br><span class="line">shell&gt; sudo yum-config-manager --<span class="built_in">enable</span> mysql56-community</span><br><span class="line">shell&gt; yum repolist enabled | grep mysql</span><br></pre></td></tr></table></figure></li><li><p>第三步：Starting the MySQL Server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo yum install mysql-community-server</span><br></pre></td></tr></table></figure></li><li><p>第四步：Installing MySQL<br>For EL7-based platforms, this is the preferred command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo systemctl start mysqld.service</span><br><span class="line">shell&gt; sudo systemctl status mysqld.service</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意5.5.x\5.6.x\5.7.x各个版本初始化密码设置情况</p></blockquote><ul><li>第五步：Securing the MySQL Installation (for MySQL 5.6 only)</li></ul><h2 id="其他设置"><a href="#其他设置" class="headerlink" title="其他设置"></a>其他设置</h2><ul><li><p>设置管理员密码</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set password for root@localhost = password('123456');</span><br><span class="line">or</span><br><span class="line">mysql&gt; update mysql.user set password='*050376F3855A67F5E2C6514FD3130B31006C1276' where user='root';</span><br></pre></td></tr></table></figure></li><li><p>删除空密码及空账号</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from mysql.user where user='' or password='';</span><br></pre></td></tr></table></figure></li><li><p>设置常用账号密码</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, RELOAD, <span class="keyword">FILE</span>, <span class="keyword">LOCK</span> <span class="keyword">TABLES</span>, <span class="keyword">REPLICATION</span> <span class="keyword">CLIENT</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'dump'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="keyword">PASSWORD</span> <span class="string">'*024B8B8BF4949F99832C5C33CDDD68852053C6C4'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, RELOAD, <span class="keyword">SHUTDOWN</span>, PROCESS, <span class="keyword">FILE</span>, <span class="keyword">LOCK</span> <span class="keyword">TABLES</span>, <span class="keyword">REPLICATION</span> <span class="keyword">CLIENT</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'readonly'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="keyword">PASSWORD</span> <span class="string">'*8F029D7CE5A334DDEADAA8AD89D611EF249B4E06'</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">REPLICATION</span> <span class="keyword">SLAVE</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'repl'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="keyword">PASSWORD</span> <span class="string">'*369588B9F7C5AFC66468BA8E6F7E864942F61432'</span>;</span><br></pre></td></tr></table></figure></li><li><p>设置应用账号权限</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select password('123456');</span><br><span class="line">+<span class="comment">-------------------------------------------+</span></span><br><span class="line">| password('123456')                        |</span><br><span class="line">+<span class="comment">-------------------------------------------+</span></span><br><span class="line">| *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |</span><br><span class="line">+<span class="comment">-------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql&gt; <span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> app_db.* <span class="keyword">to</span> <span class="string">'xxx'</span>@<span class="string">'10.0.%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="keyword">password</span> <span class="string">'*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9'</span>;</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>最小化授权</p></blockquote><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>官网资料</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f72695e7.html">https://mds1455975151.github.io/archives/f72695e7.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ServerChan微信告警推送</title>
      <link href="/archives/2c341905.html"/>
      <url>/archives/2c341905.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>ServerChan微信告警推送</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>实现推荐告警信息到微信的方法如下：<br>1、企业公众号<br>2、通过qq邮箱，在微信平台上开启收到邮件提醒功能<br>3、第三方告警平台API,一般也是收费的<br>ServerChan属于第三种，但是目前是免费的，效果如下：<br><img src="/archives/2c341905/01.png" alt></p><h1 id="实践部署"><a href="#实践部署" class="headerlink" title="实践部署"></a>实践部署</h1><p>参考<a href="http://sc.ftqq.com/3.version" target="_blank" rel="noopener">官网资料</a>即可，很简单</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.361way.com/serverchan/5619.html" target="_blank" rel="noopener">http://www.361way.com/serverchan/5619.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2c341905.html">https://mds1455975151.github.io/archives/2c341905.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信告警 </tag>
            
            <tag> ServerCha </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSL证书</title>
      <link href="/archives/c08a993.html"/>
      <url>/archives/c08a993.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>SSL证书</p></blockquote><a id="more"></a><h1 id="SSL证书简介"><a href="#SSL证书简介" class="headerlink" title="SSL证书简介"></a>SSL证书简介</h1><p>概念参考百度百科介绍<a href="https://baike.baidu.com/item/SSL%E8%AF%81%E4%B9%A6/5201468?fr=aladdin" target="_blank" rel="noopener">SSL证书</a>。</p><h1 id="SSL证书品牌"><a href="#SSL证书品牌" class="headerlink" title="SSL证书品牌"></a>SSL证书品牌</h1><p><img src="/archives/c08a993/01.png" alt></p><h2 id="Comodo"><a href="#Comodo" class="headerlink" title="Comodo"></a>Comodo</h2><p>官网:<a href="https://ssl.comodo.com/" target="_blank" rel="noopener">https://ssl.comodo.com/</a></p><h2 id="GlobalSign"><a href="#GlobalSign" class="headerlink" title="GlobalSign"></a>GlobalSign</h2><p>官网：<a href="https://www.globalsign.com/en/" target="_blank" rel="noopener">https://www.globalsign.com/en/</a><br>使用该品牌证书的国内网站：<a href="https://www.baidu.com/" target="_blank" rel="noopener">百度</a>,<a href="https://www.taobao.com/" target="_blank" rel="noopener">淘宝</a>，<a href="https://www.jd.com/" target="_blank" rel="noopener">京东</a></p><h2 id="Symantec"><a href="#Symantec" class="headerlink" title="Symantec"></a>Symantec</h2><p>官网：<a href="https://www.symantec.com/" target="_blank" rel="noopener">https://www.symantec.com/</a></p><h2 id="Entrust"><a href="#Entrust" class="headerlink" title="Entrust"></a>Entrust</h2><p>官网：<a href="https://www.entrustdatacard.com/" target="_blank" rel="noopener">https://www.entrustdatacard.com/</a></p><h2 id="Let’s-Encrypt"><a href="#Let’s-Encrypt" class="headerlink" title="Let’s Encrypt"></a>Let’s Encrypt</h2><p>官网：<a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/</a></p><h1 id="SSL证书分类"><a href="#SSL证书分类" class="headerlink" title="SSL证书分类"></a>SSL证书分类</h1><h2 id="域名型SSL证书（DV-SSL）"><a href="#域名型SSL证书（DV-SSL）" class="headerlink" title="域名型SSL证书（DV SSL）"></a>域名型SSL证书（DV SSL）</h2><p>即证书颁布机构只对域名的所有者进行在线检查，通常是验证域名下某个指定文件的内容，或者验证与域名相关的某条 TXT 记录；比如访问 [http|https]://<a href="http://www.domain.com/…/test.txt，文件内容：" target="_blank" rel="noopener">http://www.domain.com/…/test.txt，文件内容：</a> 2016082xxxxx39w7b20nelfa；或在与域名相关的DNS服务器上添加一条 TXT 记录：<a href="http://www.domain.com" target="_blank" rel="noopener">http://www.domain.com</a> –&gt; TXT –&gt; 20170xxxxxqmkiby43hpvy8</p><h2 id="企业型SSL证书（OV-SSL）"><a href="#企业型SSL证书（OV-SSL）" class="headerlink" title="企业型SSL证书（OV SSL）"></a>企业型SSL证书（OV SSL）</h2><p>是要购买者提交组织机构资料和单位授权信等在官方注册的凭证，证书颁发机构在签发 SSL 证书前不仅仅要检验域名所有权，还必须对这些资料的真实合法性进行多方查验，只有通过验证的才能颁发 SSL 证书。</p><h2 id="增强型SSL证书（EV-SSL）"><a href="#增强型SSL证书（EV-SSL）" class="headerlink" title="增强型SSL证书（EV SSL）"></a>增强型SSL证书（EV SSL）</h2><p>与其他 SSL 证书一样，都是基于 SSL/TLS 安全协议，但是验证流程更加具体详细，验证步骤更多，这样一来证书所绑定的网站就更加的可靠、可信。它跟普通 SSL 证书的区别也是明显的，安全浏览器的地址栏变绿，如果是不受信的 SSL 证书则拒绝显示，如果是钓鱼网站，地址栏则会变成红色，以警示用户。</p><h1 id="SSL证书支持类型说明"><a href="#SSL证书支持类型说明" class="headerlink" title="SSL证书支持类型说明"></a>SSL证书支持类型说明</h1><p><img src="/archives/c08a993/02.png" alt></p><h2 id="单域名"><a href="#单域名" class="headerlink" title="单域名"></a>单域名</h2><p>略</p><h2 id="多域名"><a href="#多域名" class="headerlink" title="多域名"></a>多域名</h2><p>略</p><h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p>略</p><h2 id="企业EV"><a href="#企业EV" class="headerlink" title="企业EV"></a>企业EV</h2><p>略</p><h1 id="SSL证最佳实践"><a href="#SSL证最佳实践" class="headerlink" title="SSL证最佳实践"></a>SSL证最佳实践</h1><p>单域通配最佳，域名尽量使用-分隔使用一级域名</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://blog.upyun.com/?p=1486" target="_blank" rel="noopener">https://blog.upyun.com/?p=1486</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c08a993.html">https://mds1455975151.github.io/archives/c08a993.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSL证书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>购房</title>
      <link href="/archives/1478470c.html"/>
      <url>/archives/1478470c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>购房记录</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>人生第一次购置房产，记录下相关内容。</p><h1 id="征信证明"><a href="#征信证明" class="headerlink" title="征信证明"></a>征信证明</h1><p>银行放贷会审核借贷人的征信情况，一般都要求打印出来，在办理贷款的时候提交给银行工作人员审核。<br>这个可以在中国人民银行征信中心查询自助打印网点，要求本人带着身份证，到时候会摄像对比身份证信息，非常简单。<br><a href="http://www.pbccrc.org.cn/" target="_blank" rel="noopener">中国人民银行征信中心官网</a><br><a href="http://www.pbccrc.org.cn/zxzx/lxfs/lxfs.shtml" target="_blank" rel="noopener">全国各征信分中心及查询点联系方式</a></p><h1 id="银行流水"><a href="#银行流水" class="headerlink" title="银行流水"></a>银行流水</h1><p>各个银行应该差不多，我是招商银行办理。每个网点都有自助打印柜员机，携带身份证和银行卡即可，操作也非常简单，打印完成就带着银行印章，非常便捷。</p><h1 id="收入证明"><a href="#收入证明" class="headerlink" title="收入证明"></a>收入证明</h1><p>一般需要公司开具，如果情况特殊一般销售都能帮忙解决。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1478470c.html">https://mds1455975151.github.io/archives/1478470c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 购房 </tag>
            
            <tag> 征信证明 </tag>
            
            <tag> 银行流水 </tag>
            
            <tag> 收入证明 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏设计问题</title>
      <link href="/archives/1b7b85e7.html"/>
      <url>/archives/1b7b85e7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏设计问题</p></blockquote><a id="more"></a><ul><li>弱网优化<br>技术<br>策划：增加获取利益的成本</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1b7b85e7.html">https://mds1455975151.github.io/archives/1b7b85e7.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏设计问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cloud-init了解笔记</title>
      <link href="/archives/cb9bbd14.html"/>
      <url>/archives/cb9bbd14.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>Cloud-init用于云实例的早期初始化化工具。<br><a href="https://launchpad.net/cloud-init" target="_blank" rel="noopener">官网</a><br><a href="http://cloudinit.readthedocs.io/en/latest/" target="_blank" rel="noopener">文档</a></p><h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><h2 id="cloud-init应用场景"><a href="#cloud-init应用场景" class="headerlink" title="cloud-init应用场景"></a>cloud-init应用场景</h2><ul><li>OpenStack使用cloud-init进行初始化</li></ul><h2 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://launchpad.net/cloud-init/trunk/17.1/+download/cloud-init-17.1.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf cloud-init-17.1.tar.gz</span></span><br><span class="line"><span class="comment"># cd cloud-init-17.1/</span></span><br><span class="line"><span class="comment"># cat requirements.txt</span></span><br><span class="line"><span class="comment"># pip install -r requirements.txt</span></span><br><span class="line"><span class="comment"># python setup.py install --init-system systemd</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/tech_salon/article/details/73810817" target="_blank" rel="noopener">http://blog.csdn.net/tech_salon/article/details/73810817</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/cb9bbd14.html">https://mds1455975151.github.io/archives/cb9bbd14.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>云服务之腾讯云公网IP无法访问解决方法</title>
      <link href="/archives/168c2524.html"/>
      <url>/archives/168c2524.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>腾讯云公网IP无法访问解决方法</p></blockquote><a id="more"></a><h1 id="问题概述"><a href="#问题概述" class="headerlink" title="问题概述"></a>问题概述</h1><blockquote><p>云服务器一般都没有公网IP地址绑定的服务器上的，所以服务器应用程序无法直接绑定公网IP地址，如何解决这个问题呢？</p></blockquote><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="方案1：绑定0-0-0-0"><a href="#方案1：绑定0-0-0-0" class="headerlink" title="方案1：绑定0.0.0.0"></a>方案1：绑定0.0.0.0</h2><p>服务直接绑定0.0.0.0，并开放对应的安全组端口即可，这个不用介绍了，基本都是这么操作的。</p><h2 id="方案2：绑定内网IP"><a href="#方案2：绑定内网IP" class="headerlink" title="方案2：绑定内网IP"></a>方案2：绑定内网IP</h2><p>这种方法在入职新公司的时候发现的，绑定内网IP地址，腾讯云同样将发往公网IP地址的服务请求转发到服务器内网IP上。</p><blockquote><p>同样需要配置相应的安全组规则</p></blockquote><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/chenggong2dm/article/details/51475222" target="_blank" rel="noopener">http://blog.csdn.net/chenggong2dm/article/details/51475222</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/168c2524.html">https://mds1455975151.github.io/archives/168c2524.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 云服务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7使用问题集锦</title>
      <link href="/archives/f6fea201.html"/>
      <url>/archives/f6fea201.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>CentOS 7使用问题集锦</p></blockquote><a id="more"></a><h1 id="killall命令"><a href="#killall命令" class="headerlink" title="killall命令"></a>killall命令</h1><p>CentOS 7精简安装后,使用中发现没有killall命令。 安装psmisc这个包即可.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install psmisc</span></span><br><span class="line"><span class="comment"># rpm -ql psmisc      # 查看该工具包的相关命令</span></span><br><span class="line">/usr/bin/killall</span><br><span class="line">/usr/bin/peekfd</span><br><span class="line">/usr/bin/prtstat</span><br><span class="line">/usr/bin/pstree</span><br><span class="line">/usr/bin/pstree.x11</span><br><span class="line">/usr/sbin/fuser</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f6fea201.html">https://mds1455975151.github.io/archives/f6fea201.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏上线checklist</title>
      <link href="/archives/c62a0f6f.html"/>
      <url>/archives/c62a0f6f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏上线checklist</p></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c62a0f6f.html">https://mds1455975151.github.io/archives/c62a0f6f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> checklist </tag>
            
            <tag> 游戏上线 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux运维之ssh-agent代理讲解</title>
      <link href="/archives/224bdc06.html"/>
      <url>/archives/224bdc06.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>ssh-agent代理讲解</p></blockquote><a id="more"></a><h1 id="ssh-agent介绍"><a href="#ssh-agent介绍" class="headerlink" title="ssh-agent介绍"></a>ssh-agent介绍</h1><p>ssh-agent命令是一种控制用来保存公钥身份验证所使用的私钥的程序。ssh-agent在X会话或登录会话之初启动，所有其他窗口或程序则以客户端程序的身份启动并加入到ssh-agent程序中。通过使用环境变量，可定位代理并在登录到其他使用ssh机器上时使用代理自动进行身份验证。<br>其实ssh-agent就是一个密钥管理器，运行ssh-agent以后，使用ssh-add将私钥交给ssh-agent保管，其他程序需要身份验证的时候可以将验证申请交给ssh-agent来完成整个认证过程。</p><h1 id="常用终端工具配置"><a href="#常用终端工具配置" class="headerlink" title="常用终端工具配置"></a>常用终端工具配置</h1><h2 id="Xshell"><a href="#Xshell" class="headerlink" title="Xshell"></a>Xshell</h2><p><img src="/archives/224bdc06/01.png" alt></p><h2 id="secureCRT"><a href="#secureCRT" class="headerlink" title="secureCRT"></a>secureCRT</h2><p><img src="/archives/224bdc06/02.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/224bdc06.html">https://mds1455975151.github.io/archives/224bdc06.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh-agent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes部署失败的10个最普遍原因</title>
      <link href="/archives/e0ea2810.html"/>
      <url>/archives/e0ea2810.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Kubernetes部署失败的10个最普遍原因</p></blockquote><a id="more"></a><p><a href="https://kukulinski.com/10-most-common-reasons-kubernetes-deployments-fail-part-1/" target="_blank" rel="noopener">https://kukulinski.com/10-most-common-reasons-kubernetes-deployments-fail-part-1/</a><br><a href="https://kukulinski.com/10-most-common-reasons-kubernetes-deployments-fail-part-2/" target="_blank" rel="noopener">https://kukulinski.com/10-most-common-reasons-kubernetes-deployments-fail-part-2/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e0ea2810.html">https://mds1455975151.github.io/archives/e0ea2810.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes创建挂载共享存储的容器</title>
      <link href="/archives/43db2491.html"/>
      <url>/archives/43db2491.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Kubernetes创建挂载共享存储的容器</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文介绍如何使用NFS来配置一个通过挂载共享存储的Nginx容器。</p><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Kubernetes: v1.8版本 192.168.200.100 CentOS 7.4</span><br><span class="line">NFS:  192.168.200.101  CentOS 7.4</span><br></pre></td></tr></table></figure><h2 id="Kubernetes集群部署"><a href="#Kubernetes集群部署" class="headerlink" title="Kubernetes集群部署"></a>Kubernetes集群部署</h2><p>略</p><h2 id="NFS部署"><a href="#NFS部署" class="headerlink" title="NFS部署"></a>NFS部署</h2><p><strong>Server端</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install rpcbind nfs-utils -y</span></span><br><span class="line"><span class="comment"># mkdir -p /data/www-data</span></span><br><span class="line"><span class="comment"># cat &gt;/etc/exports&lt;&lt;-EOF</span></span><br><span class="line">/data/www-data  192.168.200.0/24(rw,sync)</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># systemctl start nfs</span></span><br><span class="line"><span class="comment"># systemctl enable nfs</span></span><br><span class="line"><span class="comment"># echo "k8s" &gt;&gt; /data/www-data/index.html   # 创建测试文件</span></span><br></pre></td></tr></table></figure><p><strong>Client端</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install nfs-utils -y</span></span><br><span class="line"><span class="comment"># showmount -e node1                 # 显示共享目录</span></span><br><span class="line"><span class="comment"># mount node1:/data/www-data /mnt    # 测试挂载</span></span><br></pre></td></tr></table></figure><blockquote><p>1、配置参数可以根据线上环境调整<br>2、所有Kubernetes node节点必须按照client按照客户端，理解PV\PVC使用原理</p></blockquote><h2 id="创建PV"><a href="#创建PV" class="headerlink" title="创建PV"></a>创建PV</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat pv-nfs.yml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: pv0001</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 5Gi</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  nfs:</span><br><span class="line">    server: node1</span><br><span class="line">    path: <span class="string">"/data/www-data"</span></span><br><span class="line">[root@master k8s]<span class="comment"># kubectl create -f pv-nfs.yml --record</span></span><br><span class="line">persistentvolume <span class="string">"pv0001"</span> created</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl get pv</span></span><br><span class="line">NAME      CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM     STORAGECLASS   REASON    AGE</span><br><span class="line">pv0001    5Gi        RWO            Retain           Available                                      27s</span><br></pre></td></tr></table></figure><h2 id="创建PVC"><a href="#创建PVC" class="headerlink" title="创建PVC"></a>创建PVC</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@master k8s]<span class="comment"># cat pvc.yml</span></span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: myclaim</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 1Gi</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl create -f pvc.yml --record</span></span><br><span class="line">persistentvolumeclaim <span class="string">"myclaim"</span> created</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl get pvc</span></span><br><span class="line">NAME      STATUS    VOLUME    CAPACITY   ACCESS MODES   STORAGECLASS   AGE</span><br><span class="line">myclaim   Bound     pv0001    5Gi        RWO                           5s</span><br></pre></td></tr></table></figure><h2 id="创建Nginx-deployment"><a href="#创建Nginx-deployment" class="headerlink" title="创建Nginx deployment"></a>创建Nginx deployment</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@master k8s]<span class="comment"># cat nginx-deployment-pvc.yml</span></span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deployment-pvc</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx</span><br><span class="line">        track: stable</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: gtest.com/k8s/nginx:1.10</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br><span class="line">        volumeMounts:</span><br><span class="line">        - mountPath: <span class="string">"/usr/share/nginx/html"</span></span><br><span class="line">          name: nginx-storage</span><br><span class="line">      volumes:</span><br><span class="line">      - name: nginx-storage</span><br><span class="line">        persistentVolumeClaim:</span><br><span class="line">          claimName: myclaim</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl get pod -o wide</span></span><br><span class="line">NAME                                    READY     STATUS    RESTARTS   AGE       IP               NODE</span><br><span class="line">nginx-deployment-pvc-789584787d-c2npz   1/1       Running   0          2m        172.20.166.139   192.168.200.101</span><br><span class="line">nginx-deployment-pvc-789584787d-cc7td   1/1       Running   0          2m        172.20.104.9     192.168.200.102</span><br><span class="line">nginx-deployment-pvc-789584787d-j9zdx   1/1       Running   0          2m        172.20.104.10    192.168.200.102</span><br></pre></td></tr></table></figure><h2 id="创建Nginx-Service"><a href="#创建Nginx-Service" class="headerlink" title="创建Nginx Service"></a>创建Nginx Service</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@master k8s]<span class="comment"># cat nginx-svc.yml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-svc</span><br><span class="line">spec:</span><br><span class="line">  <span class="built_in">type</span>: NodePort</span><br><span class="line">  ports:</span><br><span class="line">    - port: 80</span><br><span class="line">      nodePort: 32000</span><br><span class="line">  selector:</span><br><span class="line">    app: nginx</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl create -f nginx-svc.yml --record</span></span><br><span class="line">service <span class="string">"nginx-svc"</span> created</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl get service</span></span><br><span class="line">NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes   ClusterIP   10.68.0.1       &lt;none&gt;        443/TCP        5h</span><br><span class="line">nginx-svc    NodePort    10.68.133.178   &lt;none&gt;        80:32000/TCP   14s</span><br><span class="line">[root@master k8s]<span class="comment"># kubectl get endpoints nginx-svc</span></span><br><span class="line">NAME        ENDPOINTS                                           AGE</span><br><span class="line">nginx-svc   172.20.166.139:80,172.20.104.9:80,172.20.104.10:80   33s</span><br></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>1、浏览器访问测试，访问Kubernetes任意节点的32000端口<br><img src="/archives/43db2491/01.png" alt><br>2、通过dashboard查看创建的各类资源<br><img src="/archives/43db2491/02.png" alt><br><img src="/archives/43db2491/03.png" alt><br><img src="/archives/43db2491/04.png" alt><br><img src="/archives/43db2491/05.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/storage/persistent-volumes/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/43db2491.html">https://mds1455975151.github.io/archives/43db2491.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> 共享存储 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Kubernetes部署jenkins并动态分配资源</title>
      <link href="/archives/48164dd0.html"/>
      <url>/archives/48164dd0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/48164dd0.html">https://mds1455975151.github.io/archives/48164dd0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux之ProxyChains终端代理软件</title>
      <link href="/archives/99c00eae.html"/>
      <url>/archives/99c00eae.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>ProxyChains终端代理软件</p></blockquote><a id="more"></a><h1 id="ProxyChains介绍"><a href="#ProxyChains介绍" class="headerlink" title="ProxyChains介绍"></a>ProxyChains介绍</h1><p><a href="http://proxychains.sourceforge.net/" target="_blank" rel="noopener">官网地址</a><br><a href="https://github.com/haad/proxychains" target="_blank" rel="noopener">Github地址</a><br>About proxychains tool:<br>* It’s a proxifier.<br>* Latest version: 3.1<br>* Dedicated OS: Linux and other Unices.<br>* Allows TCP and DNS tunneling through proxies.<br>* Supports HTTP, SOCKS4 and SOCKS5 proxy servers.<br>* Different proxy types can be mixed in the same chain.<br>* Proxy chain: user-defined list of proxies chained together.</p><p>Usability :<br>* Run any program through proxy server.<br>* Access the Internet from behind a restrictive firewall.<br>* Hide your IP<br>* Run SSH, telnet, wget, ftp, apt, vnc, nmap through proxy servers.<br>* Access Intranets (192.168.<em>.</em>/10.<em>.</em>.*) from outside through reverse proxy</p><h1 id="ProxyChains部署实践"><a href="#ProxyChains部署实践" class="headerlink" title="ProxyChains部署实践"></a>ProxyChains部署实践</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-693.el7.x86_64</span><br></pre></td></tr></table></figure><h2 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://github.com/haad/proxychains/archive/proxychains-4.2.0.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf proxychains-4.2.0.tar.gz</span></span><br><span class="line"><span class="comment"># cd proxychains-proxychains-4.2.0/</span></span><br><span class="line"><span class="comment"># cat README                        # 安装及配置说明</span></span><br><span class="line"><span class="comment"># ./configure</span></span><br><span class="line"><span class="comment"># make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure><h2 id="使用方法说明"><a href="#使用方法说明" class="headerlink" title="使用方法说明"></a>使用方法说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">When to use it ?</span><br><span class="line">1) When the only way to get <span class="string">"outside"</span> from your LAN is through proxy server.</span><br><span class="line">2) To get out from behind restrictive firewall <span class="built_in">which</span> filters outgoing ports.</span><br><span class="line">3) To use two (or more) proxies <span class="keyword">in</span> chain:</span><br><span class="line">        like: your_host &lt;--&gt; proxy1 &lt;--&gt; proxy2 &lt;--&gt; target_host</span><br><span class="line">4) To <span class="string">"proxify"</span> some program with no proxy support built-in (like telnet)</span><br><span class="line">5) Access intranet from outside via proxy.</span><br><span class="line">5) To use DNS behind proxy.</span><br><span class="line"></span><br><span class="line">Some cool features:</span><br><span class="line"></span><br><span class="line">* This program can mix different proxy types <span class="keyword">in</span> the same chain</span><br><span class="line">        like: your_host &lt;--&gt;socks5 &lt;--&gt; http &lt;--&gt; socks4 &lt;--&gt; target_host</span><br><span class="line">* Different chaining options supported</span><br><span class="line">        random order from the list ( user defined length of chain ).</span><br><span class="line">        exact order  (as they appear <span class="keyword">in</span> the list )</span><br><span class="line">        dynamic order (smart exclude dead proxies from chain)</span><br><span class="line">* You can use it with any TCP client application, even network scanners</span><br><span class="line">        yes, yes - you can make portscan via proxy (or chained proxies)</span><br><span class="line">        <span class="keyword">for</span> example with Nmap scanner by fyodor (www.insecire.org/nmap).</span><br><span class="line">        proxychains nmap -sT -PO -p 80 -iR  (find some webservers through proxy)</span><br><span class="line">* You can use it with servers, like squid, sendmail, or whatever.</span><br><span class="line">* DNS resolving through proxy.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Configuration:</span><br><span class="line">--------------</span><br><span class="line"></span><br><span class="line">proxychains looks <span class="keyword">for</span> config file <span class="keyword">in</span> following order:</span><br><span class="line">1)      file listed <span class="keyword">in</span> environment variable <span class="variable">$&#123;PROXYCHAINS_CONF_FILE&#125;</span> or</span><br><span class="line">        provided as a -f argument to proxychains script or binary.</span><br><span class="line">2)      ./proxychains.conf</span><br><span class="line">3)      $(HOME)/.proxychains/proxychains.conf</span><br><span class="line">4)      /etc/proxychains.conf  **</span><br><span class="line"></span><br><span class="line">**see more <span class="keyword">in</span> /etc/proxychains.conf</span><br><span class="line"></span><br><span class="line">Usage Example:</span><br><span class="line"></span><br><span class="line">        $ proxychains telnet targethost.com</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> this example it will run telnet through proxy(or chained proxies)</span><br><span class="line">specified by proxychains.conf</span><br><span class="line"></span><br><span class="line">Usage Example:</span><br><span class="line"></span><br><span class="line">        $ proxychains -f /etc/proxychains-other.conf targethost2.com</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> this example it will use different configuration file <span class="keyword">then</span> proxychains.conf</span><br><span class="line">to connect to targethost2.com host.</span><br><span class="line"></span><br><span class="line">Usage Example:</span><br><span class="line"></span><br><span class="line">        $ proxyresolv targethost.com</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> this example it will resolve targethost.com through proxy(or chained proxies)</span><br><span class="line">specified by proxychains.conf</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1、需要找到稳定快速的代理IP<br>2、proxychains只会代理TCP连接，而ping使用的是ICMP</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/haad/proxychains" target="_blank" rel="noopener">https://github.com/haad/proxychains</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/99c00eae.html">https://mds1455975151.github.io/archives/99c00eae.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ProxyChains </tag>
            
            <tag> 终端代理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web应用问题排查tips</title>
      <link href="/archives/a946f55.html"/>
      <url>/archives/a946f55.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Web应用问题排查tips</p></blockquote><a id="more"></a><h1 id="快速查看服务器的应用及目录"><a href="#快速查看服务器的应用及目录" class="headerlink" title="快速查看服务器的应用及目录"></a>快速查看服务器的应用及目录</h1><p>新登录到一个服务器，或者服务器上有很多应用时，怎么样找到每个应用的监听端口，及应用目录是很重要的</p><ul><li>首先要判断是否docker服务，docker ps可以方便的查看是否是docker服务，是的话也可以列出当前在跑的容器服务</li><li>如果非docker容器的话，(如果是tcp web服务)可以通过netstat -lntp, 或者losf -iTCP -sTCP:listen查看当前在监听请求的服务</li><li>netstat 会显示监听服务的pid，运行进程一般在内存中分配资源，所以可以在/proc/${pid}/目录中查看进程命令，cwd(current work directory)等信息<h1 id="日志总是最好的突破口"><a href="#日志总是最好的突破口" class="headerlink" title="日志总是最好的突破口"></a>日志总是最好的突破口</h1></li><li>如果有ELK等日志分析系统，通过filed查询可以方便的过滤出错误码及对应请求分布</li><li>否则，可以通过grep, awk等命令统计出自己想要的内容，比如<br>过滤某个错误码<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">"\s500\s"</span> access_log</span><br></pre></td></tr></table></figure></li></ul><p>统计最近一段时间请求数量（nginx为例）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$awk</span> <span class="string">'&#123;print $7&#125;'</span> access_log|sort|uniq -c</span><br></pre></td></tr></table></figure><h1 id="配置文件总有你需要的信息"><a href="#配置文件总有你需要的信息" class="headerlink" title="配置文件总有你需要的信息"></a>配置文件总有你需要的信息</h1><p>找到了应用的目录，也在日志中发现了端倪，但是某个错误提示让你无法继续下去，比如某某参数有问题，或者某某服务 (eg:DB) 连接失败，这种情况去配置文件中看一下吧。依赖服务信息(url/port/service_name) ，配置参数(log_info，listen_port等)一般会在配置文件中统一配置的</p><h1 id="链式跟踪，顺藤摸瓜"><a href="#链式跟踪，顺藤摸瓜" class="headerlink" title="链式跟踪，顺藤摸瓜"></a>链式跟踪，顺藤摸瓜</h1><p>很多服务一般都会有trace_id 方便跟踪请求，对某个请求调用链不熟悉的人来说，接入层日志（以nginx为例）是一个很好的切入点</p><ul><li>从接入层可以过滤出问题请求，找到对应的upstream</li><li>upstream一般为LVS/nginx, 这样可以定位到服务模块</li><li>nginx日志中一般会有trace id用来标识一个请求，这样可以去应用日志查询到具体的问题</li></ul><h1 id="反向跟踪，必要时的抓包跟踪"><a href="#反向跟踪，必要时的抓包跟踪" class="headerlink" title="反向跟踪，必要时的抓包跟踪"></a>反向跟踪，必要时的抓包跟踪</h1><p>有时应用日志的报警定位需要找到某个请求具体的来源,一般日志都会打印请求的地址,如果日志中没有打印的话，最好的方式就是抓包分析了.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tcpdump -nn -X dst host <span class="variable">$&#123;dst_ip&#125;</span> and dst port <span class="variable">$&#123;port&#125;</span> -w request.cap</span><br></pre></td></tr></table></figure><p>如果请求量不是很大的话，可以找到请求的src.根据获取的src ip，即可反向跟踪问题</p><h1 id="pp抓包利器-Charles"><a href="#pp抓包利器-Charles" class="headerlink" title="pp抓包利器 Charles"></a>pp抓包利器 Charles</h1><p>现在移动应用流行，好多web服务都会有mobile app，问题排查时，对app的请求与服务端响应分析可以通过Charles代理来实现</p><h1 id="请求模拟-postman"><a href="#请求模拟-postman" class="headerlink" title="请求模拟-postman"></a>请求模拟-postman</h1><p>postman是一个很好的请求模拟器，支持cookie等需要登录操作的请求，是curl的一个升级版 ，交互方式十分友好，在问题复现及修复确认时，可以通过postman来模拟具体的请求</p><h1 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h1><p><a href="http://schin.space/notes/NOTES-%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5tips/" target="_blank" rel="noopener">原文链接</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a946f55.html">https://mds1455975151.github.io/archives/a946f55.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> 问题排查 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用LetsEncrypt配置网站https</title>
      <link href="/archives/78579e83.html"/>
      <url>/archives/78579e83.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>使用LetsEncrypt配置网站https</p></blockquote><a id="more"></a><h1 id="Let’s-Encrypt介绍"><a href="#Let’s-Encrypt介绍" class="headerlink" title="Let’s Encrypt介绍"></a>Let’s Encrypt介绍</h1><p>Let’s Encrypt作为一个公共且免费SSL的项目逐渐被广大用户传播和使用，是由Mozilla、Cisco、Akamai、IdenTrust、EFF等组织人员发起，主要的目的也是为了推进网站从HTTP向HTTPS过度的进程，目前已经有越来越多的商家加入和赞助支持。<br>免费SSL证书的出现，也会对传统提供付费SSL证书服务的商家有不小的打击。到目前为止，Let’s Encrypt获得IdenTrust交叉签名，这就是说可以应用且支持包括FireFox、Chrome在内的主流浏览器的兼容和支持，虽然目前是公测阶段，但是也有不少的用户在自有网站项目中正式使用起来。<br>虽然目前Let’s Encrypt免费SSL证书默认是90天有效期，但是我们也可以到期自动续约，不影响我们的尝试和使用。</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-693.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line"><span class="comment"># nginx -v</span></span><br><span class="line">nginx version: nginx/1.12.2</span><br></pre></td></tr></table></figure><h2 id="使用Certbot-ACME客户端配置"><a href="#使用Certbot-ACME客户端配置" class="headerlink" title="使用Certbot ACME客户端配置"></a>使用Certbot ACME客户端配置</h2><p><strong>第一步：选择软件及操作系统版本</strong><br><a href="https://certbot.eff.org/" target="_blank" rel="noopener">https://certbot.eff.org/</a><br>根据提示选择Web服务器软件及操作系统版本<br><img src="/archives/78579e83/01.png" alt><br><strong>第二步：设置域名解析</strong><br>使用工具配置证书时需要域名可以被正确解析到，请提前做好域名解析。<br><strong>第三步：安装Certbot tools及配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install certbot-nginx</span></span><br><span class="line"><span class="comment"># certbot --nginx                     # 获取证书及配置nginx</span></span><br><span class="line"><span class="comment"># certbot --nginx certonly            # 只生成证书不自动配置nginx</span></span><br><span class="line"><span class="comment"># certbot renew --dry-run             # 重新获取证书</span></span><br><span class="line"><span class="comment"># cd /etc/letsencrypt/live/www.cwquery.com</span></span><br><span class="line"><span class="comment"># ls -l</span></span><br><span class="line">total 4</span><br><span class="line">lrwxrwxrwx 1 root root  39 Mar  8 14:07 cert.pem -&gt; ../../archive/www.cwquery.com/cert1.pem</span><br><span class="line">lrwxrwxrwx 1 root root  40 Mar  8 14:07 chain.pem -&gt; ../../archive/www.cwquery.com/chain1.pem</span><br><span class="line">lrwxrwxrwx 1 root root  44 Mar  8 14:07 fullchain.pem -&gt; ../../archive/www.cwquery.com/fullchain1.pem</span><br><span class="line">lrwxrwxrwx 1 root root  42 Mar  8 14:07 privkey.pem -&gt; ../../archive/www.cwquery.com/privkey1.pem</span><br><span class="line">-rw-r--r-- 1 root root 543 Mar  8 14:07 README</span><br><span class="line">This directory contains your keys and certificates.</span><br><span class="line"></span><br><span class="line">`privkey.pem`  : the private key <span class="keyword">for</span> your certificate.</span><br><span class="line">`fullchain.pem`: the certificate file used <span class="keyword">in</span> most server software.</span><br><span class="line">`chain.pem`    : used <span class="keyword">for</span> OCSP stapling <span class="keyword">in</span> Nginx &gt;=1.3.7.</span><br><span class="line">`cert.pem`     : will <span class="built_in">break</span> many server configurations, and should not be used</span><br><span class="line">                 without reading further documentation (see link below).</span><br><span class="line"></span><br><span class="line">We recommend not moving these files. For more information, see the Certbot</span><br><span class="line">User Guide at https://certbot.eff.org/docs/using.html<span class="comment">#where-are-my-certificates.</span></span><br></pre></td></tr></table></figure><p>配置nginx如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    server &#123;</span><br><span class="line">        server_name www.cwquery.com; # managed by Certbot</span><br><span class="line">        listen [::]:443 ssl ipv6only=on; # managed by Certbot</span><br><span class="line">        listen 443 ssl; # managed by Certbot</span><br><span class="line">        ssl_certificate /etc/letsencrypt/live/www.cwquery.com/fullchain.pem; # managed by Certbot</span><br><span class="line">        ssl_certificate_key /etc/letsencrypt/live/www.cwquery.com/privkey.pem; # managed by Certbot</span><br><span class="line">        include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot</span><br><span class="line">        ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot</span><br><span class="line"></span><br><span class="line">        set $rootdir         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        if ($remote_addr ~ &quot;123.124.197.100&quot;) &#123;</span><br><span class="line">            set $rootdir &quot;/usr/share/nginx/test&quot;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root $rootdir;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">            location = /40x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">            location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">    if ($host = www.cwquery.com) &#123;</span><br><span class="line">        return 301 https://$host$request_uri;</span><br><span class="line">    &#125; # managed by Certbot</span><br><span class="line"></span><br><span class="line">    server_name www.cwquery.com;</span><br><span class="line">    return 404; # managed by Certbot</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>第四步：设置定时重新获取证书</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0,12 * * * python -c <span class="string">'import random; import time; time.sleep(random.random() * 3600)'</span> &amp;&amp; certbot renew</span><br></pre></td></tr></table></figure><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><p>谷歌浏览器测试<br><img src="/archives/78579e83/03.png" alt><br>证书信息<br><img src="/archives/78579e83/02.png" alt></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过以上几个步骤的学习和应用，我们肯定学会了利用Let’s Encrypt免费生成和获取SSL证书文件，随着Let’s Encrypt的应用普及，SSL以后直接免费不需要购买，因为大部分主流浏览器都支持且有更多的主流商家的支持和赞助，HTTPS以后看来也是趋势。在Let’s Encrypt执行过程在中我们需要解决几个问题。<br>1、域名DNS和解析问题。在配置Let’s Encrypt免费SSL证书的时候域名一定要解析到当前服务器，而且DNS尽量用海外域名DNS，如果用国内免费DNS可能会导致获取不到错误。<br>2、Let’s Encrypt默认是90天免费，需要手工或者自动续期才可以继续使用</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/</a><br><a href="https://certbot.eff.org/" target="_blank" rel="noopener">https://certbot.eff.org/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/78579e83.html">https://mds1455975151.github.io/archives/78579e83.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> https </tag>
            
            <tag> LetsEncrypt </tag>
            
            <tag> 免费SSL证书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx之使用Nginx实现灰度发布</title>
      <link href="/archives/8bece5b5.html"/>
      <url>/archives/8bece5b5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>使用Nginx实现灰度发布</p></blockquote><a id="more"></a><h1 id="灰度发布概述"><a href="#灰度发布概述" class="headerlink" title="灰度发布概述"></a>灰度发布概述</h1><p>灰度发布是指在黑与白之间，能够平滑过渡的一种发布方式。AB test就是一种灰度发布方式，让一部分用户继续用A，一部分用户开始用B，如果用户对B没有什么反对意见，那么逐步扩大范围，把所有用户都迁移到B上面来。<br>灰度发布可以保证整体系统的稳定，在初始灰度的时候就可以发现、调整问题，以保证其影响度。<br>灰度发布常见一般有三种方式:</p><ul><li>Nginx+LUA方式</li><li>根据Cookie实现灰度发布</li><li>根据来路IP实现灰度发布</li></ul><p>本文主要将讲解根据Cookie和来路IP这两种方式实现简单的灰度发布。</p><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-693.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line"><span class="comment"># nginx -v</span></span><br><span class="line">nginx version: nginx/1.12.2</span><br></pre></td></tr></table></figure><h2 id="基于IP地址的灰度发布实现"><a href="#基于IP地址的灰度发布实现" class="headerlink" title="基于IP地址的灰度发布实现"></a>基于IP地址的灰度发布实现</h2><p><strong>根据IP地址反向代理到不同的后端server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">upstream prod &#123;</span><br><span class="line">    server 192.168.1.10;</span><br><span class="line">    server 192.168.1.11;</span><br><span class="line">&#125;</span><br><span class="line">upstream pre-prod &#123;</span><br><span class="line">    server 192.168.1.100;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    access_log /var/<span class="built_in">log</span>/nginx/access.log main;</span><br><span class="line">    <span class="built_in">set</span> <span class="variable">$web_backend</span> prod;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$remote_addr</span> ~ <span class="string">"123.123.123.123"</span>) &#123;</span><br><span class="line">        <span class="built_in">set</span> <span class="variable">$web_backend</span> pre-prod;</span><br><span class="line">    &#125;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://<span class="variable">$web_backend</span>;</span><br><span class="line">        include proxy.conf;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>根据IP地址设置不同的网站根目录</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    access_log /var/log/nginx/access.log main;</span><br><span class="line">    set $rootdir &quot;/var/www/html&quot;;</span><br><span class="line">    if ($remote_addr ~ &quot;123.123.123.123&quot;) &#123;</span><br><span class="line">        set $rootdir &quot;/var/www/test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root $rootdir;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>set 命令依赖rewrite模块</p></blockquote><p><strong>利用geoip做基于地理位置的灰度发布</strong><br>参考：<a href="http://www.mamicode.com/info-detail-1477149.html" target="_blank" rel="noopener">http://www.mamicode.com/info-detail-1477149.html</a></p><h2 id="基于cookie的灰度发布实现"><a href="#基于cookie的灰度发布实现" class="headerlink" title="基于cookie的灰度发布实现"></a>基于cookie的灰度发布实现</h2><p><strong>if指令实现</strong><br><strong>map指令实现</strong><br>参考：<a href="https://www.cnblogs.com/weifeng1463/p/7353710.html" target="_blank" rel="noopener">https://www.cnblogs.com/weifeng1463/p/7353710.html</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.cnblogs.com/weifeng1463/p/7353710.html" target="_blank" rel="noopener">https://www.cnblogs.com/weifeng1463/p/7353710.html</a><br><a href="https://www.cnblogs.com/zhangyin6985/p/6064350.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangyin6985/p/6064350.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8bece5b5.html">https://mds1455975151.github.io/archives/8bece5b5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> 灰度发布 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware之文件共享</title>
      <link href="/archives/534d4a72.html"/>
      <url>/archives/534d4a72.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>VMware之文件共享</p></blockquote><a id="more"></a><h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><p>1、宿主机与虚拟机之间的文件共享<br>2、推广Docker服务，搭建Docker测试环境，将window下的代码共享到Linux虚拟机中使用</p><h1 id="操作实践"><a href="#操作实践" class="headerlink" title="操作实践"></a>操作实践</h1><h2 id="Linux环境"><a href="#Linux环境" class="headerlink" title="Linux环境"></a>Linux环境</h2><h3 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h3><p><strong>VMware版本</strong><br>VMware® Workstation 12 Pro<br>12.5.7 build-5813279</p><p><strong>虚拟机版本</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-693.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h3 id="安装VMware-Tools"><a href="#安装VMware-Tools" class="headerlink" title="安装VMware Tools"></a>安装VMware Tools</h3><p>1、虚拟机工具栏–&gt;虚拟机–&gt;安装VMware Tools(VMware将会把工具ios挂载到虚拟机上)<br>2、安装工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir /mnt/cdrom</span></span><br><span class="line"><span class="comment"># mount /dev/cdrom /mnt/cdrom</span></span><br><span class="line"><span class="comment"># cd /mnt/cdrom</span></span><br><span class="line"><span class="comment"># mkdir /usr/local/vm-src</span></span><br><span class="line"><span class="comment"># cp VMwareTools-10.0.5-3228253.tar.gz /usr/local/vm-src</span></span><br><span class="line"><span class="comment"># cd /usr/local/vm-src</span></span><br><span class="line"><span class="comment"># tar zxvf VMwareTools-10.0.5-3228253.tar.gz</span></span><br><span class="line"><span class="comment"># cd vmware-tools-distrib</span></span><br><span class="line"><span class="comment"># ./vmware-install.pl   # 一路回车即可</span></span><br></pre></td></tr></table></figure><p>3、虚拟机设置共享文件夹<br><img src="/archives/534d4a72/01.png" alt><br>4、虚拟机中查看并挂载共享目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@docker-centos ~]<span class="comment"># vmware-hgfsclient</span></span><br><span class="line">code</span><br><span class="line">[root@docker-centos ~]<span class="comment"># mkdir /mnt/win</span></span><br><span class="line">[root@docker-centos ~]<span class="comment"># vmhgfs-fuse .host:/ /mnt/win -o subtype=vmhgfs-fuse,allow_other</span></span><br><span class="line">[root@docker-centos ~]<span class="comment"># cd /mnt/win/code/</span></span><br><span class="line">[root@docker-centos code]<span class="comment"># ll</span></span><br><span class="line">total 1</span><br><span class="line">-rwxrwxrwx 1 root root 1 Mar  3 14:05 code.txt</span><br></pre></td></tr></table></figure><h2 id="Window环境"><a href="#Window环境" class="headerlink" title="Window环境"></a>Window环境</h2><p>略</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.linuxidc.com/Linux/2017-04/142897.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2017-04/142897.htm</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/534d4a72.html">https://mds1455975151.github.io/archives/534d4a72.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VMware </tag>
            
            <tag> 文件共享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之虚拟环境</title>
      <link href="/archives/70f31043.html"/>
      <url>/archives/70f31043.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Python之虚拟环境</p></blockquote><a id="more"></a><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>virtualenv可以搭建虚拟且独立的python运行环境, 使得单个项目的运行环境与其它项目独立起来.</p><h1 id="项目实践"><a href="#项目实践" class="headerlink" title="项目实践"></a>项目实践</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># pip install virtualenv</span></span><br><span class="line">Collecting virtualenv</span><br><span class="line">  Downloading virtualenv-15.1.0-py2.py3-none-any.whl (1.8MB)</span><br><span class="line">    100% |████████████████████████████████| 1.8MB 600kB/s</span><br><span class="line">Installing collected packages: virtualenv</span><br><span class="line">Successfully installed virtualenv-15.1.0</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># virtualenv test1              # 创建虚拟环境</span></span><br><span class="line">New python executable <span class="keyword">in</span> /root/test1/bin/python2</span><br><span class="line">Also creating executable <span class="keyword">in</span> /root/test1/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># source test1/bin/activate     # 进入虚拟环境目录</span></span><br><span class="line">(test1) [root@linux-node8 ~]<span class="comment"># ls -l</span></span><br><span class="line">total 8</span><br><span class="line">-rw-------. 1 root root 1086 Feb 26  2017 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--  1 root root  424 Mar  2 04:43 requirements.txt</span><br><span class="line">drwxr-xr-x  5 root root   77 Mar  2 04:57 test1</span><br><span class="line">(test1) [root@linux-node8 ~]<span class="comment"># deactivate          # 退出虚拟环境</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># virtualenv --system-site-packages test2   # 默认情况下, 虚拟环境中不包括系统的site-packages, 若要使用请添加参数</span></span><br><span class="line">New python executable <span class="keyword">in</span> /root/test2/bin/python2</span><br><span class="line">Also creating executable <span class="keyword">in</span> /root/test2/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># source test2/bin/activate</span></span><br><span class="line">(test2) [root@linux-node8 ~]<span class="comment"># pip freeze &gt;1.txt</span></span><br><span class="line">(test2) [root@linux-node8 ~]<span class="comment"># cat 1.txt</span></span><br><span class="line">backports.ssl-match-hostname==3.4.0.2</span><br><span class="line">chardet==2.2.1</span><br><span class="line">configobj==4.7.2</span><br><span class="line">.............</span><br><span class="line">urlgrabber==3.10</span><br><span class="line">virtualenv==15.1.0</span><br><span class="line">yum-metadata-parser==1.1.4</span><br><span class="line">(test2) [root@linux-node8 ~]<span class="comment"># deactivate</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>1、官网资料：<a href="https://virtualenv.pypa.io/en/stable/" target="_blank" rel="noopener">https://virtualenv.pypa.io/en/stable/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/70f31043.html">https://mds1455975151.github.io/archives/70f31043.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 虚拟环境 </tag>
            
            <tag> virtualenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之项目依赖包管理</title>
      <link href="/archives/ba45f1d3.html"/>
      <url>/archives/ba45f1d3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Python之项目依赖包管理</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>Python项目会涉及到各种依赖包的安装问题，如果环境改变如何快速将所有依赖的包记录下来并快速的在新环境中安装好？以下我们来解决这个问题。</p></blockquote><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="生成现有环境依赖包列表"><a href="#生成现有环境依赖包列表" class="headerlink" title="生成现有环境依赖包列表"></a>生成现有环境依赖包列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># pip freeze &gt;requirements.txt</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># cat requirements.txt</span></span><br><span class="line">backports.ssl-match-hostname==3.4.0.2</span><br><span class="line">chardet==2.2.1</span><br><span class="line">configobj==4.7.2</span><br><span class="line">decorator==3.4.0</span><br><span class="line">iniparse==0.4</span><br></pre></td></tr></table></figure><h2 id="新环境快速安装项目依赖包"><a href="#新环境快速安装项目依赖包" class="headerlink" title="新环境快速安装项目依赖包"></a>新环境快速安装项目依赖包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># pip install -r requirements.txt</span></span><br></pre></td></tr></table></figure><h2 id="相关参数说明"><a href="#相关参数说明" class="headerlink" title="相关参数说明"></a>相关参数说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip freeze</span><br><span class="line">即：Output installed packages <span class="keyword">in</span> requirements format.</span><br><span class="line">pip install -r requirements.txt：</span><br><span class="line">即：-r, --requirement &lt;file&gt;    Install from the given requirements file. This option can be used multiple <span class="built_in">times</span>.</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ba45f1d3.html">https://mds1455975151.github.io/archives/ba45f1d3.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 依赖管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Code-Review之Phabricator入门</title>
      <link href="/archives/ca47022b.html"/>
      <url>/archives/ca47022b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><h1 id="Phabricator简介"><a href="#Phabricator简介" class="headerlink" title="Phabricator简介"></a>Phabricator简介</h1><p><a href="https://phacility.com/" target="_blank" rel="noopener">官网地址</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ca47022b.html">https://mds1455975151.github.io/archives/ca47022b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>配置管理工程师之技能需求</title>
      <link href="/archives/eee8f7af.html"/>
      <url>/archives/eee8f7af.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>配置管理工程师之技能需求</p></blockquote><a id="more"></a><h1 id="配置管理概念"><a href="#配置管理概念" class="headerlink" title="配置管理概念"></a>配置管理概念</h1><p>配置管理（Configuration Management，CM）是通过技术或行政手段对软件产品及其开发过程和生命周期进行控制、规范的一系列措施。配置管理的目标是记录软件产品的演化过程，确保软件开发者在软件生命周期中各个阶段都能得到精确的产品配置。<br>更详细介绍，请点击<a href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/10090499?fr=aladdin" target="_blank" rel="noopener">这里</a></p><h1 id="岗位职责及技能要求"><a href="#岗位职责及技能要求" class="headerlink" title="岗位职责及技能要求"></a>岗位职责及技能要求</h1><p>岗位职责：<br>1、负责制定合理的配置管理策略、制度、流程，并负责推广、培训和优化；<br>2、负责搭建、维护配置管理系统，负责公司产品的版本控制、构建与发布管理；<br>3、负责项目的基线管理、分支管理、版本管理、编译管理，发布管理、归档管理等工作；<br>4、持续跟进优化配置管理相关规范及流程，协助解决开发过程中发现的各种与配置相关问题。</p><p>技能要求：<br>1、熟悉配置管理理论方法，了解项目管理过程和产品开发过程，具备配置管理、变更管理、构建发布过程的实际经验（有持续集成环境配置经验优先）；<br>2、熟练使用SVN， git源码管理工具（有gitlab使用及相关工具配置经验优先）；<br>3、熟悉jenkins 持续集成相关工具（如果可以使用gitlab自带的runner等其他持续集成工具完成相应功能亦可）；<br>4、熟悉linux命令（centos使用者加分），可以编写简单的脚本与jenkins等持续集成工具共同完成自动化运维相关任务（可以在服务器安装配置各种开源软件产品如redis，hadoop技术栈，mongodb等加分）；<br>5、工作态度认真、责任心强、工作细心、有良好的沟通能力、能快速融入团队；<br>6、两年以上工作经验，有互联网产品配置管理经验的优先。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/eee8f7af.html">https://mds1455975151.github.io/archives/eee8f7af.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Code-Review之Gerrit入门</title>
      <link href="/archives/fba2f6b5.html"/>
      <url>/archives/fba2f6b5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Code-Review之Gerrit入门</p></blockquote><a id="more"></a><h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><h2 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h2><h3 id="A-Quick-Introduction-to-Gerrit"><a href="#A-Quick-Introduction-to-Gerrit" class="headerlink" title="A Quick Introduction to Gerrit"></a>A Quick Introduction to Gerrit</h3><p>Gerrit是一个机遇web的代码审查工具，构建在git版本控制系统的基础之上。<br><strong>What is Gerrit?</strong><br><strong>Where does Gerrit fit in?</strong></p><p>The Life and Times of a Change<br>Cloning the Repository<br>Creating the Review<br>Reviewing the Change<br>Reworking the Change<br>Trying out the Change<br>Manually Verifying the Change<br>Submitting the Change</p><h3 id="User-Guide"><a href="#User-Guide" class="headerlink" title="User Guide"></a>User Guide</h3><h3 id="Project-Owner-Guide"><a href="#Project-Owner-Guide" class="headerlink" title="Project Owner Guide"></a>Project Owner Guide</h3><h3 id="Default-Android-Workflow-external"><a href="#Default-Android-Workflow-external" class="headerlink" title="Default Android Workflow (external)"></a>Default Android Workflow (external)</h3><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fba2f6b5.html">https://mds1455975151.github.io/archives/fba2f6b5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Code-Review </tag>
            
            <tag> Gerrit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Foreman使用体验</title>
      <link href="/archives/4e0578ac.html"/>
      <url>/archives/4e0578ac.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Foreman使用体验</p></blockquote><a id="more"></a><h1 id="Foreman简介"><a href="#Foreman简介" class="headerlink" title="Foreman简介"></a>Foreman简介</h1><blockquote><p>Foreman is a complete lifecycle management tool for physical and virtual servers. We give system administrators the power to easily automate repetitive tasks, quickly deploy applications, and proactively manage servers, on-premise or in the cloud.</p></blockquote><p>官网地址：<a href="https://theforeman.org/" target="_blank" rel="noopener">https://theforeman.org/</a><br>文档地址：<a href="https://theforeman.org/manuals/1.16/index.html" target="_blank" rel="noopener">https://theforeman.org/manuals/1.16/index.html</a></p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># yum -y install https://yum.puppetlabs.com/puppet5/puppet5-release-el-7.noarch.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum -y install http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum -y install https://yum.theforeman.org/releases/1.16/el7/x86_64/foreman-release.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum -y install foreman-installer</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># foreman-installer</span></span><br><span class="line">Installing             Done                                               [100%] [...............................................................................................]</span><br><span class="line">  Success!</span><br><span class="line">  * Foreman is running at https://linux-node8.example.com</span><br><span class="line">      Initial credentials are admin / JSkjTzSsVSZWXTJ4</span><br><span class="line">  * Foreman Proxy is running at https://linux-node8.example.com:8443</span><br><span class="line">  * Puppetmaster is running at port 8140</span><br><span class="line">  The full <span class="built_in">log</span> is at /var/<span class="built_in">log</span>/foreman-installer/foreman.log</span><br></pre></td></tr></table></figure><p>登录界面<br><img src="/archives/4e0578ac/01.png" alt><br>登录后首页<br><img src="/archives/4e0578ac/02.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/" target="_blank" rel="noopener">https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4e0578ac.html">https://mds1455975151.github.io/archives/4e0578ac.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Foreman </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何减压？</title>
      <link href="/archives/c9789322.html"/>
      <url>/archives/c9789322.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如何面对压力？如何减压？</p></blockquote><a id="more"></a><p>知乎减压话题：<a href="https://www.zhihu.com/search?type=content&amp;q=%E5%A6%82%E4%BD%95%E5%87%8F%E5%8E%8B" target="_blank" rel="noopener">https://www.zhihu.com/search?type=content&amp;q=%E5%A6%82%E4%BD%95%E5%87%8F%E5%8E%8B</a><br>工作压力大的时候如何得到内心的平静：<a href="https://www.zhihu.com/question/22177438" target="_blank" rel="noopener">https://www.zhihu.com/question/22177438</a><br>压力过大首要因素就是对未来即将发生的事情过度的担忧。。。。<br>压在中国人身上的4座大山：1.房子 2.婚姻 3.孩子 4.野心。</p><p>合适自己的减压方式：</p><ul><li>爬山</li><li>跑步</li><li>收拾房间</li><li>音乐</li><li>电影</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c9789322.html">https://mds1455975151.github.io/archives/c9789322.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 减压 </tag>
            
            <tag> 压力 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git之Gitosis</title>
      <link href="/archives/ad17686.html"/>
      <url>/archives/ad17686.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Gitosis</p></blockquote><a id="more"></a><h1 id="Gitosis简介"><a href="#Gitosis简介" class="headerlink" title="Gitosis简介"></a>Gitosis简介</h1><p><a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="noopener">Github地址</a></p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="安装及配置Gitosis"><a href="#安装及配置Gitosis" class="headerlink" title="安装及配置Gitosis"></a>安装及配置Gitosis</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># git clone git://github.com/res0nat0r/gitosis.git</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cd gitosis/</span></span><br><span class="line">[root@linux-node9 gitosis]<span class="comment"># python setup.py install</span></span><br><span class="line">[root@linux-node9 gitosis]<span class="comment"># useradd \</span></span><br><span class="line">                            -r \</span><br><span class="line">                            -s /bin/sh \</span><br><span class="line">                            -c <span class="string">'git version control'</span> \</span><br><span class="line">                            -d /home/git \</span><br><span class="line">                            git</span><br><span class="line">[root@linux-node9 gitosis]<span class="comment"># mkdir -p /home/git</span></span><br><span class="line">[root@linux-node9 gitosis]<span class="comment"># chown git:git /home/git</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># su - git</span></span><br><span class="line">-sh-4.2$ ls -l</span><br><span class="line">total 0</span><br><span class="line">-sh-4.2$ ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/home/git/.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">'/home/git/.ssh'</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /home/git/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /home/git/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line"><span class="built_in">fc</span>:32:e9:fe:4d:97:f5:9b:3c:ea:bd:f6:9a:05:b8:d3 git@linux-node9.example.com</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+--[ RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|       .     .   |</span></span><br><span class="line"><span class="string">|        S   . . .|</span></span><br><span class="line"><span class="string">|         o   o +.|</span></span><br><span class="line"><span class="string">|        + . + E o|</span></span><br><span class="line"><span class="string">|       . o o oo=o|</span></span><br><span class="line"><span class="string">|       .o.. oo=B=|</span></span><br><span class="line"><span class="string">+-----------------+</span></span><br><span class="line"><span class="string">-sh-4.2$ ls -l</span></span><br><span class="line"><span class="string">total 0</span></span><br><span class="line"><span class="string">-sh-4.2$ cd .ssh/</span></span><br><span class="line"><span class="string">-sh-4.2$ ls -al</span></span><br><span class="line"><span class="string">total 8</span></span><br><span class="line"><span class="string">drwx------ 2 git git   36 Feb 23 22:49 .</span></span><br><span class="line"><span class="string">drwxr-xr-x 3 git git   17 Feb 23 22:49 ..</span></span><br><span class="line"><span class="string">-rw------- 1 git git 1679 Feb 23 22:49 id_rsa</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 git git  409 Feb 23 22:49 id_rsa.pub</span></span><br><span class="line"><span class="string">-sh-4.2$ gitosis-init &lt;id_rsa.pub</span></span><br><span class="line"><span class="string">Initialized empty Git repository in /home/git/repositories/gitosis-admin.git/</span></span><br><span class="line"><span class="string">Reinitialized existing Git repository in /home/git/repositories/gitosis-admin.git/</span></span><br><span class="line"><span class="string">-sh-4.2$ ls -l</span></span><br><span class="line"><span class="string">total 12</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 git git  567 Feb 23 22:49 authorized_keys</span></span><br><span class="line"><span class="string">-rw------- 1 git git 1679 Feb 23 22:49 id_rsa</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 git git  409 Feb 23 22:49 id_rsa.pub</span></span><br><span class="line"><span class="string">-sh-4.2$ cd</span></span><br><span class="line"><span class="string">-sh-4.2$ ls -l</span></span><br><span class="line"><span class="string">total 0</span></span><br><span class="line"><span class="string">drwxr-xr-x 2 git git 26 Feb 23 22:49 gitosis</span></span><br><span class="line"><span class="string">drwxr-xr-x 3 git git 30 Feb 23 22:49 repositories</span></span><br><span class="line"><span class="string">-sh-4.2$ git clone git@192.168.200.109:gitosis-admin.git</span></span><br><span class="line"><span class="string">▽loning into '</span>gitosis-admin<span class="string">'...</span></span><br><span class="line"><span class="string">The authenticity of host '</span>192.168.200.109 (192.168.200.109)<span class="string">' can'</span>t be established.</span><br><span class="line">ECDSA key fingerprint is 2a:d8:e2:3a:ff:a5:58:a2:bd:95:4f:24:c2:6c:5f:ef.</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added <span class="string">'192.168.200.109'</span> (ECDSA) to the list of known hosts.</span><br><span class="line"></span><br><span class="line">remote: Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 5 (delta 1), reused 5 (delta 1)</span><br><span class="line">Receiving objects: 100% (5/5), <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (1/1), <span class="keyword">done</span>.</span><br><span class="line">-sh-4.2$</span><br><span class="line">-sh-4.2$ ls -l</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x 2 git git 26 Feb 23 22:49 gitosis</span><br><span class="line">drwxrwxr-x 4 git git 49 Feb 23 22:52 gitosis-admin</span><br><span class="line">drwxr-xr-x 3 git git 30 Feb 23 22:49 repositories</span><br><span class="line">-sh-4.2$ <span class="built_in">cd</span> gitosis-admin/</span><br><span class="line">-sh-4.2$ ls -l</span><br><span class="line">total 4</span><br><span class="line">-rw-rw-r-- 1 git git 97 Feb 23 22:52 gitosis.conf</span><br><span class="line">drwxrwxr-x 2 git git 44 Feb 23 22:52 keydir</span><br><span class="line">-sh-4.2$ cat gitosis.conf</span><br><span class="line">[gitosis]</span><br><span class="line"></span><br><span class="line">[group gitosis-admin]</span><br><span class="line">members = git@linux-node9.example.com</span><br><span class="line">writable = gitosis-admin</span><br></pre></td></tr></table></figure><h1 id="Gitosis管理"><a href="#Gitosis管理" class="headerlink" title="Gitosis管理"></a>Gitosis管理</h1><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><h2 id="Git仓库管理"><a href="#Git仓库管理" class="headerlink" title="Git仓库管理"></a>Git仓库管理</h2><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://git-scm.com/book/zh/v1/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-Gitosis" target="_blank" rel="noopener">https://git-scm.com/book/zh/v1/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-Gitosis</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ad17686.html">https://mds1455975151.github.io/archives/ad17686.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Gitosis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSL配置汇总</title>
      <link href="/archives/a740e72c.html"/>
      <url>/archives/a740e72c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a740e72c.html">https://mds1455975151.github.io/archives/a740e72c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之Android多渠道打包实践</title>
      <link href="/archives/fdc5d0de.html"/>
      <url>/archives/fdc5d0de.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Jenkins之Android多渠道打包实践</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>多渠道主要目的是为了统计各个应用市场用户数据分析(比如活跃数，崩溃率等)，收集用户信息，这时需要唯一标识来区分这些渠道，本文主要针对多渠道(几百个渠道甚至更多的情况)如何快速打包?</p><h1 id="流程说明"><a href="#流程说明" class="headerlink" title="流程说明"></a>流程说明</h1><ul><li>Jenkins集成Gradle实现打包自动化</li><li>通过Jenkins参数化构建实现自定义环境和渠道打包，签名</li><li>测试包自动上传fir并通过钉钉发送通知</li><li>正式包按照版本归档大奥OSS，发布时拷贝到发布目录</li><li>自动刷新CDN</li></ul><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><p>openjdk比较精简，会出现各种奇葩问题，故切换到Oracle JDK版本<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a> 下载jdk-8u151-linux-x64.rpm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u151-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_151/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">"1.8.0_151"</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_151-b12)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure><h1 id="安装Jenkins"><a href="#安装Jenkins" class="headerlink" title="安装Jenkins"></a>安装Jenkins</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y jenkins</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># vim /etc/sysconfig/jenkins</span></span><br><span class="line">JENKINS_PORT=<span class="string">"9090"</span>   <span class="comment"># 修改启动端口，本机端口冲突可以考虑，默认8080</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># /etc/init.d/jenkins start</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># chkconfig jenkins on</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># netstat -tunlp|grep java</span></span><br><span class="line">tcp6       0      0 :::9090                 :::*                    LISTEN      28491/java</span><br></pre></td></tr></table></figure><h1 id="安装Gradle"><a href="#安装Gradle" class="headerlink" title="安装Gradle"></a>安装Gradle</h1><h1 id="安装Android-SDK"><a href="#安装Android-SDK" class="headerlink" title="安装Android SDK"></a>安装Android SDK</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.simlinux.com/2016/04/21/android-pack-deploy.html" target="_blank" rel="noopener">http://www.simlinux.com/2016/04/21/android-pack-deploy.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fdc5d0de.html">https://mds1455975151.github.io/archives/fdc5d0de.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> 多渠道打包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSL证书格式详解及转换</title>
      <link href="/archives/4b72e495.html"/>
      <url>/archives/4b72e495.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>SSL证书格式详解及转换</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>一般来说，主流的 Web 服务软件，通常都基于 OpenSSL 和 Java 两种基础密码库。</p><ul><li>Tomcat、Weblogic、JBoss 等 Web 服务软件，一般使用 Java 提供的密码库。通过 Java Development Kit （JDK）工具包中的 Keytool 工具，生成 Java Keystore（JKS）格式的证书文件。</li><li>Apache、Nginx 等 Web 服务软件，一般使用 OpenSSL 工具提供的密码库，生成 PEM、KEY、CRT 等格式的证书文件。</li><li>IBM 的 Web 服务产品，如 Websphere、IBM Http Server（IHS）等，一般使用 IBM 产品自带的 iKeyman 工具，生成 KDB 格式的证书文件。</li><li>微软 Windows Server 中的 Internet Information Services（IIS）服务，使用 Windows 自带的证书库生成 PFX 格式的证书文件。</li></ul><h1 id="判断证书格式"><a href="#判断证书格式" class="headerlink" title="判断证书格式"></a>判断证书格式</h1><p>证书格式一般分为文本格式和二进制格式两种</p><ul><li>*.DER 或 *.CER 文件： 这样的证书文件是二进制格式，只含有证书信息，不包含私钥。</li><li>*.CRT 文件：这样的证书文件可以是二进制格式，也可以是文本格式，一般均为文本格式，功能与 *.DER 及 *.CER 证书文件相同。</li><li>*.PEM 文件：这样的证书文件一般是文本格式，可以存放证书或私钥，或者两者都包含。 *.PEM 文件如果只包含私钥，一般用 *.KEY 文件代替。</li><li>*.PFX 或 *.P12 文件： 这样的证书文件是二进制格式，同时包含证书和私钥，且一般有密码保护。</li></ul><p>也可以使用记事本直接打开证书文件。如果显示的是规则的数字字母，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">—–BEGIN CERTIFICATE—–</span><br><span class="line">MIIE5zCCA8+gAwIBAgIQN+whYc2BgzAogau0dc3PtzANBgkqh......</span><br><span class="line">—–END CERTIFICATE—–</span><br></pre></td></tr></table></figure><p>那么，该证书文件是文本格式的。</p><ul><li>如果存在——BEGIN CERTIFICATE——，则说明这是一个证书文件。</li><li>如果存在—–BEGIN RSA PRIVATE KEY—–，则说明这是一个私钥文件。</li></ul><h1 id="证书格式转换"><a href="#证书格式转换" class="headerlink" title="证书格式转换"></a>证书格式转换</h1><p><img src="/archives/4b72e495/ssl%E8%AF%81%E4%B9%A6%E6%A0%BC%E5%BC%8F.jpg" alt><br>可使用以下方式实现证书格式之间的转换：</p><ol><li><p>将JKS格式证书转换成PFX格式<br>使用 JDK 中自带的 Keytool 工具，将 JKS 格式证书文件转换成 PFX 格式。<br>例如，可以执行以下命令将 server.jks 证书文件转换成 server.pfx 证书文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore D:\server.jks -destkeystore D:\server.pfx -srcstoretype JKS -deststoretype PKCS12</span><br></pre></td></tr></table></figure></li><li><p>将 PFX 格式证书转换为 JKS 格式<br>使用 JDK 中自带的 Keytool 工具，将 PFX 格式证书文件转换成 JKS 格式。<br>例如，可以执行以下命令将 server.pfx 证书文件转换成 server.jks 证书文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -importkeystore -srckeystore D:\server.pfx -destkeystore D:\server.jks -srcstoretype PKCS12 -deststoretype JKS</span><br></pre></td></tr></table></figure></li><li><p>将 PEM/KEY/CRT 格式证书转换为 PFX 格式<br>可以使用 OpenSSL工具，将 KEY 格式密钥文件和 CRT 格式公钥文件转换成 PFX 格式证书文件。<br>例如，将 KEY 格式密钥文件（server.key）和 CRT 格式公钥文件（server.crt）拷贝至 OpenSSL 工具安装目录，使用 OpenSSL 工具执行以下命令将证书转换成 server.pfx证书文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> -out server.pfx -inkey server.key -<span class="keyword">in</span> server.crt</span><br></pre></td></tr></table></figure></li><li><p>将PFX转换为PEM/KEY/CRT<br>可以使用OpenSSL工具，将PFX格式证书文件转化为KEY格式密钥文件和CRT格式公钥文件。<br>例如，将PFX格式证书文件拷贝至OpenSSL安装目录，使用OpenSSL工具执行以下命令将证书转换成 server.pem 证书文件、KEY 格式密钥文件（server.key）和 CRT 格式公钥文件（server.crt）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="keyword">in</span> server.pfx -nodes -out server.pem</span><br><span class="line">openssl rsa -<span class="keyword">in</span> server.pem -out server.key</span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.pem -out server.crt</span><br></pre></td></tr></table></figure></li></ol><p>此转换步骤是专用于通过Keytool工具生成私钥和CSR申请证书文件的，并且通过此方法可以在获取到 PEM 格式证书公钥的情况下分离私钥。在实际部署数字证书时，请使用通过此转换步骤分离出来的私钥和申请得到的公钥证书匹配进行部署。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4b72e495.html">https://mds1455975151.github.io/archives/4b72e495.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSL证书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux之设置大批量服务器使用key登录验证方式实践方案</title>
      <link href="/archives/94454339.html"/>
      <url>/archives/94454339.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>设置大批量服务器使用key登录验证方式实践方案</p></blockquote><a id="more"></a><h1 id="密钥生成"><a href="#密钥生成" class="headerlink" title="密钥生成"></a>密钥生成</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat add_user_sshkey.sh</span></span><br><span class="line"><span class="meta">#!/bin/env bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! <span class="variable">$#</span> -eq 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"Usages: <span class="variable">$0</span> username"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">username=<span class="variable">$1</span></span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span> <span class="variable">$&#123;username&#125;</span>.pub</span><br><span class="line">ssh-keygen -t rsa -N <span class="string">''</span> -C <span class="variable">$&#123;username&#125;</span>@kaixin-inc.com -f <span class="variable">$&#123;username&#125;</span>&gt;useradd.log</span><br><span class="line">rsa_hash=`grep <span class="variable">$&#123;username&#125;</span> useradd.log |grep -v Your|awk <span class="string">'&#123;print $1&#125;'</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;username&#125;</span> `date +%Y.%m.%d\ %H:%M:%S` <span class="variable">$&#123;rsa_hash&#125;</span>"</span> &gt;&gt;useradd.list</span><br><span class="line">rm -f useradd.log</span><br><span class="line"><span class="keyword">if</span> [ -f authorized_keys ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    sed -i <span class="string">"/<span class="variable">$&#123;username&#125;</span>/d"</span> authorized_keys</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">cat <span class="variable">$&#123;username&#125;</span>.pub&gt;&gt;authorized_keys</span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz</span><br><span class="line">tar -zcf <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz <span class="variable">$&#123;username&#125;</span>*</span><br><span class="line">mkdir -p sshkey_file</span><br><span class="line">mv <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz sshkey_file</span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span>_sshkey_file.tar.gz</span><br><span class="line">rm -f <span class="variable">$&#123;username&#125;</span> <span class="variable">$&#123;username&#125;</span>.pub</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ls -al sshkey_file/</span></span><br><span class="line">total 12</span><br><span class="line">drwxr-xr-x   2 root root   73 Feb 21 08:19 .</span><br><span class="line">dr-xr-x---. 12 root root 4096 Feb 21 08:31 ..</span><br><span class="line">-rw-r--r--   1 root root 1749 Feb 21 08:14 xxx_sshkey_file.tar.gz</span><br><span class="line">-rw-r--r--   1 root root 1753 Feb 21 08:19 yyy_sshkey_file.tar.gz</span><br></pre></td></tr></table></figure><blockquote><p>将生成后的sshkey发送给用户即可</p></blockquote><h1 id="密钥推送"><a href="#密钥推送" class="headerlink" title="密钥推送"></a>密钥推送</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y ansible</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cat rsync_sshkey_file.yml</span></span><br><span class="line">---</span><br><span class="line">- hosts: all</span><br><span class="line">  remote_user: root</span><br><span class="line">  tasks:</span><br><span class="line">  - name: copy authorized_keys to remote tmp dir</span><br><span class="line">    copy: src=/root/authorized_keys dest=/tmp/authorized_keys owner=root group=root mode=0600</span><br><span class="line"></span><br><span class="line">  - name: del user key on remote host</span><br><span class="line">    shell: cat /tmp/authorized_keys|<span class="keyword">while</span> <span class="built_in">read</span> line;<span class="keyword">do</span> sed -i <span class="string">"#<span class="variable">$line</span>#d"</span> /tmp/authorized_keys;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">  - name: add user key to remote host authorized_keys</span><br><span class="line">    shell: cat /tmp/authorized_keys &gt;&gt;~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">  - name: del tmp authorized_keys</span><br><span class="line">    file: path=/tmp/authorized_keys state=absent</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ansible-playbook rsync_sshkey_file.yml</span></span><br><span class="line"></span><br><span class="line">PLAY [all] *******************************************************************************************************************************************************************</span><br><span class="line"></span><br><span class="line">TASK [Gathering Facts] *******************************************************************************************************************************************************</span><br><span class="line">ok: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [copy authorized_keys to remote tmp dir] ********************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [del user key on remote host] *******************************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [add user key to remote host authorized_keys] ***************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">TASK [del tmp authorized_keys] ***********************************************************************************************************************************************</span><br><span class="line">changed: [127.0.0.1]</span><br><span class="line"></span><br><span class="line">PLAY RECAP *******************************************************************************************************************************************************************</span><br><span class="line">127.0.0.1                  : ok=5    changed=4    unreachable=0    failed=0</span><br></pre></td></tr></table></figure><blockquote><p>1、管理主机通过ansible分发密钥对，前提条件管理主机到所有被管理主机已经建立ssh互信关系，这块可以在服务器申请或者初始化初期就完成</p></blockquote><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>1、如何控制密钥分发的主机组，用户可能没有权限登录所有主机？<br>解答：结合CDMB或者其他权限系统，生成临时的密钥分发组，ansible-playbook指定组进行密钥分发<br>2、非ansible管理的ssh互信关系会被破坏,如何解决？<br>解答：在playbook做处理，先删除要添加的key，在追加，防止重复添加</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/94454339.html">https://mds1455975151.github.io/archives/94454339.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> key登录验证 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nexus之Nexus3尝鲜</title>
      <link href="/archives/5f9114b.html"/>
      <url>/archives/5f9114b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Nexus3尝鲜</p></blockquote><a id="more"></a><h1 id="Nexus简介"><a href="#Nexus简介" class="headerlink" title="Nexus简介"></a>Nexus简介</h1><p><a href="https://www.sonatype.com/" target="_blank" rel="noopener">官网地址</a><br><a href="https://help.sonatype.com/" target="_blank" rel="noopener">官网帮助文档</a></p><h1 id="Nexus2和Nexus3支持formats差别"><a href="#Nexus2和Nexus3支持formats差别" class="headerlink" title="Nexus2和Nexus3支持formats差别"></a>Nexus2和Nexus3支持formats差别</h1><p><img src="/archives/5f9114b/02.png" alt><br><img src="/archives/5f9114b/01.png" alt></p><h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><p>openjdk比较精简，会出现各种奇葩问题，故使用Oracle JDK版本<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a> 下载jdk-8u151-linux-x64.rpm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u151-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_151/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">"1.8.0_151"</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_151-b12)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure><h1 id="安装Maven"><a href="#安装Maven" class="headerlink" title="安装Maven"></a>安装Maven</h1><p><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">下载地址</a>下载apache-maven-3.5.2-bin.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2 /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s apache-maven-3.5.2/ maven</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="built_in">export</span> M2_HOME=/usr/<span class="built_in">local</span>/maven</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$M2_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># mvn -version</span></span><br><span class="line">Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T03:58:13-04:00)</span><br><span class="line">Maven home: /usr/<span class="built_in">local</span>/maven</span><br><span class="line">Java version: 1.8.0_151, vendor: Oracle Corporation</span><br><span class="line">Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.151-5.b12.el7_4.x86_64/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: <span class="string">"linux"</span>, version: <span class="string">"3.10.0-327.el7.x86_64"</span>, arch: <span class="string">"amd64"</span>, family: <span class="string">"unix"</span></span><br></pre></td></tr></table></figure><h1 id="安装Nexus"><a href="#安装Nexus" class="headerlink" title="安装Nexus"></a>安装Nexus</h1><p><a href="http://www.sonatype.org/nexus/archived/?id=38" target="_blank" rel="noopener">下载地址</a> 下载版本nexus-3.8.0-02-unix.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://sonatype-download.global.ssl.fastly.net/nexus/3/nexus-3.8.0-02-unix.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf nexus-3.8.0-02-unix.tar.gz</span></span><br><span class="line"><span class="comment"># cp -r nexus-3.8.0-02 /usr/local/</span></span><br><span class="line"><span class="comment"># cd /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s nexus-3.8.0-02/ nexus</span></span><br><span class="line"><span class="comment"># cd /usr/local/nexus/bin/</span></span><br><span class="line"><span class="comment"># ./nexus start</span></span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">WARNING: Detected execution as <span class="string">"root"</span> user.  This is NOT recommended!</span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">Starting nexus</span><br><span class="line"><span class="comment"># netstat -tunlp|grep 8081</span></span><br><span class="line">tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN      21544/java</span><br></pre></td></tr></table></figure><h2 id="Run-as-a-Service"><a href="#Run-as-a-Service" class="headerlink" title="Run as a Service"></a>Run as a Service</h2><p>将nexus设置为Linux系统的服务，并开机自动启动,请<a href="https://help.sonatype.com/display/NXRM3/Run+as+a+Service" target="_blank" rel="noopener">点击</a></p><h2 id="Run-Behind-a-Reverse-Proxy"><a href="#Run-Behind-a-Reverse-Proxy" class="headerlink" title="Run Behind a Reverse Proxy"></a>Run Behind a Reverse Proxy</h2><p>请<a href="https://help.sonatype.com/display/NXRM3/Run+Behind+a+Reverse+Proxy" target="_blank" rel="noopener">点击</a></p><p>配置完成后，您可以访问web界面 http://{IP}:8081/nexus/ ，进入系统进行设置<br>默认管理账号：admin 密码：admin123<br><img src="/archives/5f9114b/03.png" alt></p><p>修复文件描述符问题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 nexus]<span class="comment"># vim /etc/security/limits.conf</span></span><br><span class="line">@root - nofile 65536</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ulimit -a</span></span><br><span class="line">core file size          (blocks, -c) 0</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 15062</span><br><span class="line">max locked memory       (kbytes, -l) 64</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 65536</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) 8192</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 15062</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># /usr/local/nexus/bin/nexus restart</span></span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">WARNING: Detected execution as <span class="string">"root"</span> user.  This is NOT recommended!</span><br><span class="line">WARNING: ************************************************************</span><br><span class="line">Shutting down nexus</span><br><span class="line">Stopped.</span><br><span class="line">Restarting nexus</span><br></pre></td></tr></table></figure><h1 id="Nexus管理"><a href="#Nexus管理" class="headerlink" title="Nexus管理"></a>Nexus管理</h1><h2 id="Proxying-Maven-and-NPM"><a href="#Proxying-Maven-and-NPM" class="headerlink" title="Proxying Maven and NPM"></a>Proxying Maven and NPM</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Quick+Start+Guide+-+Proxying+Maven+and+NPM" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Quick+Start+Guide+-+Proxying+Maven+and+NPM</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm init    # 初始化一个package.json文件</span></span><br></pre></td></tr></table></figure><h2 id="High-Availability-Introduction"><a href="#High-Availability-Introduction" class="headerlink" title="High Availability - Introduction"></a>High Availability - Introduction</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/High+Availability+-+Introduction" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/High+Availability+-+Introduction</a><br><img src="/archives/5f9114b/04.png" alt></p><h2 id="Backup-and-Restore"><a href="#Backup-and-Restore" class="headerlink" title="Backup and Restore"></a>Backup and Restore</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Configure+and+Run+the+Backup+Task" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Configure+and+Run+the+Backup+Task</a></p><h2 id="Maven-Repositories"><a href="#Maven-Repositories" class="headerlink" title="Maven Repositories"></a>Maven Repositories</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Maven+Repositories" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Maven+Repositories</a></p><h2 id="Private-Registry-for-Docker"><a href="#Private-Registry-for-Docker" class="headerlink" title="Private Registry for Docker"></a>Private Registry for Docker</h2><p>参考资料：<a href="https://help.sonatype.com/display/NXRM3/Private+Registry+for+Docker" target="_blank" rel="noopener">https://help.sonatype.com/display/NXRM3/Private+Registry+for+Docker</a></p><h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><h3 id="Realms"><a href="#Realms" class="headerlink" title="Realms"></a>Realms</h3><h3 id="Privileges"><a href="#Privileges" class="headerlink" title="Privileges"></a>Privileges</h3><h3 id="Roles"><a href="#Roles" class="headerlink" title="Roles"></a>Roles</h3><h3 id="Users"><a href="#Users" class="headerlink" title="Users"></a>Users</h3><h3 id="Anonymous-Access"><a href="#Anonymous-Access" class="headerlink" title="Anonymous Access"></a>Anonymous Access</h3><h3 id="LDAP"><a href="#LDAP" class="headerlink" title="LDAP"></a>LDAP</h3><h3 id="Security-Setup-with-User-Tokens"><a href="#Security-Setup-with-User-Tokens" class="headerlink" title="Security Setup with User Tokens"></a>Security Setup with User Tokens</h3><h3 id="Authentication-via-Remote-User-Token"><a href="#Authentication-via-Remote-User-Token" class="headerlink" title="Authentication via Remote User Token"></a>Authentication via Remote User Token</h3><h3 id="Configuring-SSL"><a href="#Configuring-SSL" class="headerlink" title="Configuring SSL"></a>Configuring SSL</h3><ul><li>Outbound SSL - Trusting SSL Certificates of Remote Repositories</li><li>Outbound SSL - Trusting SSL Certificates Globally</li><li>Outbound SSL - Trusting SSL Certificates Using Keytool</li><li>Inbound SSL - Configuring to Serve Content via HTTPS<ul><li>Using A Reverse Proxy Server</li><li>Serving SSL Directly</li><li>How to Enable the HTTPS Connector</li><li>How to Redirect All Plain HTTP Requests to HTTPS</li><li>How to Disable the HTTP Connector<blockquote><p>重点：掌握Inbound SSL配置方法</p></blockquote></li></ul></li></ul><h3 id="Auditing"><a href="#Auditing" class="headerlink" title="Auditing"></a>Auditing</h3><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.sonatype.com/" target="_blank" rel="noopener">https://www.sonatype.com/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5f9114b.html">https://mds1455975151.github.io/archives/5f9114b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nexus </tag>
            
            <tag> Nexus3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之更新jenkins主题</title>
      <link href="/archives/e27d072c.html"/>
      <url>/archives/e27d072c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>本文介绍如何定制jenkins主题</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何定制jenkins主题，使jenkins更美观，富有个性。</p><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><p>系统管理 —&gt; 插件管理 —&gt; 安装插件Simple Theme</p><h1 id="配置jenkins"><a href="#配置jenkins" class="headerlink" title="配置jenkins"></a>配置jenkins</h1><p>Some ready-made themes can be found on GitHub, these can also serve as examples for fully customizing the Jenkins appearance:</p><ul><li>“Atlassian”</li><li>Doony</li><li>Isotope11</li><li>Material</li><li>Neo2</li><li>Rackspace Canon</li><li>and probably several more… (feel free to add)</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://plugins.jenkins.io/simple-theme-plugin" target="_blank" rel="noopener">simple-theme-plugin</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e27d072c.html">https://mds1455975151.github.io/archives/e27d072c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> simple-theme-plugin </tag>
            
            <tag> Simple Theme </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之多JDK版本配置及使用</title>
      <link href="/archives/4183e6f8.html"/>
      <url>/archives/4183e6f8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍Jenkins如何支持多JDK版本配置及最佳实践</p></blockquote><a id="more"></a><h1 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h1><p>1、多个项目JDK版本需求不同，如何兼容多项目需求(最佳实践统一JDK版本)？<br>2、项目原因从低版本JDK迁移到高版本，避免切换多个jenkins实例。</p><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h2 id="JDK配置"><a href="#JDK配置" class="headerlink" title="JDK配置"></a>JDK配置</h2><p>JDK8<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a>,下载jdk-8u161-linux-x64.rpm<br>JDK9<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html" target="_blank" rel="noopener">下载地址</a>,下载jdk-9.0.4_linux-x64_bin.rpm<br><strong>JDK8安装</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh jdk-8u161-linux-x64.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_161/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.8.0_161"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_161-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)</span><br></pre></td></tr></table></figure><p><strong>JDK9安装</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh jdk-9.0.4_linux-x64_bin.rpm</span></span><br></pre></td></tr></table></figure><blockquote><p>jenkins安装依赖JDK, 配置使用jdk8即可，所以jdk8设置环境变量即可。jdk9安装完成即可，无需设置环境变量。</p></blockquote><p>在jenkins中配置JDK版本<br>登陆jenkins-&gt; 系统设置 -&gt; Global Tool Configuration(全局设置)<br><img src="/archives/4183e6f8/01.png" alt></p><blockquote><p>根据项目需要可以配置多个JDK版本</p></blockquote><h2 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h2><p>新建项目muti-jdk-&gt;选择自由风格-&gt;构建步骤选择Execute shell步骤添加java -version用来验证项目是否正确选择了不同的jdk版本。<br>选择jdk版本的方法有两种：<br>方法1：使用jenkins自带的JDK选择项指定JDK版本<br><img src="/archives/4183e6f8/02.png" alt></p><blockquote><p>该方法可以指定项目JDK版本但是不灵活，项目创建后JDK版本即指定完成，如果有所变动需要手动修改JDK版本</p></blockquote><p>方法2：安装并使用JDK Parameter插件指定JDK版本<br><img src="/archives/4183e6f8/03.png" alt><br>每个参数都有详细说明，添加完成效果如下<br><img src="/archives/4183e6f8/04.png" alt></p><blockquote><p>注意：JDK Parameter插件选择JDK版本优先级高于系统默认的JDK版本选择器</p></blockquote><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://wiki.jenkins.io/display/JENKINS/JDK+Parameter+Plugin" target="_blank" rel="noopener">JDK Parameter</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4183e6f8.html">https://mds1455975151.github.io/archives/4183e6f8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> JDK </tag>
            
            <tag> 多版本管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>公有云技术研究之弹性伸缩</title>
      <link href="/archives/888965e1.html"/>
      <url>/archives/888965e1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>弹性伸缩是根据用户的业务需求和策略，自动调整其弹性计算资源的管理服务。</p></blockquote><a id="more"></a><h1 id="弹性伸缩简介"><a href="#弹性伸缩简介" class="headerlink" title="弹性伸缩简介"></a>弹性伸缩简介</h1><p>弹性伸缩（Auto Scaling）是根据用户的业务需求和策略，自动调整其弹性计算资源的管理服务。用户根据自己的业务需求自动调整其弹性计算资源，在业务需求增长时，无缝增加云实例，在业务需求下降时，自动减少云实例以节约成本。弹性伸缩策略不仅能够让需求稳定规律的应用程序实现自动化管理，同时告别业务突增或者cc攻击等带来的烦恼，对于每天、每周、每月使用量不停波动的应用程序还能够根据业务负载分钟级扩展。弹性伸缩策略让集群保持恰到好处的实例数量。<br>弹性伸缩一般都是免费的服务，但是通过弹性伸缩自动创建的云实例，需要按照云厂商付费策略进行付费。</p><p><strong>弹性伸缩特点</strong><br>1、自动化<br>设置伸缩策略后，根据业务负载情况，动态实时自动创建或释放云实例，做到全程无需人工干预，免去人工部署负担。<br>2、降低成本<br>以最合适的云实例应对业务高峰，自动化添加、删除实例。提供设备利用率，节约部署和云实例成本。<br>3、计划性<br>针对负载负载有时间规律的业务，根据设置自动化扩容。<br>4、容错性<br>自动检测实例的健康状况，一旦发现异常，自动复制出健康的实例，替换异常实例，确保业务稳定。<br>5、自动配置负载均衡<br>自动管理负载均衡配置，自动增删实例。<br>6、审计需求<br>记录、提醒出现问题可以快速提供判断依据定位问题。</p><p><strong>弹性伸缩适用场景</strong><br>1、电商网站<br>2、微博、新闻类<br>3、视频、直播类<br>4、游戏行业(大区型)<br>5、其他业务峰值波动大的业务场景</p><p><strong>使用弹性伸缩对比</strong><br>传统模式下的集群维护<br><img src="/archives/888965e1/02.png" alt><br>采用AS后的效果<br><img src="/archives/888965e1/03.png" alt></p><h1 id="弹性伸缩应用讲解"><a href="#弹性伸缩应用讲解" class="headerlink" title="弹性伸缩应用讲解"></a>弹性伸缩应用讲解</h1><h2 id="配置流程"><a href="#配置流程" class="headerlink" title="配置流程"></a>配置流程</h2><p>创建伸缩配置–&gt;创建伸缩组–&gt;添加已有云实例–&gt;创建定时任务–&gt;创建告警触发策略<br><img src="/archives/888965e1/01.png" alt></p><h2 id="开发者资源"><a href="#开发者资源" class="headerlink" title="开发者资源"></a>开发者资源</h2><p>一般都提供API供用户自定义完成业务需求</p><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul><li><p>什么是冷却时间？</p><blockquote><p>冷却时间是指在同一个伸缩组内，一个伸缩活动执行完成后的一段锁定时间。在这段时间内，该伸缩组不执行伸缩活动。冷却时间一般都是自定义可选的。</p></blockquote></li><li><p>什么样的机器适合使用弹性伸缩？</p><blockquote><p>伸缩组中的云服务器实例中部署的应用需要是无状态、可替换的。因为伸缩组中的实例有可能在缩容中被回收，所以用于弹性伸缩的云实例不能保存应用的状态信息（如会话）和相关数据（如数据库、日志等）。如果应用中需要保存状态信息，可以考虑把状态信息保存到伸缩组以外的独立云服务器中。</p></blockquote></li><li><p>如何保障云实例配置环境的一致性？</p><blockquote><p>一般都是以预定义的镜像模板来创建实例，如果还需求进行其他代码同步，可以使用svn，rsync等进行同步，这些自定义脚本可以放到/etc/rc.local中。</p></blockquote></li><li><p>密码登录问题</p><blockquote><p>如果自动创建的实例密码无法规定和预先得知，Linux服务器可以利用公钥对实现无密码登录。</p></blockquote></li></ul><h1 id="反思收获"><a href="#反思收获" class="headerlink" title="反思收获"></a>反思收获</h1><p>1、通过公有云的弹性伸缩方案，我们思考自建弹性伸缩方案应该如何做？<br>2、如何将自有业务与公有云方案进行最佳结合？<br>3、有哪些坑可能需要去趟平？</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://aws.amazon.com/cn/autoscaling/?nc2=h_m1" target="_blank" rel="noopener">https://aws.amazon.com/cn/autoscaling/?nc2=h_m1</a><br><a href="https://cloud.tencent.com/product/as" target="_blank" rel="noopener">https://cloud.tencent.com/product/as</a><br><a href="https://cloud.tencent.com/document/product/377/3154" target="_blank" rel="noopener">https://cloud.tencent.com/document/product/377/3154</a><br><a href="https://www.alibabacloud.com/zh/product/auto-scaling?spm=a3c0i.7919406.905353.dznavproductsa2.747e6ecfxusdbX" target="_blank" rel="noopener">https://www.alibabacloud.com/zh/product/auto-scaling?spm=a3c0i.7919406.905353.dznavproductsa2.747e6ecfxusdbX</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/888965e1.html">https://mds1455975151.github.io/archives/888965e1.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公有云 </tag>
            
            <tag> 弹性伸缩 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>持续集成之TeamCity体验篇</title>
      <link href="/archives/1bd35325.html"/>
      <url>/archives/1bd35325.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>持续集成之TeamCity体验篇</p></blockquote><h1 id="JetBrains简介"><a href="#JetBrains简介" class="headerlink" title="JetBrains简介"></a>JetBrains简介</h1><p>官网：<a href="https://www.jetbrains.com/" target="_blank" rel="noopener">https://www.jetbrains.com/</a><br>JetBrains是一家捷克的软件开发公司，该公司位于捷克的布拉格，并在俄国的圣彼得堡及美国麻州波士顿都设有办公室，该公司最为人所熟知的产品是Java编程语言开发撰写时所用的集成开发环境：IntelliJ IDEA。</p><p>相关产品：</p><ul><li>IntelliJ IDEA - 一套智慧型的Java整合开发工具，特别专注与强调程序师的开发撰写效率提升</li><li>PHPStorm 7.0 发布，PHP 集成开发工具</li><li>PyCharm 3发布，智能Python集成开发工具</li><li>RubyMine -RubyMine 是一个为Ruby 和Rails开发者准备的IDE，其带有所有开发者必须的功能，并将之紧密集成于便捷的开发环境中。</li><li>WebStorm8.0 发布，智能HTML/CSS/JS开发工具</li><li>AppCode - 开发的ObjC的IDE，是一个XCode的替代物</li><li>ReSharper- 一套用来搭配Microsoft公司Visual Studio .NET集成开发环境的插件（Plug-In），此一外挂的功效在于让程式进行再分拆、增进撰写效率，并且能支援C#编程语言</li><li>dotTrace- 一套效能分析软件，能有效、轻易的找到.NET应用程式中最耗占处理器运算资源的效能瓶颈症结、环节。</li><li>dotCover - 一个为.NET开发人员所提供的代码覆盖工具</li><li>dotPeek - .NET反编译工具</li><li>TeamCity - 一款针对专业开发人员和构建工程师的用户友好的持续集成（CI）服务器</li><li>YouTrack - 一款创新性的以键盘操作为主的问题和项目跟踪工具</li></ul><h1 id="TeamCity简介"><a href="#TeamCity简介" class="headerlink" title="TeamCity简介"></a>TeamCity简介</h1><ul><li>官网定义：Powerful Continuous Integration out of the box</li><li>官网首页：<a href="https://www.jetbrains.com/teamcity/" target="_blank" rel="noopener">https://www.jetbrains.com/teamcity/</a></li><li>官网特性总结：<a href="https://www.jetbrains.com/teamcity/features/" target="_blank" rel="noopener">https://www.jetbrains.com/teamcity/features/</a></li><li>官网文档：<a href="https://confluence.jetbrains.com/display/TCD9/TeamCity+Documentation" target="_blank" rel="noopener">https://confluence.jetbrains.com/display/TCD9/TeamCity+Documentation</a></li><li>官网的介绍视频：<a href="https://www.youtube.com/watch?v=J-iYMMG6jmc#action=share" target="_blank" rel="noopener">https://www.youtube.com/watch?v=J-iYMMG6jmc#action=share</a></li><li>支持的平台、环境如下图：<br><img src="/archives/1bd35325/12159-d7f7d390db6f5ea9.png" alt><br><a href="https://confluence.jetbrains.com/display/TCD9/Supported+Platforms+and+Environments" target="_blank" rel="noopener">详解地址</a></li></ul><h1 id="TeamCity部署实践"><a href="#TeamCity部署实践" class="headerlink" title="TeamCity部署实践"></a>TeamCity部署实践</h1><p>下载地址：<a href="https://www.jetbrains.com/teamcity/download/" target="_blank" rel="noopener">https://www.jetbrains.com/teamcity/download/</a></p><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 19:59:06 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 20:00:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="常规部署"><a href="#常规部署" class="headerlink" title="常规部署"></a>常规部署</h2><p>JDK<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a>,下载jdk-8u161-linux-x64.rpm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh jdk-8u161-linux-x64.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_161/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.8.0_161"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_161-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)</span><br><span class="line"></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># wget https://download.jetbrains.8686c.com/teamcity/TeamCity-2017.2.2.tar.gz</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># tar -zxf TeamCity-2017.2.2.tar.gz</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># cd TeamCity/bin/</span></span><br><span class="line">[root@linux-node8 bin]<span class="comment"># ./runAll.sh -h</span></span><br><span class="line">Run as ./runAll.sh (start|stop[ force])</span><br><span class="line">[root@linux-node8 bin]<span class="comment"># ./runAll.sh start</span></span><br><span class="line">Spawning TeamCity restarter <span class="keyword">in</span> separate process</span><br><span class="line">TeamCity restarter running with PID 22435</span><br><span class="line">Starting TeamCity build agent...</span><br><span class="line">Starting TeamCity Build Agent Launcher...</span><br><span class="line">Agent home directory is /root/TeamCity/buildAgent</span><br><span class="line">Current Java runtime version is 1.8</span><br><span class="line">Lock file: /root/TeamCity/buildAgent/logs/buildAgent.properties.lock</span><br><span class="line">Using no lock</span><br><span class="line">Done [22854], see <span class="built_in">log</span> at /root/TeamCity/buildAgent/logs/teamcity-agent.log</span><br><span class="line">[root@linux-node8 bin]<span class="comment"># netstat -tunlp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp6       0      0 :::8111                 :::*                    LISTEN      22625/java</span><br></pre></td></tr></table></figure><p>Web地址访问：<a href="http://192.168.200.108:8111" target="_blank" rel="noopener">http://192.168.200.108:8111</a></p><h2 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># docker pull jetbrains/teamcity-server</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># docker run -d -it --name teamcity-server-instance  \</span></span><br><span class="line">    -v /opt/teamcity_server/datadir:/data/teamcity_server/datadir \</span><br><span class="line">    -v /opt/teamcity_server/logs:/opt/teamcity/logs  \</span><br><span class="line">    -p 8080:8111 \</span><br><span class="line">    jetbrains/teamcity-server</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                       COMMAND              CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">a6cb7425ba0d        jetbrains/teamcity-server   <span class="string">"/run-services.sh"</span>   About an hour ago   Up About an hour    0.0.0.0:8080-&gt;8111/tcp   teamcity-server-instance</span><br></pre></td></tr></table></figure><p>访问:<a href="http://192.168.200.108:8080" target="_blank" rel="noopener">http://192.168.200.108:8080</a><br><img src="/archives/1bd35325/01.png" alt><br>点击Proceed,然后选择数据库类型，由于是尝试选择第一项即可<br><img src="/archives/1bd35325/02.png" alt><br><img src="/archives/1bd35325/03.png" alt><br>初始化组件后，出现License页面，同意然后继续。出现创建用户界面<br><img src="/archives/1bd35325/04.png" alt><br>创建用户：admin 密码：123456，继续完善用户信息、设置UI等项目<br><img src="/archives/1bd35325/05.png" alt></p><h1 id="TeamCity应用"><a href="#TeamCity应用" class="headerlink" title="TeamCity应用"></a>TeamCity应用</h1><h2 id="创建第一个project"><a href="#创建第一个project" class="headerlink" title="创建第一个project"></a>创建第一个project</h2><p><a href="https://github.com/Julia-Alexandrova/Sample-Project" target="_blank" rel="noopener">https://github.com/Julia-Alexandrova/Sample-Project</a><br><a href="https://confluence.jetbrains.com/display/TCD10/Configure+and+Run+Your+First+Build" target="_blank" rel="noopener">https://confluence.jetbrains.com/display/TCD10/Configure+and+Run+Your+First+Build</a></p><h2 id="Install-Build-Agents"><a href="#Install-Build-Agents" class="headerlink" title="Install Build Agents"></a>Install Build Agents</h2><p>Agents-&gt;Install Build Agents-&gt;选择Agent Push<br><img src="/archives/1bd35325/06.png" alt><br>agent正常状态如下：<br><img src="/archives/1bd35325/07.png" alt><br>构建完成后状态如下<br><img src="/archives/1bd35325/08.png" alt><br><img src="/archives/1bd35325/09.png" alt><br>今天到此为止，以后有深入了解应用在分享给大家。明天就回家了，祝大家新的一年阖家欢乐，万事如意。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://confluence.jetbrains.com/display/TCD10/TeamCity+Documentation" target="_blank" rel="noopener">https://confluence.jetbrains.com/display/TCD10/TeamCity+Documentation</a><br><a href="https://www.jianshu.com/p/255a484555d9" target="_blank" rel="noopener">https://www.jianshu.com/p/255a484555d9</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1bd35325.html">https://mds1455975151.github.io/archives/1bd35325.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> CI/CD </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 持续集成 </tag>
            
            <tag> jetbrains </tag>
            
            <tag> TeamCity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker之Docker+K8S学习思路参考</title>
      <link href="/archives/2e147a18.html"/>
      <url>/archives/2e147a18.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Docker</p></blockquote><a id="more"></a><h1 id="第一天：Docker技术入门与实战"><a href="#第一天：Docker技术入门与实战" class="headerlink" title="第一天：Docker技术入门与实战"></a>第一天：Docker技术入门与实战</h1><p><img src="/archives/2e147a18/01.png" alt></p><h1 id="第二天：Kubernetes集群部署实战"><a href="#第二天：Kubernetes集群部署实战" class="headerlink" title="第二天：Kubernetes集群部署实战"></a>第二天：Kubernetes集群部署实战</h1><p><img src="/archives/2e147a18/02.png" alt></p><h1 id="第三天：Kubernetes核心技术讲解和生产实践"><a href="#第三天：Kubernetes核心技术讲解和生产实践" class="headerlink" title="第三天：Kubernetes核心技术讲解和生产实践"></a>第三天：Kubernetes核心技术讲解和生产实践</h1><p><img src="/archives/2e147a18/03.png" alt></p><h1 id="第四天：Kubernetes高级应用和集群管理"><a href="#第四天：Kubernetes高级应用和集群管理" class="headerlink" title="第四天：Kubernetes高级应用和集群管理"></a>第四天：Kubernetes高级应用和集群管理</h1><p><img src="/archives/2e147a18/04.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>1、docker 可跟按教程做一遍<br><a href="http://wiki.jikexueyuan.com/project/docker/" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/docker/</a><br>2、k8s 官方文档，有能力阅读一下<br><a href="https://kubernetes.io/docs/concepts/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/</a><br>3、K8s 入门书籍<br><a href="https://item.jd.com/12230380.html" target="_blank" rel="noopener">https://item.jd.com/12230380.html</a><br>4、K8S集群自动化搭建(ansible),使用1.8分支<br><a href="https://github.com/guohongze/kubeasz" target="_blank" rel="noopener">https://github.com/guohongze/kubeasz</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2e147a18.html">https://mds1455975151.github.io/archives/2e147a18.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker之开源的Docker Registry WebUI</title>
      <link href="/archives/46af2f7a.html"/>
      <url>/archives/46af2f7a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>基于WebUI浏览和操作一个私有Docker Registry<br><a href="https://github.com/kwk/docker-registry-frontend" target="_blank" rel="noopener">项目GitHub地址</a><br><a href="https://github.com/kwk/docker-registry-frontend/wiki" target="_blank" rel="noopener">项目Wiki地址</a></p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:       17.12.0-ce</span><br><span class="line"> API version:   1.35</span><br><span class="line"> Go version:    go1.9.2</span><br><span class="line"> Git commit:    c97c6d6</span><br><span class="line"> Built: Wed Dec 27 20:10:14 2017</span><br><span class="line"> OS/Arch:       linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:      17.12.0-ce</span><br><span class="line">  API version:  1.35 (minimum version 1.12)</span><br><span class="line">  Go version:   go1.9.2</span><br><span class="line">  Git commit:   c97c6d6</span><br><span class="line">  Built:        Wed Dec 27 20:12:46 2017</span><br><span class="line">  OS/Arch:      linux/amd64</span><br><span class="line">  Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># docker run -d -p 5000:5000 --name registry registry:2</span></span><br><span class="line">9dfc41455953b97cd3df5f036a3fa532b70af5f04da2d31d72a0ec6eafb4c612</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                                                 NAMES</span><br><span class="line">9dfc41455953        registry:2              <span class="string">"/entrypoint.sh /etc…"</span>   3 seconds ago       Up 3 seconds        0.0.0.0:5000-&gt;5000/tcp                                registry</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker run -d -e ENV_DOCKER_REGISTRY_HOST=192.168.200.109 -e ENV_DOCKER_REGISTRY_PORT=5000 -p 8080:80 konradkleine/docker-registry-frontend:v2</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                                      COMMAND                  CREATED             STATUS              PORTS                                                 NAMES</span><br><span class="line">ae4e32fa279d        konradkleine/docker-registry-frontend:v2   <span class="string">"/bin/sh -c <span class="variable">$START_S</span>…"</span>   5 minutes ago       Up 5 minutes        443/tcp, 0.0.0.0:8080-&gt;80/tcp                         clever_wiles</span><br></pre></td></tr></table></figure><p>push到仓库两个测试images</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># docker tag nginx:1.12 localhost:5000/nginx:1.12</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker push localhost:5000/nginx:1.12</span></span><br><span class="line">The push refers to repository [localhost:5000/nginx]</span><br><span class="line">4912a8274467: Pushed</span><br><span class="line">fc1d0df815c4: Pushed</span><br><span class="line">2ec5c0a4cb57: Pushed</span><br><span class="line">1.12: digest: sha256:9342f82b178a4325aec19f997400e866bf7c6bf9d59dd74e1358f971159dd7b8 size: 948</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker tag mysql:5.7 localhost:5000/mysql:5.7</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker push localhost:5000/mysql:5.7</span></span><br><span class="line">The push refers to repository [localhost:5000/mysql]</span><br><span class="line">254215a9b948: Pushed</span><br><span class="line">fcac5885b034: Pushed</span><br><span class="line">7800b09ed0f6: Pushed</span><br><span class="line">5c2d4b37bd69: Pushed</span><br><span class="line">45fb4a2ab5eb: Pushed</span><br><span class="line">8b2d012e71d9: Pushed</span><br><span class="line">19aa284e9bf3: Pushed</span><br><span class="line">889744378e18: Pushed</span><br><span class="line">ae12d30e1dfc: Pushed</span><br><span class="line">4bcdffd70da2: Pushed</span><br><span class="line">5.7: digest: sha256:83204528ade605ce7ff02bead28378f7055e91d4c73f18e099dcf3126dbb240a size: 2410</span><br></pre></td></tr></table></figure><h1 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h1><h2 id="Home"><a href="#Home" class="headerlink" title="Home"></a>Home</h2><p><img src="/archives/46af2f7a/01.png" alt></p><h2 id="Repositories"><a href="#Repositories" class="headerlink" title="Repositories"></a>Repositories</h2><p><img src="/archives/46af2f7a/02.png" alt></p><h2 id="Details-for-repository"><a href="#Details-for-repository" class="headerlink" title="Details for repository"></a>Details for repository</h2><p><img src="/archives/46af2f7a/03.png" alt></p><h2 id="Details-for-tag"><a href="#Details-for-tag" class="headerlink" title="Details for tag"></a>Details for tag</h2><p><img src="/archives/46af2f7a/04.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.cnblogs.com/junneyang/p/5250527.html" target="_blank" rel="noopener">http://www.cnblogs.com/junneyang/p/5250527.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/46af2f7a.html">https://mds1455975151.github.io/archives/46af2f7a.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> docker-registry-frontend </tag>
            
            <tag> Docker Registry WebUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vagrant之Vagrant入门</title>
      <link href="/archives/1fd805f3.html"/>
      <url>/archives/1fd805f3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/archives/1fd805f3/01.png" alt></p><blockquote><p>Vagrant入门</p></blockquote><a id="more"></a><h1 id="Vagrant是什么？"><a href="#Vagrant是什么？" class="headerlink" title="Vagrant是什么？"></a>Vagrant是什么？</h1><p><a href="https://www.vagrantup.com/" target="_blank" rel="noopener">官网地址</a><br><a href="https://www.vagrantup.com/intro/index.html" target="_blank" rel="noopener">https://www.vagrantup.com/intro/index.html</a><br>Vagrant是一款虚拟机管理工具，可以快速创建、删除虚拟机。Vagrant让我们可以通过代码的方式快速地、可重复地创建针对不同虚拟环境的虚拟机，包括Virtualbox、AWS、Docker等。它使得我们可以一次性地、自动创建多个环境相同的虚拟机，对于软件开发和测试尤其有用。本文我们将以Virtualbox为例，看看Vagrant的基本使用。</p><h1 id="安装要求"><a href="#安装要求" class="headerlink" title="安装要求"></a>安装要求</h1><h2 id="安装VirtualBox"><a href="#安装VirtualBox" class="headerlink" title="安装VirtualBox"></a>安装VirtualBox</h2><p>下载地址：<a href="https://www.virtualbox.org/wiki/Linux_Downloads" target="_blank" rel="noopener">https://www.virtualbox.org/wiki/Linux_Downloads</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># wget https://download.virtualbox.org/virtualbox/5.2.6/VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum install -y SDL SDL-devel</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum install -y libvpx libvpx-devel libvpx-utils</span></span><br><span class="line">[root@linux-node8~]<span class="comment"># yum install -y *libXmu*</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># yum install -y libXcursor libXcursor-devel libXinerama libXinerama-devel fontconfig fontconfig-devel libpng libpng-devel</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">warning: VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 98ab5139: NOKEY</span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:VirtualBox-5.2-5.2.6_120293_el7-1<span class="comment">################################# [100%]</span></span><br><span class="line"></span><br><span class="line">Creating group <span class="string">'vboxusers'</span>. VM users must be member of that group!</span><br></pre></td></tr></table></figure><h2 id="安装Vagrant"><a href="#安装Vagrant" class="headerlink" title="安装Vagrant"></a>安装Vagrant</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># wget https://releases.hashicorp.com/vagrant/2.0.2/vagrant_2.0.2_x86_64.rpm?_ga=2.145148086.346091913.1517627640-765358210.1517627640</span></span><br><span class="line">[root@linux-node8 ~]<span class="comment"># rpm -ivh vagrant_2.0.2_x86_64.rpm</span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:vagrant-1:2.0.2-1                <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure><h2 id="安装增强工具"><a href="#安装增强工具" class="headerlink" title="安装增强工具"></a>安装增强工具</h2><p>需求：与虚拟机共享任何文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用</span></span><br><span class="line"><span class="comment">## 使用vagrant创建虚拟机</span></span><br><span class="line">开启CPU虚拟化功能</span><br><span class="line">``` bash</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vagrant init hashicorp/precise64          # 创建Vagrantfile</span></span><br><span class="line">A `Vagrantfile` has been placed <span class="keyword">in</span> this directory. You are now</span><br><span class="line">ready to `vagrant up` your first virtual environment! Please <span class="built_in">read</span></span><br><span class="line">the comments <span class="keyword">in</span> the Vagrantfile as well as documentation on</span><br><span class="line">`vagrantup.com` <span class="keyword">for</span> more information on using Vagrant.</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># grep -vE "#|^$" Vagrantfile</span></span><br><span class="line">Vagrant.configure(<span class="string">"2"</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.box = <span class="string">"hashicorp/precise64"</span></span><br><span class="line">end</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># vagrant up                              # 开启虚拟机</span></span><br><span class="line">Bringing machine <span class="string">'default'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">==&gt; default: Checking <span class="keyword">if</span> box <span class="string">'hashicorp/precise64'</span> is up to date...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> forwarded ports...</span><br><span class="line">==&gt; default: Clearing any previously <span class="built_in">set</span> network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter 1: nat</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: 22 (guest) =&gt; 2222 (host) (adapter 1)</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting <span class="keyword">for</span> machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">    default: Warning: Connection reset. Retrying...</span><br><span class="line">    default: Warning: Connection reset. Retrying...</span><br><span class="line">    default:</span><br><span class="line">    default: Vagrant insecure key detected. Vagrant will automatically replace</span><br><span class="line">    default: this with a newly generated keypair <span class="keyword">for</span> better security.</span><br><span class="line">    default:</span><br><span class="line">    default: Inserting generated public key within guest...</span><br><span class="line">    default: Removing insecure key from the guest <span class="keyword">if</span> it<span class="string">'s present...</span></span><br><span class="line"><span class="string">    default: Key inserted! Disconnecting and reconnecting using new SSH key...</span></span><br><span class="line"><span class="string">==&gt; default: Machine booted and ready!</span></span><br><span class="line"><span class="string">==&gt; default: Checking for guest additions in VM...</span></span><br><span class="line"><span class="string">    default: The guest additions on this VM do not match the installed version of</span></span><br><span class="line"><span class="string">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span></span><br><span class="line"><span class="string">    default: prevent things such as shared folders from working properly. If you see</span></span><br><span class="line"><span class="string">    default: shared folder errors, please make sure the guest additions within the</span></span><br><span class="line"><span class="string">    default: virtual machine match the version of VirtualBox you have installed on</span></span><br><span class="line"><span class="string">    default: your host and reload your VM.</span></span><br><span class="line"><span class="string">    default:</span></span><br><span class="line"><span class="string">    default: Guest Additions Version: 4.2.0</span></span><br><span class="line"><span class="string">    default: VirtualBox Version: 5.2</span></span><br><span class="line"><span class="string">==&gt; default: Mounting shared folders...</span></span><br><span class="line"><span class="string">    default: /vagrant =&gt; /root</span></span><br><span class="line"><span class="string">[root@linux-node8 ~]# vagrant ssh                             # 登录虚拟机</span></span><br><span class="line"><span class="string">Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> * Documentation:  https://help.ubuntu.com/</span></span><br><span class="line"><span class="string">New release '</span>14.04.5 LTS<span class="string">' available.</span></span><br><span class="line"><span class="string">Run '</span><span class="keyword">do</span>-release-upgrade<span class="string">' to upgrade to it.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Welcome to your Vagrant-built virtual machine.</span></span><br><span class="line"><span class="string">Last login: Fri Sep 14 06:23:18 2012 from 10.0.2.2</span></span><br><span class="line"><span class="string">vagrant@precise64:~$ hostname</span></span><br><span class="line"><span class="string">precise64</span></span><br><span class="line"><span class="string">vagrant@precise64:~$</span></span><br></pre></td></tr></table></figure><h2 id="设置端口转发"><a href="#设置端口转发" class="headerlink" title="设置端口转发"></a>设置端口转发</h2><p>在默认情况下，Vagrant所创建的Virtualbox虚拟机使用的是NAT网络类型，即外界是不能直接访问你的虚拟机的，就连Host机器也访问不了。此时，如果你在虚拟机中启动的一个Tomcat来部署网站的测试环境，而又想外界能够访问的话，你需要使用端口转发：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(<span class="string">"2"</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.network <span class="string">"forwarded_port"</span>, guest: 8080, host: 8888</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>以上代码将Host机的8888端口转发到了虚拟机的8080端口，这样你便可以通过在Host机上访问<a href="http://localhost:8888来访问虚拟机的Tomcat了。对于Virtualbox来说，只有NAT类型的网络类型支持端口转发，这也是为什么Vagrant创建的Virtualbox虚拟机默认都有一个支持NAT的虚拟网卡，原因就是要能够支持Vagrant级别的端口转发。另外，Vagrant在第一次尝试连接虚拟机时使用的也是NAT。" target="_blank" rel="noopener">http://localhost:8888来访问虚拟机的Tomcat了。对于Virtualbox来说，只有NAT类型的网络类型支持端口转发，这也是为什么Vagrant创建的Virtualbox虚拟机默认都有一个支持NAT的虚拟网卡，原因就是要能够支持Vagrant级别的端口转发。另外，Vagrant在第一次尝试连接虚拟机时使用的也是NAT。</a></p><h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><h2 id="定制虚拟机配置"><a href="#定制虚拟机配置" class="headerlink" title="定制虚拟机配置"></a>定制虚拟机配置</h2><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.cnblogs.com/davenkin/p/vagrant-virtualbox.html" target="_blank" rel="noopener">http://www.cnblogs.com/davenkin/p/vagrant-virtualbox.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1fd805f3.html">https://mds1455975151.github.io/archives/1fd805f3.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vagrant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker之Docker Machine基本介绍</title>
      <link href="/archives/f6767e5c.html"/>
      <url>/archives/f6767e5c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍Docker Machine是什么以及怎么用</p></blockquote><a id="more"></a><h1 id="Docker-Machine是什么？"><a href="#Docker-Machine是什么？" class="headerlink" title="Docker Machine是什么？"></a>Docker Machine是什么？</h1><p>官网资料：<a href="https://docs.docker.com/machine/overview/" target="_blank" rel="noopener">https://docs.docker.com/machine/overview/</a><br>Docker Machine是一个让你在虚拟主机上安装Docker Engine并使用docker-machine命令管理主机的工具。您可以使用计算机在本地Mac或Windows计算机上，公司网络，数据中心或云提供商（如Azure，AWS或Digital Ocean）上创建Docker主机。<br>使用docker-machine命令，您可以启动，检查，停止和重新启动托管主机，升级Docker客户端和守护程序，并配置Docker客户端以与您的主机通信。<br>将机器CLI指向正在运行的托管主机，并且可以docker 直接在该主机上运行命令。例如，运行docker-machine env default指向所调用的主机default，按照屏幕上的说明完成 env设置，然后运行docker ps，docker run hello-world等等。<br>Machine 是在Docker v1.12之前的Mac或Windows上运行Docker 的唯一方法。从测试版和Docker v1.12开始，Docker for Mac和Docker for Windows作为本地应用程序提供，并且是更新桌面和笔记本电脑上更好的选择。我们鼓励您尝试这些新的应用程序。Docker for Mac和Docker for Windows的安装程序包括Docker Machine和Docker Compose。</p><h1 id="Docker-Machine应用场景"><a href="#Docker-Machine应用场景" class="headerlink" title="Docker Machine应用场景"></a>Docker Machine应用场景</h1><p>You can use Docker Machine to:</p><ul><li>Install and run Docker on Mac or Windows<br><img src="/archives/f6767e5c/machine-mac-win.png" alt></li><li>Provision and manage multiple remote Docker hosts<br><img src="/archives/f6767e5c/provision-use-case.png" alt></li><li>Provision Swarm clusters</li></ul><h1 id="Docker-Machine部署实践"><a href="#Docker-Machine部署实践" class="headerlink" title="Docker Machine部署实践"></a>Docker Machine部署实践</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># wget https://download.virtualbox.org/virtualbox/5.2.6/VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y SDL SDL-devel</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y libvpx libvpx-devel libvpx-utils</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y *libXmu*</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># yum install -y libXcursor libXcursor-devel libXinerama libXinerama-devel fontconfig fontconfig-devel libpng libpng-devel</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># rpm -ivh VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm</span></span><br><span class="line">warning: VirtualBox-5.2-5.2.6_120293_el7-1.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 98ab5139: NOKEY</span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:VirtualBox-5.2-5.2.6_120293_el7-1<span class="comment">################################# [100%]</span></span><br><span class="line"></span><br><span class="line">Creating group <span class="string">'vboxusers'</span>. VM users must be member of that group!</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># curl -L https://github.com/docker/machine/releases/download/v0.13.0/docker-machine-`uname -s`-`uname -m` &gt;/tmp/docker-machine</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   617    0   617    0     0    104      0 --:--:--  0:00:05 --:--:--   139</span><br><span class="line">100 25.3M  100 25.3M    0     0   171k      0  0:02:31  0:02:31 --:--:--  192k</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ll</span></span><br><span class="line">total 25980</span><br><span class="line">-rw-r--r-- 1 root root 26574656 Feb  2 02:35 docker-machine</span><br><span class="line">-rw-r--r-- 1 root root    25009 Feb  2 02:30 vboxdrv-Module.symvers</span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># sudo install /tmp/docker-machine /usr/local/bin/docker-machine</span></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ls -al /usr/local/bin/docker-machine</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker-machine create --driver virtualbox myvm1</span></span><br><span class="line">Running pre-create checks...</span><br><span class="line">(myvm1) Image cache directory does not exist, creating it at /root/.docker/machine/cache...</span><br><span class="line">(myvm1) No default Boot2Docker ISO found locally, downloading the latest release...</span><br><span class="line">(myvm1) Latest release <span class="keyword">for</span> github.com/boot2docker/boot2docker is v18.01.0-ce</span><br><span class="line">(myvm1) Downloading /root/.docker/machine/cache/boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v18.01.0-ce/boot2docker.iso...</span><br><span class="line">(myvm1) 0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%</span><br><span class="line">Creating machine...</span><br><span class="line">(myvm1) Unable to get the latest Boot2Docker ISO release version:  Get https://api.github.com/repos/boot2docker/boot2docker/releases/latest: EOF</span><br><span class="line">(myvm1) Copying /root/.docker/machine/cache/boot2docker.iso to /root/.docker/machine/machines/myvm1/boot2docker.iso...</span><br><span class="line">(myvm1) Creating VirtualBox VM...</span><br><span class="line">(myvm1) Creating SSH key...</span><br><span class="line">(myvm1) Starting the VM...</span><br><span class="line">(myvm1) Check network to re-create <span class="keyword">if</span> needed...</span><br><span class="line">(myvm1) Found a new host-only adapter: <span class="string">"vboxnet0"</span></span><br><span class="line">(myvm1) Waiting <span class="keyword">for</span> an IP...</span><br><span class="line">Waiting <span class="keyword">for</span> machine to be running, this may take a few minutes...</span><br><span class="line">Detecting operating system of created instance...</span><br><span class="line">Waiting <span class="keyword">for</span> SSH to be available...</span><br><span class="line">Detecting the provisioner...</span><br><span class="line">Provisioning with boot2docker...</span><br><span class="line">Copying certs to the <span class="built_in">local</span> machine directory...</span><br><span class="line">Copying certs to the remote machine...</span><br><span class="line">Setting Docker configuration on the remote daemon...</span><br><span class="line">Checking connection to Docker...</span><br><span class="line">Docker is up and running!</span><br><span class="line">To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: docker-machine env myvm1</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker-machine ls</span></span><br><span class="line">NAME    ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER        ERRORS</span><br><span class="line">myvm1   -        virtualbox   Running   tcp://192.168.99.100:2376           v18.01.0-ce</span><br><span class="line">myvm2   -        virtualbox   Running   tcp://192.168.99.101:2376           v18.01.0-ce</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># docker-machine ssh myvm1</span></span><br><span class="line">                        <span class="comment">##         .</span></span><br><span class="line">                  <span class="comment">## ## ##        ==</span></span><br><span class="line">               <span class="comment">## ## ## ## ##    ===</span></span><br><span class="line">           /<span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">"\___/ ===</span></span><br><span class="line"><span class="string">      ~~~ &#123;~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~</span></span><br><span class="line"><span class="string">           \______ o           __/</span></span><br><span class="line"><span class="string">             \    \         __/</span></span><br><span class="line"><span class="string">              \____\_______/</span></span><br><span class="line"><span class="string"> _                 _   ____     _            _</span></span><br><span class="line"><span class="string">| |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __</span></span><br><span class="line"><span class="string">| '_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '__|</span></span><br><span class="line"><span class="string">| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   &lt;  __/ |</span></span><br><span class="line"><span class="string">|_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|</span></span><br><span class="line"><span class="string">Boot2Docker version 18.01.0-ce, build HEAD : 0bb7bbd - Thu Jan 11 16:32:39 UTC 2018</span></span><br><span class="line"><span class="string">Docker version 18.01.0-ce, build 03596f5</span></span><br><span class="line"><span class="string">docker@myvm1:~$ docker version</span></span><br><span class="line"><span class="string">Client:</span></span><br><span class="line"><span class="string"> Version:       18.01.0-ce</span></span><br><span class="line"><span class="string"> API version:   1.35</span></span><br><span class="line"><span class="string"> Go version:    go1.9.2</span></span><br><span class="line"><span class="string"> Git commit:    03596f5</span></span><br><span class="line"><span class="string"> Built: Wed Jan 10 20:05:20 2018</span></span><br><span class="line"><span class="string"> OS/Arch:       linux/amd64</span></span><br><span class="line"><span class="string"> Experimental:  false</span></span><br><span class="line"><span class="string"> Orchestrator:  swarm</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Server:</span></span><br><span class="line"><span class="string"> Engine:</span></span><br><span class="line"><span class="string">  Version:      18.01.0-ce</span></span><br><span class="line"><span class="string">  API version:  1.35 (minimum version 1.12)</span></span><br><span class="line"><span class="string">  Go version:   go1.9.2</span></span><br><span class="line"><span class="string">  Git commit:   03596f5</span></span><br><span class="line"><span class="string">  Built:        Wed Jan 10 20:13:12 2018</span></span><br><span class="line"><span class="string">  OS/Arch:      linux/amd64</span></span><br><span class="line"><span class="string">  Experimental: false</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://docs.docker.com/machine/overview/" target="_blank" rel="noopener">https://docs.docker.com/machine/overview/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f6767e5c.html">https://mds1455975151.github.io/archives/f6767e5c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Docker Machine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins之Job如何传递自定义变量</title>
      <link href="/archives/b43f9b47.html"/>
      <url>/archives/b43f9b47.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如何将jenkins构建步骤中的自定义变量传递到邮件通知信息中？</p></blockquote><a id="more"></a><h1 id="自定义变量传递的应用场景"><a href="#自定义变量传递的应用场景" class="headerlink" title="自定义变量传递的应用场景"></a>自定义变量传递的应用场景</h1><p>1、job构建步骤间的变量传递<br>2、job之间的变量传递</p><h1 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h1><p>将【Execute shell】执行过程中的变量传递到邮件信息中，用来告知构建者某些关键信息。</p><h1 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h1><p>第一步：安装Environment Injector Plugin插件<br>第二步：在中定义变量并将变量写入文件(本案例：profile.txt)，注意内容格式：变量名=变量值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f profile.txt ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    rm -f profile.txt</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"cdn_dir=<span class="variable">$cdn_dir</span>"</span>&gt;profile.txt</span><br></pre></td></tr></table></figure><p>第三步：增加构建步骤，读取并声明变量<br><img src="/archives/b43f9b47/01.png" alt><br>第四步：在【Editable Email Notification】中引用之前自定义的变量<br><img src="/archives/b43f9b47/02.png" alt><br>第五步：验证结果<br><img src="/archives/b43f9b47/03.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://wiki.jenkins.io/display/JENKINS/EnvInject+Plugin" target="_blank" rel="noopener">https://wiki.jenkins.io/display/JENKINS/EnvInject+Plugin</a><br><a href="http://www.cnblogs.com/junneyang/p/5239480.html" target="_blank" rel="noopener">http://www.cnblogs.com/junneyang/p/5239480.html</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/b43f9b47.html">https://mds1455975151.github.io/archives/b43f9b47.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Code Review</title>
      <link href="/archives/9dd5f347.html"/>
      <url>/archives/9dd5f347.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Code Review</p></blockquote><a id="more"></a><h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>代码评审是指在软件开发过程中，对源代码的系统性检查。通常的目的是查找系统缺陷，保证软件总体质量和提高开发者自身水平。 Code Review是轻量级代码评审，相对于正式代码评审，轻量级代码评审所需要的各种成本要明显低的多，如果流程正确，它可以起到更加积极的效果。正因如此，轻量级代码评审经常性得被引入到软件开发过程中。</p><h1 id="Why-we-do-Code-Review"><a href="#Why-we-do-Code-Review" class="headerlink" title="Why we do Code Review ?"></a>Why we do Code Review ?</h1><p>1、提高质量<br>2、及早发现潜在缺陷与BUG，降低事故成本。<br>3、促进团队内部知识共享，提高团队整体水平<br>4、评审过程对于评审人员来说，也是一种思路重构的过程。帮助更多的人理解系统。</p><h1 id="Options-of-Code-Review-代码评审的选择"><a href="#Options-of-Code-Review-代码评审的选择" class="headerlink" title="Options of Code Review(代码评审的选择)"></a>Options of Code Review(代码评审的选择)</h1><p>1、最近一次迭代开发的代码<br>2、系统关键模块<br>3、业务较复杂的模块<br>4、缺陷率较高的模块</p><h1 id="Practice-of-Code-Review-代码评审实践"><a href="#Practice-of-Code-Review-代码评审实践" class="headerlink" title="Practice of Code Review(代码评审实践)"></a>Practice of Code Review(代码评审实践)</h1><p>1、代码评审不是批斗会，不能以缺陷和错误来打击开发人员的积极性评审的目标的提高质量和提高整体水平，作者应该带着学习和提高的态度来参加评审。<br>2、代码集体所有制：对发现的问题要本着整体承担责任 的原则，因此建议把代码质量与团队绩效（而不是个人绩效）挂钩。<br>3、评审程度，进行一次整体的地毯式的评审成本很高。<br>4、代码评审的可操作性，首先需要评审团队具备经验丰富的系统架构师和精通业务的行业专家。其次团队需建立其开发规范或指南，在项目初期建立少量的Sample代码与checklist为评审提供依据。<br>5、评审人员的职责是发现工作成果中的缺陷，并帮助开发人员给出消除缺陷的办法，而不是替开发人员消除缺陷 。<br>6、记录评审中出现的问题，跟踪改进。<br>7、评审前充分准备，评审后详细总结。<br>8、不要因为时间和成本问题取消评审。</p><h1 id="工具选型"><a href="#工具选型" class="headerlink" title="工具选型"></a>工具选型</h1><ul><li>Facebook的Phabricator(开源)</li><li>Google的Gerrit (开源)</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.flickering.cn/uncategorized/2014/08/%E8%AE%A9-code-review%E6%88%90%E4%B8%BA%E4%B8%80%E7%A7%8D%E4%B9%A0%E6%83%AF/" target="_blank" rel="noopener">让-code-review成为一种习惯</a><br><a href="http://blog.csdn.net/ejinxian/article/details/44958849" target="_blank" rel="noopener">20最佳代码审查工具</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/9dd5f347.html">https://mds1455975151.github.io/archives/9dd5f347.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代码评审 </tag>
            
            <tag> Code Review </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ceph之基础介绍</title>
      <link href="/archives/5b05c43.html"/>
      <url>/archives/5b05c43.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Ceph</p></blockquote><a id="more"></a><p><img src="/archives/5b05c43/01.png" alt></p><h1 id="安装CEPH部署工具"><a href="#安装CEPH部署工具" class="headerlink" title="安装CEPH部署工具"></a>安装CEPH部署工具</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5b05c43.html">https://mds1455975151.github.io/archives/5b05c43.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ceph </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker之镜像安全</title>
      <link href="/archives/e3e64f51.html"/>
      <url>/archives/e3e64f51.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>安全一直是一个不出事没人关心等到出事的时候也已经晚了的话题。最近研究了下Docker镜像安全的内容，以测试的Anchore和Clair两个项目的简单介绍。这类工具的共同特点就是静态分析镜像里的内容，找出其中的软件包和对应的版本，然后和从各大Linux版本的CVE源下载漏洞数据库做匹配，最终判断镜像里的安全漏洞。</p></blockquote><a id="more"></a><h1 id="Anchore"><a href="#Anchore" class="headerlink" title="Anchore"></a>Anchore</h1><p><a href="https://github.com/anchore/anchore" target="_blank" rel="noopener">项目地址</a><br><a href="https://github.com/anchore/anchore-engine" target="_blank" rel="noopener">新项目地址</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y epel-release</span></span><br><span class="line"><span class="comment"># yum install -y python-pip rpm-python dpkg</span></span><br><span class="line"><span class="comment"># pip install anchore</span></span><br><span class="line"><span class="comment"># anchore feeds sync</span></span><br><span class="line"><span class="comment"># docker pull nginx</span></span><br><span class="line"><span class="comment"># anchore analyze --image nginx:latest --imagetype base   # 分析本地数据</span></span><br><span class="line"><span class="comment"># anchore gate --image  nginx:latest                      # 从分析结果生成报告</span></span><br></pre></td></tr></table></figure><p>报告中会显示哪个包有漏洞，已经漏洞对应的链接。</p><h1 id="Clair"><a href="#Clair" class="headerlink" title="Clair"></a>Clair</h1><p><a href="https://github.com/coreos/clair" target="_blank" rel="noopener">项目地址</a><br>Docker方式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir $PWD/clair_config</span></span><br><span class="line"><span class="comment"># curl -L https://raw.githubusercontent.com/coreos/clair/master/config.yaml.sample -o $PWD/clair_config/config.yaml</span></span><br><span class="line"><span class="comment"># docker run -d -e POSTGRES_PASSWORD="" -p 5432:5432 postgres:9.6</span></span><br><span class="line"><span class="comment"># docker run --net=host -d -p 6060-6061:6060-6061 -v $PWD/clair_config:/config quay.io/coreos/clair-git:latest -config=/config/config.yaml</span></span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                             COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">836e3e93c84d        quay.io/coreos/clair-git:latest   <span class="string">"/usr/bin/dumb-ini..."</span>   4 seconds ago       Up 3 seconds                                 keen_johnson</span><br><span class="line">cf0593d761ff        postgres:9.6                      <span class="string">"docker-entrypoint..."</span>   15 minutes ago      Up 15 minutes       0.0.0.0:5432-&gt;5432/tcp   nostalgic_hamilton</span><br></pre></td></tr></table></figure><p>Clair只是提供了api接口，所以使用起来并不是那么方便，在Github上找clairctl这个客户端工具，可以方便的测试Clair的功能.<br><a href="https://github.com/jgsqware/clairctl" target="_blank" rel="noopener">clairctl项目GitHub地址</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -L https://raw.githubusercontent.com/jgsqware/clairctl/master/install.sh | sh</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://xdays.me/docker%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%E4%B9%8B%E9%95%9C%E5%83%8F%E5%AE%89%E5%85%A8.html" target="_blank" rel="noopener">docker基础教程之镜像安全</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e3e64f51.html">https://mds1455975151.github.io/archives/e3e64f51.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> 镜像安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux之终端操作记录工具总结</title>
      <link href="/archives/efc9beb8.html"/>
      <url>/archives/efc9beb8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>终端操作记录</p></blockquote><a id="more"></a><h1 id="script及scriptreplay是什么？"><a href="#script及scriptreplay是什么？" class="headerlink" title="script及scriptreplay是什么？"></a>script及scriptreplay是什么？</h1><p>script及scriptreplay是两个Linux命令。script可以制作一份记录到终端的记录。对于那些想要真实记录终端回话的人来说，这很有用。该记录可以保持并再通过scriptreplay将记录打印出来。</p><h1 id="script如何使用"><a href="#script如何使用" class="headerlink" title="script如何使用?"></a>script如何使用?</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>client –&gt; server<br>192.168.200.108 –&gt; 192.168.200.109</p><blockquote><p>在server端部署script命令将所有登录server端的操作进行记录</p></blockquote><h2 id="测试过程"><a href="#测试过程" class="headerlink" title="测试过程"></a>测试过程</h2><p>server端添加script配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt;&gt;/etc/profile&lt;EOF</span></span><br><span class="line">/usr/bin/script -q -t 2&gt; test.time -a test.out</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br></pre></td></tr></table></figure><blockquote><p>相关命令含义及帮助信息获取 script -h</p></blockquote><p>client端登录及进行测试操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># ssh 192.168.200.109</span></span><br><span class="line">The authenticity of host <span class="string">'192.168.200.109 (192.168.200.109)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is 2a:d8:e2:3a:ff:a5:58:a2:bd:95:4f:24:c2:6c:5f:ef.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>192.168.200.109<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">root@192.168.200.109'</span>s password:</span><br><span class="line">Last login: Tue Jan 30 02:39:08 2018 from 192.168.200.109</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># ls -l</span></span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1086 Feb 26  2017 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--  1 root root  941 Jan 29 22:04 output.session</span><br><span class="line">drwxr-xr-x  7 root root 4096 Jan 30 01:54 sails_ng2</span><br><span class="line">-rw-r--r--  1 root root    0 Jan 30 02:42 test.out</span><br><span class="line">-rw-r--r--  1 root root    0 Jan 30 02:42 test.time</span><br><span class="line">[root@linux-node9 ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ls -l</span></span><br><span class="line">total 12</span><br><span class="line">-rw-r--r-- 1 root root 5091 Jan 29 22:08 1.sh</span><br><span class="line">drwxr-xr-x 3 root root   31 Jan 30 01:23 npm-19339-7b8a1a00</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:25 npm-19365-808458ee</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:26 npm-19423-03b73ac5</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:27 npm-19441-10c6e4bd</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:27 npm-19459-6f963331</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:28 npm-19500-8de291f9</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:45 npm-19518-b7afde47</span><br><span class="line">drwxr-xr-x 3 root root   36 Jan 30 01:48 npm-19594-537e65dd</span><br><span class="line">-rw-r--r-- 1 root root   80 Jan 29 22:08 typescript</span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># hostname</span></span><br><span class="line">linux-node9.example.com</span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.56.109  netmask 255.255.255.0  broadcast 192.168.56.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe38:e059  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:38:e0:59  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 98894  bytes 118438142 (112.9 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 57671  bytes 4863082 (4.6 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">eth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.200.109  netmask 255.255.255.0  broadcast 192.168.200.255</span><br><span class="line">        inet6 fe80::20c:29ff:fe38:e063  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:38:e0:63  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 10833  bytes 986958 (963.8 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 14042  bytes 3870841 (3.6 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 296  bytes 45994 (44.9 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 296  bytes 45994 (44.9 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@linux-node9 tmp]<span class="comment"># exit</span></span><br><span class="line">[root@linux-node9 ~]<span class="comment"># logout</span></span><br><span class="line">Connection to 192.168.200.109 closed.</span><br></pre></td></tr></table></figure><h1 id="scriptreplay如何使用？"><a href="#scriptreplay如何使用？" class="headerlink" title="scriptreplay如何使用？"></a>scriptreplay如何使用？</h1><p>测试后会在192.168.200.109的用户家目录下生成记录文件，我们在通过scriptreply进行操作回放，查看用户操作记录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /usr/bin/scriptreplay -t test.time test.out</span></span><br></pre></td></tr></table></figure><h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><p>1、应用到跳板机上做用户行为记录和审计<br>2、向多个用户广播自己的终端操作</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/efc9beb8.html">https://mds1455975151.github.io/archives/efc9beb8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 终端操作记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>技术负责人知识体系总结</title>
      <link href="/archives/2d943cb9.html"/>
      <url>/archives/2d943cb9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>技术负责人</p></blockquote><a id="more"></a><p>0、熟悉现有体系</p><ul><li>用户反馈</li><li>技术支持</li></ul><p>1、研发体系建设</p><ul><li>职级/薪酬确定</li><li>现有人员职级评定</li><li>OKR绩效考核</li></ul><p>2、技术团队组建</p><ul><li>PHP团队</li><li>运维团队</li><li>GO后端团队</li><li>前端团队</li><li>测试QA团队</li><li>AI团队</li><li>数据团队</li></ul><p>3、交付流程管理</p><ul><li>测试与线上环境隔离</li><li>引入敏捷开发</li><li>看板任务管理</li><li>GitFlow和CodeReview</li><li>持续集成jenkins</li><li>单元测试和覆盖率</li><li>jira故障追踪</li><li>关键服务与具体开发解耦</li></ul><p>4、技术架构设计</p><ul><li>微服务</li><li>容器化</li><li>DevOps</li><li>引入消息队列，缓存</li><li>自动化测试</li></ul><p>5、研发文化建设</p><ul><li>技术分享</li><li>Buddy制度</li><li>激励</li><li>技术委员会</li></ul><p>6、IT建设</p><ul><li>监控系统</li><li>VPN跳板机</li><li>LDAP入离职流程</li><li>Confluence Wiki</li><li>ELK日志系统</li><li>邮箱系统、OA</li></ul><p>7、数据平台建设</p><ul><li>数据埋点和采集</li><li>数据dashboard</li><li>数据分析</li><li>A/B testing</li><li>Growth Hacker</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2d943cb9.html">https://mds1455975151.github.io/archives/2d943cb9.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术负责人 </tag>
            
            <tag> 知识体系 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Memcached之基本介绍</title>
      <link href="/archives/8e986304.html"/>
      <url>/archives/8e986304.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Memcached基本介绍</p></blockquote><a id="more"></a><h1 id="What-is-Memcached"><a href="#What-is-Memcached" class="headerlink" title="What is Memcached?"></a>What is Memcached?</h1><p><a href="http://memcached.org/" target="_blank" rel="noopener">官网地址</a><br><a href="https://github.com/memcached/memcached" target="_blank" rel="noopener">Github地址</a><br>免费和开放源代码的高性能分布式内存对象缓存系统，本质上是通用的，但旨在通过减轻数据库负载来加速动态Web应用程序。Memcached是内存中的键值存储，用于从数据库调用，API调用或页面呈现的结果中为小块任意数据（字符串，对象）。Memcached简单而强大。其简单的设计促进了快速部署，易于开发，并解决了大数据缓存面临的许多问题。它的API适用于大多数流行的语言。</p><h1 id="Memcached-Users"><a href="#Memcached-Users" class="headerlink" title="Memcached Users"></a>Memcached Users</h1><ul><li>LiveJournal</li><li>Wikipedia</li><li>Flickr</li><li>Bebo</li><li>WordPress.com</li><li>Craigslist</li><li>Mixi</li></ul><h1 id="Downloads"><a href="#Downloads" class="headerlink" title="Downloads"></a>Downloads</h1><p><a href="http://memcached.org/downloads" target="_blank" rel="noopener">http://memcached.org/downloads</a></p><h2 id="From-source"><a href="#From-source" class="headerlink" title="From source"></a>From source</h2><p>Redhat/Centos</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y libevent-devel</span></span><br><span class="line"><span class="comment"># wget http://memcached.org/files/memcached-1.5.4.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf memcached-1.5.4.tar.gz</span></span><br><span class="line"><span class="comment"># cd memcached-1.5.4/</span></span><br><span class="line"><span class="comment"># ./configure &amp;&amp; make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure><h2 id="From-a-package"><a href="#From-a-package" class="headerlink" title="From a package"></a>From a package</h2><p>Redhat/Fedora</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install memcached</span></span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8e986304.html">https://mds1455975151.github.io/archives/8e986304.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Memcached </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Squid之基本介绍</title>
      <link href="/archives/154090c0.html"/>
      <url>/archives/154090c0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Squid基本介绍</p></blockquote><a id="more"></a><h1 id="Squid介绍"><a href="#Squid介绍" class="headerlink" title="Squid介绍"></a>Squid介绍</h1><p><img src="/archives/154090c0/01.jpg" alt></p><h2 id="Squid简介"><a href="#Squid简介" class="headerlink" title="Squid简介"></a>Squid简介</h2><p>Squid是Web的一个缓存代理，支持HTTP，HTTPS，FTP等等。它通过缓存和重复使用频繁请求的网页来降低带宽并缩短响应时间。Squid有广泛的访问控制，并使一个伟大的服务器加速器。它运行在大多数可用的操作系统上，包括Windows，并在GNU GPL下获得许可。<br><a href="http://www.squid-cache.org/" target="_blank" rel="noopener">官网地址</a></p><h2 id="为什么使用Squid"><a href="#为什么使用Squid" class="headerlink" title="为什么使用Squid"></a>为什么使用Squid</h2><ul><li>对于ISP:节省带宽，改善用户体验</li><li>对于网站：扩展应用程序，不需要大量投资硬件和开发时间</li><li>对于内容分发提供商：在全球分发您的内容</li></ul><h1 id="Squid部署实践"><a href="#Squid部署实践" class="headerlink" title="Squid部署实践"></a>Squid部署实践</h1><h2 id="获取Squid"><a href="#获取Squid" class="headerlink" title="获取Squid"></a>获取Squid</h2><p><a href="http://www.squid-cache.org/Download/" target="_blank" rel="noopener">http://www.squid-cache.org/Download/</a></p><h2 id="Squid部署案例研究"><a href="#Squid部署案例研究" class="headerlink" title="Squid部署案例研究"></a>Squid部署案例研究</h2><ul><li><a href="http://www.squid-cache.org/Library/wikimedia.html" target="_blank" rel="noopener">WikiMedia</a></li><li><a href="http://www.squid-cache.org/Library/flickr.html" target="_blank" rel="noopener">Flickr</a></li><li><a href="http://iopscience.iop.org/article/10.1088/1742-6596/119/7/072007/pdf" target="_blank" rel="noopener">FroNTier</a></li></ul><h2 id="Squid部署"><a href="#Squid部署" class="headerlink" title="Squid部署"></a>Squid部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat &gt;/etc/yum.repos.d/squid.repo &lt;&lt;EOF</span></span><br><span class="line">[squid]</span><br><span class="line">name=Squid repo <span class="keyword">for</span> CentOS Linux - <span class="variable">$basearch</span></span><br><span class="line"><span class="comment">#IL mirror</span></span><br><span class="line">baseurl=http://www1.ngtech.co.il/repo/centos/7/<span class="variable">$basearch</span>/</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># yum install -y squid</span></span><br><span class="line"><span class="comment"># rpm -ql squid</span></span><br><span class="line"><span class="comment"># rpm -qc squid</span></span><br><span class="line"><span class="comment"># systemctl start squid.service</span></span><br><span class="line"><span class="comment"># systemctl enable squid.service</span></span><br></pre></td></tr></table></figure><h1 id="Squid官网资料"><a href="#Squid官网资料" class="headerlink" title="Squid官网资料"></a>Squid官网资料</h1><p><a href="http://www.squid-cache.org/Doc/" target="_blank" rel="noopener">http://www.squid-cache.org/Doc/</a><br><a href="https://wiki.squid-cache.org/FrontPage" target="_blank" rel="noopener">https://wiki.squid-cache.org/FrontPage</a></p><h2 id="为什么使用代理？"><a href="#为什么使用代理？" class="headerlink" title="为什么使用代理？"></a>为什么使用代理？</h2><p>与许多其他网络协议相比，HTTP的一个显着特点是从一开始就具有支持代理的能力。代理是通信流的中介，可以执行许多增值功能来增强整体用户体验。一般而言，代理分为两种：正向代理和反向代理。</p><ul><li><strong>正向代理</strong><br>主要是缓存，通过直接向客户端提供共享数据，认证和授权，日志记录，公司互联网策略执行（又名内容过滤），网络资源使用管理来节省网络资源。</li><li><strong>反向代理</strong><br>一个反向代理通常位于在Web服务器群的前面，并优化Web服务器的工作，通过缓存和服务经常被访问的静态内容，SpoonFeeding慢的客户，也有可能执行请求过滤，以提高Web应用程序的安全。它也可以用作IPv4-IPv6（或v6-v4）网关。</li></ul><h2 id="如何配置Squid"><a href="#如何配置Squid" class="headerlink" title="如何配置Squid"></a>如何配置Squid</h2><p><a href="https://wiki.squid-cache.org/SquidFaq/ConfiguringSquid" target="_blank" rel="noopener">https://wiki.squid-cache.org/SquidFaq/ConfiguringSquid</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/154090c0.html">https://mds1455975151.github.io/archives/154090c0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Squid </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>电影2018</title>
      <link href="/archives/75a677a6.html"/>
      <url>/archives/75a677a6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>电影</p></blockquote><a id="more"></a><h1 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h1><h2 id="奇门遁甲"><a href="#奇门遁甲" class="headerlink" title="奇门遁甲"></a><strong>奇门遁甲</strong></h2><p>在一个妖孽横行，天象大乱的时代，外星妖物侵袭而来。此时江湖上精通“奇门遁甲”之术的神秘组织“雾隐门”挺身而出，其首领老大（伍佰 饰）、弟子诸葛青云（大鹏 饰）、铁蜻蜓（倪妮 饰）和雾隐七子等众人各怀所长。另一方面，诸葛青云途中寻找新一代掌门小圆圈（周冬雨 饰）之时，新晋捕快刀宜长（李治廷 饰）为救铁蜻蜓亦被牵连在内。一时间，风云涌起，“天外来客”与“雾隐门”之间的正邪之战即将引发，一场新的奇幻危机正在来临……</p><h2 id="雷神3：诸神黄昏"><a href="#雷神3：诸神黄昏" class="headerlink" title="雷神3：诸神黄昏"></a><strong>雷神3：诸神黄昏</strong></h2><p>　在“索科维亚战役”两年后，索尔（克里斯·海姆斯沃斯 饰）得知诸神黄昏的预言并希望全力阻止火焰巨人苏尔特尔毁灭阿斯加德。索尔与洛基（汤姆·希德勒斯顿 饰）在奇异博士（本尼迪克特·康伯巴奇 饰）的指引下找到了奥丁（安东尼·霍普金斯 饰）。奥丁向他们兄弟二人道出他们还有一位姐姐——“死亡女神”海拉（凯特·布兰切特 饰）。在一场战斗里雷神之锤被海拉所毁，索尔跌下彩虹桥而来到了萨卡星，成为阶下囚。失去了锤子的索尔被逼展开角斗士对决，而对手居然是自己的老战友绿巨人（马克·鲁弗洛 饰）。索尔必须与绿巨人、洛基等人并肩战斗，才能阻止海拉和即将到来的诸神黄昏。</p><h2 id="电锯惊魂8：竖锯"><a href="#电锯惊魂8：竖锯" class="headerlink" title="电锯惊魂8：竖锯"></a><strong>电锯惊魂8：竖锯</strong></h2><p>各地再次出现各种杀人案，追查结果都指向了已经在系列第三部中去世的竖锯老怪约翰·克莱默，究竟是本尊回归，还是有党徒在模仿他的手法作案？警方一筹莫展。。。。</p><h2 id="妖铃铃"><a href="#妖铃铃" class="headerlink" title="妖铃铃"></a><strong>妖铃铃</strong></h2><p><img src="/archives/75a677a6/2_144132_c4dcbe2a6c28244.jpg" alt><br>无良地产商父子徐大富（沈腾 饰）和徐天宇（岳云鹏 饰）一心想争夺豪华CBD中一幢破旧居民楼“萌贵坊”的产权，但萌贵坊内仍存四户怪咖不愿搬出—神医王保健（张译 饰）和他的儿子鸡丁（李亦航 饰）、民间发明家夫妇李菊花(papi 饰)和金三(潘斌龙 饰)、网红主播阿萍(焦俊艳 饰)、以及过气古惑仔阿仁(方中信 饰)和阿明(吴镇宇饰)。<br>某个月黑风高的夜晚，怪事接连发生，僵尸，丧尸，吸血男爵，红衣女鬼接踵而至，陷入恐慌的“留守怪咖”请来江湖上人称“万能大师”的铃姐（吴君如 饰）帮他们化解危难，没想到铃姐却带来了更大的麻烦……</p><h2 id="妖猫传"><a href="#妖猫传" class="headerlink" title="妖猫传"></a><strong>妖猫传</strong></h2><p><img src="/archives/75a677a6/2.jpg" alt><br>故事发生在盛唐时期的长安城，白乐天（黄轩 饰）本是朝廷要官，却为了收集写诗的素材而甘愿被贬为起居郎。长安城内连连发生离奇的死亡事件，就连当今圣上也难逃厄运离奇身亡，这一切都和一只神出鬼没的妖猫有关。日本僧人空海（染谷将太 饰）本为了替皇帝解咒远渡重洋而来，却和白乐天意气相投，两人决心携手调查案件真相。<br>一首如怨如诉的《清平调》表明，妖猫作祟和三十年前倾国倾城的杨贵妃（张榕容 饰）之死有着千丝万缕的关联，追寻着曾经迷恋杨贵妃的阿部仲麻吕（阿部宽 饰）所留下的日记，白乐天和空海一同见证了大唐曾经的荣光，亦揭开了当年隐瞒至今的阴谋。</p><h2 id="心理罪之城市之光"><a href="#心理罪之城市之光" class="headerlink" title="心理罪之城市之光"></a><strong>心理罪之城市之光</strong></h2><p><img src="/archives/75a677a6/p2506228506.webp" alt><br>一起连环凶杀案掀起了城市的狂欢与躁动，数起案件中受害者均遭虐待致死，且充满仪式感，所有线索都与一个人有关——精通犯罪心理学的天才神探方木（邓超 饰）。在与同事米楠（刘诗诗 饰）调查案件时，方木发现曾经是自己高中同学的江亚（阮经天 饰）似乎深藏很多秘密。此时网络上出现名为“城市之光”的用户，以发起投票的方式让大众决定律师任川（郭京飞 饰）的生死，方木、米楠等警察虽然用尽一切办法，依然无法阻止这场“以暴制暴”的黑暗审判，这座城市陷入了混乱的旋涡。紧要关头，方木觉察到江亚的妻子魏巍（林嘉欣 饰）竟然是解锁江亚秘密的重要证人，就在真相即将大白的关键时刻，一场惊人变故突如其来…..</p><h2 id="空天猎"><a href="#空天猎" class="headerlink" title="空天猎"></a><strong>空天猎</strong></h2><p><img src="/archives/75a677a6/p2499163778.webp" alt><br>一场空天战场的猎杀传奇。霸天狼，一支神秘的空军顶级团队，每一名飞行员都是“金头盔” 级别的王牌飞行员，吴迪（李晨 饰）、亚莉（范冰冰 饰）、巴图（郭洺宇 饰）、高原（李晨浩 饰）通过层层考核，成为了霸天狼秘密基地的一员。可谁也没有想到，吴迪的好友浩辰（李佳航 饰）却在任务中陷入一场境外战乱的阴谋。更大的威胁接踵而至，恐怖势力突 发其来的导弹危机和人质危机，空前地挑战着中国空军的实战能力!十万火急之下，最新式 的中国战机和最顶级的飞行员，与掌握导弹密码和先进战机的敌人，在境外天空展开一场生死对决……</p><h2 id="二代妖精之今生有幸"><a href="#二代妖精之今生有幸" class="headerlink" title="二代妖精之今生有幸"></a><strong>二代妖精之今生有幸</strong></h2><p>身负巨债的动物饲养员袁帅（冯绍峰 饰），为了还清百万巨债，他四处与富家女相亲，却误打误撞爱上来人间报恩的狐妖白纤楚（刘亦菲 饰）。妖怪管理局局长云中鹤为阻止人妖相恋，派魔都小分队洪思聪队长捉拿违规狐妖白纤楚，袁帅为了寻回爱人狐妖，勇闯妖界……</p><h2 id="看不见的客人"><a href="#看不见的客人" class="headerlink" title="看不见的客人"></a><strong>看不见的客人</strong></h2><p>艾德里安（马里奥·卡萨斯 Mario Casas 饰）经营着一间科技公司，事业蒸蒸日上，家中有美丽贤惠的妻子和活泼可爱的女儿，事业家庭双丰收的他是旁人羡慕的对象。然而，野心勃勃的艾德里安并未珍惜眼前来之不易的生活，一直以来，他和一位名叫劳拉（芭芭拉·蓝妮 Bárbara Lennie 饰）的女摄影师保持着肉体关系。<br>　　某日幽会过后，两人驱车离开别墅，却在路上发生了车祸，为了掩盖事件的真相，两人决定将在车祸中死去的青年丹尼尔联同他的车一起沉入湖底。之后，劳拉遇见了一位善良的老人，老人将劳拉坏掉的车拉回家中修理，然而，令劳拉没有想到的是，这位老人，竟然就是丹尼尔的父亲。</p><h2 id="狂蟒之灾2：搜寻血兰"><a href="#狂蟒之灾2：搜寻血兰" class="headerlink" title="狂蟒之灾2：搜寻血兰"></a><strong>狂蟒之灾2：搜寻血兰</strong></h2><p>故事发生在位于婆罗洲的原始丛林中，比尔（约翰尼·梅辛纳 Johnny Messner 饰）带领着他的探险小队穿行于其中，寻找着一种名为“血兰”的珍稀植物。在记载中，血兰拥有着能够使人长生不老的神秘力量，“几乎从未有人获得过它”的传闻也令血兰逐渐成为了传说。这一次，受一家著名的医药公司所托，比尔一行人决定揭开血兰的神秘面纱。<br>　　在离目标越来越近的同时，危险也不期而至。血兰的力量没有使人类返老还童，却将一群蛇类变得凶猛而恐怖，为了挪动巨大的身体，它们不得不吃下比以往多达数倍的食物，而此时冒昧来访的人类，成为了它们最好的猎物。一边是丛林中恶劣的生态环境，一边是穷凶极恶的食人恶兽，同伴们一个接着一个的悲惨死去，比尔最终能够自保，并且挽救更多的生命吗？</p><h2 id="狂蟒之灾3：魂泣山溪"><a href="#狂蟒之灾3：魂泣山溪" class="headerlink" title="狂蟒之灾3：魂泣山溪"></a><strong>狂蟒之灾3：魂泣山溪</strong></h2><p>在欧洲乡间的秘密研究室里, 一位顶尖的科学家正对着两只巨蟒进行实验测试. 当资助者(约翰莱斯戴维斯饰) 企图干预实验时, 饥饿的蟒蛇逃出了研究室. 汉密特(戴维赫索霍夫饰) 受雇追捕牠们, 其任务是必须在蟒蛇窜逃到城市且在灾难扩大以前, 实时捉拿这多产又极度致命的生物……</p><h2 id="芳华"><a href="#芳华" class="headerlink" title="芳华"></a><strong>芳华</strong></h2><p>故事发生在上世纪七十年代，寄人篱下的少女何小萍（苗苗 饰）经过重重试炼终于加入了梦寐以求的文工团，哪知道这里和她曾经待过的那些地方并无不同，她依然得忍受遭人唾弃和欺侮的生活。唯一给过她温暖的，是刘峰（黄轩 饰），不仅仅是对何小萍，被称为“活雷锋”的刘峰把自己的爱情和温暖无私的奉献给每一个人。<br>　　实际上，刘峰一直爱慕着美丽活泼的林丁丁（杨采钰 饰），当他选择将这份感情勇敢的表达出来时，却让自己的人生走向了完全不同的方向。战争开始了，刘峰、何小萍和萧穗子前赴后继的走上了前线，在枪弹和炮火之中，每一个人都在用生命和热血绽放着属于他们的芳华。</p><h2 id="逃出绝命镇"><a href="#逃出绝命镇" class="headerlink" title="逃出绝命镇"></a><strong>逃出绝命镇</strong></h2><p>　　黑人小伙克里斯（丹尼尔·卡卢亚 Daniel Kaluuya 饰）和白人女孩露丝（艾莉森·威廉姆斯 Allison Williams 饰）相恋，虽然两人之间的感情十分要好，但克里斯一直为自己的肤色心存芥蒂。某日，两人相约前往露丝家做客，在那里，克里斯见到了露丝的父母迪恩（布莱德利·惠特福德 Bradley Whitford 饰）和米西（凯瑟琳·基纳 Catherine Keener 饰），除了露丝的弟弟吉瑞米（卡莱伯·兰德里·琼斯 Caleb Landry Jones 饰）对克里斯展现出了一丝敌意外，一切都堪称完美。<br>　　隔日，克里斯参加了露丝家举办的派对，在派对中，克里斯遇见了旧友安德鲁（凯斯·斯坦菲尔德 Keith Stanfield 饰），让克里斯百思不得其解的是，安德鲁的穿着、谈吐和举止和先前大相径庭，判若两人。种种诡异的蛛丝马迹让克里斯渐渐察觉，自己似乎陷入了一个阴谋之中。</p><h2 id="时空罪恶"><a href="#时空罪恶" class="headerlink" title="时空罪恶"></a><strong>时空罪恶</strong></h2><p>和恐怖游轮类似的循环电影，只不过只有三次。</p><h2 id="抢钱老兵"><a href="#抢钱老兵" class="headerlink" title="抢钱老兵"></a><strong>抢钱老兵</strong></h2><h2 id="星球大战8：最后的绝地武士"><a href="#星球大战8：最后的绝地武士" class="headerlink" title="星球大战8：最后的绝地武士"></a><strong>星球大战8：最后的绝地武士</strong></h2><p>星球大战：最后的绝地武士》承接前作《星球大战：原力觉醒》的剧情，讲述第一军团全面侵袭之下，蕾伊（黛西·雷德利 Daisy Ridley 饰）、芬恩（约翰·博耶加 John Boyega 饰）、波·达默龙（奥斯卡·伊萨克 Oscar Isaac 饰）三位年轻主角各自的抉 择和冒险故事。前作中觉醒强大原力的蕾伊独自寻访隐居的绝地大师卢克·天行者（马克·哈米尔 Mark Hamill 饰），在后者的指导下接受原力训练。芬恩接受了一项几乎不可能完成的任务，为此他不得不勇闯敌营，面对自己的过去。波·达默龙则要适应从战士向领袖的角色转换，这一过程中他也将接受一些血的教训。</p><h2 id="帕丁顿熊2"><a href="#帕丁顿熊2" class="headerlink" title="帕丁顿熊2"></a><strong>帕丁顿熊2</strong></h2><p>来自秘鲁密林的小熊帕丁顿（本·卫肖 Ben Whishaw 配音），在伦敦成功地融入了收留他的布朗先生（休·博内威利 Hugh Bonneville 饰）一家，呆萌可爱懂礼貌而又富有正义感的他深受社区民众的喜爱，不断地向大家散播欢乐的他也成为了街坊的开心果，他出没的每个地方，都充满了果酱及欢笑声。今年刚好是他的露西婶婶（艾美达·斯丹顿 Imelda Staunton 配音）的百岁寿辰，帕丁顿熊决定为她准备一份特别的惊喜。千挑万选之下，他在格鲁伯先生（吉姆·布劳德本特 Jim Broadbent 饰）的古董商店里看中了一本独一无二的立体书。为了购得这本立体书作为生日贺礼，平时懒洋洋的他，不得不开始四处打零工筹钱。然而，熊算不如天算，在露西婶婶的生日前夕，这本立体书却突然莫名失窃。为了务求取回这份生日贺礼，焦急万分的帕丁顿熊只好与布朗一家想尽办法找出这名窃贼……</p><h2 id="窥镜"><a href="#窥镜" class="headerlink" title="窥镜"></a><strong>窥镜</strong></h2><h2 id="西游记之女儿国"><a href="#西游记之女儿国" class="headerlink" title="西游记之女儿国"></a><strong>西游记之女儿国</strong></h2><h2 id="马戏之王"><a href="#马戏之王" class="headerlink" title="马戏之王"></a><strong>马戏之王</strong></h2><h2 id="祖宗十九代"><a href="#祖宗十九代" class="headerlink" title="祖宗十九代"></a><strong>祖宗十九代</strong></h2><h2 id="白夜追凶"><a href="#白夜追凶" class="headerlink" title="白夜追凶"></a><strong>白夜追凶</strong></h2><h2 id="头号玩家"><a href="#头号玩家" class="headerlink" title="头号玩家"></a><strong>头号玩家</strong></h2><h2 id="捉妖记2"><a href="#捉妖记2" class="headerlink" title="捉妖记2"></a><strong>捉妖记2</strong></h2><h2 id="幕后玩家"><a href="#幕后玩家" class="headerlink" title="幕后玩家"></a><strong>幕后玩家</strong></h2><p>徐峥</p><h2 id="复联3"><a href="#复联3" class="headerlink" title="复联3"></a><strong>复联3</strong></h2><h2 id="手机"><a href="#手机" class="headerlink" title="手机"></a><strong>手机</strong></h2><p>《手机》是冯小刚执导的一部贺岁喜剧片，于2003年底上映，由葛优、范冰冰等主演。影片改编自刘震云同名小说《手机》，讲述了事业如日中天的电视主持人严守一因为手机给他的生活带来快乐、带来爱情的同时，也使他的婚姻遇到了很大的危机。</p><h2 id="古墓丽影：源起之战"><a href="#古墓丽影：源起之战" class="headerlink" title="古墓丽影：源起之战"></a><strong>古墓丽影：源起之战</strong></h2><h2 id="环太平洋：雷霆再起"><a href="#环太平洋：雷霆再起" class="headerlink" title="环太平洋：雷霆再起"></a><strong>环太平洋：雷霆再起</strong></h2><h2 id="电锯惊魂1、2、3、4、5、6、7"><a href="#电锯惊魂1、2、3、4、5、6、7" class="headerlink" title="电锯惊魂1、2、3、4、5、6、7"></a><strong>电锯惊魂1、2、3、4、5、6、7</strong></h2><h2 id="我不是药神"><a href="#我不是药神" class="headerlink" title="我不是药神"></a><strong>我不是药神</strong></h2><p>一位不速之客的意外到访，打破了神油店老板程勇的平凡人生，他从一个交不起房租的男性保健品商贩，一跃成为印度仿制药“格列宁”的独家代理商。收获巨额利润的他，生活剧烈变化，被病患们冠以“药神”的称号。但是，一场关于救赎的拉锯战也在波涛暗涌中慢慢展开……</p><h2 id="陈翔六点半之铁头无敌"><a href="#陈翔六点半之铁头无敌" class="headerlink" title="陈翔六点半之铁头无敌"></a><strong>陈翔六点半之铁头无敌</strong></h2><p>七旬大爷老废年轻时在香港练功夫练成铁头无敌，如今老了铁头功却毫无用处，生活也穷困窘迫，甚至连家都被物业给抄了。老废面对惨淡人生，发出了要再奋斗一次的誓言，在所有人都嘲笑他的时候，一个废柴老头、一门没用的武功在新的环境下，却碰撞出了前所未有的火花，他也大器晚成、飞黄腾达……只不过，生活也变得错综复杂，面对家庭、事业、感情的冲击，他该如何抉择？</p><h2 id="爱情税"><a href="#爱情税" class="headerlink" title="爱情税"></a><strong>爱情税</strong></h2><h2 id="超时空同居"><a href="#超时空同居" class="headerlink" title="超时空同居"></a><strong>超时空同居</strong></h2><h2 id="心花路放2014"><a href="#心花路放2014" class="headerlink" title="心花路放2014"></a><strong>心花路放2014</strong></h2><h2 id="新世界-推荐"><a href="#新世界-推荐" class="headerlink" title="新世界(推荐)"></a><strong>新世界(推荐)</strong></h2><h2 id="恶女-推荐"><a href="#恶女-推荐" class="headerlink" title="恶女(推荐)"></a><strong>恶女(推荐)</strong></h2><h2 id="殉道者"><a href="#殉道者" class="headerlink" title="殉道者"></a><strong>殉道者</strong></h2><h2 id="圣殇"><a href="#圣殇" class="headerlink" title="圣殇"></a><strong>圣殇</strong></h2><p>由金基德编导，李廷镇、赵敏秀领衔主演的剧情片。影片讲述了以追讨高利贷为生的李江道在某天突然遇到了一个声称是他生母的女人，渴望亲情的江道在半信半疑之下和这个女人开始了一段特殊的“母子关系”，却不知道，一场阴谋正等待着他的故事。该片于2012年9月6日在韩国上映。</p><h2 id="黄海-推荐"><a href="#黄海-推荐" class="headerlink" title="黄海(推荐)"></a><strong>黄海(推荐)</strong></h2><h2 id="巨齿鲨"><a href="#巨齿鲨" class="headerlink" title="巨齿鲨"></a><strong>巨齿鲨</strong></h2><h2 id="人类清除计划4"><a href="#人类清除计划4" class="headerlink" title="人类清除计划4"></a><strong>人类清除计划4</strong></h2><h2 id="侏罗纪时间2"><a href="#侏罗纪时间2" class="headerlink" title="侏罗纪时间2"></a><strong>侏罗纪时间2</strong></h2><h2 id="一场好戏-黄渤"><a href="#一场好戏-黄渤" class="headerlink" title="一场好戏 黄渤"></a><strong>一场好戏</strong> 黄渤</h2><h2 id="侏罗纪世界2"><a href="#侏罗纪世界2" class="headerlink" title="侏罗纪世界2"></a><strong>侏罗纪世界2</strong></h2><h2 id="邪不压正-姜文"><a href="#邪不压正-姜文" class="headerlink" title="邪不压正 姜文"></a><strong>邪不压正</strong> 姜文</h2><h2 id="西虹市首富"><a href="#西虹市首富" class="headerlink" title="西虹市首富"></a><strong>西虹市首富</strong></h2><h2 id="与神同行2：因与缘"><a href="#与神同行2：因与缘" class="headerlink" title="与神同行2：因与缘"></a><strong>与神同行2：因与缘</strong></h2><h2 id="致命守护者：毒液-影院"><a href="#致命守护者：毒液-影院" class="headerlink" title="致命守护者：毒液 影院"></a><strong>致命守护者：毒液 影院</strong></h2><h1 id="动漫"><a href="#动漫" class="headerlink" title="动漫"></a>动漫</h1><h2 id="风语咒"><a href="#风语咒" class="headerlink" title="风语咒"></a><strong>风语咒</strong></h2><h2 id="精灵旅社3：疯狂假期"><a href="#精灵旅社3：疯狂假期" class="headerlink" title="精灵旅社3：疯狂假期"></a><strong>精灵旅社3：疯狂假期</strong></h2><p><strong>科幻</strong></p><h2 id="异星战场-推荐"><a href="#异星战场-推荐" class="headerlink" title="异星战场(推荐)"></a><strong>异星战场(推荐)</strong></h2><h2 id="移魂都市"><a href="#移魂都市" class="headerlink" title="移魂都市"></a><strong>移魂都市</strong></h2><h1 id="电视剧"><a href="#电视剧" class="headerlink" title="电视剧"></a>电视剧</h1><p><strong>小丈夫</strong></p><h1 id="美剧"><a href="#美剧" class="headerlink" title="美剧"></a>美剧</h1><p><strong>行尸走肉1-9</strong><br><strong>西部世界</strong><br><strong>神盾局特工</strong><br><strong>无耻之徒</strong><br><strong>血族</strong><br><strong>穹顶之下</strong><br><strong>超人前传</strong><br><strong>权利的游戏</strong><br><strong>蛇蝎女佣</strong><br><strong>黑吃黑</strong><br><strong>东区女巫</strong><br><strong>西部世界2</strong><br><strong>纸钞屋 完结</strong><br><strong>起源号 第一季</strong><br><strong>星际迷航：发现号</strong></p><h1 id="综艺节目"><a href="#综艺节目" class="headerlink" title="综艺节目"></a>综艺节目</h1><p><strong>圆桌派</strong><br><strong>无节制消费的元凶</strong><br><strong>泰国红灯区揭秘(小鹏奇啪行)</strong><br><strong>风味人间</strong></p><h1 id="动漫-1"><a href="#动漫-1" class="headerlink" title="动漫"></a>动漫</h1><p><strong>斗罗大陆</strong><br><strong>斗破苍穹1、2</strong><br><strong>西行纪</strong><br><strong>不良人3</strong></p><h1 id="小说"><a href="#小说" class="headerlink" title="小说"></a>小说</h1><p><strong>二号首长</strong><br><strong>斗罗大陆</strong></p><h1 id="黄秋生"><a href="#黄秋生" class="headerlink" title="黄秋生"></a>黄秋生</h1><p><strong>八仙饭店之人肉叉烧包</strong><br><strong>失眠</strong><br><strong>的士判官</strong><br><strong>虐之恋</strong><br><strong>伊波拉病毒</strong><br><strong>盲女72小时</strong></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/75a677a6.html">https://mds1455975151.github.io/archives/75a677a6.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电影 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker私有仓库管理系统Harbor部署</title>
      <link href="/archives/d6923a8b.html"/>
      <url>/archives/d6923a8b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Docker私有仓库管理系统Harbor部署</p></blockquote><a id="more"></a><h1 id="Harbor简介"><a href="#Harbor简介" class="headerlink" title="Harbor简介"></a>Harbor简介</h1><h2 id="Harbor介绍"><a href="#Harbor介绍" class="headerlink" title="Harbor介绍"></a>Harbor介绍</h2><p>Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等。</p><ul><li><strong>基于角色的访问控制</strong> - 用户与Docker镜像仓库通过“项目”进行组织管理，一个用户可以对多个镜像仓库在同一命名空间（project）里有不同的权限。</li><li><strong>镜像复制</strong> - 镜像可以在多个Registry实例中复制（同步）。尤其适合于负载均衡，高可用，混合云和多云的场景。</li><li><strong>图形化用户界面</strong> - 用户可以通过浏览器来浏览，检索当前Docker镜像仓库，管理项目和命名空间。</li><li><strong>AD/LDAP 支持</strong> - Harbor可以集成企业内部已有的AD/LDAP，用于鉴权认证管理。</li><li><strong>审计管理</strong> - 所有针对镜像仓库的操作都可以被记录追溯，用于审计管理。</li><li><strong>国际化</strong> - 已拥有英文、中文、德文、日文和俄文的本地化版本。更多的语言将会添加进来。</li><li><strong>RESTful API</strong> - RESTful API 提供给管理员对于Harbor更多的操控, 使得与其它管理软件集成变得更容易。</li><li><strong>部署简单</strong> - 提供在线和离线两种安装工具， 也可以安装到vSphere平台(OVA方式)虚拟设备。<br>更多信息请查看<a href="https://vmware.github.io/harbor/cn/#overview" target="_blank" rel="noopener">Readme</a>文档。</li></ul><h2 id="Harbor架构"><a href="#Harbor架构" class="headerlink" title="Harbor架构"></a>Harbor架构</h2><p><img src="/archives/d6923a8b/07.png" alt><br>如上所示，Harbor包含6个组件：<br>Proxy(代理服务器): Harbor组件，例如register，UI和令牌服务都在代理服务后端，代理将来自客户端和浏览器的流量返回给后端各个服务<br>register(仓库)：负责存储Docker Images和处理docker pull/push命令。Harbor会强制对访问images进行控制，register会将客户端引导到令牌服务，以获取每次push和pull请求的有效令牌<br>Core services(核心服务)：Harbor核心功能，主要提供以下服务：<br>UI(图形用户界面)：帮助用户管理register上的image。Webhook是在注册表中配置的一种机制，以便注册表中的图像状态更改可以填充到Harbour的Webhook端点。Harbor使用webhook来更新日志，启动复制以及其他一些功能。令牌服务：负责根据用户的项目角色为每个Docker推送/拉取命令发布令牌。如果从Docker客户端发送的请求中没有令牌，注册中心会将请求重定向到令牌服务。数据库：数据库存储项目，用户，角色，复制策略和图像的元数据。<br>Job services(Job服务):用于Images复制，可以将本地images同步到其他Harbor实例<br>Log collector(日志采集器)：负责在一个地方收集其他模块的日志<br><a href="https://github.com/vmware/harbor/wiki/Architecture-Overview-of-Harbor" target="_blank" rel="noopener">资料</a></p><h2 id="实现讲解"><a href="#实现讲解" class="headerlink" title="实现讲解"></a>实现讲解</h2><p><a href="https://github.com/vmware/harbor/wiki/Architecture-Overview-of-Harbor" target="_blank" rel="noopener">详见</a></p><h2 id="Docker登录过程讲解"><a href="#Docker登录过程讲解" class="headerlink" title="Docker登录过程讲解"></a>Docker登录过程讲解</h2><p><img src="/archives/d6923a8b/08.png" alt><br><a href="https://github.com/vmware/harbor/wiki/Architecture-Overview-of-Harbor" target="_blank" rel="noopener">详见</a></p><h2 id="Docker-push过程讲解"><a href="#Docker-push过程讲解" class="headerlink" title="Docker push过程讲解"></a>Docker push过程讲解</h2><p><a href="https://github.com/vmware/harbor/wiki/Architecture-Overview-of-Harbor" target="_blank" rel="noopener">详见</a></p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="Harbor部署实践"><a href="#Harbor部署实践" class="headerlink" title="Harbor部署实践"></a>Harbor部署实践</h1><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><ul><li>Python should be version 2.7 or higher</li><li>Docker engine should be version 1.10 or higher.</li><li>Docker Compose needs to be version 1.6.0 or higher.</li></ul><h2 id="快速部署docker环境"><a href="#快速部署docker环境" class="headerlink" title="快速部署docker环境"></a>快速部署docker环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span></span><br><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line"><span class="comment"># yum remove -y docker docker-common docker-selinux docker-engine</span></span><br><span class="line"><span class="comment"># yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line"><span class="comment"># yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="comment"># yum-config-manager --enable docker-ce-edge</span></span><br><span class="line"><span class="comment"># yum-config-manager --enable docker-ce-test</span></span><br><span class="line"><span class="comment"># yum list docker-ce --showduplicates | sort -r |grep stable</span></span><br><span class="line"><span class="comment"># yum install -y docker-ce-17.06.2.ce</span></span><br><span class="line"><span class="comment"># systemctl start docker</span></span><br><span class="line"><span class="comment"># systemctl enable docker</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mkdir -p /etc/docker                                            # 为了后期方便添加阿里云的加速镜像站</span></span><br><span class="line"><span class="comment"># tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="string">"registry-mirrors"</span>: [<span class="string">"https://k9lgui7f.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># systemctl daemon-reload</span></span><br><span class="line"><span class="comment"># systemctl restart docker</span></span><br><span class="line"><span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 19:59:06 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 20:00:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="Docker-Compose-安装"><a href="#Docker-Compose-安装" class="headerlink" title="Docker Compose 安装"></a>Docker Compose 安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y docker-compose</span></span><br><span class="line"><span class="comment"># docker-compose -v</span></span><br><span class="line">docker-compose version 1.9.0, build 2585387</span><br></pre></td></tr></table></figure><h2 id="Harbor离线部署"><a href="#Harbor离线部署" class="headerlink" title="Harbor离线部署"></a>Harbor离线部署</h2><p>镜像站点：<a href="http://harbor.orientsoft.cn/" target="_blank" rel="noopener">http://harbor.orientsoft.cn/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://harbor.orientsoft.cn/harbor-v1.3.0/harbor-offline-installer-v1.3.0.tgz</span></span><br><span class="line"><span class="comment"># tar -zxf harbor-offline-installer-v1.3.0.tgz</span></span><br><span class="line"><span class="comment"># vim harbor.cfg</span></span><br><span class="line">hostname = 192.168.200.107</span><br><span class="line"><span class="comment"># ./install.sh</span></span><br><span class="line"></span><br><span class="line">[Step 0]: checking installation environment ...</span><br><span class="line"></span><br><span class="line">Note: docker version: 17.06.2</span><br><span class="line"></span><br><span class="line">Note: docker-compose version: 1.9.0</span><br><span class="line"></span><br><span class="line">[Step 1]: loading Harbor images ...</span><br><span class="line">49c2c19b0cd0: Loading layer [==================================================&gt;]  135.8MB/135.8MB</span><br><span class="line">43871d066430: Loading layer [==================================================&gt;]  30.94MB/30.94MB</span><br><span class="line">6e35eebca0b3: Loading layer [==================================================&gt;]  7.071MB/7.071MB</span><br><span class="line">72366ac0a61c: Loading layer [==================================================&gt;]  7.071MB/7.071MB</span><br><span class="line">Loaded image: vmware/harbor-adminserver:v1.3.0</span><br><span class="line">Loaded image: vmware/photon:1.0</span><br><span class="line">454c81edbd3b: Loading layer [==================================================&gt;]  135.2MB/135.2MB</span><br><span class="line">11a7546bc950: Loading layer [==================================================&gt;]  90.74MB/90.74MB</span><br><span class="line">0e1b40dbb3d2: Loading layer [==================================================&gt;]  10.95MB/10.95MB</span><br><span class="line">58127bdab8e5: Loading layer [==================================================&gt;]   17.3MB/17.3MB</span><br><span class="line">2e3e9ac4492d: Loading layer [==================================================&gt;]  15.87kB/15.87kB</span><br><span class="line">bd6c57401b0f: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">08a6f4315b6a: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">Loaded image: vmware/notary-photon:signer-0.5.1</span><br><span class="line">418e636d0b27: Loading layer [==================================================&gt;]  161.5MB/161.5MB</span><br><span class="line">fb804e98cb47: Loading layer [==================================================&gt;]  6.656kB/6.656kB</span><br><span class="line">d961645df25c: Loading layer [==================================================&gt;]  6.656kB/6.656kB</span><br><span class="line">Loaded image: vmware/postgresql:9.6.5-photon</span><br><span class="line">e99db1275091: Loading layer [==================================================&gt;]  395.4MB/395.4MB</span><br><span class="line">051e4ee23882: Loading layer [==================================================&gt;]  9.216kB/9.216kB</span><br><span class="line">6cca4437b6f6: Loading layer [==================================================&gt;]  9.216kB/9.216kB</span><br><span class="line">1d48fc08c8bc: Loading layer [==================================================&gt;]   7.68kB/7.68kB</span><br><span class="line">0419724fd942: Loading layer [==================================================&gt;]  1.536kB/1.536kB</span><br><span class="line">92ce53616a73: Loading layer [==================================================&gt;]  599.2MB/599.2MB</span><br><span class="line">2004244b53a2: Loading layer [==================================================&gt;]  74.24kB/74.24kB</span><br><span class="line">Loaded image: vmware/harbor-db-migrator:1.3</span><br><span class="line">a6d98571db01: Loading layer [==================================================&gt;]  30.95MB/30.95MB</span><br><span class="line">59a1c12ff8fc: Loading layer [==================================================&gt;]   22.7MB/22.7MB</span><br><span class="line">e2afbf102133: Loading layer [==================================================&gt;]  7.168kB/7.168kB</span><br><span class="line">651f22b6c594: Loading layer [==================================================&gt;]   5.38MB/5.38MB</span><br><span class="line">c09acca6fec2: Loading layer [==================================================&gt;]  22.69MB/22.69MB</span><br><span class="line">Loaded image: vmware/harbor-ui:v1.3.0</span><br><span class="line">4bb9abea102e: Loading layer [==================================================&gt;]  80.77MB/80.77MB</span><br><span class="line">8587cdacda27: Loading layer [==================================================&gt;]  3.584kB/3.584kB</span><br><span class="line">360c7adfc364: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">1f7da27101b3: Loading layer [==================================================&gt;]  4.096kB/4.096kB</span><br><span class="line">a6f957ab2e5e: Loading layer [==================================================&gt;]  3.584kB/3.584kB</span><br><span class="line">2f80d33e3806: Loading layer [==================================================&gt;]  10.24kB/10.24kB</span><br><span class="line">Loaded image: vmware/harbor-log:v1.3.0</span><br><span class="line">cd0c2ef5af40: Loading layer [==================================================&gt;]  72.46MB/72.46MB</span><br><span class="line">Loaded image: vmware/nginx-photon:1.11.13</span><br><span class="line">bab81b4d4981: Loading layer [==================================================&gt;]  463.7MB/463.7MB</span><br><span class="line">5735a75e540c: Loading layer [==================================================&gt;]  9.216kB/9.216kB</span><br><span class="line">44394f38b0c9: Loading layer [==================================================&gt;]  9.216kB/9.216kB</span><br><span class="line">13775ef23512: Loading layer [==================================================&gt;]   7.68kB/7.68kB</span><br><span class="line">9d8d34eb8c97: Loading layer [==================================================&gt;]  1.536kB/1.536kB</span><br><span class="line">Loaded image: vmware/mariadb-photon:10.2.10</span><br><span class="line">7b9d4bb4a97a: Loading layer [==================================================&gt;]  221.3MB/221.3MB</span><br><span class="line">bf09be2fb717: Loading layer [==================================================&gt;]  10.75MB/10.75MB</span><br><span class="line">e58dd96cb442: Loading layer [==================================================&gt;]  2.048kB/2.048kB</span><br><span class="line">ee0b77dfb8f1: Loading layer [==================================================&gt;]  48.13kB/48.13kB</span><br><span class="line">ed57bf8fb48c: Loading layer [==================================================&gt;]   10.8MB/10.8MB</span><br><span class="line">Loaded image: vmware/clair:v2.0.1-photon</span><br><span class="line">423b913589eb: Loading layer [==================================================&gt;]  9.216kB/9.216kB</span><br><span class="line">125f16e1d09a: Loading layer [==================================================&gt;]   2.56kB/2.56kB</span><br><span class="line">288e350a1aa7: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">Loaded image: vmware/harbor-db:v1.3.0</span><br><span class="line">011e312d9548: Loading layer [==================================================&gt;]  30.95MB/30.95MB</span><br><span class="line">90dfb70c7d61: Loading layer [==================================================&gt;]  18.33MB/18.33MB</span><br><span class="line">3476101e3dce: Loading layer [==================================================&gt;]  18.33MB/18.33MB</span><br><span class="line">Loaded image: vmware/harbor-jobservice:v1.3.0</span><br><span class="line">7280dd18d4e6: Loading layer [==================================================&gt;]  90.74MB/90.74MB</span><br><span class="line">29de07437cda: Loading layer [==================================================&gt;]  2.048kB/2.048kB</span><br><span class="line">bf435791a668: Loading layer [==================================================&gt;]  2.048kB/2.048kB</span><br><span class="line">ea6923ed1a8e: Loading layer [==================================================&gt;]  2.048kB/2.048kB</span><br><span class="line">b39969acb12a: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">a07efc1d5b07: Loading layer [==================================================&gt;]   22.8MB/22.8MB</span><br><span class="line">Loaded image: vmware/registry:2.6.2-photon</span><br><span class="line">cd2cb03dfead: Loading layer [==================================================&gt;]  12.16MB/12.16MB</span><br><span class="line">fdcb5fa28b07: Loading layer [==================================================&gt;]   17.3MB/17.3MB</span><br><span class="line">eef410f82bbe: Loading layer [==================================================&gt;]  15.87kB/15.87kB</span><br><span class="line">938e5e2a4bad: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">558c91f2870a: Loading layer [==================================================&gt;]  3.072kB/3.072kB</span><br><span class="line">Loaded image: vmware/notary-photon:server-0.5.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 2]: preparing environment ...</span><br><span class="line">Generated and saved secret to file: /data/secretkey</span><br><span class="line">Generated configuration file: ./common/config/nginx/nginx.conf</span><br><span class="line">Generated configuration file: ./common/config/adminserver/env</span><br><span class="line">Generated configuration file: ./common/config/ui/env</span><br><span class="line">Generated configuration file: ./common/config/registry/config.yml</span><br><span class="line">Generated configuration file: ./common/config/db/env</span><br><span class="line">Generated configuration file: ./common/config/jobservice/env</span><br><span class="line">Generated configuration file: ./common/config/<span class="built_in">log</span>/logrotate.conf</span><br><span class="line">Generated configuration file: ./common/config/jobservice/app.conf</span><br><span class="line">Generated configuration file: ./common/config/ui/app.conf</span><br><span class="line">Generated certificate, key file: ./common/config/ui/private_key.pem, cert file: ./common/config/registry/root.crt</span><br><span class="line">The configuration files are ready, please use docker-compose to start the service.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 3]: checking existing instance of Harbor ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 4]: starting Harbor ...</span><br><span class="line">Creating network <span class="string">"harbor_harbor"</span> with the default driver</span><br><span class="line">Creating harbor-log</span><br><span class="line">Creating registry</span><br><span class="line">Creating harbor-adminserver</span><br><span class="line">Creating harbor-db</span><br><span class="line">Creating harbor-ui</span><br><span class="line">Creating harbor-jobservice</span><br><span class="line">Creating nginx</span><br><span class="line"></span><br><span class="line">✔ ----Harbor has been installed and started successfully.----</span><br><span class="line"></span><br><span class="line">Now you should be able to visit the admin portal at http://192.168.200.107.</span><br><span class="line">For more details, please visit https://github.com/vmware/harbor .</span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                              COMMAND                  CREATED             STATUS                    PORTS                                                              NAMES</span><br><span class="line">b6c25def0f46        vmware/harbor-jobservice:v1.3.0    <span class="string">"/harbor/start.sh"</span>       42 seconds ago      Up 40 seconds (healthy)                                                                      harbor-jobservice</span><br><span class="line">58dea89a9644        vmware/nginx-photon:1.11.13        <span class="string">"nginx -g 'daemon ..."</span>   42 seconds ago      Up 39 seconds             0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, 0.0.0.0:4443-&gt;4443/tcp   nginx</span><br><span class="line">e40cd5c3ec9b        vmware/harbor-ui:v1.3.0            <span class="string">"/harbor/start.sh"</span>       42 seconds ago      Up 41 seconds (healthy)                                                                      harbor-ui</span><br><span class="line">624f0e6908bc        vmware/harbor-adminserver:v1.3.0   <span class="string">"/harbor/start.sh"</span>       43 seconds ago      Up 41 seconds (healthy)                                                                      harbor-adminserver</span><br><span class="line">3cfff5252009        vmware/harbor-db:v1.3.0            <span class="string">"/usr/local/bin/do..."</span>   43 seconds ago      Up 41 seconds (healthy)   3306/tcp                                                           harbor-db</span><br><span class="line">52154006aff2        vmware/registry:2.6.2-photon       <span class="string">"/entrypoint.sh se..."</span>   43 seconds ago      Up 41 seconds (healthy)   5000/tcp                                                           registry</span><br><span class="line">d2e0beebc66e        vmware/harbor-log:v1.3.0           <span class="string">"/bin/sh -c /usr/l..."</span>   45 seconds ago      Up 42 seconds (healthy)   127.0.0.1:1514-&gt;10514/tcp</span><br></pre></td></tr></table></figure><h2 id="访问及测试"><a href="#访问及测试" class="headerlink" title="访问及测试"></a>访问及测试</h2><p><a href="http://192.168.200.107" target="_blank" rel="noopener">http://192.168.200.107</a><br>默认账号：admin 密码：配置文件中harbor_admin_password的值<br><img src="/archives/d6923a8b/01.png" alt><br><img src="/archives/d6923a8b/02.png" alt></p><h1 id="日常应用"><a href="#日常应用" class="headerlink" title="日常应用"></a>日常应用</h1><h2 id="Harbor使用"><a href="#Harbor使用" class="headerlink" title="Harbor使用"></a>Harbor使用</h2><p>设置客户端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">方法1:</span><br><span class="line"><span class="comment"># vim /usr/lib/systemd/system/docker.service</span></span><br><span class="line">ExecStart=/usr/bin/dockerd --insecure-registry 192.168.200.107</span><br><span class="line">方法2：(推荐)</span><br><span class="line"><span class="comment"># cat /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://tdimi5q1.mirror.aliyuncs.com"</span>],</span><br><span class="line">  <span class="string">"insecure-registries"</span>: [<span class="string">"192.168.200.107"</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># systemctl restart docker</span></span><br><span class="line"><span class="comment"># systemctl status docker.service</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># docker pull hello-world</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">ca4f61b1923c: Pull complete</span><br><span class="line">Digest: sha256:66ef312bbac49c39a89aa9bcc3cb4f3c9e7de3788c944158df3ee0176d32b751</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world         latest              f2a91732366c        2 months ago        1.85kB</span><br><span class="line"><span class="comment"># docker tag hello-world 192.168.200.107/yttx/hello-world:v1.0</span></span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">192.168.200.107/yttx/hello-world   v1.0                f2a91732366c        2 months ago        1.85kB</span><br><span class="line">hello-world                        latest              f2a91732366c        2 months ago        1.85kB</span><br><span class="line"><span class="comment"># docker push 192.168.200.107/yttx/hello-world:v1.0</span></span><br><span class="line">The push refers to a repository [192.168.200.107/yttx/hello-world]</span><br><span class="line">f999ae22f308: Preparing</span><br><span class="line">denied: requested access to the resource is denied    <span class="comment"># 后台没配置该用户权限</span></span><br><span class="line"><span class="comment"># docker push 192.168.200.107/yttx/hello-world:v1.0</span></span><br><span class="line">The push refers to a repository [192.168.200.107/yttx/hello-world]</span><br><span class="line">f999ae22f308: Pushed</span><br><span class="line">v1.0: digest: sha256:8072a54ebb3bc136150e2f2860f00a7bf45f13eeb917cca2430fcd0054c8e51b size: 524</span><br></pre></td></tr></table></figure><h2 id="https配置"><a href="#https配置" class="headerlink" title="https配置"></a>https配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim harbor.cfg</span></span><br><span class="line">hostname = registry-1.madslq.cn</span><br><span class="line">ui_url_protocol = https</span><br><span class="line">ssl_cert = /data/cert/server.crt</span><br><span class="line">ssl_cert_key = /data/cert/server.key</span><br></pre></td></tr></table></figure><p>生成证书</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@linux-node8 harbor]<span class="comment"># mkdir -p /data/cert/</span></span><br><span class="line">[root@linux-node8 harbor]<span class="comment"># openssl genrsa -out /data/cert/server.key 2048</span></span><br><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">................................................+++</span><br><span class="line">.......................+++</span><br><span class="line">e is 65537 (0x10001)</span><br><span class="line">[root@linux-node8 harbor]<span class="comment"># openssl req -x509 -new -nodes -key /data/cert/server.key -subj "/CN=registry-1.madslq.cn" -days 5000 -out /data/cert/server.crt</span></span><br><span class="line">[root@linux-node8 harbor]<span class="comment"># ls -al /data/cert/</span></span><br><span class="line">total 8</span><br><span class="line">drwxr-xr-x 2 root root   40 Mar  4 23:32 .</span><br><span class="line">drwxr-xr-x 3 root root   17 Mar  4 23:30 ..</span><br><span class="line">-rw-r--r-- 1 root root 1094 Mar  4 23:32 server.crt</span><br><span class="line">-rw-r--r-- 1 root root 1679 Mar  4 23:31 server.key</span><br></pre></td></tr></table></figure><p>客户端配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 harbor]<span class="comment"># cp /data/cert/server.crt /etc/docker/certs.d/registry-1.madslq.cn/server.crt</span></span><br><span class="line">[root@linux-node8 harbor]<span class="comment"># systemctl restart docker</span></span><br><span class="line">[root@linux-node8 harbor]<span class="comment"># docker login registry-1.madslq.cn</span></span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">Login Succeeded</span><br><span class="line">[root@linux-node8 harbor]<span class="comment"># docker push registry-1.madslq.cn/k8s/nginx:1.10</span></span><br><span class="line">The push refers to a repository [registry-1.madslq.cn/k8s/nginx]</span><br><span class="line">de344a0ad635: Pushed</span><br><span class="line">db9dceda8ac9: Pushed</span><br><span class="line">5d6cbe0dbcf9: Pushed</span><br><span class="line">1.10: digest: sha256:f15ae03013d6561bfc36ca273407a346457952f507e792d4712a4bce8c5c0e8f size: 948</span><br></pre></td></tr></table></figure><p><strong>镜像仓库</strong><br><img src="/archives/d6923a8b/04.png" alt></p><p><strong>成员</strong><br><img src="/archives/d6923a8b/05.png" alt></p><p><strong>镜像仓库</strong><br><img src="/archives/d6923a8b/06.png" alt></p><h1 id="Harbor高可用"><a href="#Harbor高可用" class="headerlink" title="Harbor高可用"></a>Harbor高可用</h1><p>私有云相对来说对镜像的请求并非高频，在做HA的时候还是结合实际情况，切勿为了HA而HA,还要综合考量成本，安全等因素。</p><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>1、报错1：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 certs.d]# docker login https://registry-1.madslq.cn</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">Error response from daemon: Get https://registry-1.madslq.cn/v2/: x509: certificate is valid for madslq.cn, not registry-1.madslq.cn</span><br><span class="line">解决：</span><br><span class="line">保证hostname及证书生成过程中的域名一直即都是registry-1.madslq.cn即可</span><br></pre></td></tr></table></figure><p>2、报错2：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 certs.d]# docker login https://registry-1.madslq.cn</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">Error response from daemon: Get https://registry-1.madslq.cn/v2/: dial tcp 192.168.200.108:443: getsockopt: connection refused</span><br><span class="line">解决：服务为启动，检查Harbor服务</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://vmware.github.io/harbor/cn/" target="_blank" rel="noopener">官网资料</a><br><a href="https://github.com/vmware/harbor" target="_blank" rel="noopener">Github地址</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d6923a8b.html">https://mds1455975151.github.io/archives/d6923a8b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Harbor </tag>
            
            <tag> 私有仓库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins之源码编译及远程部署到Tomcat</title>
      <link href="/archives/d64ba80f.html"/>
      <url>/archives/d64ba80f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>源码编译及远程部署到Tomcat</p></blockquote><a id="more"></a><h1 id="jenkins源码编译"><a href="#jenkins源码编译" class="headerlink" title="jenkins源码编译"></a>jenkins源码编译</h1><p>新建Maven类型的项目命名为jenkins_war，配置Jenkins源码编译，只需配置两部分即可<br>代码仓库地址：<a href="https://github.com/jenkinsci/jenkins.git" target="_blank" rel="noopener">https://github.com/jenkinsci/jenkins.git</a><br>编译参数：mvn clean install -Dmaven.test.skip=true<br><img src="/archives/d64ba80f/06.png" alt><br><img src="/archives/d64ba80f/07.png" alt></p><p>项目创建完成，点击构建，首次编译由于下载各类依赖，所需时间较长。<br>构建成功信息如下：<br><img src="/archives/d64ba80f/08.png" alt><br>我们的目标就是将生成的jenkins_war/war/target/jenkins.war文件自动化部署到我们的一台tomcat服务器上。</p><h1 id="tomcat部署及设置"><a href="#tomcat部署及设置" class="headerlink" title="tomcat部署及设置"></a>tomcat部署及设置</h1><p><strong>部署</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-7/v7.0.82/bin/apache-tomcat-7.0.82.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf apache-tomcat-7.0.82.tar.gz</span></span><br><span class="line"><span class="comment"># sh apache-tomcat-7.0.82/bin/startup.sh</span></span><br><span class="line"><span class="comment"># tail -f apache-tomcat-7.0.82/logs/catalina.out</span></span><br><span class="line"><span class="comment"># # netstat -tunlp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1003/sshd</span><br><span class="line">tcp6       0      0 :::8009                 :::*                    LISTEN      46574/java</span><br><span class="line">tcp6       0      0 :::8080                 :::*                    LISTEN      46574/java</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      37808/httpd</span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      1003/sshd</span><br><span class="line">tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      46574/java</span><br><span class="line">udp        0      0 127.0.0.1:323           0.0.0.0:*                           661/chronyd</span><br><span class="line">udp6       0      0 ::1:323                 :::*                                661/chronyd</span><br></pre></td></tr></table></figure><p><img src="/archives/d64ba80f/01.png" alt><br><strong>配置</strong><br>默认没有配置账号权限，访问server status页面报错，有配置提醒。<br>Tomcat 7 配置方法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim apache-tomcat-7.0.82/conf/tomcat-users.xml</span></span><br><span class="line">&lt;role rolename=<span class="string">"manager-gui"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"admin-gui"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"manager-script"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"manager-status"</span>/&gt;</span><br><span class="line">&lt;user username=<span class="string">"tomcat"</span> password=<span class="string">"s3cret"</span> roles=<span class="string">"admin-gui,manager-gui,manager-script,manager-status"</span>/&gt;</span><br></pre></td></tr></table></figure><p>Tomcat 8 配置方法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim apache-tomcat-8.5.27/conf/tomcat-users.xml</span></span><br><span class="line">&lt;role rolename=<span class="string">"manager-gui"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"manager-script"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"manager-jmx"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"manager-status"</span>/&gt;</span><br><span class="line">&lt;role rolename=<span class="string">"admin-gui"</span>/&gt;</span><br><span class="line">&lt;user username=<span class="string">"tomcat"</span> password=<span class="string">"s3cret"</span> roles=<span class="string">"manager-gui,manager-script,manager-jmx,manager-status,admin-gui"</span>/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /usr/local/apache-tomcat-8.5.27/webapps/host-manager/META-INF/context.xml </span></span><br><span class="line">&lt;Context antiResourceLocking=<span class="string">"false"</span> privileged=<span class="string">"true"</span> &gt;</span><br><span class="line">  &lt;Valve className=<span class="string">"org.apache.catalina.valves.RemoteAddrValve"</span></span><br><span class="line">         allow=<span class="string">"^.*$"</span> /&gt;</span><br><span class="line">  &lt;Manager sessionAttributeValueClassNameFilter=<span class="string">"java\.lang\.(?:Boolean|Integer|Long|Number|String)|org\.apache\.catalina\.filters\.CsrfPreventionFilter\$LruCache(?:\$1)?|java\.util\.(?:Linke</span></span><br><span class="line"><span class="string">d)?HashMap"</span>/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br><span class="line"><span class="comment"># vim /usr/local/apache-tomcat-8.5.27/webapps/manager/META-INF/context.xml</span></span><br><span class="line">&lt;Context antiResourceLocking=<span class="string">"false"</span> privileged=<span class="string">"true"</span> &gt;</span><br><span class="line">  &lt;Valve className=<span class="string">"org.apache.catalina.valves.RemoteAddrValve"</span></span><br><span class="line">         allow=<span class="string">"^.*$"</span> /&gt;</span><br><span class="line">  &lt;Manager sessionAttributeValueClassNameFilter=<span class="string">"java\.lang\.(?:Boolean|Integer|Long|Number|String)|org\.apache\.catalina\.filters\.CsrfPreventionFilter\$LruCache(?:\$1)?|java\.util\.(?:Linke</span></span><br><span class="line"><span class="string">d)?HashMap"</span>/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure><p>配置完成，重启服务，访问效果如下：<br>服务器状态页面<br><img src="/archives/d64ba80f/03.png" alt></p><p>管理APP页面<br><img src="/archives/d64ba80f/02.png" alt></p><p>Virtual Host Manager页面<br><img src="/archives/d64ba80f/16.png" alt></p><h1 id="部署war包"><a href="#部署war包" class="headerlink" title="部署war包"></a>部署war包</h1><p>安装插件Deploy to container</p><blockquote><p>注：该插件可以部署到容器版本如下<br>Tomcat 4.x/5.x/6.x/7.x<br>JBoss 3.x/4.x<br>Glassfish 2.x/3.x</p></blockquote><h2 id="手动发布War包"><a href="#手动发布War包" class="headerlink" title="手动发布War包"></a>手动发布War包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /root/apache-tomcat-7.0.82/webapps</span></span><br><span class="line"><span class="comment"># ls -al jenkins-kx.war</span></span><br><span class="line">-rw-r--r-- 1 root root 74260572 Jan 24 18:51 jenkins-kx.war</span><br><span class="line"><span class="comment"># sh /root/apache-tomcat-7.0.82/bin/shutdown.sh</span></span><br><span class="line"><span class="comment"># sh /root/apache-tomcat-7.0.82/bin/startup.sh</span></span><br><span class="line"><span class="comment"># # tail -f /root/apache-tomcat-7.0.82/logs/catalina.out</span></span><br><span class="line">INFO: Starting Servlet Engine: Apache Tomcat/7.0.82</span><br><span class="line">Jan 24, 2018 6:52:33 PM org.apache.catalina.startup.HostConfig deployWAR</span><br><span class="line">INFO: Deploying web application archive /root/apache-tomcat-7.0.82/webapps/jenkins-kx.war</span><br><span class="line">Jan 24, 2018 6:52:34 PM org.apache.catalina.deploy.WebXml setVersion</span><br><span class="line">WARNING: Unknown version string [3.1]. Default version will be used.</span><br><span class="line">Jan 24, 2018 6:52:38 PM org.apache.catalina.startup.ContextConfig validateSecurityRoles</span><br><span class="line">WARNING: Security role name ** used <span class="keyword">in</span> an &lt;auth-constraint&gt; without being defined <span class="keyword">in</span> a &lt;security-role&gt;</span><br><span class="line">Jan 24, 2018 6:52:38 PM org.apache.catalina.startup.TldConfig execute</span><br><span class="line">INFO: At least one JAR was scanned <span class="keyword">for</span> TLDs yet contained no TLDs. Enable debug logging <span class="keyword">for</span> this logger <span class="keyword">for</span> a complete list of JARs that were scanned but no TLDs were found <span class="keyword">in</span> them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.</span><br><span class="line">Jenkins home directory: /root/.jenkins found at: <span class="variable">$user</span>.home/.jenkins</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployWAR</span><br><span class="line">INFO: Deployment of web application archive /root/apache-tomcat-7.0.82/webapps/jenkins-kx.war has finished <span class="keyword">in</span> 13,482 ms</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deploying web application directory /root/apache-tomcat-7.0.82/webapps/ROOT</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deployment of web application directory /root/apache-tomcat-7.0.82/webapps/ROOT has finished <span class="keyword">in</span> 51 ms</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deploying web application directory /root/apache-tomcat-7.0.82/webapps/docs</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deployment of web application directory /root/apache-tomcat-7.0.82/webapps/docs has finished <span class="keyword">in</span> 55 ms</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deploying web application directory /root/apache-tomcat-7.0.82/webapps/examples</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deployment of web application directory /root/apache-tomcat-7.0.82/webapps/examples has finished <span class="keyword">in</span> 318 ms</span><br><span class="line">Jan 24, 2018 6:52:47 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deploying web application directory /root/apache-tomcat-7.0.82/webapps/host-manager</span><br><span class="line">Jan 24, 2018 6:52:48 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deployment of web application directory /root/apache-tomcat-7.0.82/webapps/host-manager has finished <span class="keyword">in</span> 314 ms</span><br><span class="line">Jan 24, 2018 6:52:48 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deploying web application directory /root/apache-tomcat-7.0.82/webapps/manager</span><br><span class="line">Jan 24, 2018 6:52:48 PM org.apache.catalina.startup.HostConfig deployDirectory</span><br><span class="line">INFO: Deployment of web application directory /root/apache-tomcat-7.0.82/webapps/manager has finished <span class="keyword">in</span> 145 ms</span><br><span class="line">Jan 24, 2018 6:52:48 PM org.apache.coyote.AbstractProtocol start</span><br><span class="line">INFO: Starting ProtocolHandler [<span class="string">"http-bio-8080"</span>]</span><br><span class="line">Jan 24, 2018 6:52:48 PM org.apache.coyote.AbstractProtocol start</span><br><span class="line">INFO: Starting ProtocolHandler [<span class="string">"ajp-bio-8009"</span>]</span><br><span class="line">Jan 24, 2018 6:52:48 PM org.apache.catalina.startup.Catalina start</span><br><span class="line">INFO: Server startup <span class="keyword">in</span> 15066 ms</span><br><span class="line">Jan 24, 2018 6:52:50 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Started initialization</span><br><span class="line">Jan 24, 2018 6:52:50 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Listed all plugins</span><br><span class="line">Jan 24, 2018 6:52:52 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Prepared all plugins</span><br><span class="line">Jan 24, 2018 6:52:52 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Started all plugins</span><br><span class="line">Jan 24, 2018 6:52:52 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Augmented all extensions</span><br><span class="line">Jan 24, 2018 6:52:52 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Loaded all <span class="built_in">jobs</span></span><br><span class="line">Jan 24, 2018 6:52:52 PM hudson.model.AsyncPeriodicWork<span class="variable">$1</span> run</span><br><span class="line">INFO: Started Download metadata</span><br><span class="line">Jan 24, 2018 6:52:54 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh</span><br><span class="line">INFO: Refreshing org.springframework.web.context.support.StaticWebApplicationContext@7d4a1e4c: display name [Root WebApplicationContext]; startup date [Wed Jan 24 18:52:54 CST 2018]; root of context hierarchy</span><br><span class="line">Jan 24, 2018 6:52:54 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory</span><br><span class="line">INFO: Bean factory <span class="keyword">for</span> application context [org.springframework.web.context.support.StaticWebApplicationContext@7d4a1e4c]: org.springframework.beans.factory.support.DefaultListableBeanFactory@12f07a94</span><br><span class="line">Jan 24, 2018 6:52:54 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons</span><br><span class="line">INFO: Pre-instantiating singletons <span class="keyword">in</span> org.springframework.beans.factory.support.DefaultListableBeanFactory@12f07a94: defining beans [authenticationManager]; root of factory hierarchy</span><br><span class="line">Jan 24, 2018 6:52:54 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh</span><br><span class="line">INFO: Refreshing org.springframework.web.context.support.StaticWebApplicationContext@260b4a79: display name [Root WebApplicationContext]; startup date [Wed Jan 24 18:52:54 CST 2018]; root of context hierarchy</span><br><span class="line">Jan 24, 2018 6:52:54 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory</span><br><span class="line">INFO: Bean factory <span class="keyword">for</span> application context [org.springframework.web.context.support.StaticWebApplicationContext@260b4a79]: org.springframework.beans.factory.support.DefaultListableBeanFactory@4c548b6e</span><br><span class="line">Jan 24, 2018 6:52:54 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons</span><br><span class="line">INFO: Pre-instantiating singletons <span class="keyword">in</span> org.springframework.beans.factory.support.DefaultListableBeanFactory@4c548b6e: defining beans [filter,legacy]; root of factory hierarchy</span><br><span class="line">Jan 24, 2018 6:52:54 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Completed initialization</span><br><span class="line">Jan 24, 2018 6:52:54 PM jenkins.install.SetupWizard init</span><br><span class="line">INFO:</span><br><span class="line"></span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line"></span><br><span class="line">Jenkins initial setup is required. An admin user has been created and a password generated.</span><br><span class="line">Please use the following password to proceed to installation:</span><br><span class="line"></span><br><span class="line">8cadcb10f0b44ba79f5ce7b41fa182c0</span><br><span class="line"></span><br><span class="line">This may also be found at: /root/.jenkins/secrets/initialAdminPassword</span><br><span class="line"></span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br></pre></td></tr></table></figure><p>发布完成查看APP管理界面，新增了jenkins-kx<br><img src="/archives/d64ba80f/10.png" alt><br>点击查看我们的应用APP界面<br><img src="/archives/d64ba80f/11.png" alt></p><h2 id="Web界面发布War包"><a href="#Web界面发布War包" class="headerlink" title="Web界面发布War包"></a>Web界面发布War包</h2><p>待完善</p><h2 id="Jenkins自动部署War包"><a href="#Jenkins自动部署War包" class="headerlink" title="Jenkins自动部署War包"></a>Jenkins自动部署War包</h2><p><strong>安装相关插件Deploy to container Plugin</strong><br><img src="/archives/d64ba80f/12.png" alt></p><p><strong>配置构建完成发布步骤</strong><br><img src="/archives/d64ba80f/13.png" alt></p><blockquote><p>目录设置如果是/则会将war包传输到tomcat且命名为ROOT.war，如果设置为/jenkins，则会将war包传输到tomcat且命名为jenkins.war,并将war解压到jenkins目录下</p></blockquote><p><strong>查看构建及部署日志</strong><br><img src="/archives/d64ba80f/14.png" alt><br><strong>发布结果</strong><br><img src="/archives/d64ba80f/15.png" alt></p><p>发布的War包及解压文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /root/apache-tomcat-7.0.82/webapps/</span></span><br><span class="line"><span class="comment"># ls -l</span></span><br><span class="line">-rw-r--r--  1 root root 74096358 Jan 24 23:32 ROOT.war</span><br><span class="line"><span class="comment"># cd ROOT/</span></span><br><span class="line"><span class="comment"># ls -l</span></span><br><span class="line">total 2156</span><br><span class="line">drwxr-xr-x  3 root root      34 Jan 24 23:32 bootstrap</span><br><span class="line">-rw-r--r--  1 root root    1948 Jul 14  2017 ColorFormatter.class</span><br><span class="line">drwxr-xr-x  5 root root     140 Jan 24 23:32 css</span><br><span class="line">-rw-r--r--  1 root root    1544 Jan 24 21:13 dc-license.txt</span><br><span class="line">drwxr-xr-x  2 root root      29 Jan 24 23:32 executable</span><br><span class="line">-rw-r--r--  1 root root   17542 Jan 24 21:13 favicon.ico</span><br><span class="line">drwxr-xr-x 12 root root    4096 Jan 24 23:32 <span class="built_in">help</span></span><br><span class="line">drwxr-xr-x  6 root root    4096 Jan 24 23:32 images</span><br><span class="line">-rw-r--r--  1 root root    1919 Jul 14  2017 JNLPMain.class</span><br><span class="line">drwxr-xr-x  2 root root    4096 Jan 24 23:32 jsbundles</span><br><span class="line">-rw-r--r--  1 root root     855 Jul 14  2017 LogFileOutputStream<span class="variable">$1</span>.class</span><br><span class="line">-rw-r--r--  1 root root     639 Jul 14  2017 LogFileOutputStream<span class="variable">$2</span>.class</span><br><span class="line">-rw-r--r--  1 root root    2243 Jul 14  2017 LogFileOutputStream.class</span><br><span class="line">-rw-r--r--  1 root root   16644 Jul 14  2017 Main.class</span><br><span class="line">-rw-r--r--  1 root root    1041 Jul 14  2017 MainDialog<span class="variable">$1</span><span class="variable">$1</span>.class</span><br><span class="line">-rw-r--r--  1 root root    1060 Jul 14  2017 MainDialog<span class="variable">$1</span>.class</span><br><span class="line">-rw-r--r--  1 root root    2400 Jul 14  2017 MainDialog.class</span><br><span class="line">-rw-r--r--  1 root root     512 Jul 14  2017 Main<span class="variable">$FileAndDescription</span>.class</span><br><span class="line">drwxr-xr-x  3 root root      36 Jan 24 23:32 META-INF</span><br><span class="line">-rw-r--r--  1 root root      71 Jan 24 21:13 robots.txt</span><br><span class="line">drwxr-xr-x  3 root root    4096 Jan 24 23:32 scripts</span><br><span class="line">drwxr-xr-x  7 root root    4096 Jan 24 23:32 WEB-INF</span><br><span class="line">-rw-r--r--  1 root root 2098273 Jan 24 23:32 winstone.jar</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://wiki.jenkins.io/display/JENKINS/Deploy+Plugin" target="_blank" rel="noopener">Deploy+Plugin Wiki</a></li><li><a href="http://tomcat.apache.org/tomcat-7.0-doc/index.html" target="_blank" rel="noopener">Apache Tomcat 7 Documentation</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d64ba80f.html">https://mds1455975151.github.io/archives/d64ba80f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SecureCRT使用技巧总结</title>
      <link href="/archives/8a2e2b10.html"/>
      <url>/archives/8a2e2b10.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>SecureCRT使用技巧</p></blockquote><a id="more"></a><h1 id="批量生成Session回话"><a href="#批量生成Session回话" class="headerlink" title="批量生成Session回话"></a>批量生成Session回话</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>工作中，批量的维护服务器，一次成百上千台，如果手动一台一台的在SecureCRT中添加过于麻烦，于是编写一个批量创建脚本好用又快速。</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>实现方案分析：<br>1、有API接口或者其他途径获取所有服务器列表(至少包含IP、业务信息等)<br>2、获取Session模板及确定要自定义的变量及其他个性化设置<br>3、编码实现<br>4、测试</p><blockquote><p>登录服务器都要求有审计功能，通用做法都是使用自研或者商业跳板机，基本不会有类似需求，总结记录一种自动化日常运维工作的思路方法</p></blockquote><h1 id="Session回话排序技巧"><a href="#Session回话排序技巧" class="headerlink" title="Session回话排序技巧"></a>Session回话排序技巧</h1><h2 id="需求-1"><a href="#需求-1" class="headerlink" title="需求"></a>需求</h2><p>新建的标签有s1,s2,s3, …… s10，但是排序是 s10,s1,s2……并非按照从小到大进行排序的。例如：<br><img src="/archives/8a2e2b10/01.png" alt></p><h2 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h2><p>Session Manager面板中–Sessions–右击鼠标选择Arrange Tree–选择Logically设置<br><img src="/archives/8a2e2b10/03.jpg" alt><br>重新排序后效果如下：<br><img src="/archives/8a2e2b10/02.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8a2e2b10.html">https://mds1455975151.github.io/archives/8a2e2b10.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 使用技巧 </tag>
            
            <tag> SecureCRT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python读取YAML文件</title>
      <link href="/archives/326bf63c.html"/>
      <url>/archives/326bf63c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍如何使用Python读取YAML文件</p></blockquote><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>越来越多的项目使用YAML格式的文件作为配置文件或者数据文件，例如：Docker、Ansible PlayBook，SaltStack state文件等等。今天专门研究了一下，记录于此。</p><h1 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h1><ul><li><p>脚本语言</p><blockquote><p>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript，Go 除了Java 和 Go，其他都是脚本语言。</p></blockquote></li><li><p>序列化</p><blockquote><p>YAML比较适合做序列化。因为它是宿主语言数据类型直转的。</p></blockquote></li><li><p>配置文件</p><blockquote><p>YAML做配置文件也不错。写YAML要比写XML快得多(无需关注标签或引号)，并且比ini文档功能更强。比如Ruby on Rails的配置就选用的YAML。对ROR而言，这很自然，也很省事.由于兼容性问题，不同语言间的数据流转建议不要用YAML.</p></blockquote></li></ul><h1 id="PyYAML库"><a href="#PyYAML库" class="headerlink" title="PyYAML库"></a>PyYAML库</h1><p><a href="https://pypi.python.org/pypi/PyYAML" target="_blank" rel="noopener">Python官网说明</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y python-pip</span></span><br><span class="line"><span class="comment"># pip install --upgrade pip</span></span><br><span class="line"><span class="comment"># pip install PyYAML</span></span><br></pre></td></tr></table></figure><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[root@linux-node7</span> <span class="string">~]#</span> <span class="string">cat</span> <span class="string">docker-compose-consul.yml</span></span><br><span class="line"><span class="comment"># backend web application, scale this with docker-compose scale web=3</span></span><br><span class="line"><span class="attr">web:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">yeasy/simple-web:latest</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">SERVICE_80_NAME:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">SERVICE_NAME:</span> <span class="string">web</span></span><br><span class="line">    <span class="attr">SERVICE_TAGS:</span> <span class="string">backend</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"80"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># load balancer will automatically update the config using consul-template</span></span><br><span class="line"><span class="attr">lb:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">yeasy/nginx-consul-template:latest</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">lb</span></span><br><span class="line">  <span class="attr">links:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">consulserver:consul</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"80:80"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">consulserver:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">gliderlabs/consul-server:latest</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">consulserver</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"8300"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"8400"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"8500:8500"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"53"</span></span><br><span class="line">  <span class="attr">command:</span> <span class="string">-data-dir</span> <span class="string">/tmp/consul</span> <span class="string">-bootstrap</span> <span class="string">-client</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># listen on local docker sock to register the container with public ports to the consul service</span></span><br><span class="line"><span class="attr">registrator:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">gliderlabs/registrator:master</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">registrator</span></span><br><span class="line">  <span class="attr">links:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">consulserver:consul</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"/var/run/docker.sock:/tmp/docker.sock"</span></span><br><span class="line">  <span class="attr">command:</span> <span class="string">-internal</span> <span class="string">consul://consul:8500</span></span><br><span class="line">  <span class="comment"># command: consul://consul:8500</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node7 ~]<span class="comment"># cat read_xml.py</span></span><br><span class="line">import yaml</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">"docker-compose-consul.yml"</span>)</span><br><span class="line">yaml_context = yaml.load(f)</span><br><span class="line"><span class="built_in">print</span> yaml_context</span><br><span class="line">[root@linux-node7 ~]<span class="comment"># python read_xml.py</span></span><br><span class="line">&#123;<span class="string">'web'</span>: &#123;<span class="string">'environment'</span>: &#123;<span class="string">'SERVICE_80_NAME'</span>: <span class="string">'http'</span>, <span class="string">'SERVICE_TAGS'</span>: <span class="string">'backend'</span>, <span class="string">'SERVICE_NAME'</span>: <span class="string">'web'</span>&#125;, <span class="string">'image'</span>: <span class="string">'yeasy/simple-web:latest'</span>, <span class="string">'ports'</span>: [<span class="string">'80'</span>]&#125;, <span class="string">'registrator'</span>: &#123;<span class="string">'image'</span>: <span class="string">'gliderlabs/registrator:master'</span>, <span class="string">'hostname'</span>: <span class="string">'registrator'</span>, <span class="string">'command'</span>: <span class="string">'-internal consul://consul:8500'</span>, <span class="string">'links'</span>: [<span class="string">'consulserver:consul'</span>], <span class="string">'volumes'</span>: [<span class="string">'/var/run/docker.sock:/tmp/docker.sock'</span>]&#125;, <span class="string">'lb'</span>: &#123;<span class="string">'image'</span>: <span class="string">'yeasy/nginx-consul-template:latest'</span>, <span class="string">'hostname'</span>: <span class="string">'lb'</span>, <span class="string">'ports'</span>: [<span class="string">'80:80'</span>], <span class="string">'links'</span>: [<span class="string">'consulserver:consul'</span>]&#125;, <span class="string">'consulserver'</span>: &#123;<span class="string">'image'</span>: <span class="string">'gliderlabs/consul-server:latest'</span>, <span class="string">'hostname'</span>: <span class="string">'consulserver'</span>, <span class="string">'command'</span>: <span class="string">'-data-dir /tmp/consul -bootstrap -client 0.0.0.0'</span>, <span class="string">'ports'</span>: [<span class="string">'8300'</span>, <span class="string">'8400'</span>, <span class="string">'8500:8500'</span>, <span class="string">'53'</span>]&#125;&#125;</span><br></pre></td></tr></table></figure><p>找工具解析下结果 <a href="https://www.bejson.com/jsonviewernew/" target="_blank" rel="noopener">https://www.bejson.com/jsonviewernew/</a><br><img src="/archives/326bf63c/01.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">说明：</span><br><span class="line"># 注释的部分解析时自动忽略</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://pypi.python.org/pypi/PyYAML" target="_blank" rel="noopener">Python官网PyYAML说明</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/326bf63c.html">https://mds1455975151.github.io/archives/326bf63c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> YAML </tag>
            
            <tag> PyYAML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SaltStack+Docker构建高可用与自动发现服务</title>
      <link href="/archives/f3d3f3f5.html"/>
      <url>/archives/f3d3f3f5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>SaltStack+Docker构建高可用与自动发现服务</p></blockquote><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><table><thead><tr><th>主机名称</th><th>IP</th><th>服务</th><th>备注</th></tr></thead><tbody><tr><td>linux-node3.example.com</td><td>192.168.200.107</td><td>salt-master redis</td><td>无</td></tr><tr><td>linux-node4.example.com</td><td>192.168.200.106</td><td>sakt-minion haproxy</td><td>无</td></tr><tr><td>linux-node5.example.com</td><td>192.168.200.115</td><td>sakt-minion docker</td><td>无</td></tr><tr><td>linux-node7.example.com</td><td>192.168.200.117</td><td>sakt-minion docker</td><td>无</td></tr></tbody></table><p>#</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node3 ~]<span class="comment"># yum install -y redis</span></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># vim /etc/redis.conf</span></span><br><span class="line"><span class="built_in">bind</span> 192.168.200.107</span><br><span class="line">[root@linux-node3 ~]<span class="comment"># systemctl enable redis</span></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># systemctl start redis</span></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># yum install -y salt-master</span></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># systemctl start salt-master</span></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># systemctl enable salt-master</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node5 ~]<span class="comment"># grep -vE "^$|^#" /etc/salt/minion</span></span><br><span class="line">master: 192.168.200.107</span><br><span class="line">id: 192.168.200.115</span><br><span class="line">[root@linux-node5 ~]<span class="comment"># systemctl enable salt-minion</span></span><br><span class="line">[root@linux-node5 ~]<span class="comment"># systemctl start salt-minion</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># salt-key -L</span></span><br><span class="line">Accepted Keys:</span><br><span class="line">Denied Keys:</span><br><span class="line">Unaccepted Keys:</span><br><span class="line">192.168.200.106</span><br><span class="line">192.168.200.115</span><br><span class="line">192.168.200.117</span><br><span class="line">Rejected Keys:</span><br><span class="line">[root@linux-node3 ~]<span class="comment"># salt-key -A -y</span></span><br><span class="line">The following keys are going to be accepted:</span><br><span class="line">Unaccepted Keys:</span><br><span class="line">192.168.200.106</span><br><span class="line">192.168.200.115</span><br><span class="line">192.168.200.117</span><br><span class="line">Key <span class="keyword">for</span> minion 192.168.200.106 accepted.</span><br><span class="line">Key <span class="keyword">for</span> minion 192.168.200.115 accepted.</span><br><span class="line">Key <span class="keyword">for</span> minion 192.168.200.117 accepted.</span><br><span class="line">[root@linux-node3 ~]<span class="comment"># salt-key -L</span></span><br><span class="line">Accepted Keys:</span><br><span class="line">192.168.200.106</span><br><span class="line">192.168.200.115</span><br><span class="line">192.168.200.117</span><br><span class="line">Denied Keys:</span><br><span class="line">Unaccepted Keys:</span><br><span class="line">Rejected Keys:</span><br><span class="line"></span><br><span class="line">[root@linux-node3 haproxy]<span class="comment"># salt -L '192.168.200.115,192.168.200.117' cp.get_file salt://haproxy/docker_nginx_manage.py /usr/local/bin/docker_nginx_manage.py</span></span><br><span class="line">192.168.200.117:</span><br><span class="line">    /usr/<span class="built_in">local</span>/bin/docker_nginx_manage.py</span><br><span class="line">192.168.200.115:</span><br><span class="line">    /usr/<span class="built_in">local</span>/bin/docker_nginx_manage.py</span><br><span class="line">[root@linux-node3 haproxy]<span class="comment"># salt '*' saltutil.refresh_pillar</span></span><br><span class="line">192.168.200.117:</span><br><span class="line">    True</span><br><span class="line">192.168.200.115:</span><br><span class="line">    True</span><br><span class="line">192.168.200.106:</span><br><span class="line">    True</span><br><span class="line"></span><br><span class="line">115</span><br><span class="line">117</span><br><span class="line">yum remove -y docker docker-common docker-selinux docker-engine</span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> docker-ce-edge</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> docker-ce-test</span><br><span class="line">yum list docker-ce --showduplicates | sort -r |grep stable</span><br><span class="line">yum install -y docker-ce-17.06.2.ce</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line"></span><br><span class="line">mkdir -p /etc/docker</span><br><span class="line">tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://k9lgui7f.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># yum install -y haproxy</span></span><br><span class="line"><span class="comment"># systemctl enable haproxy</span></span><br><span class="line"><span class="comment"># systemctl start haproxy</span></span><br><span class="line">[root@linux-node3 ~]<span class="comment"># salt '*' cmd.run 'yum install -y python-pip &amp;&amp; pip install redis docker'</span></span><br></pre></td></tr></table></figure><p>docker_nginx_manage.py</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f3d3f3f5.html">https://mds1455975151.github.io/archives/f3d3f3f5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SaltStack </tag>
            
            <tag> Docker </tag>
            
            <tag> 自动发现 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitlab之Gitlab-CI体验</title>
      <link href="/archives/c46f1d68.html"/>
      <url>/archives/c46f1d68.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Gitlab-CI体验</p></blockquote><a id="more"></a><ul><li><a href="#GitLab-CI介绍">GitLab CI介绍</a></li><li><a href="#环境说明">环境说明</a></li><li><a href="#GitLab部署">GitLab部署</a></li><li><a href="#Gitlab-Runner部署">Gitlab-Runner部署</a></li><li><a href="#GitLab注册Runner">GitLab注册Runner</a><ul><li><a href="#获取基础信息">获取基础信息</a></li><li><a href="#配置runner">配置runner</a></li><li><a href="#GitLab查看注册runner信息">GitLab查看注册runner信息</a></li></ul></li><li><a href="#实践案例讲解">实践案例讲解</a><ul><li><a href="#创建Groups">创建Groups</a></li><li><a href="#创建Projects">创建Projects</a></li><li><a href="#创建Users">创建Users</a></li><li><a href="#配置项目">配置项目</a></li><li><a href="#验证结果">验证结果</a></li></ul></li><li><a href="#参考资料">参考资料</a></li></ul><h1 id="GitLab-CI介绍"><a href="#GitLab-CI介绍" class="headerlink" title="GitLab CI介绍"></a>GitLab CI介绍</h1><p>持续集成(CI)：通常使用CI来做一些自动化工作，比如程序的打包，单元测试，部署等，这种构建方式避免了打包环境差异引起的错误，提高了工作效率。<br>GitLab-CI是GitLab官方提供的持续集成服务，我们可以在仓库的根目录下新建.gitlab-ci.yml文件，自己定义持续集成流程模板，并且在GitLab中配置runner，在之后的每次提交合并中将会触发构建，并且可以通过GitLab的hook, 在代码提交的各个环节自动地完成一系列的构建工作，总之对于一些非复杂性的集成需求，都是可以满足的。</p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><p><strong>系统信息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><p><strong>Docker版本信息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 19:59:06 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 20:00:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><strong>其他应用信息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GitLab 10.3.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># gitlab-runner -v</span></span><br><span class="line">Version:      10.3.0</span><br><span class="line">Git revision: 5cf5e19a</span><br><span class="line">Git branch:   10-3-stable</span><br><span class="line">GO version:   go1.8.5</span><br><span class="line">Built:        Fri, 22 Dec 2017 08:47:19 +0000</span><br><span class="line">OS/Arch:      linux/amd64</span><br></pre></td></tr></table></figure><h1 id="GitLab部署"><a href="#GitLab部署" class="headerlink" title="GitLab部署"></a>GitLab部署</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run --detach \</span><br><span class="line">    --hostname linux-node8.example.com \</span><br><span class="line">--env GITLAB_OMNIBUS_CONFIG=<span class="string">"external_url 'http://192.168.200.108/'; gitlab_rails['gitlab_shell_ssh_port'] = 2289;"</span> \</span><br><span class="line">    --publish 443:443 --publish 80:80 --publish 2289:2289 \</span><br><span class="line">    --name gitlab \</span><br><span class="line">    --restart always \</span><br><span class="line">    --volume /srv/gitlab/config:/etc/gitlab \</span><br><span class="line">    --volume /srv/gitlab/logs:/var/<span class="built_in">log</span>/gitlab \</span><br><span class="line">    --volume /srv/gitlab/data:/var/opt/gitlab \</span><br><span class="line">    gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure><blockquote><p>注释：根据环境差异替换external_url及publish端口即可，注意映射端口和external_url的一致性</p></blockquote><p><strong>初次登录设置用户密码</strong><br>设置密码：12345678（8位字符）<br><img src="/archives/c46f1d68/01.png" alt><br><strong>登录界面</strong><br>默认管理用户为root<br><img src="/archives/c46f1d68/02.png" alt><br><strong>登录主界面</strong><br><img src="/archives/c46f1d68/03.png" alt></p><h1 id="Gitlab-Runner部署"><a href="#Gitlab-Runner部署" class="headerlink" title="Gitlab-Runner部署"></a>Gitlab-Runner部署</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">--name gitlab-runner \</span><br><span class="line">--restart always \</span><br><span class="line">-v /srv/gitlab-runner/config:/etc/gitlab-runner \</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">gitlab/gitlab-runner:latest</span><br></pre></td></tr></table></figure><h1 id="GitLab注册Runner"><a href="#GitLab注册Runner" class="headerlink" title="GitLab注册Runner"></a>GitLab注册Runner</h1><h2 id="获取基础信息"><a href="#获取基础信息" class="headerlink" title="获取基础信息"></a>获取基础信息</h2><p><img src="/archives/c46f1d68/04.png" alt><br>根据提示获取注册runner时的必要信息URL及Token</p><h2 id="配置runner"><a href="#配置runner" class="headerlink" title="配置runner"></a>配置runner</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS                    PORTS                                                                        NAMES</span><br><span class="line">9eddd011fa8e        gitlab/gitlab-runner:latest   <span class="string">"/usr/bin/dumb-ini..."</span>   2 minutes ago       Up 2 minutes                                                                                           gitlab-runner</span><br><span class="line">62efad621e50        gitlab/gitlab-ce:latest       <span class="string">"/assets/wrapper"</span>        15 minutes ago      Up 15 minutes (healthy)   0.0.0.0:443-&gt;443/tcp, 22/tcp, 0.0.0.0:2289-&gt;2289/tcp, 0.0.0.0:8080-&gt;80/tcp   gitlab</span><br><span class="line"><span class="comment"># docker exec -it 9eddd011fa8e sh</span></span><br><span class="line"><span class="comment"># gitlab-runner register</span></span><br><span class="line">Running <span class="keyword">in</span> system-mode.</span><br><span class="line"></span><br><span class="line">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):</span><br><span class="line">http://192.168.200.108/</span><br><span class="line">Please enter the gitlab-ci token <span class="keyword">for</span> this runner:</span><br><span class="line">b7kHJBwHQeNdzHy4eFxo</span><br><span class="line">Please enter the gitlab-ci description <span class="keyword">for</span> this runner:</span><br><span class="line">[9eddd011fa8e]:</span><br><span class="line">Please enter the gitlab-ci tags <span class="keyword">for</span> this runner (comma separated):</span><br><span class="line">one-runner</span><br><span class="line">Whether to run untagged builds [<span class="literal">true</span>/<span class="literal">false</span>]:</span><br><span class="line">[<span class="literal">false</span>]:</span><br><span class="line">Whether to lock the Runner to current project [<span class="literal">true</span>/<span class="literal">false</span>]:</span><br><span class="line">[<span class="literal">true</span>]:</span><br><span class="line">Registering runner... succeeded                     runner=LmehsQ2K</span><br><span class="line">Please enter the executor: parallels, ssh, shell, virtualbox, docker+machine, docker-ssh+machine, kubernetes, docker, docker-ssh:</span><br><span class="line">shell</span><br><span class="line">Runner registered successfully. Feel free to start it, but <span class="keyword">if</span> it\<span class="string">'s running already the config should be automatically reloaded!</span></span><br></pre></td></tr></table></figure><h2 id="GitLab查看注册runner信息"><a href="#GitLab查看注册runner信息" class="headerlink" title="GitLab查看注册runner信息"></a>GitLab查看注册runner信息</h2><p><img src="/archives/c46f1d68/05.png" alt></p><p><strong>再次修改runner配置</strong><br><img src="/archives/c46f1d68/06.png" alt></p><h1 id="实践案例讲解"><a href="#实践案例讲解" class="headerlink" title="实践案例讲解"></a>实践案例讲解</h1><h2 id="创建Groups"><a href="#创建Groups" class="headerlink" title="创建Groups"></a>创建Groups</h2><p><img src="/archives/c46f1d68/07.png" alt></p><h2 id="创建Projects"><a href="#创建Projects" class="headerlink" title="创建Projects"></a>创建Projects</h2><p><img src="/archives/c46f1d68/08.png" alt></p><h2 id="创建Users"><a href="#创建Users" class="headerlink" title="创建Users"></a>创建Users</h2><p>由于没有配置Email，无法直接创建用户，需要注册用户<br><img src="/archives/c46f1d68/09.png" alt></p><h2 id="配置项目"><a href="#配置项目" class="headerlink" title="配置项目"></a>配置项目</h2><p><strong>给用户授权</strong><br><img src="/archives/c46f1d68/10.png" alt><br><strong>添加.gitlab-ci.yml配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node8 ~]<span class="comment"># git clone http://192.168.200.108/php/sa_project1.git</span></span><br><span class="line">Cloning into <span class="string">'sa_project1'</span>...</span><br><span class="line">Username <span class="keyword">for</span> <span class="string">'http://192.168.200.108'</span>: madongsheng</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'http://madongsheng@192.168.200.108'</span>:</span><br><span class="line">warning: You appear to have cloned an empty repository.</span><br><span class="line">[root@linux-node8 ~]<span class="comment"># cd sa_project1/</span></span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># touch README.md</span></span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># git add README.md</span></span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># git commit -m "add README"</span></span><br><span class="line">[master (root-commit) d4d50a9] add README</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 README.md</span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># git push -u origin master</span></span><br><span class="line">Username <span class="keyword">for</span> <span class="string">'http://192.168.200.108'</span>: madongsheng</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'http://madongsheng@192.168.200.108'</span>:</span><br><span class="line">Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 215 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">To http://192.168.200.108/php/sa_project1.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch master <span class="built_in">set</span> up to track remote branch master from origin.</span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># cat .gitlab-ci.yml</span></span><br><span class="line">stages:</span><br><span class="line">   - build</span><br><span class="line">   - <span class="built_in">test</span></span><br><span class="line">   - deploy</span><br><span class="line"></span><br><span class="line">build:</span><br><span class="line">  stage: build</span><br><span class="line">  script:</span><br><span class="line">    - <span class="built_in">echo</span> <span class="string">"build"</span></span><br><span class="line">  tags:</span><br><span class="line">    - one-runner</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>:</span><br><span class="line">   stage: <span class="built_in">test</span></span><br><span class="line">   script:</span><br><span class="line">      - <span class="built_in">echo</span> <span class="string">"test"</span></span><br><span class="line">   tags:</span><br><span class="line">      - one-runner</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">   stage: deploy</span><br><span class="line">   script:</span><br><span class="line">      - <span class="built_in">echo</span> <span class="string">"deploy"</span></span><br><span class="line">   tags:</span><br><span class="line">      - one-runner</span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># git add .gitlab-ci.yml</span></span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># git commit -m 'add .gitlab-ci.yml'</span></span><br><span class="line">[master 31438ad] add .gitlab-ci.yml</span><br><span class="line"> 1 file changed, 25 insertions(+)</span><br><span class="line"> create mode 100644 .gitlab-ci.yml</span><br><span class="line">[root@linux-node8 sa_project1]<span class="comment"># git push -u origin master</span></span><br><span class="line">Username <span class="keyword">for</span> <span class="string">'http://192.168.200.108'</span>: madongsheng</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'http://madongsheng@192.168.200.108'</span>:</span><br><span class="line">Counting objects: 4, <span class="keyword">done</span>.</span><br><span class="line">Compressing objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 402 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">To http://192.168.200.108/php/sa_project1.git</span><br><span class="line">   d4d50a9..31438ad  master -&gt; master</span><br><span class="line">Branch master <span class="built_in">set</span> up to track remote branch master from origin.</span><br></pre></td></tr></table></figure><h2 id="验证结果"><a href="#验证结果" class="headerlink" title="验证结果"></a>验证结果</h2><p><img src="/archives/c46f1d68/12.png" alt><br><img src="/archives/c46f1d68/13.png" alt><br><img src="/archives/c46f1d68/14.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://docs.gitlab.com/runner/install/docker.html" target="_blank" rel="noopener">GitLab-Runner官网资料</a><br><a href="https://docs.gitlab.com/ee/ci/yaml/" target="_blank" rel="noopener">.gitlab-ci.yml配置</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c46f1d68.html">https://mds1455975151.github.io/archives/c46f1d68.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> GitLab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> GitLab </tag>
            
            <tag> Gitlab-CI </tag>
            
            <tag> GitLab-Runner </tag>
            
            <tag> 持续集成 </tag>
            
            <tag> 持续部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux删除乱码文件</title>
      <link href="/archives/57166729.html"/>
      <url>/archives/57166729.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>删除乱码文件的小技巧</p></blockquote><a id="more"></a><h1 id="根据inode节点删除乱码文件"><a href="#根据inode节点删除乱码文件" class="headerlink" title="根据inode节点删除乱码文件"></a>根据inode节点删除乱码文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls -li                                  # 确定要删除文件的inode号</span></span><br><span class="line"><span class="comment"># find . -inum 273607258 -delete          # 直接删除</span></span><br><span class="line"><span class="comment"># find . -inum 231484 -exec rm -f &#123;&#125; \;</span></span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/57166729.html">https://mds1455975151.github.io/archives/57166729.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 乱码文件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker国内新闻</title>
      <link href="/archives/14b6889d.html"/>
      <url>/archives/14b6889d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1、2017.11.06 Docker中国网站: <a href="http://www.docker-cn.com，和Docker中国微信公众号" target="_blank" rel="noopener">www.docker-cn.com，和Docker中国微信公众号</a>: docker-cn</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/14b6889d.html">https://mds1455975151.github.io/archives/14b6889d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Yum报错一例</title>
      <link href="/archives/dc4f2ef8.html"/>
      <url>/archives/dc4f2ef8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_9_119_centos ~]<span class="comment"># yum clean all</span></span><br><span class="line">rpmdb: Thread/process 30556/140431792379808 failed: Thread died <span class="keyword">in</span> Berkeley DB library</span><br><span class="line">error: db3 error(-30974) from dbenv-&gt;failchk: DB_RUNRECOVERY: Fatal error, run database recovery</span><br><span class="line">error: cannot open Packages index using db3 -  (-30974)</span><br><span class="line">error: cannot open Packages database <span class="keyword">in</span> /var/lib/rpm</span><br><span class="line">CRITICAL:yum.main:</span><br><span class="line"></span><br><span class="line">Error: rpmdb open failed</span><br></pre></td></tr></table></figure><h1 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h1><p>根据报错提示可知RPM数据库被损坏，重建即可解决</p><h1 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_9_119_centos ~]<span class="comment"># cd /var/lib/rpm/</span></span><br><span class="line">[root@VM_9_119_centos rpm]<span class="comment"># ls -l</span></span><br><span class="line">total 54112</span><br><span class="line">-rw-r--r--. 1 root root  5496832 Nov  6 18:26 Basenames</span><br><span class="line">-rw-r--r--. 1 root root    12288 Oct 19 14:07 Conflictname</span><br><span class="line">-rw-r--r--. 1 root root  2187264 Nov  6 18:26 Dirnames</span><br><span class="line">-rw-r--r--. 1 root root  5246976 Nov  6 18:26 Filedigests</span><br><span class="line">-rw-r--r--. 1 root root    16384 Nov  6 18:26 Group</span><br><span class="line">-rw-r--r--. 1 root root    12288 Nov  6 18:26 Installtid</span><br><span class="line">-rw-r--r--. 1 root root    24576 Nov  6 18:26 Name</span><br><span class="line">-rw-r--r--. 1 root root    12288 Oct 19 14:07 Obsoletename</span><br><span class="line">-rw-r--r--. 1 root root 39202816 Nov  6 18:26 Packages</span><br><span class="line">-rw-r--r--. 1 root root  1327104 Nov  6 18:26 Providename</span><br><span class="line">-rw-r--r--. 1 root root   749568 Nov  6 18:26 Provideversion</span><br><span class="line">-rw-r--r--. 1 root root    12288 Jul  3  2017 Pubkeys</span><br><span class="line">-rw-r--r--. 1 root root   196608 Nov  6 18:26 Requirename</span><br><span class="line">-rw-r--r--. 1 root root   102400 Nov  6 18:26 Requireversion</span><br><span class="line">-rw-r--r--. 1 root root    45056 Nov  6 18:26 Sha1header</span><br><span class="line">-rw-r--r--. 1 root root    24576 Nov  6 18:26 Sigmd5</span><br><span class="line">-rw-r--r--. 1 root root    12288 Oct 12 12:10 Triggername</span><br><span class="line">-rw-r--r--  1 root root    73728 Jan 12 15:31 __db.001</span><br><span class="line">-rw-r--r--  1 root root   237568 Jan 12 15:31 __db.002</span><br><span class="line">-rw-r--r--  1 root root  1318912 Jan 12 15:31 __db.003</span><br><span class="line">-rw-r--r--  1 root root   761856 Nov 11 00:45 __db.004</span><br><span class="line">[root@VM_9_119_centos rpm]<span class="comment"># rm -f __db.*</span></span><br><span class="line">[root@VM_9_119_centos rpm]<span class="comment"># rpm --rebuilddb</span></span><br><span class="line">[root@VM_9_119_centos rpm]<span class="comment"># yum makecache</span></span><br><span class="line">Loaded plugins: fastestmirror, security</span><br><span class="line">Determining fastest mirrors</span><br><span class="line">epel                                                                                                                                                                              | 4.7 kB     00:00</span><br><span class="line">epel/group_gz                                                                                                                                                                     | 255 kB     00:00</span><br><span class="line">epel/filelists_db                                                                                                                                                                 | 7.8 MB     00:00</span><br><span class="line">epel/updateinfo                                                                                                                                                                   | 762 kB     00:00</span><br><span class="line">epel/prestodelta                                                                                                                                                                  | 2.0 kB     00:00</span><br><span class="line">epel/primary_db                                                                                                                                                                   | 6.0 MB     00:00</span><br><span class="line">epel/other_db                                                                                                                                                                     | 3.0 MB     00:00</span><br><span class="line">extras                                                                                                                                                                            | 3.4 kB     00:00</span><br><span class="line">extras/filelists_db                                                                                                                                                               |  26 kB     00:00</span><br><span class="line">extras/prestodelta                                                                                                                                                                | 1.3 kB     00:00</span><br><span class="line">extras/primary_db                                                                                                                                                                 |  29 kB     00:00</span><br><span class="line">extras/other_db                                                                                                                                                                   |  30 kB     00:00</span><br><span class="line">os                                                                                                                                                                                | 3.7 kB     00:00</span><br><span class="line">os/group_gz                                                                                                                                                                       | 226 kB     00:00</span><br><span class="line">os/filelists_db                                                                                                                                                                   | 6.4 MB     00:00</span><br><span class="line">os/primary_db                                                                                                                                                                     | 4.7 MB     00:00</span><br><span class="line">os/other_db                                                                                                                                                                       | 2.8 MB     00:00</span><br><span class="line">updates                                                                                                                                                                           | 3.4 kB     00:00</span><br><span class="line">updates/filelists_db                                                                                                                                                              | 3.5 MB     00:00</span><br><span class="line">updates/prestodelta                                                                                                                                                               | 171 kB     00:00</span><br><span class="line">updates/primary_db                                                                                                                                                                | 5.8 MB     00:00</span><br><span class="line">updates/other_db                                                                                                                                                                  |  83 MB     00:07</span><br><span class="line">Metadata Cache Created</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/dc4f2ef8.html">https://mds1455975151.github.io/archives/dc4f2ef8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker工具集</title>
      <link href="/archives/42ad8da7.html"/>
      <url>/archives/42ad8da7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><a id="more"></a><p>工具分类</p><ul><li><a href="#编排和调度">编排和调度</a></li><li><a href="#持续集成持续部署">持续集成/持续部署</a></li><li><a href="#监控">监控</a></li><li><a href="#记录">记录</a></li><li><a href="#安全">安全</a></li><li><a href="#存储卷管理">存储/卷管理</a></li><li><a href="#联网">联网</a></li><li><a href="#服务发现">服务发现</a></li><li><a href="#构建">构建</a></li><li><a href="#管理">管理</a></li></ul><h1 id="编排和调度"><a href="#编排和调度" class="headerlink" title="编排和调度"></a>编排和调度</h1><p><strong>Kubernetes</strong><br><strong>Docker Swarm</strong><br><strong>Mesosphere DC/OS</strong><br>Amazon ECS<br>Azure Container Service（ACS）<br>Google Container Engine（GKE）<br>Cloud Foundry’s Diego<br><strong>Marathon</strong><br>HashiCorp Nomad<br>Helios<br><strong>Rancher</strong><br>Nebula</p><h1 id="持续集成-持续部署"><a href="#持续集成-持续部署" class="headerlink" title="持续集成/持续部署"></a>持续集成/持续部署</h1><p><strong>Jenkins</strong><br><strong>GitLab CI</strong><br><strong>Travis CI</strong><br><strong>Drone</strong><br>Wercker<br>CodeShip<br>CircleCI<br>Shippable<br>CodeFresh<br>Buddy</p><h1 id="监控"><a href="#监控" class="headerlink" title="监控"></a>监控</h1><p><strong>cAdvisor</strong><br><strong>Prometheus</strong><br>Sysdig<br>Sysdig Monitor<br>Sumo Logic<br>Datadog<br>New Relic</p><h1 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h1><p>Logspout<br>Fluentd<br>Logstash<br>syslog-ng</p><h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><p>Clair<br>Aqua Security<br>Twistlock<br>Docker Bench for Security<br>Docker Notary</p><h1 id="存储-卷管理"><a href="#存储-卷管理" class="headerlink" title="存储/卷管理"></a>存储/卷管理</h1><p>Convoy<br>Portworx<br>Blockbridge<br>Flocker</p><h1 id="联网"><a href="#联网" class="headerlink" title="联网"></a>联网</h1><p>flannel<br>Weaveworks<br>Project Calico</p><h1 id="服务发现"><a href="#服务发现" class="headerlink" title="服务发现"></a>服务发现</h1><p>Consul<br>Etcd<br>Proxy</p><h1 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h1><p>Packer<br>Whales<br>Gradle</p><h1 id="管理"><a href="#管理" class="headerlink" title="管理"></a>管理</h1><p>Portainer</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/42ad8da7.html">https://mds1455975151.github.io/archives/42ad8da7.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker业务流程图</title>
      <link href="/archives/d075aeb0.html"/>
      <url>/archives/d075aeb0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>收集几张Docker业务流程图</p></blockquote><a id="more"></a><p><img src="/archives/d075aeb0/01.png" alt><br><img src="/archives/d075aeb0/02.jpg" alt><br><img src="/archives/d075aeb0/03.jpg" alt><br><img src="/archives/d075aeb0/04.jpg" alt><br><img src="/archives/d075aeb0/05.jpg" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d075aeb0.html">https://mds1455975151.github.io/archives/d075aeb0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> 业务流程图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minikube之CentOS单机部署</title>
      <link href="/archives/5e6f338.html"/>
      <url>/archives/5e6f338.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote></blockquote><ul><li><a href="#前言">前言</a></li><li><a href="#部署环境">部署环境</a></li><li><a href="#先决条件">先决条件</a></li><li><a href="#安装kubectl">安装kubectl</a></li><li><a href="#安装hypervisorkvm">安装Hypervisor(KVM)</a></li><li><a href="#安装minikube">安装minikube</a></li><li><a href="#应用案例">应用案例</a></li><li><a href="#fqa">FQA</a></li><li><a href="#参考资料">参考资料</a></li></ul><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><img src="/archives/5e6f338/logo.png" width="30%"> 方便自己快速搭建并体验Kubernetes。<h1 id="部署环境"><a href="#部署环境" class="headerlink" title="部署环境"></a>部署环境</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h1><ul><li>kubectl</li><li>macOS<br>Hyperkit driver, xhyve driver, VirtualBox, or VMware Fusion</li><li>Linux<br>VirtualBox or KVM<br>NOTE: Minikube also supports a –vm-driver=none option that runs the Kubernetes components on the host and not in a VM. Docker is required to use this driver but no hypervisor.</li><li>Windows<br>VirtualBox or Hyper-V</li><li>VT-x/AMD-v virtualization must be enabled in BIOS</li><li>Internet connection on first run</li></ul><h1 id="安装kubectl"><a href="#安装kubectl" class="headerlink" title="安装kubectl"></a>安装kubectl</h1><p><strong>安装kubectl</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://storage.googleapis.com/kubernetes-release/release/v1.9.0/bin/linux/amd64/kubectl</span></span><br><span class="line"><span class="comment"># install kubectl /usr/local/bin/</span></span><br><span class="line"><span class="comment"># kubectl cluster-info</span></span><br></pre></td></tr></table></figure><p><strong>设置shell命令补全</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y bash-completion</span></span><br><span class="line"><span class="comment"># echo "source &lt;(kubectl completion bash)" &gt;&gt; ~/.bashrc</span></span><br><span class="line"><span class="comment"># kubectl</span></span><br><span class="line">alpha           auth            config          delete          explain         options         replace         <span class="built_in">set</span></span><br><span class="line">annotate        autoscale       convert         describe        expose          patch           rolling-update  taint</span><br><span class="line">api-versions    certificate     cordon          drain           get             plugin          rollout         top</span><br><span class="line">apply           cluster-info    cp              edit            label           port-forward    run             uncordon</span><br><span class="line">attach          completion      create          <span class="built_in">exec</span>            logs            proxy           scale           version</span><br></pre></td></tr></table></figure><h1 id="安装Hypervisor-KVM"><a href="#安装Hypervisor-KVM" class="headerlink" title="安装Hypervisor(KVM)"></a>安装Hypervisor(KVM)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install qemu-kvm libvirt libvirt-python libguestfs-tools virt-install</span></span><br><span class="line"><span class="comment"># systemctl enable libvirtd &amp;&amp; systemctl start libvirtd</span></span><br><span class="line"><span class="comment"># wget https://github.com/dhiltgen/docker-machine-kvm/releases/download/v0.10.0/docker-machine-driver-kvm-centos7</span></span><br><span class="line"><span class="comment"># install docker-machine-driver-kvm-centos7 /usr/local/bin/docker-machine-driver-kvm</span></span><br><span class="line"><span class="comment"># usermod -a -G libvirt $(whoami)</span></span><br><span class="line"><span class="comment"># newgrp libvirt</span></span><br></pre></td></tr></table></figure><h1 id="安装minikube"><a href="#安装minikube" class="headerlink" title="安装minikube"></a>安装minikube</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span></span><br><span class="line"><span class="comment"># install minikube-linux-amd64 /usr/local/bin/minikube</span></span><br><span class="line"><span class="comment"># minikube config set WantReportErrorPrompt false</span></span><br><span class="line"><span class="comment"># minikube start --vm-driver=kvm</span></span><br><span class="line"><span class="comment"># kubectl version</span></span><br><span class="line"><span class="comment"># kubectl cluster-info</span></span><br><span class="line"><span class="comment"># kubectl get all</span></span><br></pre></td></tr></table></figure><h1 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl get nodes</span></span><br><span class="line">NAME                      STATUS    ROLES     AGE       VERSION</span><br><span class="line">linux-node9.example.com   Ready     &lt;none&gt;    42m       v1.8.0</span><br><span class="line"><span class="comment"># kubectl run hello-minikube --image=k8s.gcr.io/echoserver:1.4 --port=8080</span></span><br><span class="line">deployment <span class="string">"hello-minikube"</span> created</span><br><span class="line"><span class="comment"># kubectl get pods</span></span><br><span class="line">NAME                              READY     STATUS              RESTARTS   AGE</span><br><span class="line">hello-minikube-7844bdb9c6-k2sc6   0/1       ContainerCreating   0          14s</span><br><span class="line"><span class="comment"># kubectl delete service hello-minikube</span></span><br><span class="line">service <span class="string">"hello-minikube"</span> deleted</span><br><span class="line"><span class="comment"># minikube stop</span></span><br></pre></td></tr></table></figure><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>1、minikube启动报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node9 ~]<span class="comment"># minikube start --vm-driver=kvm</span></span><br><span class="line">Starting <span class="built_in">local</span> Kubernetes v1.8.0 cluster...</span><br><span class="line">Starting VM...</span><br><span class="line">Getting VM IP address...</span><br><span class="line">Moving files into cluster...</span><br><span class="line">E0109 21:27:08.534646    4014 start.go:223] Error updating cluster:  Error updating localkube from uri: Error creating localkube asset from url: Error opening file asset: /root/.minikube/cache/localkube/localkube-v1.8.0: open /root/.minikube/cache/localkube/localkube-v1.8.0: no such file or directory</span><br><span class="line">E0109 21:27:20.094253    4014 util.go:151] Error uploading error message: : Post https://clouderrorreporting.googleapis.com/v1beta1/projects/k8s-minikube/events:report?key=AIzaSyACUwzG0dEPcl-eOgpDKnyKoUFgHdfoFuA: <span class="built_in">read</span> tcp 192.168.56.109:48666-&gt;172.217.24.10:443: <span class="built_in">read</span>: connection reset by peer</span><br></pre></td></tr></table></figure><p>解决：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># minikube config set WantReportErrorPrompt false</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener">Minikube</a><br><a href="http://linux.dell.com/files/whitepapers/KVM_Virtualization_in_RHEL_7_Made_Easy.pdf" target="_blank" rel="noopener">KVM_Virtualization_in_RHEL_7_Made_Easy</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5e6f338.html">https://mds1455975151.github.io/archives/5e6f338.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Kubernetes </tag>
            
            <tag> Minikube </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub项目徽章的添加和设置</title>
      <link href="/archives/b687dd8f.html"/>
      <url>/archives/b687dd8f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Github上经常看到各类项目添加的各类小图标表述项目相关信息，让人眼前一亮，无形中增加了项目的关注度和热度，那么如何给自己的GitHub开源项目添加类似图标呢，让我们娓娓道来。</p></blockquote><h1 id="徽标简介"><a href="#徽标简介" class="headerlink" title="徽标简介"></a>徽标简介</h1><p>GitHub项目的README.md中可以添加徽章（Badge）对项目进行标记和说明，这些好看的小图标不仅简洁美观，而且还包含了清晰易读的信息。<br>徽标主要由图片和对应的链接组成，徽标图片的话一般由左半部分的名称和右半部分的值组成。<br><img src="/archives/b687dd8f/01.png" alt><br>GitHub徽标的<a href="http://shields.io/" target="_blank" rel="noopener">官网地址</a>,可以在官网预览绝大部分的徽标样式，然后选择自己喜欢的徽标，添加到自己的项目文档中去。<br>徽标分类如下：</p><ul><li>Build</li><li>Downloads</li><li>Version</li><li>Social</li><li>Funding</li><li>Miscellaneous</li><li>Longer Miscellaneous</li><li>自定义(Static\Dynamic)</li><li>Styles</li></ul><p>找了几个案例供大家参考：<br><img src="/archives/b687dd8f/02.png" alt><br><img src="/archives/b687dd8f/03.png" alt><br><img src="/archives/b687dd8f/04.png" alt><br>也有徽标使用超多的<a href="https://github.com/EyreFree/EFQRCode" target="_blank" rel="noopener">案例</a>，建议大家理性使用徽标。<br><img src="/archives/b687dd8f/05.png" alt><br>全凭个人喜好添加，你开心就好。<br><img src="/archives/b687dd8f/06.jpg" alt></p><h1 id="常见徽标添加"><a href="#常见徽标添加" class="headerlink" title="常见徽标添加"></a>常见徽标添加</h1><p>常用的徽标主要有持续集成状态、项目版本信息、代码测试覆盖率、项目支持平台、项目语言、代码分析等，下面我们依次熟悉下这些徽标。</p><h2 id="持续集成状态"><a href="#持续集成状态" class="headerlink" title="持续集成状态"></a>持续集成状态</h2><p>持续集成的话推荐Travis CI，针对开源项目免费。其他还有CircleCI、Jenkins和Codeship等，大家可以在shields.io/的Build分类查找。<br>登录<a href="travis-ci.org">Travis CI</a>,直接使用GitHub账户登录即可。<br>参考<a href="https://docs.travis-ci.com/user/getting-started/" target="_blank" rel="noopener">官方文档</a>，添加.travis.yml 配置文件，告诉Travis CI怎样对你的项目进行编译或测试。<br><a href="https://travis-ci.org/mds1455975151/ansible-role-pip" target="_blank" rel="noopener"><img src="https://www.travis-ci.org/mds1455975151/ansible-role-pip.svg?branch=master" alt="Build Status"></a><br>根据需要将GitHub用户及项目名称替换掉即可<br><img src="/archives/b687dd8f/06.png" alt><br>如果你的编译没跑过或者发生错误之类的，会出现其他的状态，比如：<br><img src="/archives/b687dd8f/7-1.png" alt><br><img src="/archives/b687dd8f/7-2.png" alt><br><img src="/archives/b687dd8f/7-3.png" alt></p><h2 id="项目下载量"><a href="#项目下载量" class="headerlink" title="项目下载量"></a>项目下载量</h2><p>项目被下载的次数各个平台的统计都是独立的，比如发布在npm的项目下载量徽标图片地址如下，以cesarferreira/drone为例：<br>总下载量：<a href="https://img.shields.io/npm/dt/{项目名称}.svg" target="_blank" rel="noopener">https://img.shields.io/npm/dt/{项目名称}.svg</a><br>月下载量：<a href="https://img.shields.io/npm/dm/{项目名称}.svg" target="_blank" rel="noopener">https://img.shields.io/npm/dm/{项目名称}.svg</a><br>周下载量：<a href="https://img.shields.io/npm/dw/{项目名称}.svg" target="_blank" rel="noopener">https://img.shields.io/npm/dw/{项目名称}.svg</a><br>效果如下：<br><img src="/archives/b687dd8f/08.png" alt></p><h2 id="项目版本信息"><a href="#项目版本信息" class="headerlink" title="项目版本信息"></a>项目版本信息</h2><p>语法：<br><a href="https://img.shields.io/npm/v/{项目名称}.svg" target="_blank" rel="noopener">https://img.shields.io/npm/v/{项目名称}.svg</a><br>同样以cesarferreira/drone为例：<br>HTML语法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.npmjs.com/package/drone"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://img.shields.io/npm/v/drone.svg"</span> <span class="attr">alt</span>=<span class="string">"npm"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Markdown语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](https://img.shields.io/npm/v/drone.svg)</span><br></pre></td></tr></table></figure><p><img src="/archives/b687dd8f/09.png" alt></p><h2 id="代码测试覆盖率"><a href="#代码测试覆盖率" class="headerlink" title="代码测试覆盖率"></a>代码测试覆盖率</h2><p>代码测试覆盖率的话推荐Codecov.同样的，Codecov可以直接使用GitHub账号登陆.<br>更多信息参考<a href="https://docs.codecov.io/docs" target="_blank" rel="noopener">官网文档</a><br><img src="/archives/b687dd8f/10.png" alt></p><h2 id="项目支持平台"><a href="#项目支持平台" class="headerlink" title="项目支持平台"></a>项目支持平台</h2><p>略，有需要的同学自行研究</p><h2 id="项目语言"><a href="#项目语言" class="headerlink" title="项目语言"></a>项目语言</h2><p>该徽标是通过自定义徽标实现的，具体可参考下文自定义徽标一节，这里给出徽标代码：<br><a href="https://img.shields.io/badge/language-{项目语言}-{背景色}.svg" target="_blank" rel="noopener">https://img.shields.io/badge/language-{项目语言}-{背景色}.svg</a><br>将 {项目语言} 和 {背景色} 替换为你的项目目前的语言和你想要的背景色即可，这里以 Swift 为例，我们用上 Swift 官方橘色：<br><img src="https://img.shields.io/badge/language-swift-orange.svg" alt></p><h2 id="代码质量分析"><a href="#代码质量分析" class="headerlink" title="代码质量分析"></a>代码质量分析</h2><p>略，有需要的同学自行研究</p><h2 id="开源协议类型"><a href="#开源协议类型" class="headerlink" title="开源协议类型"></a>开源协议类型</h2><p><a href="https://img.shields.io/npm/l/express.svg" target="_blank" rel="noopener">https://img.shields.io/npm/l/express.svg</a><br><a href="https://img.shields.io/apm/l/vim-mode.svg" target="_blank" rel="noopener">https://img.shields.io/apm/l/vim-mode.svg</a><br><img src="/archives/b687dd8f/12.png" alt><br><img src="/archives/b687dd8f/13.png" alt></p><h1 id="自定义徽标"><a href="#自定义徽标" class="headerlink" title="自定义徽标"></a>自定义徽标</h1><h2 id="标题／内容／颜色／链接"><a href="#标题／内容／颜色／链接" class="headerlink" title="标题／内容／颜色／链接"></a>标题／内容／颜色／链接</h2><p>以上这些徽标没有满足你的需求，还可以定制自己的个性化徽标，shields.io提供了添加自定义徽标的功能，通过修改如下URL即可获取自定义徽标图片：<br><a href="https://img.shields.io/badge/{徽标标题}-{徽标内容}-{徽标颜色}.svg" target="_blank" rel="noopener">https://img.shields.io/badge/{徽标标题}-{徽标内容}-{徽标颜色}.svg</a><br>{徽标标题}：徽标左半部分的文本（短线：–，下划线：__，空格： 或_）；<br>{徽标内容}：徽标右半部分的文本，同上；<br>{徽标颜色}：徽标右半部分背景颜色，可以是 red、green、blue 等颜色英文单词，也可以直接写十六进制的颜色值，如 ff69b4</p><h2 id="附加参数"><a href="#附加参数" class="headerlink" title="附加参数"></a>附加参数</h2><p>在徽标图片URL后面带上一些参数来控制徽标的样式。使用方法就是在徽标图片 URL 后面跟上 ?{参数名}={参数值}，多个参数联用的话就是 ?{参数名1}={参数值1}&amp;{参数名2}={参数值2}…<br>有需要可以自行研究，附加参数类型如下：</p><ul><li>style</li><li>label</li><li>logo</li><li>logoWidth</li><li>link</li><li>colorA</li><li>colorB</li><li>maxAge</li></ul><h2 id="其他小知识点"><a href="#其他小知识点" class="headerlink" title="其他小知识点"></a>其他小知识点</h2><p>默认的徽标是居左排列的，如果需要居中排列需要使用 HTML 的方式来插入徽标，可参考 Kingfisher，代码和效果如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://travis-ci.org/onevcat/Kingfisher"</span>&gt;</span>![](https://img.shields.io/travis/onevcat/Kingfisher/master.svg)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/Carthage/Carthage/"</span>&gt;</span>![](https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://swift.org/package-manager/"</span>&gt;</span>![](https://img.shields.io/badge/SPM-ready-orange.svg)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://onevcat.github.io/Kingfisher/"</span>&gt;</span>![](https://img.shields.io/cocoapods/v/Kingfisher.svg?style=flat)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://raw.githubusercontent.com/onevcat/Kingfisher/master/LICENSE"</span>&gt;</span>![](https://img.shields.io/cocoapods/l/Kingfisher.svg?style=flat)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://onevcat.github.io/Kingfisher/"</span>&gt;</span>![](https://img.shields.io/cocoapods/p/Kingfisher.svg?style=flat)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://codebeat.co/projects/github-com-onevcat-kingfisher"</span>&gt;</span>![codebeat badge](https://codebeat.co/assets/svg/badges/A-398b39-669406e9e1b136187b91af587d4092b0160370f271f66a651f444b990c2730e9.svg)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="优秀徽标"><a href="#优秀徽标" class="headerlink" title="优秀徽标"></a>优秀徽标</h1><h2 id="Gitter"><a href="#Gitter" class="headerlink" title="Gitter"></a>Gitter</h2><p>这是对issue功能的一个补充。正常情况下，当你给某个项目提出问题时，需要新建一个issue提出，并且需要等待开发者的回复（短则一两天，长则大半年），效率不是很高。而Gitter就提供了一个实时的聊天室，项目的开发者可以用github账号登陆之，为某个项目创建一个聊天室，然后再项目的Readme中加入如下代码：<br>[![Gitter](<a href="https://badges.gitter.im/Join" target="_blank" rel="noopener">https://badges.gitter.im/Join</a> Chat.svg)](聊天室 URL)<br>就可以显示聊天室的徽章啦：<br>[Gitter](<a href="https://badges.gitter.im/Join" target="_blank" rel="noopener">https://badges.gitter.im/Join</a> Chat.svg)<br>单击即可进入聊天室，与开发者进行实时沟通。</p><h2 id="Version-Stability"><a href="#Version-Stability" class="headerlink" title="Version Stability"></a>Version Stability</h2><p><a href="https://github.com/badges/stability-badges" target="_blank" rel="noopener">亲，点我有惊喜</a></p><h2 id="Licences"><a href="#Licences" class="headerlink" title="Licences"></a>Licences</h2><p>开源软件协议的种类非常多,具体可以参考阮一峰的如何选择开源许可证？<br><img src="/archives/b687dd8f/bg2011050101.png" alt><br><a href="https://github.com/ellerbrock/open-source-badges" target="_blank" rel="noopener">参考资料</a></p><h2 id="awesome"><a href="#awesome" class="headerlink" title="awesome"></a>awesome</h2><p>如果你是awesome系列的项目,那可以添加awesome徽章</p><h2 id="Google-Analytics"><a href="#Google-Analytics" class="headerlink" title="Google Analytics"></a>Google Analytics</h2><p><a href="https://github.com/igrigorik/ga-beacon" target="_blank" rel="noopener">参考资料</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://juejin.im/post/5a32157c6fb9a0450b6667ac" target="_blank" rel="noopener">GitHub 项目徽章的添加和设置</a><br><a href="http://blog.csdn.net/u011192270/article/details/51788886" target="_blank" rel="noopener">Github 徽章整理</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/b687dd8f.html">https://mds1455975151.github.io/archives/b687dd8f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> 徽章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Gogs+Drone搭建的私有CI/CD平台</title>
      <link href="/archives/1a623683.html"/>
      <url>/archives/1a623683.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>本文介绍如何打造基于Docker的私有CI/CD平台</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>目前体验过或者使用过的自动化构建工具有Jenkins、Travis CI、Github Actions、Gitlab-CI，最近又发现了Drone。它是一款使用Go开发的开源的CI自动构建平台，能够单独部署，支持常见的Git仓库，例如Github,Gitlab,Bitbucket以及Gogs等。<br>本文带大家使用Gogs+Drone打造基于Docker的私有CI/CD平台，本文有不足或者认识不到位的地方欢迎大家批评指正。</p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line"><span class="comment"># docker version</span></span><br><span class="line">Client:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 19:59:06 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.06.2-ce</span><br><span class="line"> API version:  1.30 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.8.3</span><br><span class="line"> Git commit:   cec0b72</span><br><span class="line"> Built:        Tue Sep  5 20:00:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: <span class="literal">false</span></span><br></pre></td></tr></table></figure><h1 id="部署Docker"><a href="#部署Docker" class="headerlink" title="部署Docker"></a>部署Docker</h1><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /etc/yum.repos.d/ &amp;&amp; rm -f *.repo</span></span><br><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span></span><br><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line"><span class="comment"># yum remove -y docker docker-common docker-selinux docker-engine</span></span><br><span class="line"><span class="comment"># yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line"><span class="comment"># yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="comment"># yum-config-manager --enable docker-ce-edge</span></span><br><span class="line"><span class="comment"># yum list docker-ce --showduplicates | sort -r |grep stable</span></span><br><span class="line"><span class="comment"># yum install -y docker-ce-17.06.2.ce</span></span><br><span class="line"><span class="comment"># systemctl start docker</span></span><br><span class="line"><span class="comment"># systemctl enable docker</span></span><br><span class="line"><span class="comment"># mkdir -p /etc/docker</span></span><br><span class="line"><span class="comment"># tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://k9lgui7f.mirror.aliyuncs.com"</span>]                <span class="comment"># 为了后期方便添加阿里云的加速镜像站</span></span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># systemctl daemon-reload</span></span><br><span class="line"><span class="comment"># systemctl restart docker</span></span><br></pre></td></tr></table></figure><h2 id="测试Docker服务正常"><a href="#测试Docker服务正常" class="headerlink" title="测试Docker服务正常"></a>测试Docker服务正常</h2><p>例行跑个hello world测试下Docker服务是否正常</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run hello-world</span></span><br><span class="line">Unable to find image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">ca4f61b1923c: Pull complete</span><br><span class="line">Digest: sha256:ca0eeb6fb05351dfc8759c20733c91def84cb8007aa89a5bf606bc8b315b9fc7</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://cloud.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/engine/userguide/</span><br></pre></td></tr></table></figure><h2 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y docker-compose</span></span><br></pre></td></tr></table></figure><h1 id="部署Gogs"><a href="#部署Gogs" class="headerlink" title="部署Gogs"></a>部署Gogs</h1><h2 id="Gogs简介"><a href="#Gogs简介" class="headerlink" title="Gogs简介"></a>Gogs简介</h2><p><a href="https://gogs.io/" target="_blank" rel="noopener">Gogs</a>，一款极易搭建的自助Git服务。<br>优势如下：</p><ul><li>易安装：除了可以根据操作系统平台下载二进制运行，还可以通过Docker或Vagrant，以及包管理安装。</li><li>跨平台：任何Go语言支持的平台都可以运行Gogs，包括Windows、Mac、Linux以及ARM。</li><li>轻量级：一个廉价的树莓派的配置足以满足 Gogs 的最低系统硬件要求。有些用户甚至还将 Gogs 运行在 NAS 设备上。</li></ul><h2 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run --name gogs-mysql --restart=always -v /opt/mysql/mysqlVolume:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d mysql:5.7.19</span></span><br><span class="line">Unable to find image <span class="string">'mysql:5.7.19'</span> locally</span><br><span class="line">5.7.19: Pulling from library/mysql</span><br><span class="line">85b1f47fba49: Pull complete</span><br><span class="line">27dc53f13a11: Pull complete</span><br><span class="line">095c8ae4182d: Pull complete</span><br><span class="line">0972f6b9a7de: Pull complete</span><br><span class="line">1b199048e1da: Pull complete</span><br><span class="line">159de3cf101e: Pull complete</span><br><span class="line">963d934c2fcd: Pull complete</span><br><span class="line">f4b66a97a0d0: Pull complete</span><br><span class="line">f34057997f40: Pull complete</span><br><span class="line">ca1db9a06aa4: Pull complete</span><br><span class="line">0f913cb2cc0c: Pull complete</span><br><span class="line">Digest: sha256:bfb22e93ee87c6aab6c1c9a4e7cdc68e9cb9b64920f28fa289f9ffae9fe8e173</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> mysql:5.7.19</span><br><span class="line">406c74b329f91e6eab27a8e338a8d06ca41a877701348d5f1972127356c07c16</span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mysql               5.7.19              3e3878acd190        2 months ago        412MB</span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                            NAMES</span><br><span class="line">6984a3ea514c        mysql:5.7.19        <span class="string">"docker-entrypoint..."</span>   5 seconds ago       Up 4 seconds        0.0.0.0:3306-&gt;3306/tcp                           gogs-mysql</span><br><span class="line"><span class="comment"># yum install -y mysql</span></span><br><span class="line"><span class="comment"># mysql -uroot -p123456 -h 127.0.0.1</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 3</span><br><span class="line">Server version: 5.7.19 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select version();</span><br><span class="line">+-----------+</span><br><span class="line">| version() |</span><br><span class="line">+-----------+</span><br><span class="line">| 5.7.19    |</span><br><span class="line">+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; \q</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><h2 id="创建Gogs及drone数据库"><a href="#创建Gogs及drone数据库" class="headerlink" title="创建Gogs及drone数据库"></a>创建Gogs及drone数据库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql -uroot -p123456 -h 127.0.0.1</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 3</span><br><span class="line">Server version: 5.7.19 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; CREATE DATABASE IF NOT EXISTS gogs CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; create database drone;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; \q</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><h2 id="安装Gogs"><a href="#安装Gogs" class="headerlink" title="安装Gogs"></a>安装Gogs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull gogs/gogs</span></span><br><span class="line"><span class="comment"># mkdir -p /var/gogs</span></span><br><span class="line"><span class="comment"># docker run --name=gogs --restart=always --link gogs-mysql:db -p 10022:22 -p 10080:3000 -v /var/gogs:/data gogs/gogs</span></span><br><span class="line">usermod: no changes</span><br><span class="line">Jan  6 13:01:29 syslogd started: BusyBox v1.25.1</span><br><span class="line">Jan  6 13:01:30 sshd[30]: Server listening on :: port 22.</span><br><span class="line">Jan  6 13:01:30 sshd[30]: Server listening on 0.0.0.0 port 22.</span><br><span class="line">2018/01/06 13:01:30 [ WARN] Custom config <span class="string">'/data/gogs/conf/app.ini'</span> not found, ignore this <span class="keyword">if</span> you<span class="string">'re running first time</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [TRACE] Custom path: /data/gogs</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [TRACE] Log path: /app/gogs/log</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [TRACE] Build Time: 2017-11-22 08:19:49 UTC</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [TRACE] Build Git Hash:</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [TRACE] Log Mode: Console (Trace)</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [ INFO] Gogs 0.11.34.1122</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [ INFO] Cache Service Enabled</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [ INFO] Session Service Enabled</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [ INFO] SQLite3 Supported</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [ INFO] Run Mode: Development</span></span><br><span class="line"><span class="string">2018/01/06 13:01:30 [ INFO] Listen: http://0.0.0.0:3000</span></span><br></pre></td></tr></table></figure><p>打开页面继续配置Gogs<br><a href="http://192.168.200.109:10080/install" target="_blank" rel="noopener">http://192.168.200.109:10080/install</a><br>配置数据库<br><img src="/archives/1a623683/06.png" alt><br>应用基本配置<br><img src="/archives/1a623683/07.png" alt><br>修正：应用URL填写<a href="http://192.168.200.109:10080" target="_blank" rel="noopener">http://192.168.200.109:10080</a><br>注册一个账号<br><img src="/archives/1a623683/zhuce.png" alt><br>账号：madongsheng<br>密码：123456<br>登录：<a href="http://192.168.200.109:10080" target="_blank" rel="noopener">http://192.168.200.109:10080</a><br><img src="/archives/1a623683/01.png" alt><br>创建一个测试仓库<br><img src="/archives/1a623683/08.png" alt></p><h1 id="部署Drone-server"><a href="#部署Drone-server" class="headerlink" title="部署Drone server"></a>部署Drone server</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d \</span></span><br><span class="line">   -e DRONE_HOST=192.168.200.109 \</span><br><span class="line">     -e DRONE_GOGS=<span class="literal">true</span> \</span><br><span class="line">     -e DRONE_GOGS_URL=http://192.168.200.109:10080 \</span><br><span class="line">     -e DRONE_OPEN=<span class="literal">true</span> \</span><br><span class="line">     -e DRONE_SECRET=123456 \</span><br><span class="line">     -v /tmp/drone:/var/lib/drone \</span><br><span class="line">     -p 9090:8000 \</span><br><span class="line">     --restart=always \</span><br><span class="line">     --name=drone \</span><br><span class="line">     drone/drone</span><br><span class="line">Unable to find image <span class="string">'drone/drone:latest'</span> locally</span><br><span class="line">latest: Pulling from drone/drone</span><br><span class="line">297640bfa2ef: Pull complete</span><br><span class="line">c7bc7c1b3f31: Pull complete</span><br><span class="line">Digest: sha256:ed0125a78737586cb59995fae65b1d89661676783f3141d9a7818fca3866769f</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> drone/drone:latest</span><br><span class="line">0fc16e8e46f4d04196436c1946f25b611e15af5e61676a5d9b3e661ff39afa7f</span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">drone/drone         latest              45891aade610        2 weeks ago         30.4MB</span><br><span class="line">gogs/gogs           latest              6ab1773c26bc        6 weeks ago         139MB</span><br><span class="line">mysql               5.7.19              3e3878acd190        2 months ago        412MB</span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                               NAMES</span><br><span class="line">0fc16e8e46f4        drone/drone         <span class="string">"/bin/drone-server"</span>      20 seconds ago      Up 20 seconds       80/tcp, 443/tcp, 9000/tcp, 0.0.0.0:9090-&gt;8000/tcp   drone</span><br></pre></td></tr></table></figure><p>参数说明：<br>添加DRONE_DATABASE_DRIVER与DRONE_DATABASE_DATASOURCE参数说明使用MySQL存储相关数据，默认使用sqllite</p><p>登录drone控制面板<br><a href="http://192.168.200.109:9090/login/form" target="_blank" rel="noopener">http://192.168.200.109:9090/login/form</a><br><img src="/archives/1a623683/03.png" alt><br>使用Gogs账号密码登录 例如：账号madongsheng 密码123456<br><img src="/archives/1a623683/04.png" alt><br>如何激活仓库<br><img src="/archives/1a623683/10.png" alt><br>注释：登录后会列出所有有权限的repos信息，如果没有可以点击右上角菜单找到synchronize进行同步仓库信息。</p><h1 id="部署Drone-agent"><a href="#部署Drone-agent" class="headerlink" title="部署Drone agent"></a>部署Drone agent</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d \</span></span><br><span class="line"> -e DRONE_HOST=192.168.200.109 \</span><br><span class="line">     -e DRONE_SERVER=ws://192.168.200.109:9090/ws/broker \</span><br><span class="line">     -e DRONE_SECRET=123456 \</span><br><span class="line">     -e DRONE_DATABASE_DRIVER=mysql \</span><br><span class="line"> -e DRONE_DATABASE_DATASOURCE=root:123456@tcp\(192.168.200.109:3306\)/drone?parseTime=<span class="literal">true</span> \</span><br><span class="line"> -e DRONE_GOGS=<span class="literal">true</span> \</span><br><span class="line">     -e DRONE_GOGS_URL=http://192.168.200.109:10080 \</span><br><span class="line"> -e DRONE_GOGS_GIT_USERNAME=madongsheng \</span><br><span class="line"> -e DRONE_GOGS_GIT_PASSWORD=123456 \</span><br><span class="line">     -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">     --name=drone-agent \</span><br><span class="line">     --link gogs:gogs \</span><br><span class="line">     drone/drone agent</span><br><span class="line">db57facd3db3554f70a6f5f1e95c437d7d32fa8718d45d657913a87727a4bf51</span><br><span class="line"><span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                               NAMES</span><br><span class="line">219448fc1c5c        drone/drone         <span class="string">"/bin/drone-server..."</span>   4 seconds ago       Up 3 seconds        80/tcp, 443/tcp, 8000/tcp, 9000/tcp                 drone-agent</span><br></pre></td></tr></table></figure><h1 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h1><h2 id="自动化构建案例"><a href="#自动化构建案例" class="headerlink" title="自动化构建案例"></a>自动化构建案例</h2><p>在库里添加构建配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim .drone.yml</span></span><br><span class="line"><span class="attr">pipeline:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">centos:6.9</span></span><br><span class="line">    <span class="attr">commands:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">yum</span> <span class="string">install</span> <span class="string">-y</span> <span class="string">gcc</span> <span class="string">gcc-c++</span> <span class="string">automake</span> <span class="string">autoconf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">echo</span> <span class="string">"hello world!!!"</span></span><br><span class="line"><span class="comment"># git clone http://192.168.200.108:10080/madongsheng/test01.git</span></span><br><span class="line"><span class="comment"># cd test01/</span></span><br><span class="line"><span class="comment"># git add .</span></span><br><span class="line"><span class="comment"># git commit -m 'add .drone.yml'</span></span><br><span class="line"><span class="comment"># git push origin</span></span><br></pre></td></tr></table></figure><p>提前将相关镜像pull到本地，加快测试速度</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker pull golang</span></span><br><span class="line"><span class="comment"># docker pull node</span></span><br><span class="line"><span class="comment"># docker pull centos:6.9</span></span><br><span class="line"><span class="comment"># docker pull plugins/git</span></span><br></pre></td></tr></table></figure><p>自动触发创建构建任务<br><img src="/archives/1a623683/05.png" alt><br><img src="/archives/1a623683/12.png" alt></p><h2 id="配置Drone用户注册"><a href="#配置Drone用户注册" class="headerlink" title="配置Drone用户注册"></a>配置Drone用户注册</h2><p>开放注册</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+     DRONE_OPEN= <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>限制注册</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+     DRONE_OPEN: <span class="literal">true</span></span><br><span class="line">+     DRONE_ORGS: dogpatch,dolores</span><br></pre></td></tr></table></figure><p>关闭注册</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+     - DRONE_OPEN=<span class="literal">false</span></span><br><span class="line">+     - DRONE_ADMIN=janedoe,johnsmith</span><br></pre></td></tr></table></figure><h2 id="显示状态图标"><a href="#显示状态图标" class="headerlink" title="显示状态图标"></a>显示状态图标</h2><p><a href="http://docs.drone.io/zh/badges/" target="_blank" rel="noopener">官网资料</a><br>显示效果，如下：<br><img src="/archives/1a623683/13.png" alt></p><h1 id="命令行管理Drone"><a href="#命令行管理Drone" class="headerlink" title="命令行管理Drone"></a>命令行管理Drone</h1><p>管理主机安装命令行软件包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -L https://github.com/drone/drone-cli/releases/download/v0.8.0/drone_linux_amd64.tar.gz | tar zx</span></span><br><span class="line"><span class="comment"># install -t /usr/local/bin/ drone</span></span><br></pre></td></tr></table></figure><p>设置token</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># export DRONE_SERVER=http://192.168.200.109:9090</span></span><br><span class="line"><span class="comment"># export DRONE_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZXh0IjoibWFkb25nc2hlbmciLCJ0eXBlIjoidXNlciJ9.iGJkLKdYz9HbQIxWORSKe1gyyuKUU85c0MdyU498Ekg</span></span><br></pre></td></tr></table></figure><p>测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># drone info</span></span><br><span class="line">User: madongsheng</span><br><span class="line">Email: 1455975151@qq.com</span><br></pre></td></tr></table></figure><p>主要功能</p><ul><li>用户管理</li><li>仓库管理</li><li>构建管理</li><li>REGISTRY管理</li><li>其他管理</li></ul><h1 id="API使用"><a href="#API使用" class="headerlink" title="API使用"></a>API使用</h1><ul><li><p>当前登录用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/user</span><br></pre></td></tr></table></figure></li><li><p>当前登录用户的活动信息流</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/user/feed</span><br></pre></td></tr></table></figure></li><li><p>当前登录用户的仓库列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/user/repos</span><br></pre></td></tr></table></figure></li></ul><h1 id="如何实现agent扩展"><a href="#如何实现agent扩展" class="headerlink" title="如何实现agent扩展"></a>如何实现agent扩展</h1><p>没有看到官网有类似说明文章，想到可以使用docker-compose进行快速伸缩</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose scale drone-agent=5</span></span><br></pre></td></tr></table></figure><p>扩展前后可以明显看到并发任务量的增加</p><h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p><a href="http://plugins.drone.io/" target="_blank" rel="noopener">官网插件地址</a><br>可以根据个人项目需求选择合适的插件进行配置。</p><h1 id="附件"><a href="#附件" class="headerlink" title="附件"></a>附件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat docker-compose.yml</span></span><br><span class="line">version: <span class="string">'2'</span></span><br><span class="line">services:</span><br><span class="line">  mysql-gogs:</span><br><span class="line">    image: <span class="string">'mysql:5.7.17'</span></span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">'3306:3306'</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /opt/docker/mysql/mysqlVolume:/var/lib/mysql</span><br><span class="line">    environment:</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=123456</span><br><span class="line"></span><br><span class="line">  gogs:</span><br><span class="line">    image: <span class="string">'gogs/gogs'</span></span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">'10022:22'</span></span><br><span class="line">      - <span class="string">'10080:3000'</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /opt/docker/gogs/data:/data</span><br><span class="line">    links:</span><br><span class="line">      - mysql-gogs:db</span><br><span class="line"></span><br><span class="line">  drone-server:</span><br><span class="line">    image: drone/drone:0.8</span><br><span class="line"></span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">'80:8000'</span></span><br><span class="line">      - <span class="string">'9000'</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /tmp/drone:/var/lib/drone/</span><br><span class="line">    restart: always</span><br><span class="line">    environment:</span><br><span class="line">      - DRONE_HOST=drone-server</span><br><span class="line">      - DRONE_GOGS=<span class="literal">true</span></span><br><span class="line">      - DRONE_GOGS_URL=http://192.168.200.108:10080</span><br><span class="line">      - DRONE_GOGS_GIT_USERNAME=madongsheng</span><br><span class="line">      - DRONE_GOGS_GIT_PASSWORD=123456</span><br><span class="line">      - DRONE_OPEN=<span class="literal">true</span></span><br><span class="line">      - DRONE_SECRET=123456</span><br><span class="line"></span><br><span class="line">  drone-agent:</span><br><span class="line">    image: drone/agent:0.8</span><br><span class="line"></span><br><span class="line">    <span class="built_in">command</span>: agent</span><br><span class="line">    restart: always</span><br><span class="line">    depends_on:</span><br><span class="line">      - drone-server</span><br><span class="line">    volumes:</span><br><span class="line">      - /var/run/docker.sock:/var/run/docker.sock</span><br><span class="line">    environment:</span><br><span class="line">      - DRONE_SERVER=drone-server:9000</span><br><span class="line">      - DRONE_SECRET=123456</span><br></pre></td></tr></table></figure><h1 id="待续"><a href="#待续" class="headerlink" title="待续"></a>待续</h1><p><a href="https://segmentfault.com/a/1190000012066735" target="_blank" rel="noopener">https://segmentfault.com/a/1190000012066735</a><br><a href="https://segmentfault.com/a/1190000012459296" target="_blank" rel="noopener">https://segmentfault.com/a/1190000012459296</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/drone/drone" target="_blank" rel="noopener">Drone Github地址</a><br><a href="https://www.jianshu.com/p/15506f46f75a" target="_blank" rel="noopener">体验基于gogs+Drone搭建的CI/CD平台</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1a623683.html">https://mds1455975151.github.io/archives/1a623683.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> CI/CD </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> Gogs </tag>
            
            <tag> Drone </tag>
            
            <tag> 私有CI/CD平台 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx知识梳理-部署</title>
      <link href="/archives/2589ba06.html"/>
      <url>/archives/2589ba06.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="http://nginx.org/en/docs/" target="_blank" rel="noopener">官网文档</a></p><h1 id="Installation-on-Linux"><a href="#Installation-on-Linux" class="headerlink" title="Installation on Linux"></a>Installation on Linux</h1><p>使用稳定版本的预构建包</p><h2 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"><span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"><span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h2 id="添加源文件"><a href="#添加源文件" class="headerlink" title="添加源文件"></a>添加源文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/etc/yum.repos.d/nginx.repo&lt;&lt;EOF</span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/OS/OSRELEASE/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">EOF</span><br><span class="line">sed -i <span class="string">'s/OS/centos/g'</span> nginx.repo       <span class="comment"># 根据系统类型替换为rhel或centos</span></span><br><span class="line">sed -i <span class="string">'s/OSRELEASE/7/g'</span> nginx.repo     <span class="comment"># 根据系统版本替换为6或者7</span></span><br></pre></td></tr></table></figure><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y nginx</span></span><br><span class="line"><span class="comment"># systemctl start nginx</span></span><br><span class="line"><span class="comment"># systemctl enable nginx</span></span><br><span class="line"><span class="comment"># netstat -tunlp|grep nginx</span></span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      2683/nginx: master</span><br></pre></td></tr></table></figure><p><img src="/archives/2589ba06/01.png" alt></p><h1 id="Building-from-Sources"><a href="#Building-from-Sources" class="headerlink" title="Building from Sources"></a>Building from Sources</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">官网下载</a>,选择nginx-1.12.2版本<br><a href="http://nginx.org/en/docs/configure.html" target="_blank" rel="noopener">官网参数讲解</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://ftp.pcre.org/pub/pcre/pcre-8.41.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf pcre-8.41.tar.gz</span></span><br><span class="line"><span class="comment"># wget http://zlib.net/zlib-1.2.11.tar.xz</span></span><br><span class="line"><span class="comment"># xz -d zlib-1.2.11.tar.xz</span></span><br><span class="line"><span class="comment"># tar -xf zlib-1.2.11.tar</span></span><br><span class="line"><span class="comment"># wget http://nginx.org/download/nginx-1.12.2.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf nginx-1.12.2.tar.gz</span></span><br><span class="line"><span class="comment"># cd nginx-1.12.2/</span></span><br><span class="line"><span class="comment"># tree -L 1</span></span><br><span class="line">.</span><br><span class="line">├── auto</span><br><span class="line">├── CHANGES</span><br><span class="line">├── CHANGES.ru</span><br><span class="line">├── conf</span><br><span class="line">├── configure</span><br><span class="line">├── contrib</span><br><span class="line">├── html</span><br><span class="line">├── LICENSE</span><br><span class="line">├── man</span><br><span class="line">├── README</span><br><span class="line">└── src</span><br><span class="line"><span class="comment"># cd nginx-1.12.2/</span></span><br><span class="line"><span class="comment"># ./configure</span></span><br><span class="line">      --sbin-path=/usr/<span class="built_in">local</span>/nginx/nginx</span><br><span class="line">      --conf-path=/usr/<span class="built_in">local</span>/nginx/nginx.conf</span><br><span class="line">      --pid-path=/usr/<span class="built_in">local</span>/nginx/nginx.pid</span><br><span class="line">      --with-http_ssl_module</span><br><span class="line">      --with-pcre=../pcre-8.41</span><br><span class="line">      --with-zlib=../zlib-1.2.11</span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># make install</span></span><br><span class="line"><span class="comment">#  tree</span></span><br><span class="line">.</span><br><span class="line">├── client_body_temp</span><br><span class="line">├── fastcgi.conf</span><br><span class="line">├── fastcgi.conf.default</span><br><span class="line">├── fastcgi_params</span><br><span class="line">├── fastcgi_params.default</span><br><span class="line">├── fastcgi_temp</span><br><span class="line">├── html</span><br><span class="line">│   ├── 50x.html</span><br><span class="line">│   └── index.html</span><br><span class="line">├── koi-utf</span><br><span class="line">├── koi-win</span><br><span class="line">├── logs</span><br><span class="line">│   ├── access.log</span><br><span class="line">│   └── error.log</span><br><span class="line">├── mime.types</span><br><span class="line">├── mime.types.default</span><br><span class="line">├── nginx</span><br><span class="line">├── nginx.conf</span><br><span class="line">├── nginx.conf.default</span><br><span class="line">├── nginx.pid</span><br><span class="line">├── proxy_temp</span><br><span class="line">├── scgi_params</span><br><span class="line">├── scgi_params.default</span><br><span class="line">├── scgi_temp</span><br><span class="line">├── uwsgi_params</span><br><span class="line">├── uwsgi_params.default</span><br><span class="line">├── uwsgi_temp</span><br><span class="line">└── win-utf</span><br></pre></td></tr></table></figure><p>#</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2589ba06.html">https://mds1455975151.github.io/archives/2589ba06.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJS报错一例</title>
      <link href="/archives/1ebf3c88.html"/>
      <url>/archives/1ebf3c88.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node7 ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@linux-node7 ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line">[root@linux-node7 ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure><h1 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h1><p>安装NodeJS时报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum install -y npm</span></span><br><span class="line"><span class="comment"># npm config set registry https://registry.npm.taobao.org</span></span><br><span class="line"><span class="comment"># npm info underscore</span></span><br><span class="line">npm: relocation error: npm: symbol SSL_set_cert_cb, version libssl.so.10 not defined <span class="keyword">in</span> file libssl.so.10 with link time reference</span><br><span class="line"><span class="comment"># npm install -g n</span></span><br><span class="line"><span class="comment"># n stable</span></span><br><span class="line"><span class="comment"># node -v</span></span><br><span class="line"><span class="comment"># npm -v</span></span><br></pre></td></tr></table></figure><h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum update -y openssl</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://stackoverflow.com/questions/46473376/node-relocation-error-node-symbol-ssl-set-cert-cb-version-libssl-so-10-not-d" target="_blank" rel="noopener">https://stackoverflow.com/questions/46473376/node-relocation-error-node-symbol-ssl-set-cert-cb-version-libssl-so-10-not-d</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1ebf3c88.html">https://mds1455975151.github.io/archives/1ebf3c88.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQ进阶</title>
      <link href="/archives/8085bd15.html"/>
      <url>/archives/8085bd15.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>RabbitMQ 目前有三种命令行工具：</p><ul><li>rabbitmqctl：一般用于管理员操作使用</li><li>rabbitmq-plugins：插件管理</li><li>rabbitmqadmin：通过HTTP API进行管理员操作</li></ul><p>不同工具在不同的场景下使用，例如：</p><ul><li>rabbitmqctl通常只有RabbitMQ管理员才能使用，因为它提供了对节点的完全控制，包括虚拟主机，用户和权限管理，对节点数据的破坏性操作等等。</li><li>rabbitmqadmin建立在HTTP API之上，并使用不同的机制，只有HTTP API端口打开。</li></ul><h1 id="rabbitmqctl"><a href="#rabbitmqctl" class="headerlink" title="rabbitmqctl"></a>rabbitmqctl</h1><p>RabbitMQ附带的原始CLI工具。它支持广泛的业务，主要是管理（业务）性质。<br>主要功能如下：</p><ul><li>停止节点</li><li>访问节点状态，有效配置，健康检查</li><li>虚拟主机管理</li><li>用户和权限管理</li><li>政策管理</li><li>列出队列，连接，渠道，交流，消费者</li><li>集群成员管理<br><a href="http://www.rabbitmq.com/rabbitmqctl.8.html" target="_blank" rel="noopener">官网资料</a></li></ul><h1 id="rabbitmq-plugins"><a href="#rabbitmq-plugins" class="headerlink" title="rabbitmq-plugins"></a>rabbitmq-plugins</h1><p>rabbitmq-plugins是一个用于管理RabbitMQ代理插件的命令行工具。它允许启用，禁用和浏览插件。它必须由具有对RabbitMQ配置目录的写入权限的用户运行。<br><a href="http://www.rabbitmq.com/rabbitmq-plugins.8.html" target="_blank" rel="noopener">官网资料</a></p><h1 id="rabbitmqadmin"><a href="#rabbitmqadmin" class="headerlink" title="rabbitmqadmin"></a>rabbitmqadmin</h1><p><a href="http://www.rabbitmq.com/management-cli.html" target="_blank" rel="noopener">官网资料</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8085bd15.html">https://mds1455975151.github.io/archives/8085bd15.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQ认识</title>
      <link href="/archives/c251117f.html"/>
      <url>/archives/c251117f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>RabbitMQ是部署最广泛的开源消息代理。RabbitMQ在全球范围内在小型创业公司和大型企业进行了超过35,000次的生产部署，是最受欢迎的开源消息代理。RabbitMQ重量轻，易于部署在云端和云端。它支持多种消息传递协议。RabbitMQ可以部署在分布式和联合的配置中，以满足高规模，高可用性要求。RabbitMQ运行在许多操作系统和云环境中，为大多数流行的语言提供了广泛的开发工具。<br><a href="http://www.rabbitmq.com/" target="_blank" rel="noopener">官网</a></p><a id="more"></a><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><h2 id="服务部署"><a href="#服务部署" class="headerlink" title="服务部署"></a>服务部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS 6系列</span></span><br><span class="line"><span class="comment"># yum install -y epel-release</span></span><br><span class="line"><span class="comment"># yum install -y rabbitmq-server</span></span><br><span class="line"><span class="comment"># /usr/lib/rabbitmq/bin/rabbitmq-plugins list</span></span><br><span class="line"><span class="comment"># /usr/lib/rabbitmq/bin/rabbitmq-plugins enable rabbitmq_management</span></span><br><span class="line"><span class="comment"># /etc/init.d/rabbitmq-server start</span></span><br><span class="line"><span class="comment"># chkconfig rabbitmq-server on</span></span><br><span class="line"><span class="comment"># rabbitmqctl list_queues</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS 7系列</span></span><br><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span></span><br><span class="line"><span class="comment"># yum install -y bash-completion</span></span><br><span class="line"><span class="comment"># yum install -y erlang</span></span><br><span class="line"><span class="comment"># yum install -y rabbitmq-server</span></span><br><span class="line"><span class="comment"># systemctl start rabbitmq-server.service</span></span><br><span class="line"><span class="comment"># systemctl enable rabbitmq-server.service</span></span><br></pre></td></tr></table></figure><h2 id="相关端口说明"><a href="#相关端口说明" class="headerlink" title="相关端口说明"></a>相关端口说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># netstat -tunlp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:25672           0.0.0.0:*               LISTEN      2751/beam</span><br><span class="line">tcp        0      0 0.0.0.0:4369            0.0.0.0:*               LISTEN      2768/epmd</span><br><span class="line">tcp6       0      0 :::5672                 :::*                    LISTEN      2751/beam</span><br><span class="line">tcp6       0      0 :::4369                 :::*                    LISTEN      2768/epmd</span><br></pre></td></tr></table></figure><p>4369：RabbitMQ节点和CLI工具使用的对等发现服务<br>5672,5671：由AMQP 0-9-1和1.0客户端使用，没有和使用TLS<br>25672：由Erlang分配用于节点间和CLI工具通信，并且从动态范围（默认情况下限于单个端口，计算为AMQP端口+20000）分配。详情请参阅联网指南。<br>15672：HTTP API客户端和rabbitmqadmin（仅当管理插件启用时）<br>61613,61614：STOMP客户端没有和使用TLS（只有STOMP插件已启用）<br>1883，8883：（MQTT客户端没有和TLS，如果MQTT插件已启用<br>15674：STOMP-over-WebSockets客户端（仅在启用了Web STOMP插件的情况下）<br>15675：MQTT-over-WebSockets客户端（仅在启用了Web MQTT插件的情况下）</p><h2 id="RabbitMQ插件"><a href="#RabbitMQ插件" class="headerlink" title="RabbitMQ插件"></a>RabbitMQ插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /usr/lib/rabbitmq/bin/rabbitmq-plugins list</span></span><br><span class="line">[ ] amqp_client                       3.3.5</span><br><span class="line">[ ] cowboy                            0.5.0-rmq3.3.5-git4b93c2d</span><br><span class="line">[ ] eldap                             3.3.5-gite309de4</span><br><span class="line">[ ] mochiweb                          2.7.0-rmq3.3.5-git680dba8</span><br><span class="line">[ ] rabbitmq_amqp1_0                  3.3.5</span><br><span class="line">[ ] rabbitmq_auth_backend_ldap        3.3.5</span><br><span class="line">[ ] rabbitmq_auth_mechanism_ssl       3.3.5</span><br><span class="line">[ ] rabbitmq_consistent_hash_exchange 3.3.5</span><br><span class="line">[ ] rabbitmq_federation               3.3.5</span><br><span class="line">[ ] rabbitmq_federation_management    3.3.5</span><br><span class="line">[ ] rabbitmq_management               3.3.5</span><br><span class="line">[ ] rabbitmq_management_agent         3.3.5</span><br><span class="line">[ ] rabbitmq_management_visualiser    3.3.5</span><br><span class="line">[ ] rabbitmq_mqtt                     3.3.5</span><br><span class="line">[ ] rabbitmq_shovel                   3.3.5</span><br><span class="line">[ ] rabbitmq_shovel_management        3.3.5</span><br><span class="line">[ ] rabbitmq_stomp                    3.3.5</span><br><span class="line">[ ] rabbitmq_test                     3.3.5</span><br><span class="line">[ ] rabbitmq_tracing                  3.3.5</span><br><span class="line">[ ] rabbitmq_web_dispatch             3.3.5</span><br><span class="line">[ ] rabbitmq_web_stomp                3.3.5</span><br><span class="line">[ ] rabbitmq_web_stomp_examples       3.3.5</span><br><span class="line">[ ] sockjs                            0.3.4-rmq3.3.5-git3132eb9</span><br><span class="line">[ ] webmachine                        1.10.3-rmq3.3.5-gite9359c7</span><br><span class="line"><span class="comment"># /usr/lib/rabbitmq/bin/rabbitmq-plugins enable rabbitmq_management</span></span><br><span class="line">The following plugins have been enabled:</span><br><span class="line">  mochiweb</span><br><span class="line">  webmachine</span><br><span class="line">  rabbitmq_web_dispatch</span><br><span class="line">  amqp_client</span><br><span class="line">  rabbitmq_management_agent</span><br><span class="line">  rabbitmq_management</span><br><span class="line">Plugin configuration has changed. Restart RabbitMQ <span class="keyword">for</span> changes to take effect.</span><br><span class="line"><span class="comment"># /usr/lib/rabbitmq/bin/rabbitmq-plugins list</span></span><br><span class="line">[e] amqp_client                       3.3.5</span><br><span class="line">[ ] cowboy                            0.5.0-rmq3.3.5-git4b93c2d</span><br><span class="line">[ ] eldap                             3.3.5-gite309de4</span><br><span class="line">[e] mochiweb                          2.7.0-rmq3.3.5-git680dba8</span><br><span class="line">[ ] rabbitmq_amqp1_0                  3.3.5</span><br><span class="line">[ ] rabbitmq_auth_backend_ldap        3.3.5</span><br><span class="line">[ ] rabbitmq_auth_mechanism_ssl       3.3.5</span><br><span class="line">[ ] rabbitmq_consistent_hash_exchange 3.3.5</span><br><span class="line">[ ] rabbitmq_federation               3.3.5</span><br><span class="line">[ ] rabbitmq_federation_management    3.3.5</span><br><span class="line">[E] rabbitmq_management               3.3.5</span><br><span class="line">[e] rabbitmq_management_agent         3.3.5</span><br><span class="line">[ ] rabbitmq_management_visualiser    3.3.5</span><br><span class="line">[ ] rabbitmq_mqtt                     3.3.5</span><br><span class="line">[ ] rabbitmq_shovel                   3.3.5</span><br><span class="line">[ ] rabbitmq_shovel_management        3.3.5</span><br><span class="line">[ ] rabbitmq_stomp                    3.3.5</span><br><span class="line">[ ] rabbitmq_test                     3.3.5</span><br><span class="line">[ ] rabbitmq_tracing                  3.3.5</span><br><span class="line">[e] rabbitmq_web_dispatch             3.3.5</span><br><span class="line">[ ] rabbitmq_web_stomp                3.3.5</span><br><span class="line">[ ] rabbitmq_web_stomp_examples       3.3.5</span><br><span class="line">[ ] sockjs                            0.3.4-rmq3.3.5-git3132eb9</span><br><span class="line">[e] webmachine                        1.10.3-rmq3.3.5-gite9359c7</span><br><span class="line"><span class="comment"># systemctl restart rabbitmq-server.service</span></span><br><span class="line"><span class="comment"># netstat -tunlp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:25672           0.0.0.0:*               LISTEN      20622/beam</span><br><span class="line">tcp        0      0 0.0.0.0:4369            0.0.0.0:*               LISTEN      20640/epmd</span><br><span class="line">tcp        0      0 0.0.0.0:15672           0.0.0.0:*               LISTEN      20622/beam</span><br><span class="line">tcp6       0      0 :::5672                 :::*                    LISTEN      20622/beam</span><br><span class="line">tcp6       0      0 :::4369                 :::*                    LISTEN      20640/epmd</span><br></pre></td></tr></table></figure><p>访问管理地址：<a href="http://192.168.200.117:15672/" target="_blank" rel="noopener">http://192.168.200.117:15672/</a><br>Username及Password为guest<br><img src="/archives/c251117f/01.png" alt></p><h1 id="API管理"><a href="#API管理" class="headerlink" title="API管理"></a>API管理</h1><p><a href="http://192.168.200.117:15672/api/" target="_blank" rel="noopener">http://192.168.200.117:15672/api/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c251117f.html">https://mds1455975151.github.io/archives/c251117f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序开发教程之开发环境搭建</title>
      <link href="/archives/5bb6693c.html"/>
      <url>/archives/5bb6693c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5bb6693c.html">https://mds1455975151.github.io/archives/5bb6693c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> 开发环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wireshark抓包教程系列-捕获实时网络数据</title>
      <link href="/archives/508f78f8.html"/>
      <url>/archives/508f78f8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Wireshark抓包教程系列-捕获实时网络数据</p></blockquote><h1 id="捕获数据过滤"><a href="#捕获数据过滤" class="headerlink" title="捕获数据过滤"></a>捕获数据过滤</h1><p>可以过滤的数据类型及过滤表达式的书写</p><h2 id="针对协议过滤"><a href="#针对协议过滤" class="headerlink" title="针对协议过滤"></a>针对协议过滤</h2><p>1、仅过滤某种协议数据包，直接输入协议名称即可<br>例如：http,tcp,udp,dns等等<br><img src="/archives/508f78f8/01.png" alt><br>2、需要捕获多种协议数据包，需要对协议进行逻辑组合<br>例如：http or dns<br><img src="/archives/508f78f8/02.png" alt><br>3、排除某种协议数据包<br>例如：not tcp 或者 ! tcp 两种方式均可<br><img src="/archives/508f78f8/03.png" alt><br><img src="/archives/508f78f8/04.png" alt></p><h2 id="针对IP过滤"><a href="#针对IP过滤" class="headerlink" title="针对IP过滤"></a>针对IP过滤</h2><p>1、对源地址为192.168.200.103的包进行过滤，即抓取源地址满足要求的包<br>表达式：ip.src == 192.168.200.103<br>2、对目的地址为192.168.200.103的包的过滤，即抓取目的地址满足要求的包。<br>表达式：ip.dst == 192.168.200.103<br>3、对源或者目的地址为192.168.200.103的包的过滤，即抓取满足源或者目的地址的ip地址是192.168.200.103的包。<br>表达式：ip.addr == 192.168.200.103,或者 ip.src == 192.168.200.103 or ip.dst == 192.168.200.103<br>4、要排除以上的数据包，我们只需要将其用括号囊括，然后使用 “!” 即可。<br>!(表达式)</p><h2 id="针对端口过滤-视协议而定"><a href="#针对端口过滤-视协议而定" class="headerlink" title="针对端口过滤(视协议而定)"></a>针对端口过滤(视协议而定)</h2><p>捕获某一端口的数据包<br>表达式：tcp.port == 80</p><h2 id="逻辑运算符使用"><a href="#逻辑运算符使用" class="headerlink" title="逻辑运算符使用"></a>逻辑运算符使用</h2><p>协议和IP进行组合<br>表达式：tcp and ip.dst == 192.168.200.103</p><h1 id="实践案例"><a href="#实践案例" class="headerlink" title="实践案例"></a>实践案例</h1><p>1、显示除了icmp以外的所有数据包<br>表达式：! icmp<br>2、假设本机地址192.168.200.103，查看所有本机发出的dns查询请求<br>表达式：dns and ip.src == 192.168.200.103<br><img src="/archives/508f78f8/05.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/508f78f8.html">https://mds1455975151.github.io/archives/508f78f8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wireshark </tag>
            
            <tag> 抓包教程 </tag>
            
            <tag> 捕获实时网络数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wireshark抓包教程系列:基本认识</title>
      <link href="/archives/3e79de9e.html"/>
      <url>/archives/3e79de9e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Wireshark也许是当今最好的开源数据包分析器之一</p></blockquote><a id="more"></a><h1 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Wireshark是一个网络数据包分析器。网络数据包分析器将尝试捕获网络数据包，并尝试尽可能详细地显示该数据包数据。你可以把网络数据包分析仪想象成一个测量设备，用来检查网线内部发生了什么事情，就像电工用电压表来检查电缆里面发生了什么（当然是在更高的层次上）。过去，这些工具要么非常昂贵，要么私有，要么两者兼而有之。但是，随着Wireshark的到来，所有这一切都改变了。Wireshark也许是当今最好的开源数据包分析器之一。<br><a href="https://www.wireshark.org/" target="_blank" rel="noopener">官网</a><br><a href="https://www.wireshark.org/docs/wsug_html_chunked/" target="_blank" rel="noopener">用户指南</a></p><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><ul><li>网络管理员使用它来解决网络问题</li><li>网络安全工程师用它来检查安全问题</li><li>开发人员使用它来调试协议实现</li><li>人们用它来学习网络协议内部</li></ul><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>支持window及Unix</p><h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><h2 id="主界面"><a href="#主界面" class="headerlink" title="主界面"></a>主界面</h2><p><img src="/archives/3e79de9e/ws-main.png" alt><br>包含几个主要部分：<br>1、菜单<br>2、主工具栏：提供快速访问常用从菜单中使用的工具<br>3、过滤器的工具栏：提供了一种直接操纵当前使用的显示过滤器<br>4、分组列表窗口：显示捕获的每个分组的摘要<br>5、数据包详细信息窗口：显示更详细的数据包列表窗格中选择的包<br>6、包字节窗口：在分组列表窗格中选择的包显示数据，并突出显示在所述分组的信息窗格中选择的字段<br>7、状态栏：有关当前程序状态和所捕获的数据的一些详细的信息</p><h2 id="文件菜单"><a href="#文件菜单" class="headerlink" title="文件菜单"></a>文件菜单</h2><p><img src="/archives/3e79de9e/ws-file-menu.png" alt></p><h2 id="查看菜单"><a href="#查看菜单" class="headerlink" title="查看菜单"></a>查看菜单</h2><p><img src="/archives/3e79de9e/ws-view-menu.png" alt></p><h2 id="跳转菜单"><a href="#跳转菜单" class="headerlink" title="跳转菜单"></a>跳转菜单</h2><p><img src="/archives/3e79de9e/ws-go-menu.png" alt></p><h2 id="捕获菜单"><a href="#捕获菜单" class="headerlink" title="捕获菜单"></a>捕获菜单</h2><p><img src="/archives/3e79de9e/ws-capture-menu.png" alt></p><h2 id="分析菜单"><a href="#分析菜单" class="headerlink" title="分析菜单"></a>分析菜单</h2><p><img src="/archives/3e79de9e/ws-analyze-menu.png" alt></p><h2 id="统计菜单"><a href="#统计菜单" class="headerlink" title="统计菜单"></a>统计菜单</h2><p><img src="/archives/3e79de9e/ws-statistics-menu.png" alt></p><h2 id="电话菜单"><a href="#电话菜单" class="headerlink" title="电话菜单"></a>电话菜单</h2><p><img src="/archives/3e79de9e/ws-telephony-menu.png" alt></p><h2 id="工具菜单"><a href="#工具菜单" class="headerlink" title="工具菜单"></a>工具菜单</h2><p><img src="/archives/3e79de9e/ws-tools-menu.png" alt></p><h2 id="帮助菜单"><a href="#帮助菜单" class="headerlink" title="帮助菜单"></a>帮助菜单</h2><p><img src="/archives/3e79de9e/ws-help-menu.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/3e79de9e.html">https://mds1455975151.github.io/archives/3e79de9e.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Wireshark </tag>
            
            <tag> 抓包教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何查看Python的内置函数</title>
      <link href="/archives/71170a19.html"/>
      <url>/archives/71170a19.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>经常调用的时候不知道python当前版本的内置函数是哪些，可以用下面的指令查看：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python</span><br><span class="line">Python <span class="number">2.7</span><span class="number">.11</span> (v2<span class="number">.7</span><span class="number">.11</span>:<span class="number">6</span>d1b6a68f775, Dec  <span class="number">5</span> <span class="number">2015</span>, <span class="number">20</span>:<span class="number">32</span>:<span class="number">19</span>) [MSC v<span class="number">.1500</span> <span class="number">32</span> bit (</span><br><span class="line">Intel)] on win32</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dir(sys.modules[<span class="string">'__builtin__'</span>])</span><br><span class="line">[<span class="string">'ArithmeticError'</span>, <span class="string">'AssertionError'</span>, <span class="string">'AttributeError'</span>, <span class="string">'BaseException'</span>, <span class="string">'BufferError'</span>, <span class="string">'BytesWarning'</span>, <span class="string">'DeprecationWarning'</span>, <span class="string">'EOFError'</span>, <span class="string">'Ellipsis'</span>, <span class="string">'EnvironmentError'</span>, <span class="string">'Exception'</span>, <span class="string">'False'</span>, <span class="string">'FloatingPointError'</span>, <span class="string">'FutureWarning'</span>, <span class="string">'GeneratorExit'</span>, <span class="string">'IOError'</span>, <span class="string">'ImportError'</span>, <span class="string">'ImportWarning'</span>, <span class="string">'IndentationError'</span>, <span class="string">'IndexError'</span>, <span class="string">'KeyError'</span>, <span class="string">'KeyboardInterrupt'</span>, <span class="string">'LookupError'</span>, <span class="string">'MemoryError'</span>, <span class="string">'NameError'</span>,<span class="string">'None'</span>, <span class="string">'NotImplemented'</span>, <span class="string">'NotImplementedError'</span>, <span class="string">'OSError'</span>, <span class="string">'OverflowError'</span>, <span class="string">'PendingDeprecationWarning'</span>, <span class="string">'ReferenceError'</span>, <span class="string">'RuntimeError'</span>, <span class="string">'RuntimeWarning'</span>, <span class="string">'StandardError'</span>, <span class="string">'StopIteration'</span>, <span class="string">'SyntaxError'</span>, <span class="string">'SyntaxWarning'</span>, <span class="string">'SystemError'</span>,<span class="string">'SystemExit'</span>, <span class="string">'TabError'</span>, <span class="string">'True'</span>, <span class="string">'TypeError'</span>, <span class="string">'UnboundLocalError'</span>, <span class="string">'UnicodeDecodeError'</span>, <span class="string">'UnicodeEncodeError'</span>, <span class="string">'UnicodeError'</span>, <span class="string">'UnicodeTranslateError'</span>, <span class="string">'UnicodeWarning'</span>, <span class="string">'UserWarning'</span>, <span class="string">'ValueError'</span>, <span class="string">'Warning'</span>, <span class="string">'WindowsError'</span>, <span class="string">'ZeroDivisionError'</span>, <span class="string">'__debug__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__import__'</span>, <span class="string">'__name__'</span>, <span class="string">'__package__'</span>, <span class="string">'abs'</span>,<span class="string">'all'</span>, <span class="string">'any'</span>, <span class="string">'apply'</span>, <span class="string">'basestring'</span>, <span class="string">'bin'</span>, <span class="string">'bool'</span>, <span class="string">'buffer'</span>, <span class="string">'bytearray'</span>, <span class="string">'bytes'</span>, <span class="string">'callable'</span>, <span class="string">'chr'</span>, <span class="string">'classmethod'</span>, <span class="string">'cmp'</span>, <span class="string">'coerce'</span>, <span class="string">'compile'</span>, <span class="string">'complex'</span>, <span class="string">'copyright'</span>, <span class="string">'credits'</span>, <span class="string">'delattr'</span>, <span class="string">'dict'</span>, <span class="string">'dir'</span>, <span class="string">'divmod'</span>, <span class="string">'enumerate'</span>, <span class="string">'eval'</span>, <span class="string">'execfile'</span>, <span class="string">'exit'</span>, <span class="string">'file'</span>, <span class="string">'filter'</span>, <span class="string">'float'</span>, <span class="string">'format'</span>, <span class="string">'frozenset'</span>, <span class="string">'getattr'</span>, <span class="string">'globals'</span>, <span class="string">'hasattr'</span>, <span class="string">'hash'</span>, <span class="string">'help'</span>, <span class="string">'hex'</span>, <span class="string">'id'</span>, <span class="string">'input'</span>, <span class="string">'int'</span>, <span class="string">'intern'</span>, <span class="string">'isinstance'</span>, <span class="string">'issubclass'</span>, <span class="string">'iter'</span>, <span class="string">'len'</span>, <span class="string">'license'</span>, <span class="string">'list'</span>, <span class="string">'locals'</span>, <span class="string">'long'</span>, <span class="string">'map'</span>, <span class="string">'max'</span>, <span class="string">'memoryview'</span>, <span class="string">'min'</span>, <span class="string">'next'</span>, <span class="string">'object'</span>, <span class="string">'oct'</span>, <span class="string">'open'</span>, <span class="string">'ord'</span>, <span class="string">'pow'</span>, <span class="string">'print'</span>, <span class="string">'property'</span>, <span class="string">'quit'</span>, <span class="string">'range'</span>, <span class="string">'raw_input'</span>, <span class="string">'reduce'</span>, <span class="string">'reload'</span>, <span class="string">'repr'</span>, <span class="string">'reversed'</span>, <span class="string">'round'</span>, <span class="string">'set'</span>, <span class="string">'setattr'</span>, <span class="string">'slice'</span>, <span class="string">'sorted'</span>, <span class="string">'staticmethod'</span>, <span class="string">'str'</span>, <span class="string">'sum'</span>, <span class="string">'super'</span>, <span class="string">'tuple'</span>, <span class="string">'type'</span>, <span class="string">'unichr'</span>, <span class="string">'unicode'</span>, <span class="string">'vars'</span>, <span class="string">'xrange'</span>, <span class="string">'zip'</span>]</span><br></pre></td></tr></table></figure><p>常见的内置函数又分为如下几类，详细介绍参考：<a href="http://jianfeihit.iteye.com/blog/1835272" target="_blank" rel="noopener">http://jianfeihit.iteye.com/blog/1835272</a></p><p>总结：<br>　　内置函数，一般都是因为使用频率比较频繁或者是元操作，所以通过内置函数的形式提供出来，通过对python的内置函数分类分析可以看出来：基本的数据操 作基本都是一些数学运算（当然除了加减乘除）、逻辑操作、集合操作、基本IO操作，然后就是对于语言自身的反射操作，还有就是字符串操作，也是比较常用 的，尤其需要注意的是反射操作。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/71170a19.html">https://mds1455975151.github.io/archives/71170a19.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 内置函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PyChram使用技巧总结</title>
      <link href="/archives/fda6f593.html"/>
      <url>/archives/fda6f593.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Python IDE for Professional Developers</p><a id="more"></a><h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><p><a href="http://www.jetbrains.com/pycharm/" target="_blank" rel="noopener">官网</a><br>选择Professional或者Community版本<br>选择Professional版本需要激活，<a href="http://idea.lanyus.com/" target="_blank" rel="noopener">激活地址</a>.</p><h1 id="设置模板"><a href="#设置模板" class="headerlink" title="设置模板"></a>设置模板</h1><p>File–&gt;setting–&gt;Editor–&gt;File and Code Templates–&gt;选中Python Script，在右边的空格处如添加自定义内容，以后每次新建py文件时，行首会自动填充这两行。<br>案例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br></pre></td></tr></table></figure><p><img src="/archives/fda6f593/01.png" alt></p><h1 id="显示行号"><a href="#显示行号" class="headerlink" title="显示行号"></a>显示行号</h1><p>File–&gt;setting–&gt;Editor–&gt;Genera–&gt;Apperance–&gt;勾选 Show line numbers。 点击 apply ，ok</p><h1 id="切换不同版本的Python解释器"><a href="#切换不同版本的Python解释器" class="headerlink" title="切换不同版本的Python解释器"></a>切换不同版本的Python解释器</h1><p>File–&gt;setting–&gt;Project:untitled1–&gt;Project Interpreter,最右边会有当前解释器的列表，点击齿轮图标，选择Add Local，然后指定2.7版Python安装目录即可(需提前安装2.7版本Python)，然后应用，确定即可。<br><img src="/archives/fda6f593/02.png" alt></p><h1 id="文件重命名"><a href="#文件重命名" class="headerlink" title="文件重命名"></a>文件重命名</h1><p>右击要重命名的文件-&gt;refactor-&gt;rename</p><h1 id="复制文件路径"><a href="#复制文件路径" class="headerlink" title="复制文件路径"></a>复制文件路径</h1><p>左侧文件列表右键选中的文件–&gt;Copy Path</p><h1 id="快速定位"><a href="#快速定位" class="headerlink" title="快速定位"></a>快速定位</h1><p>ctrl + 鼠标左键，点击在源文件中展开</p><h1 id="Python模块安装"><a href="#Python模块安装" class="headerlink" title="Python模块安装"></a>Python模块安装</h1><p>File-&gt;settings-&gt;Prgject:python-&gt;project interpreter 安装、升级、卸载模块均可</p><h1 id="在PyChram中直接浏览文件目录"><a href="#在PyChram中直接浏览文件目录" class="headerlink" title="在PyChram中直接浏览文件目录"></a>在PyChram中直接浏览文件目录</h1><p>右击文件选择show in explorer</p><h1 id="断点调试"><a href="#断点调试" class="headerlink" title="断点调试"></a>断点调试</h1><p>1、打断点<br>2、使用debug模式运行程序 run-&gt;Debug</p><h1 id="查看结构"><a href="#查看结构" class="headerlink" title="查看结构"></a>查看结构</h1><p>IDE左侧栏Structure查看当前项目结构</p><h1 id="查看文件修改前后的对比"><a href="#查看文件修改前后的对比" class="headerlink" title="查看文件修改前后的对比"></a>查看文件修改前后的对比</h1><p>文件中右键–&gt;Local History–&gt;show history</p><h1 id="PyChram设置字体大小"><a href="#PyChram设置字体大小" class="headerlink" title="PyChram设置字体大小"></a>PyChram设置字体大小</h1><p>Settings–&gt;Editor–&gt;Colors &amp; Fonts–&gt;Font,然后在size那里调整。注意，要先保存一个新的Scheme，才能调整字体大小。</p><h1 id="运行当前的-py文件"><a href="#运行当前的-py文件" class="headerlink" title="运行当前的.py文件"></a>运行当前的.py文件</h1><p>File-&gt;setting-&gt;keymap-&gt;other-&gt;run context configuration，windows下设置为Ctrl+R，mac下设置command+R</p><h1 id="格式化代码-经常用"><a href="#格式化代码-经常用" class="headerlink" title="格式化代码(经常用)"></a>格式化代码(经常用)</h1><p>File-&gt;setting-&gt;keymap-&gt;main menu-&gt;code-&gt;reformat code，设置为 Ctrl+shift+L</p><h1 id="字符集编码设置为UTF-8"><a href="#字符集编码设置为UTF-8" class="headerlink" title="字符集编码设置为UTF-8"></a>字符集编码设置为UTF-8</h1><p>File–&gt;setting–&gt;Editor–&gt;File Encodings–&gt;选择–&gt;应用</p><h1 id="添加插件"><a href="#添加插件" class="headerlink" title="添加插件"></a>添加插件</h1><p>File–&gt;Plugins–&gt;选择并安装</p><h1 id="导出、导入自定义的配置"><a href="#导出、导入自定义的配置" class="headerlink" title="导出、导入自定义的配置"></a>导出、导入自定义的配置</h1><p>File–&gt;Export Settings、Import Settings</p><h1 id="IDE右下角能看到一些有用的信息："><a href="#IDE右下角能看到一些有用的信息：" class="headerlink" title="IDE右下角能看到一些有用的信息："></a>IDE右下角能看到一些有用的信息：</h1><p>光标当前在第几行第几个字符，当前回车换行，当前编码类型，当前git分支<br><img src="/archives/fda6f593/03.png" alt></p><h1 id="连接本地数据库"><a href="#连接本地数据库" class="headerlink" title="连接本地数据库"></a>连接本地数据库</h1><p>IDE右侧边栏–&gt;Database</p><h1 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">alt+ctrl+s     　　    # 打开设置界面</span><br><span class="line">tab            　　　　 # 选择要缩进的代码，按键缩进</span><br><span class="line">shift+tab       　　   # 选择要缩进的代码，按键增加</span><br><span class="line">ctrl+d        　　     # 复制本行粘贴到下一行</span><br><span class="line">ctrl+/                 # 注释/取消注释</span><br><span class="line">Ctrl + R               # 替换</span><br><span class="line">Ctrl + F               # 查找</span><br><span class="line">Ctrl + Shift + F       # 全局查找</span><br><span class="line">Ctrl + Shift + R       # 全局替换</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fda6f593.html">https://mds1455975151.github.io/archives/fda6f593.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PyChram </tag>
            
            <tag> 使用技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏行业如何做竞品分析</title>
      <link href="/archives/5d733b79.html"/>
      <url>/archives/5d733b79.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏行业如何做好竞品分析?</p></blockquote><a id="more"></a><ul><li><a href="#产品">产品</a></li><li><a href="#运营">运营</a></li><li><a href="#市场商务">市场商务</a></li><li><a href="#职能部门">职能部门</a></li><li><a href="#公司层面">公司层面</a></li><li><a href="#参考资料">参考资料</a></li></ul><h1 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h1><p>1、该公司自研和独代、联运的产品分别有哪些，比重如何（部分公开）？<br>2、自研团队的规模和人员构成/水平层次，游戏数量及类型（部分会公开，部分需找内部资料）？<br>3、自研团队的薪资、福利水平如何，团队内策划/程序/美术人员分工协作如何，是否可整体挖角或单挖？<br>4、公司对各自研团队或产品的资源投入、预期如何（年度规划中会体现）？<br>5、如产品已上线，当前存在的不足有哪些？后期产品版本/内容规划如何？</p><h1 id="运营"><a href="#运营" class="headerlink" title="运营"></a>运营</h1><p>1、该公司目前在运营的游戏有几款，各自开服数、开服频率/周期（公开数据）；<br>2、各游戏在线数、ARPU、营收情况、用户活跃度、流失率等（公开数据有夸大嫌疑）；<br>3、公司对各游戏整体的运营策略和资源投入、分配，各运营小组/团队的构成和公司的地位；<br>4、公司运营及市场计划是怎样制定的，各个职能部门是如何配合的；<br>5、游戏服务器、机房/IDC、线路是如何选型的？如何确保高性价比（技术分析）；</p><h1 id="市场商务"><a href="#市场商务" class="headerlink" title="市场商务"></a>市场商务</h1><p>1、该公司的PR及传播规律，最主要的合作网站/媒体，以及新闻/软文发布规律（游戏魂论坛有完美世界公司的相关下载）；<br>2、广告投放渠道、投放金额、广告模式和主要投放网站（第三方广告公司可拿到）；<br>3、该公司及其产品、领导人在新闻媒体上面的曝光率、关注度和各项指数、口碑等；<br>4、商务人员的数量和主要的工作职责，是以谈出去为主还是接进来为主，与产品和运营如何配合；<br>5、港澳台市场及海外市场的开拓情况、以及该公司各产品在各国的占有率和收入情况；</p><h1 id="职能部门"><a href="#职能部门" class="headerlink" title="职能部门"></a>职能部门</h1><p>1、公司的财务及人事流程是否足够快速、高效（金山软件需5轮面试，前后近1月…）？<br>2、公司技术、运维团队是否有互联网从业经验（之前某公司相关人员电信转行而来，后果可想而知）；</p><h1 id="公司层面"><a href="#公司层面" class="headerlink" title="公司层面"></a>公司层面</h1><p>1、公司所在地是否有税收或其他方面的减免？租用的办公地点还是自己买的楼？<br>2、新公司还是老公司（很多老公司都有大/老公司病）？公司的资本构成（主要股东或者投资人）如何、有无政府背景？<br>3、企业文化如何？氛围如何？（虽然这个东西很虚，但北上广深明显好于成都、杭州等）<br>4、员工是否有股票或者期权？交通车及娱乐健身设施、免费茶点以及培训、年假、升值加薪等制度是否有竞争力？<br>5、老板性格及工作、创业历程？是否有眼光、前瞻性、魄力和人格魅力，对员工是否足够好？</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.zhihu.com/question/20368344" target="_blank" rel="noopener">作为游戏运营商（网页游戏），如何分析竞争对手？</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5d733b79.html">https://mds1455975151.github.io/archives/5d733b79.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>游戏策划书籍</title>
      <link href="/archives/fa2d2edd.html"/>
      <url>/archives/fa2d2edd.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏策划书籍推荐</p></blockquote><a id="more"></a><p>1.游戏设计—原理与实践<br>2.全景揭秘游戏设计艺术<br>3.游戏关卡设计<br>4.游戏设计工作坊<br>5.剑与电—角色扮演游戏设计艺术<br>6.在线游戏互动性理论<br>7.游戏设计的艺术：一本关于透镜的书</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fa2d2edd.html">https://mds1455975151.github.io/archives/fa2d2edd.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 策划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏行业各类模板案例</title>
      <link href="/archives/782e5917.html"/>
      <url>/archives/782e5917.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏行业各类文档模板案例</p></blockquote><a id="more"></a><ul><li><a href="#游戏行业实用计划模板">游戏行业实用计划模板</a></li><li><a href="#改进版本">改进版本</a></li></ul><h1 id="游戏行业实用计划模板"><a href="#游戏行业实用计划模板" class="headerlink" title="游戏行业实用计划模板"></a>游戏行业实用计划模板</h1><p>游戏业务经常需要做各种活动的计划，这些活动基本都是跨部分协作的，为了更好的管理项目进度，当时我们采用了完美世界公司提供的标准模板。<br>首先说说计划总表：该表第一行为月份，第二行为天，橙色背景色标注的为周末，红色标注的为游戏测试当天。第1列按照各个业务部门/任务组划分。表格中间的区域分别标记处任务以及该任务的起止时间。<br><img src="/archives/782e5917/%E3%80%8AXXX%E3%80%8B%E6%8A%80%E6%9C%AF%E6%B5%8B%E8%AF%95-%E8%AE%A1%E5%88%92%E6%80%BB%E8%A1%A8.png" alt><br>这个表有点像甘特图，但也不完全像。通过该表可以清晰直观的反映出整个计划的前后依赖关系和时间节点情况，但不足也很明显：每项任务没有对应的负责人和简要的说明，需要点击第一列跳转到对应的sheet里面查看详细情况，具体如下图所示：<br><img src="/archives/782e5917/%E3%80%8AXXX%E3%80%8B%E6%8A%80%E6%9C%AF%E6%B5%8B%E8%AF%95-%E9%A1%B9%E7%9B%AE%E7%BB%84%E4%BB%BB%E5%8A%A1%E8%A1%A8.png" alt></p><h1 id="改进版本"><a href="#改进版本" class="headerlink" title="改进版本"></a>改进版本</h1><p>表左侧部分，每项任务在右侧部分有对应，所以无需标出任务名，只需要用绿色标记出起止时间即可。为了便于浏览不至于经常跳行，每个部门的分解任务分别采用了灰色和白色的单元格底色，右侧任务及说明/责任人部分的表头采用了深色填充色，以便和左边的时间做视觉上的分割。<br>在时间跨度不超过1个月且分解任务不超过35条的情况下，可以完美的打印到1张A4纸上面，标准的一页纸计划书。<br><img src="/archives/782e5917/%E6%94%B9%E8%89%AF%E5%90%8E%E7%9A%84%E4%B8%80%E9%A1%B5%E7%BA%B8%E8%AE%A1%E5%88%92%E4%B9%A6.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/782e5917.html">https://mds1455975151.github.io/archives/782e5917.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 文档模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>运维摘抄之赵成的运维体系管理课</title>
      <link href="/archives/6cf00eae.html"/>
      <url>/archives/6cf00eae.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>带给你不一样的运维思考</p></blockquote><a id="more"></a><h1 id="应用运维体系建设"><a href="#应用运维体系建设" class="headerlink" title="应用运维体系建设"></a>应用运维体系建设</h1><ul><li>为什么Netflix没有运维岗位？</li><li>微服务架构时代，运维体系建设为什么要以“应用”为核心？</li><li>如何建立应用标准化体系和模型？</li><li>如何建立基础架构标准化及服务化体系？</li><li>如何从生命周期的视角看待应用运维体系建设？</li><li>如何建立应用及集群服务分组建模?</li><li>有了CMDB，为什么还需要应用配置管理</li><li>如何基于标准化模型和生命周期分解，开展运维自动化建设？</li><li>从Google CRE这个岗位谈谈做技术为什么要有服务心态？</li><li>如何打造更加适配微服务架构下的运维组织架构？</li><li>云计算和AI时代，运维应该如何做好转型？</li></ul><h1 id="效率和稳定性最佳实践"><a href="#效率和稳定性最佳实践" class="headerlink" title="效率和稳定性最佳实践"></a>效率和稳定性最佳实践</h1><ul><li>提升效率，为什么要持续交付？</li><li>持续交付：我们到底需要多少环境？它们有什么不同？</li><li>持续交付：我们应该如何做好繁琐的环境配置管理？</li><li>持续交付：我们应该如何做好项目需求分解？</li><li>持续交付：我们应该如何做好代码提交和分支管理？</li><li>持续交付：我们应该如何做好构建、部署和发布？</li><li>极端的业务场景下，如何保障业务稳定性？</li><li>稳定性保障：我们应该如何做好全链路跟踪？</li><li>稳定性保障：我们应该如何做好限流、降级和预案？</li><li>如何管理令人痛苦不堪的线上故障？</li><li>故障管理：我们应该如何做好故障定级和定责？</li><li>故障管理：我们应该如何做好故障复盘并减少推诿扯皮？</li></ul><h1 id="云计算时代的运维实践"><a href="#云计算时代的运维实践" class="headerlink" title="云计算时代的运维实践"></a>云计算时代的运维实践</h1><ul><li>为什么我们要选择上云？</li><li>为什么混合云是云计算时代的主流形态？</li><li>为什么我们要选择统一的CDN和云存储服务？</li><li>为什么我们建设静态化和二级CDN体系？</li><li>从Spring Cloud谈谈运维为什么要关注应用云化的趋势？</li><li>云计算时代，我们所说的弹性伸缩，弹的到底是什么？</li></ul><h1 id="个人成长记趋势热点剖析"><a href="#个人成长记趋势热点剖析" class="headerlink" title="个人成长记趋势热点剖析"></a>个人成长记趋势热点剖析</h1><ul><li>运维要懂产品和运营吗？</li><li>运维技术发展有哪些趋势？</li><li>个人成长：如何走上运维岗位的？</li><li>个人成长：从技术走向管理，如何转身？</li><li>个人成长：如何打造个人职业口碑和影响力？</li><li>热门概念、事件及技术探讨分析(如：AIOps等)</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/6cf00eae.html">https://mds1455975151.github.io/archives/6cf00eae.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维体系 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google浏览器插件推荐</title>
      <link href="/archives/288e52c4.html"/>
      <url>/archives/288e52c4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍几款使用的Google浏览器插件，可以有效的管理浏览器，提升工作效率。</p></blockquote><h1 id="The-QR-Code-Extension"><a href="#The-QR-Code-Extension" class="headerlink" title="The QR Code Extension"></a>The QR Code Extension</h1><p>功能：允许当前页面生成QR码，并使用网络摄像头扫描QR码。<br>效果展示：<br><img src="/archives/288e52c4/01.png" alt></p><h1 id="页面自动刷新"><a href="#页面自动刷新" class="headerlink" title="页面自动刷新"></a>页面自动刷新</h1><p>功能：自动刷新页面，可设置不同的时间间隔刷新指定页面。也支持只刷新成为背景页的网页，不影响当前页面的操作。当切换其他标签为最前窗口时才会开始自动刷新。<br>效果展示：<br><img src="/archives/288e52c4/03.png" alt></p><h1 id="快捷扩展管理"><a href="#快捷扩展管理" class="headerlink" title="快捷扩展管理"></a>快捷扩展管理</h1><p>功能：一键管理所有扩展，快速激活、禁用插件。<br>效果展示：<br><img src="/archives/288e52c4/02.png" alt></p><h1 id="AdBlock"><a href="#AdBlock" class="headerlink" title="AdBlock"></a>AdBlock</h1><p>功能：最受欢迎的Chrome扩展，拥有超过4000万用户！屏蔽整个互联网上的广告。<br>效果展示：<br><img src="/archives/288e52c4/04.png" alt></p><h1 id="其他推荐"><a href="#其他推荐" class="headerlink" title="其他推荐"></a>其他推荐</h1><p><a href="https://www.zhihu.com/question/19594682" target="_blank" rel="noopener">https://www.zhihu.com/question/19594682</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/288e52c4.html">https://mds1455975151.github.io/archives/288e52c4.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google浏览器 </tag>
            
            <tag> 谷歌插件 </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客之文章计数实现</title>
      <link href="/archives/437f9945.html"/>
      <url>/archives/437f9945.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>添加文章计数功能，实现文章数字统计、阅读时长统计功能</p></blockquote><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><p>使用<a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">hexo-wordcount</a>来实现以上功能.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure><p>实现以下功能：</p><ul><li>字数统计 WordCount</li><li>阅读时长预计 Min2Read</li><li>阅读速度 Set Reading Speed</li><li>总字数统计 TotalCount</li></ul><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>NexT主题默认已经集成了文章【字数统计】、【阅读时长】统计功能，如果我们需要使用，只需要在主题配置文件 _config.yml 中打开 wordcount 统计功能即可。如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Post wordcount display settings</span><br><span class="line"># Dependencies: https://github.com/willin/hexo-wordcount</span><br><span class="line">post_wordcount:</span><br><span class="line">  item_text: <span class="literal">true</span></span><br><span class="line">  wordcount: <span class="literal">false</span></span><br><span class="line">  min2read: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>但是调试过程中发现wordcount，min2read项设置true后，生成页面报错，最后参考其他资料自定义添加了该功能。<br>修改themes\next\layout_macro\post.swig模板，插入的代码以下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">         &#123;# LeanCould PageView #&#125;</span><br><span class="line">         &#123;% <span class="keyword">if</span> theme.leancloud_visitors.enable %&#125;</span><br><span class="line">            &lt;span id=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"leancloud_visitors"</span> data-flag-title=<span class="string">"&#123;&#123; post.title &#125;&#125;"</span>&gt;</span><br><span class="line"> &amp;nbsp; | &amp;nbsp;</span><br><span class="line">              &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-meta-item-icon"</span>&gt;</span><br><span class="line">                &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-eye"</span>&gt;&lt;<span class="regexp">/i&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>span&gt;</span><br><span class="line">              &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-meta-item-text"</span>&gt;&#123;&#123;__(<span class="string">'post.visitors'</span>)&#125;&#125; &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">              &lt;span class="leancloud-visitors-count"&gt;&lt;/</span>span&gt;</span><br><span class="line">             &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">         &#123;% endif %&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"># 以下部分为：字数统计、阅读时长插入代码</span></span><br><span class="line"><span class="regexp">         &lt;span class="post-time"&gt;</span></span><br><span class="line"><span class="regexp">   &amp;nbsp; | &amp;nbsp;</span></span><br><span class="line"><span class="regexp">           &lt;span class="post-meta-item-icon"&gt;</span></span><br><span class="line"><span class="regexp">             &lt;i class="fa fa-calendar-o"&gt;&lt;/i</span>&gt;</span><br><span class="line">           &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">           &lt;span class="post-meta-item-text"&gt;字数统计:&lt;/</span>span&gt;</span><br><span class="line">           &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-count"</span>&gt;&#123;&#123; wordcount(post.content) &#125;&#125;(字)&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">         &lt;/</span>span&gt;</span><br><span class="line"></span><br><span class="line">      &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-time"</span>&gt;</span><br><span class="line">   &amp;nbsp; | &amp;nbsp;</span><br><span class="line">           &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-meta-item-icon"</span>&gt;</span><br><span class="line">             &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-calendar-o"</span>&gt;&lt;<span class="regexp">/i&gt;</span></span><br><span class="line"><span class="regexp">           &lt;/</span>span&gt;</span><br><span class="line">           &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-meta-item-text"</span>&gt;阅读时长:&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">           &lt;span class="post-count"&gt;&#123;&#123; min2read(post.content) &#125;&#125;(分)&lt;/</span>span&gt;</span><br><span class="line"></span><br><span class="line">         &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp"># 以上部分为：字数统计、阅读时长插入代码</span></span><br></pre></td></tr></table></figure><h1 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h1><p><img src="/archives/437f9945/01.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/437f9945.html">https://mds1455975151.github.io/archives/437f9945.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 文章统计 </tag>
            
            <tag> 字数统计 </tag>
            
            <tag> 阅读时长 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成长</title>
      <link href="/archives/bcd278a6.html"/>
      <url>/archives/bcd278a6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>今天被大家18岁的照片刷屏了，18岁还在上高二吧，没有照片留下。趁这个机会找了找来北京的几年变化，算是有个交代，2018祝愿自己工作顺利，家人身体健康！！！</p></blockquote><p><img src="/archives/bcd278a6/2012.12.02-%E5%8C%97%E5%A4%A7.jpg" alt="2012.12.02-北大"><br><img src="/archives/bcd278a6/2013.03.09-%E5%9B%BD%E5%AE%B6%E5%A4%A7%E5%89%A7%E9%99%A2.jpg" alt><br><img src="/archives/bcd278a6/2013.07.20-%E5%85%AB%E5%A4%A7%E5%A4%84.jpg" alt><br><img src="/archives/bcd278a6/2013.09.04-%E5%90%8E%E6%B5%B7.jpg" alt><br><img src="/archives/bcd278a6/2013.10.20-%E6%AF%95%E4%B8%9A%E5%B7%A5%E4%BD%9C.jpg" alt><br><img src="/archives/bcd278a6/2017.06.12-%E9%9B%81%E6%A0%96%E6%B9%96.jpg" alt><br><img src="/archives/bcd278a6/2017.06.17-%E9%A6%99%E7%82%89%E5%B3%B0.jpg" alt><br><img src="/archives/bcd278a6/2017.07.22-%E9%9D%99%E7%BF%A0%E6%B9%96.jpg" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/bcd278a6.html">https://mds1455975151.github.io/archives/bcd278a6.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 成长 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows如何快速有效删除大文件</title>
      <link href="/archives/9607fc74.html"/>
      <url>/archives/9607fc74.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Windows下如何快速的删除大文件？</p></blockquote><p>1、使用Win+R或”开始”–”运行”调出cmd命令行窗口<br><img src="/archives/9607fc74/01.png" alt><br>2、切换到删除文档的目录下，执行如下操作<br><img src="/archives/9607fc74/02.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/9607fc74.html">https://mds1455975151.github.io/archives/9607fc74.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客Next主题个性设置集锦</title>
      <link href="/archives/40609c5b.html"/>
      <url>/archives/40609c5b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Hexo博客Next主题有哪些炫酷的页面效果？</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>目前已经收集验证过的特效18种，设置方法如下：</p><ul><li><a href="#前言">前言</a></li><li><a href="#页面添加fork-me-on-github功能">页面添加fork me on github功能</a></li><li><a href="#添加RSS">添加RSS</a></li><li><a href="#添加动态背景">添加动态背景</a></li><li><a href="#修改文章底部的带#号的标签">修改文章底部的带#号的标签</a></li><li><a href="#博文压缩">博文压缩</a></li><li><a href="#添加READMEmd文件">添加README.md文件</a></li><li><a href="#文章加密访问">文章加密访问</a></li><li><a href="#添加jiathis分享">添加jiathis分享</a></li><li><a href="#博文置顶">博文置顶</a></li><li><a href="#为博客加上萌萌的宠物">为博客加上萌萌的宠物</a></li><li><a href="#设置网站的图标Favicon">设置网站的图标Favicon</a></li><li><a href="#添加打赏功能">添加打赏功能</a></li><li><a href="#搜索功能">搜索功能</a></li><li><a href="#添加联系人邮箱并设置个性图标">添加联系人邮箱并设置个性图标</a></li><li><a href="#添加sitemap">添加sitemap</a><ul><li><a href="#确认博客是否被收录">确认博客是否被收录</a></li><li><a href="#生成sitemap文件">生成sitemap文件</a></li></ul></li><li><a href="#Hexo博客添加Google-AdSense">Hexo博客添加Google-AdSense</a></li></ul><h1 id="页面添加fork-me-on-github功能"><a href="#页面添加fork-me-on-github功能" class="headerlink" title="页面添加fork me on github功能"></a>页面添加fork me on github功能</h1><p><strong>实现方法</strong><br>点击<a href="https://github.com/blog/273-github-ribbons" target="_blank" rel="noopener">这里</a>或者<a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">这里</a>挑选自己喜欢的样式，并复制代码。 例如，我是复制如下代码：<br><img src="/archives/40609c5b/01.png" alt><br>将复制的代码粘贴到themes/next/layout/_layout.swig文件中(放在</p><div class="headband"></div>的下面)，并把href改为你的github地址<br><img src="/archives/40609c5b/02.png" alt><br><strong>效果展示</strong><br><img src="/archives/40609c5b/03.png" alt><p></p><h1 id="添加RSS"><a href="#添加RSS" class="headerlink" title="添加RSS"></a>添加RSS</h1><p><a href="http://www.mdslq.cn/archives/77130092.html" target="_blank" rel="noopener">Hexo添加RSS</a></p><h1 id="添加动态背景"><a href="#添加动态背景" class="headerlink" title="添加动态背景"></a>添加动态背景</h1><blockquote><p>要求Next主题版本在5.1.1以上<br>修改主题配置文件 themes\next_config.yml</p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="修改文章底部的带-号的标签"><a href="#修改文章底部的带-号的标签" class="headerlink" title="修改文章底部的带#号的标签"></a>修改文章底部的带#号的标签</h1><p><strong>设置方法</strong><br>修改模板/themes/next/layout/_macro/post.swig，搜索 rel=”tag”&gt;#，将 # 换成<i class="fa fa-tag"></i><br><strong>效果展示</strong><br><img src="/archives/40609c5b/04.png" alt></p><h1 id="博文压缩"><a href="#博文压缩" class="headerlink" title="博文压缩"></a>博文压缩</h1><p><a href="http://www.mdslq.cn/archives/2ac3214e.html" target="_blank" rel="noopener">Hexo博客压缩优化</a></p><h1 id="添加README-md文件"><a href="#添加README-md文件" class="headerlink" title="添加README.md文件"></a>添加README.md文件</h1><p>每个项目下一般都有一个README.md文件，但是使用hexo部署到仓库后，项目下是没有README.md文件的。<br>在Hexo目录下的source根目录下添加一个README.md文件，修改站点配置文件_config.yml，将skip_render参数的值设置为</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> <span class="string">README.md</span></span><br></pre></td></tr></table></figure><p>保存退出即可。再次使用hexo d命令部署博客的时候就不会在渲染README.md这个文件了。</p><h1 id="文章加密访问"><a href="#文章加密访问" class="headerlink" title="文章加密访问"></a>文章加密访问</h1><p><a href="http://www.mdslq.cn/archives/93862d36.html" target="_blank" rel="noopener">Hexo博客加密功能</a></p><h1 id="添加jiathis分享"><a href="#添加jiathis分享" class="headerlink" title="添加jiathis分享"></a>添加jiathis分享</h1><p><a href="http://www.mdslq.cn/archives/eba154a5.html" target="_blank" rel="noopener">Hexo博客添加分享功能</a></p><h1 id="博文置顶"><a href="#博文置顶" class="headerlink" title="博文置顶"></a>博文置顶</h1><p>修改hero-generator-index插件，把文件：node_modules/hexo-generator-index/lib/generator.js内的代码替换为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> pagination = <span class="built_in">require</span>(<span class="string">'hexo-pagination'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = <span class="keyword">this</span>.config;</span><br><span class="line">  <span class="keyword">var</span> posts = locals.posts;</span><br><span class="line">    posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a.top &amp;&amp; b.top) &#123; <span class="comment">// 两篇文章top都有定义</span></span><br><span class="line">            <span class="keyword">if</span>(a.top == b.top) <span class="keyword">return</span> b.date - a.date; <span class="comment">// 若top值一样则按照文章日期降序排</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> b.top - a.top; <span class="comment">// 否则按照top值降序排</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a.top &amp;&amp; !b.top) &#123; <span class="comment">// 以下是只有一篇文章top有定义，那么将有top的排在前面（这里用异或操作居然不行233）</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(!a.top &amp;&amp; b.top) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; <span class="comment">// 都没定义按照文章日期降序排</span></span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="keyword">var</span> paginationDir = config.pagination_dir || <span class="string">'page'</span>;</span><br><span class="line">  <span class="keyword">return</span> pagination(<span class="string">''</span>, posts, &#123;</span><br><span class="line">    perPage: config.index_generator.per_page,</span><br><span class="line">    layout: [<span class="string">'index'</span>, <span class="string">'archive'</span>],</span><br><span class="line">    format: paginationDir + <span class="string">'/%d/'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">      __index: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在文章中添加top值，数值越大文章越靠前，如:</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hexo博客添加分享功能</span><br><span class="line">categories: Hexo</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">  - </span>Hexo</span><br><span class="line"><span class="bullet">  - </span>分享功能</span><br><span class="line">abbrlink: eba154a5</span><br><span class="line">date: 2017-12-13 18:39:02</span><br><span class="line">top: 70</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h1 id="为博客加上萌萌的宠物"><a href="#为博客加上萌萌的宠物" class="headerlink" title="为博客加上萌萌的宠物"></a>为博客加上萌萌的宠物</h1><p>待完善</p><h1 id="设置网站的图标Favicon"><a href="#设置网站的图标Favicon" class="headerlink" title="设置网站的图标Favicon"></a>设置网站的图标Favicon</h1><p><strong>设置方法</strong><br>在<a href="http://www.easyicon.net/" target="_blank" rel="noopener">EasyIcon</a>中找一张（32*32）的ico图标,或者去别的网站下载或者制作，并将图标名称改为favicon.ico，然后把图标放在/themes/next/source/images里，并且修改主题配置文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Put your favicon.ico into `hexo-site/source/` directory.</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/favicon.ico</span></span><br></pre></td></tr></table></figure><p><strong>效果展示</strong><br><img src="/archives/40609c5b/05.png" alt></p><h1 id="添加打赏功能"><a href="#添加打赏功能" class="headerlink" title="添加打赏功能"></a>添加打赏功能</h1><p>越来越多的平台支持打赏功能，付费阅读时代越来越近，GitHub用户habren开发了打赏功能，支持微信和支付宝，被Next主题集成到了主题中。<br><strong>配置</strong><br>配置主题目录下的_config.yaml文件，将对应的image文件替换为自己的收款二维码即可。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward_comment:</span> <span class="string">坚持原创技术分享，您的支持将鼓励我继续创作！</span></span><br><span class="line"><span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.jpg</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.jpg</span></span><br></pre></td></tr></table></figure><p><strong>查看修改效果</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a></p><p><strong>效果展示</strong><br><img src="/archives/40609c5b/06.png" alt></p><h1 id="搜索功能"><a href="#搜索功能" class="headerlink" title="搜索功能"></a>搜索功能</h1><p>如何设置站内搜索功能，使用户可以搜索站内资源？</p><p><strong>安装插件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo</span><br><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p><strong>查看修改效果</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a><br><strong>效果展示</strong><br><img src="/archives/40609c5b/07.png" alt></p><h1 id="添加联系人邮箱并设置个性图标"><a href="#添加联系人邮箱并设置个性图标" class="headerlink" title="添加联系人邮箱并设置个性图标"></a>添加联系人邮箱并设置个性图标</h1><p>Hexo Next如何添加联系人邮箱并设置个性图标。</p><p><strong>配置</strong><br>站点配置文件修改以下配置即可</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Social links</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">email:</span> <span class="string">mailto:your</span> <span class="string">email</span> <span class="string">address</span></span><br><span class="line"></span><br><span class="line"><span class="attr">social_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">email:</span> <span class="string">envelope</span></span><br></pre></td></tr></table></figure><p>注释：seoial_icons节点中后面的值是<a href="http://fontawesome.io/icons/" target="_blank" rel="noopener">http://fontawesome.io/icons/</a> 中提供的图标的名称。之后其他链接如推特，微博等都可自行增减。</p><p><strong>查看修改效果</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a></p><h1 id="添加sitemap"><a href="#添加sitemap" class="headerlink" title="添加sitemap"></a>添加sitemap</h1><p>在这个搜索引擎至上的年代，更好的被搜索引擎收录是必不可少的一步。如何提高个人博客被搜索到的几率？如何让百度+谷歌搜索到我的博客？</p><h2 id="确认博客是否被收录"><a href="#确认博客是否被收录" class="headerlink" title="确认博客是否被收录"></a>确认博客是否被收录</h2><p>在百度或者谷歌上面输入下面格式来判断，如果能搜索到就说明被收录，否则就没有，用你的域名替代我的mds1455975151.github.io<br>site:mds1455975151.github.io</p><h2 id="生成sitemap文件"><a href="#生成sitemap文件" class="headerlink" title="生成sitemap文件"></a>生成sitemap文件</h2><p><strong>安装相关插件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd hexo</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br><span class="line">npm install hexo-generator-seo-friendly-sitemap --save</span><br></pre></td></tr></table></figure><p>注：根据个人喜欢选择合适插件即可</p><p><strong>修改配置</strong><br>修改主题配置文件_config.yml,添加如下两行配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">......</span></span><br><span class="line">  <span class="attr">sitemap:</span> <span class="string">/sitemap.xml</span>             <span class="comment"># 站点地图</span></span><br><span class="line">  <span class="attr">baidusitemap:</span> <span class="string">/baidusitemap.xml</span></span><br></pre></td></tr></table></figure><p><strong>查看修改效果</strong><br>hexo s<br>在本地访问 <a href="http://127.0.0.1:4000/sitemap.xml" target="_blank" rel="noopener">http://127.0.0.1:4000/sitemap.xml</a> 和 <a href="http://127.0.0.1:4000/baidusitemap.xml" target="_blank" rel="noopener">http://127.0.0.1:4000/baidusitemap.xml</a> 查看效果</p><h1 id="Hexo博客添加Google-AdSense"><a href="#Hexo博客添加Google-AdSense" class="headerlink" title="Hexo博客添加Google-AdSense"></a>Hexo博客添加Google-AdSense</h1><p><a href="http://www.mdslq.cn/archives/3a06bb38.html" target="_blank" rel="noopener">Hexo博客压缩优化</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/40609c5b.html">https://mds1455975151.github.io/archives/40609c5b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Next </tag>
            
            <tag> 个性设置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客Next主题添加文章阅读量及网站访问信息</title>
      <link href="/archives/d93ac7d.html"/>
      <url>/archives/d93ac7d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍Hexo博客Next主题如何显示文章阅读量及网站访问量信息</p></blockquote><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>关于Hexo博客的文章阅读量设置问题，常见方案如下：<br>1、<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">不蒜子</a>，仅局限于在文章页面显示阅读数，首页是不显示的。<br>2、<a href="https://leancloud.cn/" target="_blank" rel="noopener">LeanCloud</a></p><h1 id="设置文章阅读量显示"><a href="#设置文章阅读量显示" class="headerlink" title="设置文章阅读量显示"></a>设置文章阅读量显示</h1><h2 id="注册并设置LeanCloud"><a href="#注册并设置LeanCloud" class="headerlink" title="注册并设置LeanCloud"></a>注册并设置LeanCloud</h2><p><strong>注册LeanCloud</strong><br>打开<a href="https://leancloud.cn/" target="_blank" rel="noopener">LeanCloud</a>官网，进入注册页面注册。完成邮箱激活后，点击头像，进入控制台页面，如下：<br><img src="/archives/d93ac7d/01.png" alt><br><strong>创建应用</strong><br>创建应用取名test<br><img src="/archives/d93ac7d/03.png" alt><br><strong>创建Class</strong><br>创建Class命名为Counter,ACL权限默认即可<br><img src="/archives/d93ac7d/02.png" alt><br><img src="/archives/d93ac7d/04.png" alt></p><h2 id="Next主题配置"><a href="#Next主题配置" class="headerlink" title="Next主题配置"></a>Next主题配置</h2><p><strong>基本配置</strong><br>编辑主题目录下的site_page/themes/next/_config.yml配置，修改配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></span><br><span class="line"><span class="attr">leancloud_visitors:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="string">xxx</span></span><br><span class="line">  <span class="attr">app_key:</span> <span class="string">xxx</span></span><br></pre></td></tr></table></figure><p>其中，app_id和app_key在设置–应用Key中获取<br><strong>Web安全</strong><br>为了保证应用的统计计数功能仅应用于自己的博客系统，你可以在应用-&gt;设置-&gt;安全中心的Web安全域名中加入自己的博客域名，以保证数据的调用安全。<br><strong>确认其他配置</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">themes\next\layout\_scripts\third-party\lean-analytics.swig  # 确保该文件存在</span><br><span class="line">themes\next\layout\_macro\post.swig                          # 大约171行存在leancloud_visitors相关代码</span><br><span class="line">themes\next\layout\_layout.swig                              # 大约83行引用了lean-analytics.swig文件</span><br></pre></td></tr></table></figure><p><strong>重新部署并测试</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a><br><img src="/archives/d93ac7d/07.png" alt><br><strong>LeanCloud数据检查</strong><br><img src="/archives/d93ac7d/05.png" alt><br><img src="/archives/d93ac7d/06.png" alt><br>通过这些数据可以分析哪些文章访问量高，从而不断优化博客内容，提升网站访问量。</p><h1 id="设置网站访问量显示"><a href="#设置网站访问量显示" class="headerlink" title="设置网站访问量显示"></a>设置网站访问量显示</h1><p>网站的浏览次数，即pv；网站的访客数为uv。pv的计算方式是，单个用户连续点击n篇文章，记录n次访问量；uv的计算方式是，单个用户连续点击n篇文章，只记录1次访客数。你可以根据需要添加相应的统计功能。</p><h2 id="Next主题配置-1"><a href="#Next主题配置-1" class="headerlink" title="Next主题配置"></a>Next主题配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show PV/UV of the website/page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="comment"># count values only if the other configs are false</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># custom uv span for the whole site</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_uv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-user"&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">site_uv_footer:</span></span><br><span class="line">  <span class="comment"># custom pv span for the whole site</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-eye"&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">site_pv_footer:</span></span><br><span class="line">  <span class="comment"># custom pv span for one page only</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-file-o"&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">page_pv_footer:</span></span><br></pre></td></tr></table></figure><h2 id="显示统计标签"><a href="#显示统计标签" class="headerlink" title="显示统计标签"></a>显示统计标签</h2><p>如果你想要显示pv统计量，复制以下代码至你想要放置的位置，例如：<br>修改themes\next\layout_partials\footer.swig文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"theme-info"</span>&gt;</span></span><br><span class="line">  &#123;&#123; __('footer.theme') &#125;&#125; -</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"theme-link"</span> <span class="attr">rel</span>=<span class="string">"external nofollow"</span> <span class="attr">href</span>=<span class="string">"https://github.com/iissnan/hexo-theme-next"</span>&gt;</span></span><br><span class="line">    NexT.&#123;&#123; theme.scheme &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">**  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_pv"</span> <span class="attr">class</span>=<span class="string">"theme-info"</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>|<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>本站总访问量<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>次</span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_uv"</span> <span class="attr">class</span>=<span class="string">"theme-info"</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>|<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>本站访客数<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>人次</span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">**</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="验证效果"><a href="#验证效果" class="headerlink" title="验证效果"></a>验证效果</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a><br>效果如下：<br><img src="/archives/d93ac7d/08.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.jeyzhang.com/hexo-next-add-post-views.html" target="_blank" rel="noopener">Hexo的NexT主题个性化：添加文章阅读量</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d93ac7d.html">https://mds1455975151.github.io/archives/d93ac7d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 文章阅读量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游戏公司</title>
      <link href="/archives/fd027666.html"/>
      <url>/archives/fd027666.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>游戏公司列表</p></blockquote><table><thead><tr><th>公司名称</th><th>公司规模</th><th>公司性质</th><th>公司地址</th></tr></thead><tbody><tr><td>腾讯科技(深圳)有限公司</td><td>2000人以上</td><td>上市公司</td><td>深圳南山区腾讯大厦</td></tr><tr><td>奇虎360科技有限公司</td><td>2000人以上</td><td>上市公司</td><td>北京朝阳区酒仙桥路6号院（电子城•国际电子总部）</td></tr><tr><td>蓝港互动集团有限公司</td><td>500-999人</td><td>互动娱乐内容平台商</td><td>北京市朝阳区望京利泽中园101号启明国际大厦8层</td></tr><tr><td>北京畅游时代数码技术有限公司</td><td>2000人以上</td><td>上市公司</td><td>北京石景山区八角游乐园融科创新</td></tr><tr><td>FunPlus 趣加游戏</td><td>150-500人</td><td>游戏</td><td>北京海淀区科学院南路2号融科资讯中心B座</td></tr><tr><td>北京昆仑万维科技股份有限公司</td><td>500-2000人</td><td>上市公司</td><td>北京东城区西总布胡同46号明阳国际中心B座（东单地铁口附近）</td></tr><tr><td>北京光宇在线科技责任有限公司</td><td>2000人以上</td><td>上市公司</td><td>北京海淀区上地东路1号院盈创动力大厦a座北厅5层</td></tr><tr><td>竞技世界北京网络技术有限公司</td><td>500-2000人</td><td>不需要融资</td><td>北京海淀区竞技世界大厦</td></tr><tr><td>雷尚(北京)科技有限公司</td><td>150-500人</td><td>上市公司</td><td>北京海淀区知春路七号致真大厦C座9层（近西土城地铁A口）</td></tr><tr><td>北京天马时空网络技术有限公司</td><td>150-500人</td><td>上市公司</td><td>北京海淀区上地七街1号，1号楼208</td></tr><tr><td>北京盖娅互娱网络科技股份有限公司</td><td>100-499人</td><td>上市公司</td><td>北京市朝阳区绿地中心B座12层</td></tr><tr><td>北京智明星通科技有限公司</td><td>500-999人</td><td>未融资</td><td>北京市海淀区知春路7号致真大厦</td></tr><tr><td>北京青果灵动科技股份有限公司</td><td>100-499人</td><td>游戏</td><td>北京市朝阳区新房路1号院动漫大厦9层</td></tr><tr><td>北京华清飞扬通信技术有限公司</td><td>100-499人</td><td>游戏</td><td>北京市东城区建国门内大街7号光华长安大厦1座516室</td></tr><tr><td>香港绿洲游戏公司</td><td>100-499人</td><td>游戏</td><td>东城区朝阳门北大街6号首创大厦B座1201</td></tr><tr><td>卓越工坊(北京)科技有限公司</td><td>500-999人</td><td>网游/手游</td><td>北辰世纪中心A座</td></tr><tr><td>北京闲徕互娱网络科技有限公司</td><td>1000-2000人</td><td>网游/手游，其他</td><td>北京红军营南路西口汇中广场3层</td></tr><tr><td>四三九九信息科技</td><td>1000-2000人</td><td>网游/手游，未融资</td><td>广州市天河区龙口西路1号保利中辰广场6楼</td></tr><tr><td>上海波克城市网络科技股份有限公司</td><td>100-499人</td><td>网游/手游，其他</td><td>上海普陀区金沙江路1628号绿洲中环中心10号楼21楼</td></tr><tr><td>北京云畅游戏科技股份有限公司</td><td>100-499人</td><td>网游/手游，IPO上市</td><td>北京朝阳区酒仙桥路52号院东方科技园3号楼4层</td></tr><tr><td>西山居</td><td>2000-5000人</td><td>网游/手游，A轮</td><td>北三环西路43号中航广场七层</td></tr><tr><td>北京橙动信息技术有限公司</td><td>50-150人</td><td>移动互联网</td><td>北京东城区朝阳门银河SOHO中心</td></tr><tr><td>北京钛核互动信息技术有限公司</td><td>50-150人</td><td>天使轮</td><td>北京朝阳区尚8里文创园D座201</td></tr><tr><td>北京牧游科技有限公司</td><td>15-50人</td><td>天使轮</td><td>北京海淀区盈创动力园区a座</td></tr><tr><td>赛亚人北京网络技术有限公司</td><td>50-150人</td><td>天使轮</td><td>北京朝阳区北美商务中心</td></tr><tr><td>紫龙互娱</td><td>100-499人</td><td>A轮</td><td>北京朝阳区青年路达美大厦T2 11层</td></tr><tr><td>游酷盛世科技（北京）有限公司</td><td>15-50人</td><td>不需要融资</td><td>北京朝阳区保利东郡B座 602</td></tr><tr><td>人人游戏</td><td>1000-2000人</td><td>网络游戏</td><td>北京市朝阳霞光里8号承冀诚大厦C座一层</td></tr><tr><td>北京英雄互娱科技股份有限公司</td><td>500-999人</td><td>网络游戏</td><td>北京市朝阳区酒仙桥路宏源大厦3层</td></tr><tr><td>乐元素科技(北京)股份有限公司</td><td>500-999人</td><td>网游/手游，B轮</td><td>北京市海淀区苏州街29号院18号楼维亚大厦20-21层</td></tr><tr><td>北京玩蟹科技有限公司</td><td>100-499人</td><td>网络游戏</td><td>北京市海淀区海淀中街15号远中悦来大厦203</td></tr><tr><td>北京中清龙图网络技术有限公司</td><td>500-2000人</td><td>网络游戏</td><td>北京市朝阳区北苑路甲13号院1号楼北辰泰岳大厦12层</td></tr><tr><td>北京澄游网络科技有限公司</td><td></td><td></td><td></td></tr><tr><td>北京有爱互娱科技有限公司</td><td>500余人</td><td>网络游戏</td><td>北京市海淀区知春路7号致真大厦D座15层1501</td></tr><tr><td>泰奇互动(北京互联时代通讯科技有限公司)</td><td>100-499人</td><td>网络游戏</td><td>北京市朝阳区北苑路甲13号院北辰泰岳大厦1塔14层</td></tr><tr><td>北京春天互娱科技有限公司</td><td></td><td></td><td></td></tr><tr><td>北京乐动卓越科技有限公司</td><td></td><td></td><td></td></tr><tr><td>北京网元圣唐娱乐科技有限公司</td><td></td><td>网络游戏</td><td>石景山</td></tr><tr><td>北京初见科技有限公司</td><td></td><td>移动游戏全球发行公司</td><td>三里屯</td></tr><tr><td>北京豪腾嘉科科技有限公司</td><td></td><td>网络游戏</td><td>北京市海淀区科大天工大厦A座605</td></tr><tr><td>米乐互动科技（北京）有限公司</td><td>50-150</td><td>网络游戏B轮</td><td>北京海淀区上地东路京蒙高科大厦A座</td></tr><tr><td>北京善豹科技有限公司</td><td>50-150</td><td>网络游戏A轮</td><td>北京海淀区东北旺西路中关村云广场C座</td></tr><tr><td>完美世界</td><td></td><td></td><td>大屯路东站地铁</td></tr><tr><td>祖龙娱乐</td><td>500-999人</td><td>未融资</td><td>北京市东城区中关村雍和航星科技园-8号楼</td></tr><tr><td>北京贝塔科技股份有限公司</td><td></td><td></td><td></td></tr><tr><td>时空幻境（北京）科技有限公司</td><td></td><td></td><td>北京市朝阳区霄云路26号鹏润大厦16层A1610室</td></tr><tr><td>北京创智优品科技有限公司(Zenjoy)</td><td></td><td></td><td></td></tr><tr><td>北京明途真科技有限公司(ME2ZEN)</td><td></td><td></td><td>北京市东城区东直门南大街1号办公楼16层01单元</td></tr><tr><td>北京永航科技有限公司</td><td></td><td></td><td>北京市东城区和平里西街51号航星园二期（雍和壹中心）A座1号楼</td></tr><tr><td>北京云畅游科技股份游戏公司</td><td></td><td></td><td></td></tr><tr><td>北京龙创悦动网络科技有限公司</td><td></td><td></td><td>北京市海淀区花园路马甸东路17号金澳国际22层</td></tr><tr><td>北京猎豹网络科技有限公司</td><td></td><td></td><td>北京市朝阳区姚家园南路1号惠通时代广场8号楼(猎豹移动大楼)</td></tr><tr><td>北京默契破冰科技有限公司(玩吧)</td><td></td><td></td><td>东直门外大街46号天恒大厦B座2301 地铁52min</td></tr><tr><td>北京江娱互动科技有限公司</td><td></td><td></td><td>北京市朝阳区安定路39号1幢13层1301A室</td></tr><tr><td>北京魔游天下科技有限公司</td><td></td><td></td><td></td></tr><tr><td>北京巅峰互动网络技术有限公司</td><td></td><td></td><td></td></tr></tbody></table><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fd027666.html">https://mds1455975151.github.io/archives/fd027666.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏公司 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>互联网推广常见方法</title>
      <link href="/archives/83193a8b.html"/>
      <url>/archives/83193a8b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>常见的互联网推广方法有哪些？</p></blockquote><p>这里以阿里云幸运券为例：<br>1、站长利用自己的网站推广<br>站长可以利用你自己的网站进行推广，你的地盘你做主，不怕被删。你可以写一篇原创的文章，推广阿里云幸运券。还可以在你网站首页挂一个广告推广。网站发文章推广的好处是一方面你网站有流量，另一方面文章被收录后，排名好的话，搜索引擎也会带来流量的。有人用你的幸运券，你就有返利了。<br>2、利用微信、微博进行推广<br>现在微信、微博很流行，使用的人也很多，我们可以利用起来。直接复制阿里云的推广文案都可以，发到微信、微博里。可以让人转发一下，增加覆盖面。<br>3、利用免费博客推广<br>用免费博客进行推广，比如新浪博客、和讯博客、网易博客、1688博客、博客园、CNDS、51CTO，还有豆瓣、知乎以及一些轻博客等等。<br>4、利用论坛推广<br>论坛的流量大，是推广的好地方。我们主要到一些相关的论坛，比如百度贴吧、站长类论坛、IT类论坛、站长之家论坛、A5论坛、落伍者论坛、主机论坛、服务器论坛、域名论坛等等。发一篇原创的帖子，带上你的幸运券就可以了。加上站长福利，服务器优惠券之类的词，更有吸引力。<br>5、利用QQ群推广<br>QQ群的人气还是很高的，而且效果也不错。找一些站长类和主机类的QQ群，去推广。当然被踢也是很正常的，不要刷屏和太广告就行了。<br>6、利用问答网站推广<br>问答网站推广的效果还是不错的，比如百度知道、知乎问答等，有的能带链接，有的不要带链接，容易被删。<br>7、利用文库、文档网站推广<br>比如百度文库、豆丁网、360doc、道客巴巴等等，写一篇文章，带上你的推广信息，然后上传到文库网站进行推广。<br>8、利用视频网站推广<br>比如用优酷、腾讯视频、爱奇艺等进行推广。你可以做一个视频，然后上传到视频网站，视频里面带上你的网站或者阿里云链接就行了，也可以在简介里加上。<br>9、利用自媒体进行推广<br>现在自媒体很火，我们可以利用自媒体进行推广。比如今日头条、百家号、微信公众号、一点资讯等流量非常大，而且一般不会删除服务器方面的文章。<br>当然推广阿里云云大使的方法还有很多，欢迎大家补充交流。推广需要持之以恒，不可能一步登天，坚持下去才能看到效果。让我们一起去推广云大使吧！</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/83193a8b.html">https://mds1455975151.github.io/archives/83193a8b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 互联网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 互联网 </tag>
            
            <tag> 推广 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>运维从业人员副业思考？</title>
      <link href="/archives/3871fd6c.html"/>
      <url>/archives/3871fd6c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>运维从业人员有哪些副业可以做？</p></blockquote><p>除了正常的工作外估计很多人都想利用闲暇时间谋求一份副业，可能是兴趣、可能是经济压力、可能是为了好玩，但是都有一个共同的目标，做一份副业。</p><a id="more"></a><p>最近总结了一些运维人员可以从事的副业，供大家参考，欢迎大家补充完善<br>原则:在自己擅长的领域去发挥<br>1、搭建属于自己的网站</p><ul><li>锻炼技术，网站搭建涉及服务器选型购买、域名申请备案、web服务部署、优化、博客框架选择，SEO等等各个方便的知识点，能网站的过一遍对自身的运维知识体系解决问题能力都是考验</li><li>扩大交流圈，提升个人知名度，建立自己的技术圈子，寻找志同道合的朋友</li><li>网站正常运行后，随着内容的丰富，知名度的提高，可以考虑网站流量变现(弹窗广告、广告联盟、定向销售、增值服务)</li></ul><p>2、选择一个合适的主题开发微信小程序+运营微信公众号</p><ul><li>运维人员一般编程能力相对欠缺，开发微信小程序既能学习开发知识也能了解业务逻辑，对个人的提升也是很好的</li><li>扩展思考认知面，公众号的运营需要对各个其他领域有响应的了解，对文笔、知识逻辑等要求都有很高的要求</li><li>互联网时代，有好的思路—+技能分分钟可以实现技能变现，举个例子：2017年圣诞节腾讯发起的给我带圣诞帽活动、建军节P军装活动等等</li></ul><p>3、技术咨询类<br>在自己擅长的知识领域总结归纳，给其他小公司做技术解决方案，解决技术难题都是很吃香的</p><p>4、兼职讲师</p><ul><li>你有丰富的行业经验，精湛的运维技能又有讲课培训的经验，不去兼职就太浪费了，现在好的兼职讲师一节课1000+都是正常的</li><li>讲师除了金钱的收获更是扩展人脉，扩大交际圈的好方法，讲的课阅读经验积累越快</li><li>做讲师对个人职业发展也是大有裨益的，很多企业都在提倡内部分享，招募内训师</li></ul><p>5、推广类<br>从事行业优势，我们自己做行业推广有人脉有优势，例如：阿里云的云推广大使、腾讯云推广活动等等</p><p>6、知识付费<br>知乎live，逻辑思维、脉脉知识专题等等这些都可以建立自己的技术圈子，实现知识的变现</p><p>7、网络兼职类<br>威客，程序员客栈，开源众包只要你有技能，这些都可以实现技能知识的变现，难点较大</p><p>8、证书类<br>一些特殊行业的正式</p><p>9、视频类<br>抖音、火山小视频、YouTube等等，只要是优质内容，能吸引用户就可以得到平台或者广告主的青睐。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/3871fd6c.html">https://mds1455975151.github.io/archives/3871fd6c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
            <tag> 副业 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客Next主题打开过慢的解决办法</title>
      <link href="/archives/f186e832.html"/>
      <url>/archives/f186e832.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>在不能连接google的时候，访问使用hexo 的next主题的博客会非常慢。可能出现博客框架已经加载ok，但是博文一直不显示的问题。</p></blockquote><a id="more"></a><h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>在不能连接google的时候，访问使用hexo 的next主题的博客会非常慢。可能出现博客框架已经加载ok，但是博文一直不显示的问题。<br>问题原因分析：<br>加载google字体库导致</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p><strong>方案1：</strong><br>到主题的_config.yml中设置不从google加载字体（默认会加载本地字体）<br>设置：use_font_lato: false<br><strong>方法2：</strong><br>到\themes\next\layout_partials\head external-fonts.swig文件<br>fonts.googleapis.com 改成其他cdn加速站点<br>收集了几个地址，根据情况替换<br>fonts.useso.com<br>fonts.lug.ustc.edu.cn<br><strong>方法3：</strong><br>使用VPN，浏览就毫无压力了，O(∩_∩)O哈哈~</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/iissnan/theme-next-docs/issues/49" target="_blank" rel="noopener">https://github.com/iissnan/theme-next-docs/issues/49</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f186e832.html">https://mds1455975151.github.io/archives/f186e832.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> fonts.googleapis.com </tag>
            
            <tag> 谷歌字体 </tag>
            
            <tag> google </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之Nexus搭建Maven私有仓库</title>
      <link href="/archives/d406f18d.html"/>
      <url>/archives/d406f18d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>在开发过程中，有时候会使用到公司内部的一些开发包，显然把这些包放在外部是不合适的。另外，由于项目一直在开发中，这些内部的依赖可能也在不断的更新。可以通过搭建公司内部的Maven服务器，将第三方和内部的依赖统一管理，同时也可以节省网络带宽，当然前提是项目所需要的构件在私服中已经存在。如何在公司内部部署一个自己的Maven私有仓库呢？</p></blockquote><a id="more"></a><h1 id="私服介绍"><a href="#私服介绍" class="headerlink" title="私服介绍"></a>私服介绍</h1><p>私服是架设在局域网的一种特殊的远程仓库，目的是代理远程仓库及部署第三方构件。有了私服之后，当 Maven 需要下载构件时，直接请求私服，私服上存在则下载到本地仓库；否则，私服请求外部的远程仓库，将构件下载到私服，再提供给本地仓库下载。<br>搭建私服前后Maven工作流程:<br><img src="/archives/d406f18d/01.png" alt><br><img src="/archives/d406f18d/02.png" alt><br>可以使用专门的Maven仓库管理软件来搭建私服，比如：Apache Archiva，Artifactory，Sonatype Nexus。这里我们使用 Sonatype Nexus。</p><h1 id="安装Nexus"><a href="#安装Nexus" class="headerlink" title="安装Nexus"></a>安装Nexus</h1><h2 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h2><p>openjdk比较精简，会出现各种奇葩问题，故使用Oracle JDK版本<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a> 下载jdk-8u151-linux-x64.rpm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u151-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_151/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">"1.8.0_151"</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_151-b12)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure><h2 id="安装Maven"><a href="#安装Maven" class="headerlink" title="安装Maven"></a>安装Maven</h2><p><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">下载地址</a>下载apache-maven-3.5.2-bin.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2 /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s apache-maven-3.5.2/ maven</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="built_in">export</span> M2_HOME=/usr/<span class="built_in">local</span>/maven</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$M2_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># mvn -version</span></span><br><span class="line">Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T03:58:13-04:00)</span><br><span class="line">Maven home: /usr/<span class="built_in">local</span>/maven</span><br><span class="line">Java version: 1.8.0_151, vendor: Oracle Corporation</span><br><span class="line">Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.151-5.b12.el7_4.x86_64/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: <span class="string">"linux"</span>, version: <span class="string">"3.10.0-327.el7.x86_64"</span>, arch: <span class="string">"amd64"</span>, family: <span class="string">"unix"</span></span><br></pre></td></tr></table></figure><h2 id="安装Nexus-1"><a href="#安装Nexus-1" class="headerlink" title="安装Nexus"></a>安装Nexus</h2><p><a href="http://www.sonatype.org/nexus/archived/?id=38" target="_blank" rel="noopener">下载地址</a> 下载版本nexus-2.12.0-01-bundle.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://download.sonatype.com/nexus/oss/nexus-2.12.0-01-bundle.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf nexus-2.12.0-01-bundle.tar.gz</span></span><br><span class="line"><span class="comment"># cp -r nexus-2.12.0-01 /usr/local/</span></span><br><span class="line"><span class="comment"># cd /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s nexus-2.12.0-01/ nexus</span></span><br><span class="line"><span class="comment"># cd /usr/local/nexus/bin/</span></span><br><span class="line"><span class="comment"># ./nexus start</span></span><br><span class="line">****************************************</span><br><span class="line">WARNING - NOT RECOMMENDED TO RUN AS ROOT</span><br><span class="line">****************************************</span><br><span class="line">If you insist running as root, <span class="keyword">then</span> <span class="built_in">set</span> the environment variable RUN_AS_USER=root before running this script.</span><br><span class="line"><span class="comment"># vim /usr/local/nexus/bin/nexus</span></span><br><span class="line">RUN_AS_USER=root</span><br><span class="line"><span class="comment"># ./nexus start   # 重启启动</span></span><br><span class="line"><span class="comment"># tail -f /usr/local/nexus/logs/wrapper.log</span></span><br><span class="line">.........</span><br><span class="line">jvm 1    | 2017-12-26 01:44:44,958-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.rest.NexusApplication_UriMatching - Strict URI matching: <span class="literal">true</span></span><br><span class="line">jvm 1    | 2017-12-26 01:44:45,163-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.configuration.ModelUtils - Loading model /usr/<span class="built_in">local</span>/sonatype-work/nexus/conf/lvo-plugin.xml</span><br><span class="line">jvm 1    | 2017-12-26 01:44:45,171-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.configuration.ModelUtils - Loading model /usr/<span class="built_in">local</span>/sonatype-work/nexus/conf/ldap.xml</span><br><span class="line">jvm 1    | 2017-12-26 01:44:45,808-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.webresources.internal.WebResourceServiceImpl - Discovered 1971 resources</span><br><span class="line">jvm 1    | 2017-12-26 01:44:45,809-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.webresources.internal.WebResourceServlet - Max-age: 30 days (2592000 seconds)</span><br><span class="line">jvm 1    | 2017-12-26 01:44:45,858-0500 INFO  [ar-4-thread-1] *SYSTEM org.sonatype.nexus.proxy.storage.remote.httpclient.HttpClientRemoteStorage - Initializing remote transport <span class="keyword">for</span> proxy repository <span class="string">"Apache Snapshots"</span> [id=apache-snapshots]...</span><br><span class="line">jvm 1    | 2017-12-26 01:44:46,461-0500 INFO  [ar-4-thread-3] *SYSTEM org.sonatype.nexus.proxy.storage.remote.httpclient.HttpClientRemoteStorage - Initializing remote transport <span class="keyword">for</span> proxy repository <span class="string">"Central"</span> [id=central]...</span><br><span class="line">jvm 1    | 2017-12-26 01:44:46,522-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.bootstrap.jetty.InstrumentedSelectChannelConnector - Metrics enabled</span><br><span class="line">jvm 1    | 2017-12-26 01:44:46,545-0500 INFO  [jetty-main-1] *SYSTEM org.eclipse.jetty.server.AbstractConnector - Started InstrumentedSelectChannelConnector@0.0.0.0:8081</span><br><span class="line">jvm 1    | 2017-12-26 01:44:46,545-0500 INFO  [jetty-main-1] *SYSTEM org.sonatype.nexus.bootstrap.jetty.JettyServer - Running</span><br><span class="line">jvm 1    | 2017-12-26 01:44:46,545-0500 INFO  [WrapperListener_start_runner] *SYSTEM org.sonatype.nexus.bootstrap.jetty.JettyServer - Started</span><br><span class="line">jvm 1    | 2017-12-26 01:44:47,543-0500 INFO  [ar-4-thread-3] *SYSTEM org.sonatype.nexus.proxy.maven.routing.internal.RemoteContentDiscovererImpl - Remote strategy prefix-file on M2Repository(id=central) detected invalid input, results discarded: Prefix file size exceeds maximum allowed size (100000), refusing to load it.</span><br><span class="line"><span class="comment"># netstat -tunlp|grep 8081</span></span><br><span class="line">tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN      21544/java</span><br></pre></td></tr></table></figure><p>将nexus设置为Linux系统的服务，并开机自动启动<br>1、复制$NEXUS_HOME/bin/jsw/linux-x86-64/nexus 到/etc/init.d/nexus<br>2、授于nexus脚本有可执行的权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 /etc/init.d/nexus</span><br></pre></td></tr></table></figure><p>3、修改nexus文件，配置以下参数：<br>修改NEXUS_HOME 绝对路径，如：NEXUS_HOME=”/usr/local/nexus”<br>设置RUN_AS_USER=nexus，或都其它的用户，前提是创建了此用户。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NEXUS_HOME=/usr/<span class="built_in">local</span>/nexus</span><br><span class="line">PLATFORM=linux-x86-64</span><br><span class="line">PLATFORM_DIR=<span class="string">"<span class="variable">$&#123;NEXUS_HOME&#125;</span>/bin/jsw/<span class="variable">$&#123;PLATFORM&#125;</span>"</span></span><br><span class="line">WRAPPER_CMD=<span class="string">"<span class="variable">$&#123;PLATFORM_DIR&#125;</span>/wrapper"</span></span><br><span class="line">WRAPPER_CONF=<span class="string">"<span class="variable">$&#123;PLATFORM_DIR&#125;</span>/../conf/wrapper.conf"</span></span><br><span class="line">PIDDIR=<span class="string">"<span class="variable">$&#123;NEXUS_HOME&#125;</span>"</span></span><br></pre></td></tr></table></figure><p>4、Red Hat, Fedora, CentOS增加nexus服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/init.d</span><br><span class="line">chkconfig --add nexus</span><br><span class="line">chkconfig --levels 345 nexus on</span><br><span class="line">service nexus start</span><br><span class="line">tail -f /usr/<span class="built_in">local</span>/nexus/logs/wrapper.log</span><br></pre></td></tr></table></figure><p>配置完成后，您可以访问web界面 http://{IP}:8081/nexus/ ，进入系统进行设置<br>默认管理账号：admin 密码：admin123<br><img src="/archives/d406f18d/03.png" alt></p><h1 id="Nexus管理"><a href="#Nexus管理" class="headerlink" title="Nexus管理"></a>Nexus管理</h1><h2 id="仓库类型"><a href="#仓库类型" class="headerlink" title="仓库类型"></a>仓库类型</h2><p>登录Nexus在左边菜单栏里选择Repositories,列出已有的所有仓库，可以看到type有几种类型划分</p><ul><li>group 仓库组：Nexus 通过仓库组的概念统一管理多个仓库，这样我们在项目中直接请求仓库组即可请求到仓库组管理的多个仓库</li><li>hosted 宿主仓库：主要用于部署无法从公共仓库获取的构件（如oracle的JDBC驱动）以及自己或第三方的项目构件</li><li>proxy 代理仓库：代理公共的远程仓库</li><li>virtual 虚拟仓库：用于适配 Maven1</li></ul><p><img src="/archives/d406f18d/04.png" alt></p><h2 id="仓库常见操作"><a href="#仓库常见操作" class="headerlink" title="仓库常见操作"></a>仓库常见操作</h2><ul><li>修改默认存储路径</li><li>同步索引</li><li>修改远程同步地址为aliyun镜像地址</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.sonatype.com/" target="_blank" rel="noopener">https://www.sonatype.com/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d406f18d.html">https://mds1455975151.github.io/archives/d406f18d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 私有仓库 </tag>
            
            <tag> jenkins </tag>
            
            <tag> Nexus </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之使用Jenkins实现自动构建Maven项目</title>
      <link href="/archives/729f496.html"/>
      <url>/archives/729f496.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍如何使用Jenkins实现自动化构建Maven项目</p></blockquote><h1 id="Maven是什么？"><a href="#Maven是什么？" class="headerlink" title="Maven是什么？"></a>Maven是什么？</h1><p><img src="/archives/729f496/maven-logo-black-on-white.png" alt><br>Maven项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的软件项目管理工具。<br>Maven 除了以程序构建能力为特色之外，还提供高级项目管理工具。由于 Maven 的缺省构建规则有较高的可重用性，所以常常用两三行 Maven 构建脚本就可以构建简单的项目。由于 Maven 的面向项目的方法，许多 Apache Jakarta 项目发文时使用 Maven，而且公司项目采用 Maven 的比例在持续增长。</p><a id="more"></a><p>Maven是一个项目管理工具，它包含了一个项目对象模型 (Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周期阶段(phase)中插件(plugin)目标(goal)的逻辑。当你使用Maven的时候，你用一个明确定义的项目对象模型来描述你的项目，然后Maven可以应用横切的逻辑，这些逻辑来自一组共享的（或者自定义的）插件。<br>Maven 有一个生命周期，当你运行 mvn install 的时候被调用。这条命令告诉 Maven 执行一系列的有序的步骤，直到到达你指定的生命周期。遍历生命周期旅途中的一个影响就是，Maven 运行了许多默认的插件目标，这些目标完成了像编译和创建一个 JAR 文件这样的工作。<br>此外，Maven能够很方便的帮你管理项目报告，生成站点，管理JAR文件，等等。<br>Maven项目地址：<a href="http://maven.apache.org/" target="_blank" rel="noopener">http://maven.apache.org/</a></p><h1 id="配置Maven和Oracle-JDK环境"><a href="#配置Maven和Oracle-JDK环境" class="headerlink" title="配置Maven和Oracle JDK环境"></a>配置Maven和Oracle JDK环境</h1><p><strong>Maven下载及配置</strong><br><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">下载地址</a>下载apache-maven-3.5.2-bin.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf apache-maven-3.5.2-bin.tar.gz</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2</span></span><br><span class="line"><span class="comment"># mv apache-maven-3.5.2 /usr/local/</span></span><br><span class="line"><span class="comment"># ln -s apache-maven-3.5.2/ maven</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line">M2_HOME=/usr/<span class="built_in">local</span>/maven</span><br><span class="line"><span class="built_in">export</span> M2_HOME</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$M2_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># mvn -version</span></span><br><span class="line">Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T03:58:13-04:00)</span><br><span class="line">Maven home: /usr/<span class="built_in">local</span>/maven</span><br><span class="line">Java version: 1.8.0_151, vendor: Oracle Corporation</span><br><span class="line">Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.151-5.b12.el7_4.x86_64/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: <span class="string">"linux"</span>, version: <span class="string">"3.10.0-327.el7.x86_64"</span>, arch: <span class="string">"amd64"</span>, family: <span class="string">"unix"</span></span><br></pre></td></tr></table></figure><p>对Maven进行优化配置<br>1、自定义存储路径localRepository，默认为~/.m2/repository<br>2、配置仓库的镜像站点，提高下载依赖包的速度，修改<mirrors>部分配置</mirrors></p><p><strong>Oracle JDK下载及配置</strong><br>openjdk比较精简，会出现各种奇葩问题，故切换到Oracle JDK版本<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a> 下载jdk-8u151-linux-x64.rpm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -ivh jdk-8u151-linux-x64.rpm</span></span><br><span class="line"><span class="comment"># vim /etc/profile</span></span><br><span class="line"><span class="comment"># JAVA bin PATH setup</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_151/</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="comment"># source /etc/profile</span></span><br><span class="line"><span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">"1.8.0_151"</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_151-b12)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure><p><strong>Jenkins配置</strong><br>系统管理–全局工具配置–Oracle JDK和Maven配置<br><img src="/archives/729f496/03.png" alt><br><img src="/archives/729f496/02.png" alt></p><h1 id="新建Maven任务"><a href="#新建Maven任务" class="headerlink" title="新建Maven任务"></a>新建Maven任务</h1><p>默认情况下Jenkins不支持Maven项目，如果构建Maven项目首先需要安装相应插件<br>插件安装：系统管理–管理插件–可选插件–输入Maven Integration plugin选择并安装<br><strong>新建一个maven项目simple-java-maven-app</strong><br><img src="/archives/729f496/01.png" alt><br><strong>配置maven项目</strong><br>主要配置源码管理和Build环节即可<br>源码地址：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/jenkins-docs/simple-java-maven-app.git</span><br></pre></td></tr></table></figure><p>Maven命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -B -DskipTests clean package</span><br></pre></td></tr></table></figure><p><img src="/archives/729f496/04.png" alt><br><img src="/archives/729f496/05.png" alt><br><strong>构建并验证结果</strong><br>构建日志如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">Started by user madongsheng</span><br><span class="line">Building in workspace /var/lib/jenkins/workspace/simple-java-maven-app</span><br><span class="line"> &gt; git rev-parse --is-inside-work-tree # timeout=10</span><br><span class="line">Fetching changes from the remote Git repository</span><br><span class="line"> &gt; git config remote.origin.url https://github.com/jenkins-docs/simple-java-maven-app.git # timeout=10</span><br><span class="line">Fetching upstream changes from https://github.com/jenkins-docs/simple-java-maven-app.git</span><br><span class="line"> &gt; git --version # timeout=10</span><br><span class="line"> &gt; git fetch --tags --progress https://github.com/jenkins-docs/simple-java-maven-app.git +refs/heads/*:refs/remotes/origin/*</span><br><span class="line"> &gt; git rev-parse refs/remotes/origin/master^&#123;commit&#125; # timeout=10</span><br><span class="line"> &gt; git rev-parse refs/remotes/origin/origin/master^&#123;commit&#125; # timeout=10</span><br><span class="line">Checking out Revision 0d85b7e1fd39bc6978511f92381aa10534ca4c1b (refs/remotes/origin/master)</span><br><span class="line"> &gt; git config core.sparsecheckout # timeout=10</span><br><span class="line"> &gt; git checkout -f 0d85b7e1fd39bc6978511f92381aa10534ca4c1b</span><br><span class="line">Commit message: &quot;Amend README.md&quot;</span><br><span class="line"> &gt; git rev-list --no-walk 0d85b7e1fd39bc6978511f92381aa10534ca4c1b # timeout=10</span><br><span class="line">Parsing POMs</span><br><span class="line">Established TCP socket on 49373</span><br><span class="line">[simple-java-maven-app] $ /usr/java/jdk1.8.0_151//bin/java -cp /var/lib/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.12-alpha-1.jar:/usr/local/maven/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /usr/local/maven /var/cache/jenkins/war/WEB-INF/lib/remoting-3.14.jar /var/lib/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.12-alpha-1.jar /var/lib/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-commons-1.12-alpha-1.jar 49373</span><br><span class="line">&lt;===[JENKINS REMOTING CAPACITY]===&gt;channel started</span><br><span class="line">Executing Maven:  -B -f /var/lib/jenkins/workspace/simple-java-maven-app/pom.xml -B -DskipTests clean package</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Building my-app 1.0-SNAPSHOT</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ my-app ---</span><br><span class="line">[INFO] Deleting /var/lib/jenkins/workspace/simple-java-maven-app/target</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ my-app ---</span><br><span class="line">[debug] execute contextualize</span><br><span class="line">[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!</span><br><span class="line">[INFO] skip non existing resourceDirectory /var/lib/jenkins/workspace/simple-java-maven-app/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ my-app ---</span><br><span class="line">[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!</span><br><span class="line">[INFO] Compiling 1 source file to /var/lib/jenkins/workspace/simple-java-maven-app/target/classes</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ my-app ---</span><br><span class="line">[debug] execute contextualize</span><br><span class="line">[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!</span><br><span class="line">[INFO] skip non existing resourceDirectory /var/lib/jenkins/workspace/simple-java-maven-app/src/test/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ my-app ---</span><br><span class="line">[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!</span><br><span class="line">[INFO] Compiling 1 source file to /var/lib/jenkins/workspace/simple-java-maven-app/target/test-classes</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ my-app ---</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.pom (3 KB at 1.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.pom (3 KB at 4.6 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.pom (4 KB at 9.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.pom (4 KB at 8.8 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.pom (2 KB at 3.7 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting/2.0.9/maven-reporting-2.0.9.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting/2.0.9/maven-reporting-2.0.9.pom (2 KB at 3.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.pom (4 KB at 6.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom (4 KB at 8.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/12/maven-shared-components-12.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/12/maven-shared-components-12.pom (10 KB at 16.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/13/maven-parent-13.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/13/maven-parent-13.pom (23 KB at 34.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/6/apache-6.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/6/apache-6.pom (13 KB at 26.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-9/plexus-container-default-1.0-alpha-9.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-9/plexus-container-default-1.0-alpha-9.pom (2 KB at 2.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.10/surefire-booter-2.10.jar (34 KB at 31.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.jar (31 KB at 27.8 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.10/maven-surefire-common-2.10.jar (60 KB at 51.0 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.10/surefire-api-2.10.jar (158 KB at 100.4 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.jar (10 KB at 19.6 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.1/plexus-utils-2.1.jar (220 KB at 90.5 KB/sec)</span><br><span class="line">[INFO] Tests are skipped.</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-jar-plugin:3.0.2:jar (default-jar) @ my-app ---</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/3.0/maven-plugin-api-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/3.0/maven-plugin-api-3.0.pom (3 KB at 4.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven/3.0/maven-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven/3.0/maven-3.0.pom (22 KB at 37.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/15/maven-parent-15.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/15/maven-parent-15.pom (24 KB at 29.6 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-model/3.0/maven-model-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-model/3.0/maven-model-3.0.pom (4 KB at 9.6 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.0.4/plexus-utils-2.0.4.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/2.0.4/plexus-utils-2.0.4.pom (4 KB at 8.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-artifact/3.0/maven-artifact-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-artifact/3.0/maven-artifact-3.0.pom (2 KB at 4.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject-plexus/1.4.2/sisu-inject-plexus-1.4.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject-plexus/1.4.2/sisu-inject-plexus-1.4.2.pom (6 KB at 14.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/inject/guice-plexus/1.4.2/guice-plexus-1.4.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/inject/guice-plexus/1.4.2/guice-plexus-1.4.2.pom (4 KB at 6.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/inject/guice-bean/1.4.2/guice-bean-1.4.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/inject/guice-bean/1.4.2/guice-bean-1.4.2.pom (3 KB at 5.2 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject/1.4.2/sisu-inject-1.4.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject/1.4.2/sisu-inject-1.4.2.pom (2 KB at 3.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-parent/1.4.2/sisu-parent-1.4.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-parent/1.4.2/sisu-parent-1.4.2.pom (8 KB at 17.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/forge/forge-parent/6/forge-parent-6.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/forge/forge-parent/6/forge-parent-6.pom (11 KB at 24.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-component-annotations/1.6/plexus-component-annotations-1.6.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-component-annotations/1.6/plexus-component-annotations-1.6.pom (748 B at 1.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-containers/1.6/plexus-containers-1.6.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-containers/1.6/plexus-containers-1.6.pom (4 KB at 9.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/3.3.2/plexus-3.3.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/3.3.2/plexus-3.3.2.pom (22 KB at 43.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-classworlds/2.2.3/plexus-classworlds-2.2.3.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-classworlds/2.2.3/plexus-classworlds-2.2.3.pom (4 KB at 8.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.pom (6 KB at 11.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7.pom (11 KB at 22.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-core/3.0/maven-core-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-core/3.0/maven-core-3.0.pom (7 KB at 16.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-settings/3.0/maven-settings-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-settings/3.0/maven-settings-3.0.pom (2 KB at 4.2 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-settings-builder/3.0/maven-settings-builder-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-settings-builder/3.0/maven-settings-builder-3.0.pom (3 KB at 4.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.pom (910 B at 2.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-repository-metadata/3.0/maven-repository-metadata-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-repository-metadata/3.0/maven-repository-metadata-3.0.pom (2 KB at 4.6 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-model-builder/3.0/maven-model-builder-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-model-builder/3.0/maven-model-builder-3.0.pom (3 KB at 5.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-aether-provider/3.0/maven-aether-provider-3.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-aether-provider/3.0/maven-aether-provider-3.0.pom (3 KB at 6.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-api/1.7/aether-api-1.7.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-api/1.7/aether-api-1.7.pom (2 KB at 3.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-parent/1.7/aether-parent-1.7.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-parent/1.7/aether-parent-1.7.pom (8 KB at 18.2 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-util/1.7/aether-util-1.7.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-util/1.7/aether-util-1.7.pom (3 KB at 4.2 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-impl/1.7/aether-impl-1.7.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-impl/1.7/aether-impl-1.7.pom (4 KB at 5.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-spi/1.7/aether-spi-1.7.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-spi/1.7/aether-spi-1.7.pom (2 KB at 2.7 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.pom (5 KB at 8.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/30/maven-shared-components-30.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-components/30/maven-shared-components-30.pom (5 KB at 9.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.pom (5 KB at 8.6 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.4/commons-io-2.4.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.4/commons-io-2.4.pom (10 KB at 20.8 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/25/commons-parent-25.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/25/commons-parent-25.pom (48 KB at 78.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.pom (13 KB at 17.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/39/commons-parent-39.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/39/commons-parent-39.pom (61 KB at 64.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/apache/16/apache-16.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/apache/16/apache-16.pom (16 KB at 20.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.3/plexus-archiver-3.3.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.3/plexus-archiver-3.3.pom (6 KB at 6.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.24/plexus-utils-3.0.24.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.24/plexus-utils-3.0.24.pom (5 KB at 7.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/4.0/plexus-4.0.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus/4.0/plexus-4.0.pom (21 KB at 34.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.pom (5 KB at 9.7 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.pom (4 KB at 8.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.2/commons-io-2.2.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.2/commons-io-2.2.pom (11 KB at 24.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/24/commons-parent-24.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/commons/commons-parent/24/commons-parent-24.pom (47 KB at 56.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.pom (13 KB at 19.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.pom (15 KB at 22.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.pom (2 KB at 3.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.22/plexus-interpolation-1.22.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.22/plexus-interpolation-1.22.pom (2 KB at 2.9 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.pom</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.pom (6 KB at 9.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-util/1.7/aether-util-1.7.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-component-annotations/1.6/plexus-component-annotations-1.6.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-component-annotations/1.6/plexus-component-annotations-1.6.jar (5 KB at 6.2 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar (60 KB at 56.8 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar (28 KB at 30.4 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-util/1.7/aether-util-1.7.jar (106 KB at 65.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar (14 KB at 10.8 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/3.1.1/maven-archiver-3.1.1.jar (24 KB at 33.0 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar (150 KB at 39.8 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-shared-utils/3.0.1/maven-shared-utils-3.0.1.jar (151 KB at 65.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-archiver/3.4/plexus-archiver-3.4.jar (183 KB at 71.3 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar (461 KB at 90.5 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/commons-io/commons-io/2.5/commons-io-2.5.jar (204 KB at 64.1 KB/sec)</span><br><span class="line">Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.24/plexus-utils-3.0.24.jar</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2.7.1/plexus-io-2.7.1.jar (84 KB at 47.8 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/iq80/snappy/snappy/0.4/snappy-0.4.jar (57 KB at 69.9 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/tukaani/xz/1.5/xz-1.5.jar (98 KB at 37.1 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/apache/commons/commons-compress/1.11/commons-compress-1.11.jar (416 KB at 95.4 KB/sec)</span><br><span class="line">Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.24/plexus-utils-3.0.24.jar (242 KB at 76.7 KB/sec)</span><br><span class="line">[INFO] Building jar: /var/lib/jenkins/workspace/simple-java-maven-app/target/my-app-1.0-SNAPSHOT.jar</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 51.459s</span><br><span class="line">[INFO] Finished at: Mon Dec 25 22:06:55 EST 2017</span><br><span class="line">[INFO] Final Memory: 25M/105M</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">Waiting for Jenkins to finish collecting data</span><br><span class="line">[JENKINS] Archiving /var/lib/jenkins/workspace/simple-java-maven-app/pom.xml to com.mycompany.app/my-app/1.0-SNAPSHOT/my-app-1.0-SNAPSHOT.pom</span><br><span class="line">[JENKINS] Archiving /var/lib/jenkins/workspace/simple-java-maven-app/target/my-app-1.0-SNAPSHOT.jar to com.mycompany.app/my-app/1.0-SNAPSHOT/my-app-1.0-SNAPSHOT.jar</span><br><span class="line">channel stopped</span><br><span class="line">Finished: SUCCESS</span><br></pre></td></tr></table></figure><p>构建结果如下：<br><img src="/archives/729f496/06.png" alt><br>主要包含如下内容：<br>1、修改记录，本次构建无显示No changes<br>2、构建触发人<br>3、git版本号及分支信息<br>4、构建模块信息</p><h1 id="查看构建产物及执行"><a href="#查看构建产物及执行" class="headerlink" title="查看构建产物及执行"></a>查看构建产物及执行</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /var/lib/jenkins/workspace/simple-java-maven-app/</span></span><br><span class="line"><span class="comment"># ll</span></span><br><span class="line">total 8</span><br><span class="line">drwxr-xr-x 3 jenkins jenkins   38 Dec 25 21:09 jenkins</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins 1196 Dec 25 21:09 pom.xml</span><br><span class="line">-rw-r--r-- 1 jenkins jenkins  744 Dec 25 21:09 README.md</span><br><span class="line">drwxr-xr-x 4 jenkins jenkins   28 Dec 25 21:09 src</span><br><span class="line">drwxr-xr-x 5 jenkins jenkins   90 Dec 25 22:16 target</span><br><span class="line"><span class="comment"># java -jar target/my-app-1.0-SNAPSHOT.jar</span></span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/729f496.html">https://mds1455975151.github.io/archives/729f496.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>管理技能之360度绩效考核</title>
      <link href="/archives/d2e71f9d.html"/>
      <url>/archives/d2e71f9d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>认识360度绩效考核</p></blockquote><p>360度绩效考核是绩效考核方法之一，其特点是评价维度多元化（通常是4或4个以上），适用于对中层以上的人员进行考核，对组织而言可以建立正确的导向。<br>360度绩效考核法作为企业实现战略变革的工具其具有如下作用：第一，有助于实现组织的战略目标；第二，有助于组织文化的转变；第三，有助于员工的个人发展；第四，有助于强化团队工作的效率；第五，符合员工培训和人才选拔的需要。</p><a id="more"></a><h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><p><strong>自己</strong><br>自我评价，是指让经理人针对自己在工作期间的绩效表现，或根据绩效表现评估其能力和并据此设定未来的目标。当员工对自己做评估时，通常会降低自我防卫意识，从而了解自己的不足，进而愿意加强、补充自己尚待开发或不足之处。<br><strong>同事</strong><br>同事的评价，是指由同事互评绩效的方式，来达到绩效评估的目的。对一些工作而言，有时上级与下属相处的时间与沟通机会，反而没有下属彼此之间多。在这种上级与下属接触的时间不多，彼此之间的沟通也非常少的情况下，上级要对部属做绩效评估也就非常困难。但相反的，下属彼此间工作在一起的时间很长，所以他们相互间的了解反而会比上级与部属更多。此时，他们之间的互评，反而能比较客观。而且，部属之间的互评，可以让彼此知道自己在人际沟通这方面的能力。<br><strong>下属</strong><br>由部属来评价上司，这个观念对传统的人力资源工作者而言似乎有点不可思议。但随着知识经济的发展，有越来越多的公司让员工评估其上级主管的绩效，此过程称为向上反馈。而这种绩效评估的方式对上级主管发展潜能上的开发，特别有价值。管理者可以通过下属的反馈，清楚地知道自己的管理能力有什么地方需要加强。若自己对自己的了解与部属的评价之间有太大的落差，则主管亦可针对这个落差，深入了解其中的原因。因此，一些人力资源管理专家认为，下属对上级主管的评估，会对其管理才能的发展有很大的裨益。<br><strong>主管</strong><br>主管的评价是绩效评估中最常见的方式，即绩效评估的工作是由主管来执行。因此身为主管必须熟悉评估方法，并善用绩效评估的结果做为指导部属，发展部属潜能的重要武器。<br>随着企业的调整，一些公司常常会推动一些跨部门的合作方案，因此一些员工可能同时会与很多主管一起共事。所以在绩效评估的系统建立上，亦可将多主管、矩阵式的绩效评估方式纳入绩效评估系统之中。</p><h1 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h1><p>1、准备阶段<br>2、评估阶段<br>3、反馈和辅导阶段</p><h1 id="优劣点"><a href="#优劣点" class="headerlink" title="优劣点"></a>优劣点</h1><h2 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h2><ul><li>打破了由上级考核下属的传统考核制度，可以避免传统考核中考核者极容易发生的“光环效应”、“居中趋势”、“偏紧或偏松”、“个人偏见”和“考核盲点”等现象。</li><li>一个员工想要影响多个人是困难的，管理层获得的信息更准确。</li><li>可以反映出不同考核者对于同一被考核者不同的看法。</li><li>防止被考核者急功近利的行为（如仅仅致力于与薪金密切相关的业绩指标）。</li><li>较为全面的反馈信息有助于被考核者多方面能力的提升。<br>360度绩效反馈法实际上是员工参与管理的方式，在一定程度上增加他们的自主性和对工作的控制，员工的积极性会更高，对组织会更忠诚，提高了员工的工作满意度。</li></ul><h2 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h2><ul><li>考核成本高。当一个人要对多个同伴进行考核时，时间耗费多，由多人来共同考核所导致的成本上升可能会超过考核所带来的价值。</li><li>成为某些员工发泄私愤的途径。某些员工不正视上司及同事的批评与建议，将工作上的问题上升为个人情绪，利用考核机会“公报私仇”。</li><li>考核培训工作难度大。组织要对所有的员工进行考核制度的培训，因为所有的员工既是考核者又是被考核者。</li></ul><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><ul><li>匿名考核。确保员工不知道任何一位考核小组成员是如何进行考核的（但主管人员的考核除外）。</li><li>加强考核者的责任意识。主管人员必须检查每一个考核小组成员的考核工作，让他们明白自己运用考核是否恰当，结果是否可靠，以及其他人员又是如何进行考核的。</li><li>采用统计程序和软件。运用加权平均或其他定量分析方法，综合处理所有评价。</li><li>识别和量化偏见。查出与年龄、性别、民族等有关的歧视或偏爱。</li></ul><h1 id="另考核法"><a href="#另考核法" class="headerlink" title="另考核法"></a>另考核法</h1><h1 id="方法选择"><a href="#方法选择" class="headerlink" title="方法选择"></a>方法选择</h1><h1 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h1><h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d2e71f9d.html">https://mds1455975151.github.io/archives/d2e71f9d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 管理技能 </tag>
            
            <tag> 360度绩效考核 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2017总结</title>
      <link href="/archives/fc0cc0a0.html"/>
      <url>/archives/fc0cc0a0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>2017总结</p></blockquote><a id="more"></a><h1 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h1><p><strong>异形：契约</strong><br>“科幻之父”雷德利-斯科特将为他所开创的《异形》系列带来新篇章。《异形：契约》的故事发生在《普罗米修斯》10年后，一群新的宇航员乘坐着“契约号”飞船前往遥远的星系寻找殖民地，他们来到一处看似天堂般的星球，实则是黑暗、危险的地狱，在那里他们见到了“普罗米修斯”号唯一的幸存者——由迈克尔·法斯宾德饰演的生化人大卫，一场毁灭性的巨大灾难即将到来。</p><p><strong>猩球崛起3：终极之战</strong><br>凯撒（安迪·瑟金斯 饰）领导的猿族将被迫与残暴的Colonel（伍迪·哈里森 饰）领导的人类军队上演一场生死大战。猿族在战斗中遭遇了前所未有的重创，由此激发了凯撒内心中黑暗的一面，心中燃起复仇的烈火。最终，凯撒与Colonel面对面进行了一场关乎猿族和人类命运的终极之战。<br><strong>逃出克隆岛</strong><br><strong>大鱼</strong><br><strong>血钻</strong><br><strong>人皮客栈1、2</strong><br><strong>前目的地</strong><br><strong>为什么是他</strong><br><strong>一树梨花压海棠</strong><br><strong>假如爱有天意</strong><br><strong>狱前教育</strong><br><strong>银河护卫队</strong><br><strong>蚁人</strong><br><strong>生化危机系列</strong><br><strong>白日梦想家</strong><br><strong>爆裂鼓手</strong><br><strong>极限特工</strong><br><strong>你是下一个</strong><br><strong>魔兽</strong><br><strong>风流老板俏秘书</strong><br><strong>王牌贱谍：格林斯比</strong><br><strong>战争之王</strong><br><strong>X战警天启</strong><br><strong>白宫管家</strong><br><strong>楚门的世界</strong><br><strong>人兽杂交</strong><br><strong>黑皮书</strong></p><p><strong>盲井</strong><br><strong>情圣</strong><br><strong>驴得水</strong><br><strong>让子弹飞</strong><br><strong>捉妖记</strong><br><strong>湄公河行动</strong><br><strong>九层妖塔</strong><br><strong>寻龙诀</strong><br><strong>解救吾先生</strong><br><strong>老炮儿</strong><br><strong>功夫瑜伽</strong><br><strong>冰河追凶</strong><br><strong>北京遇上西雅图之不二情书</strong><br><strong>导火新闻线</strong><br><strong>建国大业</strong></p><p><strong>看见恶魔</strong><br><strong>小姐</strong><br><strong>金福南杀人事件始末</strong><br><strong>冰冷热带鱼</strong></p><h1 id="电视剧"><a href="#电视剧" class="headerlink" title="电视剧"></a>电视剧</h1><p>1、猎场</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">郑秋冬是个为了理想坚持不懈的人，在好友老白和女友罗伊人的帮助下，事业逐渐有了起色，不想老白突然的去世与自己事业的一夜挫败，让郑秋冬危机重重，然而郑秋冬并不甘心，发愤图强，且在罗伊人的帮助下，平安度过难关，郑也因此对罗伊人产生情愫，只可惜两人缘分未到，遗憾擦肩而过。时间慢慢流逝，林拜的出现，给郑秋冬带来了非凡的机遇，而郑秋冬诚信为本的原则，让林拜更加刮目相看。机缘巧合，郑秋冬发现对手袁昆急功近利，准备使用极其不道德的手段达到目的，而郑秋冬面对自己的诚信与良知无法容忍袁昆将要给他人带来的伤害，于是通过各种手段成功阻止了袁昆败坏的行为，并且与好友一起并肩抗敌，共同面对挫折与难关，而郑秋冬也因为纯粹、高尚的诚实信条，赢得了罗伊人的倾心与事业上的璀璨荣耀。</span><br></pre></td></tr></table></figure><p>2、今生是第一次</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">该剧以“30代未婚青春”为主题，讲述了买不起房的年轻世代们在实际生活中遭遇的故事。李民基在剧中饰演只有房子玄关所有权的房奴南世熙，他在受尽各种委屈后，跟一辈子都买不起房的露宿者尹智昊（郑素敏饰）相遇。两人在一起入住同一间房子之后，逐渐开始产生爱情火花。</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fc0cc0a0.html">https://mds1455975151.github.io/archives/fc0cc0a0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2017 </tag>
            
            <tag> 总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>管理技能之领导力</title>
      <link href="/archives/c660564f.html"/>
      <url>/archives/c660564f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>认识领导力</p></blockquote><p>领导力（Leadership）指在管辖的范围内充分地利用人力和客观条件在以最小的成本办成所需的事提高整个团体的办事效率的能力，比较常见的领导力开发方法包括CEO12篇领导力提升、EMBA及EDP项目等。领导力与组织发展密不可分，因此常常将领导力和组织发展放在一起，衍生出了更具实战意义的课程《领导力与组织发展》<br>领导力心理学是以心理学为基础、以管理应用为实践、以组织实验为依托，塑造管理者领导魅力的学科；重新审视管理者的误区，突破管理瓶颈，改善管理氛围；培养管理工作中让别人说“是” 的能力—–让否定、拒绝、抵抗、放弃变成认同、接纳、支持、执行；应用于领导、管理、沟通、团队、策划、营销等诸多领域。</p><a id="more"></a><h1 id="领导力定义"><a href="#领导力定义" class="headerlink" title="领导力定义"></a>领导力定义</h1><h1 id="主要类型"><a href="#主要类型" class="headerlink" title="主要类型"></a>主要类型</h1><p>变革型和交易型领导力<br>愿景型领导力<br>安全领导力<br>无形领导力</p><h1 id="领导力软件"><a href="#领导力软件" class="headerlink" title="领导力软件"></a>领导力软件</h1><p>日事清是领导力软件，旨在提升leader领导力。<br>时间锤是领导力软件。</p><h1 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h1><h2 id="评价和期许"><a href="#评价和期许" class="headerlink" title="评价和期许"></a>评价和期许</h2><p>作为一个领导者，究竟需要哪些能力呢？在现实生活中，人们经常会<br>对领导人做出如下的一些评价和期许：</p><ul><li>领导人要有超速成长的能力，总是走在时代的前列，走在队伍的前列；</li><li>领导人应该高瞻远瞩，能够鉴常人之所不能鉴，能够为常人所不能为；</li><li>领导人应该能选贤任能，可以把优秀的人才与企业的财和物聚合在一起，创造业绩；</li><li>领导人应该能不断地复制自己，带队育人；</li><li>领导人应该有超常的绩效；</li><li>领导人应该会凝聚人心，使人们心甘情愿地跟他走，拥有大批的追随者。</li></ul><h2 id="六种能力"><a href="#六种能力" class="headerlink" title="六种能力"></a>六种能力</h2><p>如果人们对以上的特质不是停留在感觉的层面、印象的层面，而是把它们抽象出来，就会构成一个领导力模型。这个领导力模型具体包括以下六种能力：</p><ul><li>学习力，构成的是领导人超速的成长能力；</li><li>决策力，是领导人高瞻远瞩的能力的表现；</li><li>组织力，即领导人选贤任能的能力的表现；</li><li>教导力，是领导人带队育人的能力；</li><li>执行力，表现为领导人的超常的绩效；</li><li>感召力，更多地表现为领导人的人心所向的能力。</li></ul><h1 id="领导力的四个维度"><a href="#领导力的四个维度" class="headerlink" title="领导力的四个维度"></a>领导力的四个维度</h1><p>所谓领导力，就是建立愿景目标的能力，是使自己与他人承诺于企业长期成功的能力，是激发他人自信心和热情的能力，是确保战略实施的能力。受益于全球标杆企业的领导力课题研究成果，作者结合几年来访谈众多企业高层的发现，为中国企业领导者建立了四维领导力模型：价值取向、趋势把握、组织运营和人才发展。作者将透过领导者的绩效差距分析他们的能力差距，设计出有效的能力发展方案。同时，作者也希望这个模型能够成为帮助组织发展的实用工具，对组织培养和保留关键人才，进而发展和巩固组织的核心能力起到积极作用。<br><strong>第一维度：明道——价值取向</strong><br>一、自我领导<br>二、共启愿景<br>三、学习型组织<br><strong>第二维度：取势——趋势把握</strong><br>一、战略思维<br>二、有效决策<br>三、创新与变革<br><strong>第三维度：优术——组织运营</strong><br>一、绩效管理<br>二、制度构建<br>三、流程管理<br><strong>第四维度：树人——人才发展</strong><br>一、识人用人<br>二、有效指导<br>三、激励人心</p><h1 id="塑造方法"><a href="#塑造方法" class="headerlink" title="塑造方法"></a>塑造方法</h1><p>第一步，为部下设定合理的工作目标。<br>第二步，帮助部下制定实施计划。<br>第三步，辅导部下掌握工作技能。<br>第四步，制定高效科学的工作流程。<br>第五步，定期检查督导部下的工作进展。<br>第六步，实施公平合理的绩效评估。<br>第七步，指导部下撰写工作报告。<br>第八步，按季度为上级提供个人工作述职报告。</p><h1 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h1><p>愿景比管控更重要<br>信念比指标更重要<br>人才比战略更重要<br>团队比个人更重要<br>授权比命令更重要<br>平等比权威更重要<br>均衡比魄力更重要<br>理智比激情更重要<br>真诚比体面更重要</p><h1 id="领导力特征"><a href="#领导力特征" class="headerlink" title="领导力特征"></a>领导力特征</h1><p><strong>积极进取</strong><br>努力进取包括对成功的强烈欲望、不断地努力提高、具有雄心、抱负、精力、毅力、主动性。在一些国家，高层管理者成功的欲望与组织的增长率显示了高度的相关性。但是，如果领导者只集中于个人成就，不充分授权的话，对成功的欲望又会成为一个障碍，然而对成功的欲望只能用于预测创业型公司的有效性，而不能用于预测更大、更官僚公司的部门领导的有效性。<br><strong>强烈欲望</strong><br>伟大的领导者不仅有进取精神，而且他们还有领导的愿望，他们有强烈的权力欲望，喜欢领导别人，而不想被人领导。强烈的权力欲望促使人们试图去影响别人，并在领导过程中获得满足和收益，当权力需要是符合道德的，而不是损害别人时，领导者将激发更多信任、尊重和对远景的认同。<br><strong>正直</strong><br>正直即是言行一致，诚实可信。它除了是个人较重要的性格特征外，对领导者来说更重要，因为这些特点能激发对别人的信任。<br><strong>自信</strong><br>自信是非常重要的。领导者角色是具有挑战性的，而挫折是难免的，自信能让领导者克服困难，在不确定的情况下敢于作出决策，并且能逐渐将自信传给其他人。<br>一个有效的领导对他们的行业、公司和技术问题了解颇多。领导者必须有足够的才智才能使他可以解释大量的信息，高学历在职业生涯中是重要的。但最终也不如有关组织的事务专长更重要。<br>最后，有种个人技能可能是最重要的，感知别人的需要和目标并据此调整领导方式方法的能力，领导意味着能评价别人，评估环境，并且选择或改变行为以便能更有效地对环境的要求作出反应，这种品质是领导情境理论的基础。</p><h1 id="剖析领导力"><a href="#剖析领导力" class="headerlink" title="剖析领导力"></a>剖析领导力</h1><p>领导力解析<br>野牛群中的领导者<br>推陈出新，胜负立现<br>打破平衡，不同凡响</p><h1 id="提升方法"><a href="#提升方法" class="headerlink" title="提升方法"></a>提升方法</h1><p>1、学会用老板眼光看企业：在老板看来，管理很简单，就是两件事；<br>一是扩大业务范围，增加业务收入；<br>另一件事就是降低管理成本，控制运作费用。长松咨询认为其实这两件事，最终是一件事，收入减去成本，减去费用，就是利润。所以归根到底老板是看利润的，利润要从管理中来。<br>2、从被领导中学习领导：在领导人看来，领导也很简单，就是两件事<br>一是用人，内圈用德，外圈用才，用人所长，容人所短；<br>二是激励，解人之难、记人之功，通过正面激励，引导下属往前跑，通过负面激励，推动下属往前走。要知道，任何领导都是从做下属开始的，谁都不可能一步登天当领导。<br>在每个人的成长过程中，你会经历大大小小许多领导，只要你用心学习，不管是好领导，还是坏领导，你都可以从正反两方面学到经验和教训，这对你将来当好领导是十分珍贵的经历。</p><h2 id="历练法则"><a href="#历练法则" class="headerlink" title="历练法则"></a>历练法则</h2><h2 id="修炼关键"><a href="#修炼关键" class="headerlink" title="修炼关键"></a>修炼关键</h2><h2 id="五大方法"><a href="#五大方法" class="headerlink" title="五大方法"></a>五大方法</h2><p>领导力的引发无外是由下属所赋予和其上司所支使。下必所赋予的领导力如心理契约、长幼有序、依存心理、危机心理等是上司不可随意支配的，故没办法从这方面着手去增强；相反应该由上司所支使的以下五种力来去做工夫，以求加强。<br>1、 威吓力：领导者可以借此力（如调职、降级、惩戒、解雇等手腕）令下属顺从他的旨意。<br>2、法定力：可以借此组织架构上的法定地位的权力发挥其影响力。<br>3、报偿力：透过适当的报偿手段（加薪、升职等）来影响下属的行为。<br>4、专家力：上司籍其所拥有的丰富经验、灵通信息、技术或准确的分析判断力而令下属信服。下属接受其提议或工作指引是因为对上司的能力具有信心而接受它。<br>5、吸引力（向心力）：上司令可以以他在部属心中的魅力以支配部属的行为，部属因尊重及崇拜上司而主动地向上司认同，并设法按上司旨意办事。</p><h2 id="四个步骤"><a href="#四个步骤" class="headerlink" title="四个步骤"></a>四个步骤</h2><h1 id="高标准法则"><a href="#高标准法则" class="headerlink" title="高标准法则"></a>高标准法则</h1><p>01、全方位的楷模：<br>1)：通晓全情;2)：亲身上阵监督;3)：全面和详细了解即将发生的事;4)：强有力地亲临现场领导;5)：树立个人榜样的能力;6)：沟通——解释——命令的能力;7)：确保命令得到彻底执行<br>02、弹性化驾驭：保持驱使与引导之间的弹性<br>03、敏锐的洞察力：找善于走捷径、能合理调配人、财、物、完成任务的人<br>04、领导的奉献精神：使命感造就奉献精神<br>05、能赢的心态：挫折、失败不是结论，而是通往成功之路的坎坷<br>06、必要时采取果断措施<br>07、主动出击：不给竞争者牵制你的机会，只面问题，抢占市场，攻击对手，<br>08、马上利用现有资源：机会最容易在等待中错过<br>09、坚定决心：借口永远是成功的绊脚石<br>10、不断学习：战胜未来，战胜对手的唯一方法<br>11、始终要有备用计划<br>12、尽可能处于最佳位置：目标要全面、彻底，能完成<br>13、使用有效的系统<br>14、关心部属：了解你和你部属的工作极限<br>15、站在知识的前沿阵地：技术、信息、市场、买卖双方的关系，你至少要抢占一个，并坚守他<br>16、透析竞争对手的策略：从公开的信息中了解对手，从媒体了解信息，注意辨别信息真伪，留意对手的行动，寻找弱点，攻击弱点<br>17、行动大于计划<br>18、始终要追踪结果。任何事要以结果为导向<br>19、要对人进行投资：投入时间，精力和其他资源，建立一支强大的团队，才是最重要的<br>20、有效的组建团队，在共同目标上同心同德<br>21、提供一个独立创造的空间：要相信开发、鼓励和奖赏个人创造的重要性<br>22、相互尊重：公开赞扬，私下批评<br>23、激发信心：失败归己，荣誉归下属<br>24、激励部属内在的激情：好领导是让部属自己改变<br>25、表扬必须及时公开<br>26、确保既定目标有意义<br>27、沟通是关键，不要与下属建立阻隔<br>28、发挥会议的作用。利用会议协调机构，交换看法<br>29、发挥公众演说的魅力：培养机敏能力，特别是即兴说话<br>30、尊重部属：尊重他们的需求，关心他们，使他们满足<br>31、工作要有价值：何时行动，何时休息，何时准备要清楚，不滥用人力资源，而达不到理想的工作效果<br>32、目标至上，做好应变心理<br>33、冒险出奇迹：胆大心细创奇迹<br>34、差异最大化</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c660564f.html">https://mds1455975151.github.io/archives/c660564f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 管理技能 </tag>
            
            <tag> 管理 </tag>
            
            <tag> 领导力 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站备案</title>
      <link href="/archives/643ecf01.html"/>
      <url>/archives/643ecf01.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如何进行网站备案？网站备案有哪些利弊？</p></blockquote><a id="more"></a><h1 id="网站备案概念"><a href="#网站备案概念" class="headerlink" title="网站备案概念"></a>网站备案概念</h1><p><a href="https://baike.baidu.com/item/%E7%BD%91%E7%AB%99%E5%A4%87%E6%A1%88/620434?fr=aladdin" target="_blank" rel="noopener">网站备案</a></p><h1 id="网站备案利弊"><a href="#网站备案利弊" class="headerlink" title="网站备案利弊"></a>网站备案利弊</h1><h2 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h2><p>1、免费的CDN加速基本都需要备案<br>2、万网的域名解析显性URL或者隐型URL跳转需要备案<br>3、加入广告联盟网站都需要备案(例如：京东)<br>4、不备案cn域名无法解析<br>5、…..</p><h2 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h2><p>好像没啥劣势，就是麻烦点</p><h1 id="网站备案流程"><a href="#网站备案流程" class="headerlink" title="网站备案流程"></a>网站备案流程</h1><p><a href="https://jingyan.baidu.com/article/5bbb5a1b3bbd1213eaa1797e.html" target="_blank" rel="noopener">个人网站怎么备案</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/643ecf01.html">https://mds1455975151.github.io/archives/643ecf01.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站备案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo同时部署到GitHub与Coding</title>
      <link href="/archives/dc5d7546.html"/>
      <url>/archives/dc5d7546.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如何将Hexo博客同时部署到GitHub与Coding，通过调整域名解析实现博客的全局加速？</p></blockquote><a id="more"></a><h1 id="Hexo博客部署到GitHub"><a href="#Hexo博客部署到GitHub" class="headerlink" title="Hexo博客部署到GitHub"></a>Hexo博客部署到GitHub</h1><p>参考之前文章:<a href="http://www.mdslq.cn/archives/1d0ef806.html" target="_blank" rel="noopener">使用GitHub+Hexo+Next搭建静态博客</a></p><h1 id="Coding介绍"><a href="#Coding介绍" class="headerlink" title="Coding介绍"></a>Coding介绍</h1><p>Coding 是一个面向开发者的云端开发平台[1] ，目前提供代码托管，运行空间，质量控制，项目管理等功能。此外，还提供社会化协作功能，包含了社交元素，方便开发者进行技术讨论和协作。<br>2016年3月CODING宣布收购代码托管平台GitCafe。<br><a href="https://coding.net/" target="_blank" rel="noopener">官网地址</a></p><h1 id="Coding配置"><a href="#Coding配置" class="headerlink" title="Coding配置"></a>Coding配置</h1><h2 id="配置流程说明"><a href="#配置流程说明" class="headerlink" title="配置流程说明"></a>配置流程说明</h2><p>新建项目–配置密钥–修改hexo主配置新增Coding仓库–发布代码</p><h2 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h2><p>项目–添加项目–填写项目基本信息–创建项目–Pages服务</p><h2 id="配置密钥"><a href="#配置密钥" class="headerlink" title="配置密钥"></a>配置密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen.exe</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/c/Users/Administrator/.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">'/c/Users/Administrator/.ssh'</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /c/Users/Administrator/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /c/Users/Administrator/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:ZWPN5fxsWVkjIQ1lEMz67HgN0bRHZglzpMtKMg4+LgQ Administrator@JHN44SLTQ4950SC</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|          o=*B=+o|</span></span><br><span class="line"><span class="string">|           =o*==+|</span></span><br><span class="line"><span class="string">|          * =.B..|</span></span><br><span class="line"><span class="string">|   E     = o.o.+o|</span></span><br><span class="line"><span class="string">|    .  .Soo..o..+|</span></span><br><span class="line"><span class="string">|     .. o ++.  . |</span></span><br><span class="line"><span class="string">|    .  o .o.o    |</span></span><br><span class="line"><span class="string">|     .. .. o .   |</span></span><br><span class="line"><span class="string">|      ..  .      |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">$ ls -al /c/Users/Administrator/.ssh/</span></span><br><span class="line"><span class="string">total 17</span></span><br><span class="line"><span class="string">drwxr-xr-x 1 Administrator 197121    0 十二 20 16:29 ./</span></span><br><span class="line"><span class="string">drwxr-xr-x 1 Administrator 197121    0 十二 20 17:03 ../</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 Administrator 197121 1675 十二 20 16:25 id_rsa</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 Administrator 197121  411 十二 20 16:25 id_rsa.pub</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 Administrator 197121 1594 十二 20 17:03 known_hosts</span></span><br><span class="line"><span class="string">$ cat /c/Users/Administrator/.ssh/id_rsa.pub</span></span><br><span class="line"><span class="string">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCw9CPE44v69nKyax5jgyUSL0p60K3HRo8/jnDd2zJk3O4FSKp20BnNMr3V52G4mIHtqP4ymx8rECD0W25ArIuVY7bKmwMKLQDueNrgNfJuA2hsjdQVTPrK7styptKQTGxPWazgRc4Gtd/ARZqSBB4PlwGNeRwPJmHY8pcubnlmEBsdfasdbaaNBAsdfasdf7w28D1fsdfsdfRJZqzQtBkeEy2N+idpueZitD3nmlXj0/PlK0pz7rAU8GI3nnZ429jyUts348atlcSQV7shFUZ7PKzMz/0tr6c7h97euEU4JMKA7+HhIpEqXvcgrQ7Nwgu1v1l97/9rNbZ3DKZ45xLUQ4Q1krgd+5oeiPjbpzJ Administrator@JHN44SLTDFGQ4950SC</span></span><br></pre></td></tr></table></figure><p>将获取的公钥信息添加Coding后台(账号–SSH公钥–新增公钥)</p><h2 id="Hexo配置"><a href="#Hexo配置" class="headerlink" title="Hexo配置"></a>Hexo配置</h2><p>hexo-deploy-git配置2个以上Git账号<br><a href="https://www.npmjs.com/package/hexo-deployer-git" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-deployer-git</a><br>我的配置如下：<br>原配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/mds1455975151/mds1455975151.github.io.git</span></span><br></pre></td></tr></table></figure><p>新配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">https://github.com/mds1455975151/mds1455975151.github.io.git</span></span><br><span class="line">    <span class="attr">coding:</span> <span class="string">git@git.coding.net:yujianyuanxingk/mds1455975151.git</span></span><br></pre></td></tr></table></figure><h2 id="发布代码并测试"><a href="#发布代码并测试" class="headerlink" title="发布代码并测试"></a>发布代码并测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h1 id="域名设置"><a href="#域名设置" class="headerlink" title="域名设置"></a>域名设置</h1><p>将Coding设置为默认线路解析，将Github设置为海外线路解析<br><img src="/archives/dc5d7546/01.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.cnblogs.com/tengj/p/5352572.html" target="_blank" rel="noopener">hexo干货系列：（四）将hexo博客同时托管到github和coding</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/dc5d7546.html">https://mds1455975151.github.io/archives/dc5d7546.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git技能大总结之Git基础</title>
      <link href="/archives/68cb3bb5.html"/>
      <url>/archives/68cb3bb5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Git基础操作内容，包括如何获取Git仓库，查看、提交、撤销、打标签等等常规操作</p></blockquote><p><a href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository" target="_blank" rel="noopener">本节官网地址</a></p><h1 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h1><p>在学习完本章之后，你应该能够配置并初始化一个仓库（repository）、开始或停止跟踪（track）文件、暂存（stage）或提交（commit)更改。 本章也将向你演示如何配置 Git 来忽略指定的文件和文件模式、如何迅速而简单地撤销错误操作、如何浏览你的项目的历史版本以及不同提交（commits）间的差异、如何向你的远程仓库推送（push）以及如何从你的远程仓库拉取（pull）文件。</p><h1 id="Getting-a-Git-Repository-获取Git仓库"><a href="#Getting-a-Git-Repository-获取Git仓库" class="headerlink" title="Getting a Git Repository 获取Git仓库"></a>Getting a Git Repository 获取Git仓库</h1><p>两种方式：<br>1、在现有项目或目录下导入所有文件到 Git 中<br>2、从一个服务器克隆一个现有的 Git 仓库<br><strong>在现有目录中初始化仓库</strong><br>场景：对现有的项目进行管理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ git add *.c</span><br><span class="line">$ git add LICENSE</span><br><span class="line">$ git commit -m <span class="string">'initial project version'</span></span><br></pre></td></tr></table></figure><p>git init 将创建一个.git的子目录，里面含有初始化git仓库中所有的必须文件，这些文件是Git仓库的骨干。<br><strong>克隆现有的仓库</strong><br>场景：想为某个开源项目贡献自己的一份力，新入职一家新公司，需要熟悉公司项目代码等等</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/libgit2/libgit2</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/libgit2/libgit2 mylibgit</span><br></pre></td></tr></table></figure><p>注：Git支持多种数据传输协议，例如：https:// git:// ssh传输协议等</p><h1 id="Recording-Changes-to-the-Repository-记录每次更新到仓库"><a href="#Recording-Changes-to-the-Repository-记录每次更新到仓库" class="headerlink" title="Recording Changes to the Repository 记录每次更新到仓库"></a>Recording Changes to the Repository 记录每次更新到仓库</h1><p>使用Git时文件的生命周期如下：<br><img src="/archives/68cb3bb5/lifecycle.png" alt><br><strong>检查当前文件状态</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure><p>这说明目前的工作目录很干净，所有已跟踪文件在上次提交后都未被更改过。此外，上面的信息还表明，当前目录下没有出现任何处于未跟踪状态的新文件，否则 Git 会在这里列出来。 最后，该命令还显示了当前所在分支，并告诉你这个分支同远程服务器上对应的分支没有偏离。 现在，分支名是 “master”,这是默认的分支名。<br>在项目下新建README文件，查看相关操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'My Project'</span> &gt; README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">    README</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</span><br></pre></td></tr></table></figure><p>在状态报告中可以看到新建的 README 文件出现在 Untracked files 下面。 未跟踪的文件意味着 Git 在之前的快照（提交）中没有这些文件；Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”， 这样的处理让你不必担心将生成的二进制文件或其它不想被跟踪的文件包含进来。 不过现在的例子中，我们确实想要跟踪管理 README 这个文件。<br><strong>跟踪新文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git add README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br></pre></td></tr></table></figure><p><strong>暂存已修改文件</strong><br>现在我们来修改一个已被跟踪的文件。 如果你修改了一个名为 CONTRIBUTING.md 的已被跟踪的文件，然后运行 git status 命令，会看到下面内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>文件 CONTRIBUTING.md 出现在 Changes not staged for commit 这行下面，说明已跟踪文件的内容发生了变化，但还没有放到暂存区。 要暂存这次更新，需要运行 git add 命令。 这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。 将这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。 现在让我们运行 git add 将”CONTRIBUTING.md”放到暂存区，然后再看看 git status 的输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>现在两个文件都已暂存，下次提交时就会一并记录到仓库。 假设此时，你想要在 CONTRIBUTING.md 里再加条注释， 重新编辑存盘后，准备好提交。 不过且慢，再运行 git status 看看：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ vim CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>怎么回事？ 现在 CONTRIBUTING.md 文件同时出现在暂存区和非暂存区。 这怎么可能呢？ 好吧，实际上 Git 只不过暂存了你运行 git add 命令时的版本， 如果你现在提交，CONTRIBUTING.md 的版本是你最后一次运行 git add 命令时的那个版本，而不是你运行 git commit 时，在工作目录中的当前版本。 所以，运行了 git add 之后又作了修订的文件，需要重新运行 git add 把最新版本重新暂存起来：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    new file:   README</span><br><span class="line">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p><strong>状态简览</strong><br>git status 命令的输出十分详细，但其用语有些繁琐。 如果你使用 git status -s 命令或 git status –short 命令，你将得到一种更为紧凑的格式输出。 运行 git status -s ，状态报告输出如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line"> M README</span><br><span class="line">MM Rakefile</span><br><span class="line">A  lib/git.rb</span><br><span class="line">M  lib/simplegit.rb</span><br><span class="line">?? LICENSE.txt</span><br></pre></td></tr></table></figure><p>新添加的未跟踪文件前面有 ?? 标记，新添加到暂存区中的文件前面有 A 标记，修改过的文件前面有 M 标记。 你可能注意到了 M 有两个可以出现的位置，出现在右边的 M 表示该文件被修改了但是还没放入暂存区，出现在靠左边的 M 表示该文件被修改了并放入了暂存区。 例如，上面的状态报告显示： README 文件在工作区被修改了但是还没有将修改后的文件放入暂存区,lib/simplegit.rb 文件被修改了并将修改后的文件放入了暂存区。 而 Rakefile 在工作区被修改并提交到暂存区后又在工作区中被修改了，所以在暂存区和工作区都有该文件被修改了的记录。<br><strong>忽略文件</strong><br>一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。 通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。 在这种情况下，我们可以创建一个名为 .gitignore 的文件，列出要忽略的文件模式。 来看一个实际的例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat .gitignore</span><br><span class="line">*.[oa]</span><br><span class="line">*~</span><br></pre></td></tr></table></figure><p>第一行告诉 Git 忽略所有以 .o 或 .a 结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的。 第二行告诉 Git 忽略所有以波浪符（~）结尾的文件，许多文本编辑软件（比如 Emacs）都用这样的文件名保存副本。 此外，你可能还需要忽略 log，tmp 或者 pid 目录，以及自动生成的文档等等。 要养成一开始就设置好 .gitignore 文件的习惯，以免将来误提交这类无用的文件。<br>文件 .gitignore 的格式规范如下：</p><ul><li>所有空行或者以 ＃ 开头的行都会被 Git 忽略。</li><li>可以使用标准的 glob 模式匹配。</li><li>匹配模式可以以（/）开头防止递归。</li><li>匹配模式可以以（/）结尾指定目录。</li><li>要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。<br>所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。 星号（<em>）匹配零个或多个任意字符；[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的数字）。 使用两个星号（</em>) 表示匹配任意中间目录，比如<code>a/**/z</code> 可以匹配 a/z, a/b/z 或 <code>a/b/c/z</code>等。<br>我们再看一个 .gitignore 文件的例子：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># no .a files</span></span><br><span class="line">*.a</span><br><span class="line"><span class="comment"># but do track lib.a, even though you're ignoring .a files above</span></span><br><span class="line">!lib.a</span><br><span class="line"><span class="comment"># only ignore the TODO file in the current directory, not subdir/TODO</span></span><br><span class="line">/TODO</span><br><span class="line"><span class="comment"># ignore all files in the build/ directory</span></span><br><span class="line">build/</span><br><span class="line"><span class="comment"># ignore doc/notes.txt, but not doc/server/arch.txt</span></span><br><span class="line">doc/*.txt</span><br><span class="line"><span class="comment"># ignore all .pdf files in the doc/ directory</span></span><br><span class="line">doc/**/*.pdf</span><br></pre></td></tr></table></figure></li></ul><p><strong>查看已暂存和未暂存的修改</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br></pre></td></tr></table></figure><p><strong>提交更新</strong><br>现在的暂存区域已经准备妥当可以提交了。 在此之前，请一定要确认还有什么修改过的或新建的文件还没有 git add 过，否则提交的时候不会记录这些还没暂存起来的变化。 这些修改过的文件只保留在本地磁盘。 所以，每次准备提交前，先用 git status 看下，是不是都已暂存起来了， 然后再运行提交命令 git commit：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit</span><br></pre></td></tr></table></figure><p>这种方式会启动文本编辑器以便输入本次提交的说明。 (默认会启用 shell 的环境变量 $EDITOR 所指定的软件，一般都是 vim 或 emacs。当然也可以按照 起步 介绍的方式，使用 git config –global core.editor 命令设定你喜欢的编辑软件。）<br>编辑器会显示类似下面的文本信息（本例选用 Vim 的屏显方式展示）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Please enter the commit message for your changes. Lines starting</span></span><br><span class="line"><span class="comment"># with '#' will be ignored, and an empty message aborts the commit.</span></span><br><span class="line"><span class="comment"># On branch master</span></span><br><span class="line"><span class="comment"># Changes to be committed:</span></span><br><span class="line"><span class="comment">#new file:   README</span></span><br><span class="line"><span class="comment">#modified:   CONTRIBUTING.md</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line"><span class="string">".git/COMMIT_EDITMSG"</span> 9L, 283C</span><br></pre></td></tr></table></figure><p>可以看到，默认的提交消息包含最后一次运行 git status 的输出，放在注释行里，另外开头还有一空行，供你输入提交说明。 你完全可以去掉这些注释行，不过留着也没关系，多少能帮你回想起这次更新的内容有哪些。 (如果想要更详细的对修改了哪些内容的提示，可以用 -v 选项，这会将你所做的改变的 diff 输出放到编辑器中从而使你知道本次提交具体做了哪些修改。） 退出编辑器时，Git 会丢掉注释行，用你输入提交附带信息生成一次提交。<br>另外，你也可以在 commit 命令后添加 -m 选项，将提交信息与命令放在同一行，如下所示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">"Story 182: Fix benchmarks for speed"</span></span><br><span class="line">[master 463dc4f] Story 182: Fix benchmarks <span class="keyword">for</span> speed</span><br><span class="line"> 2 files changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 README</span><br></pre></td></tr></table></figure><p>好，现在你已经创建了第一个提交！ 可以看到，提交后它会告诉你，当前是在哪个分支（master）提交的，本次提交的完整 SHA-1 校验和是什么（463dc4f），以及在本次提交中，有多少文件修订过，多少行添加和删改过。<br>请记住，提交时记录的是放在暂存区域的快照。 任何还未暂存的仍然保持已修改状态，可以在下次提交时纳入版本管理。 每一次运行提交操作，都是对你项目作一次快照，以后可以回到这个状态，或者进行比较。<br><strong>移除文件</strong><br>要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。 可以用 git rm 命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。<br>如果只是简单地从工作目录中手工删除文件，运行 git status 时就会在 “Changes not staged for commit” 部分（也就是 未暂存清单）看到：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ rm PROJECTS.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add/rm &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        deleted:    PROJECTS.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br></pre></td></tr></table></figure><p>然后再运行 git rm 记录此次移除文件的操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git rm PROJECTS.md</span><br><span class="line">rm <span class="string">'PROJECTS.md'</span></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    deleted:    PROJECTS.md</span><br></pre></td></tr></table></figure><p>下一次提交时，该文件就不再纳入版本管理了。 如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f（译注：即 force 的首字母）。 这是一种安全特性，用于防止误删还没有添加到快照的数据，这样的数据不能被 Git 恢复。<br>另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。 换句话说，你想让文件保留在磁盘，但是并不想让 Git 继续跟踪。 当你忘记添加 .gitignore 文件，不小心把一个很大的日志文件或一堆 .a 这样的编译生成文件添加到暂存区时，这一做法尤其有用。 为达到这一目的，使用 –cached 选项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached README</span><br></pre></td></tr></table></figure><p>git rm 命令后面可以列出文件或者目录的名字，也可以使用 glob 模式。 比方说：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm <span class="built_in">log</span>/\*.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p>注意到星号 * 之前的反斜杠 \， 因为 Git 有它自己的文件模式扩展匹配方式，所以我们不用 shell 来帮忙展开。 此命令删除 log/ 目录下扩展名为 .log 的所有文件。 类似的比如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm \*~</span><br></pre></td></tr></table></figure><p>该命令为删除以 ~ 结尾的所有文件。<br><strong>移动文件</strong><br>不像其它的 VCS 系统，Git 并不显式跟踪文件移动操作。 如果在 Git 中重命名了某个文件，仓库中存储的元数据并不会体现出这是一次改名操作。 不过 Git 非常聪明，它会推断出究竟发生了什么，至于具体是如何做到的，我们稍后再谈。<br>既然如此，当你看到 Git 的 mv 命令时一定会困惑不已。 要在 Git 中对文件改名，可以这么做：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git mv file_from file_to</span><br></pre></td></tr></table></figure><p>它会恰如预期般正常工作。 实际上，即便此时查看状态信息，也会明白无误地看到关于重命名操作的说明：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git mv README.md README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">    renamed:    README.md -&gt; README</span><br></pre></td></tr></table></figure><p>其实，运行 git mv 就相当于运行了下面三条命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mv README.md README</span><br><span class="line">$ git rm README.md</span><br><span class="line">$ git add README</span><br></pre></td></tr></table></figure><p>如此分开操作，Git 也会意识到这是一次改名，所以不管何种方式结果都一样。 两者唯一的区别是，mv 是一条命令而另一种方式需要三条命令，直接用 git mv 轻便得多。 不过有时候用其他工具批处理改名的话，要记得在提交前删除老的文件名，再添加新的文件名。</p><h1 id="Viewing-the-Commit-History-查看提交历史"><a href="#Viewing-the-Commit-History-查看提交历史" class="headerlink" title="Viewing the Commit History  查看提交历史"></a>Viewing the Commit History 查看提交历史</h1><p>在提交了若干更新，又或者克隆了某个项目之后，你也许想回顾下提交历史。 完成这个任务最简单而又有效的工具是 git log 命令。<br>接下来的例子会用我专门用于演示的 simplegit 项目， 运行下面的命令获取该项目源代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/schacon/simplegit-progit</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">$ git <span class="built_in">log</span> -p -2</span><br><span class="line">$ git <span class="built_in">log</span> --<span class="built_in">stat</span></span><br></pre></td></tr></table></figure><h1 id="Undoing-Things-撤销操作"><a href="#Undoing-Things-撤销操作" class="headerlink" title="Undoing Things  撤销操作"></a>Undoing Things 撤销操作</h1><h1 id="Working-with-Remotes-远程仓库的使用"><a href="#Working-with-Remotes-远程仓库的使用" class="headerlink" title="Working with Remotes  远程仓库的使用"></a>Working with Remotes 远程仓库的使用</h1><h1 id="Tagging-打标签"><a href="#Tagging-打标签" class="headerlink" title="Tagging 打标签"></a>Tagging 打标签</h1><h1 id="Git-Aliases-Git别名"><a href="#Git-Aliases-Git别名" class="headerlink" title="Git Aliases Git别名"></a>Git Aliases Git别名</h1><h1 id="Summary-总结"><a href="#Summary-总结" class="headerlink" title="Summary 总结"></a>Summary 总结</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/68cb3bb5.html">https://mds1455975151.github.io/archives/68cb3bb5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> 基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git技能大总结之Git入门</title>
      <link href="/archives/fcd6e7da.html"/>
      <url>/archives/fcd6e7da.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Git的使用已经成为现在技术人员的必备技能，无论是个人使用还是公司业务都无处不在。</p></blockquote><a id="more"></a><h1 id="Getting-Started-起步"><a href="#Getting-Started-起步" class="headerlink" title="Getting Started 起步"></a>Getting Started 起步</h1><p><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">本节官网地址</a></p><h1 id="About-Version-Control-关于版本控制"><a href="#About-Version-Control-关于版本控制" class="headerlink" title="About Version Control 关于版本控制"></a>About Version Control 关于版本控制</h1><p><strong>关于版本控制</strong><br>版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。<br><strong>本地版本控制系统</strong><br><img src="/archives/fcd6e7da/local.png" alt><br><strong>集中化的版本控制系统</strong><br><img src="/archives/fcd6e7da/centralized.png" alt><br>缺陷：单点故障<br><strong>分布式版本控制系统</strong><br><img src="/archives/fcd6e7da/distributed.png" alt></p><h2 id="A-Short-History-of-Git-Git-简史"><a href="#A-Short-History-of-Git-Git-简史" class="headerlink" title="A Short History of Git Git 简史"></a>A Short History of Git Git 简史</h2><p>同生活中的许多伟大事物一样，Git 诞生于一个极富纷争大举创新的年代。<br>Linux 内核开源项目有着为数众广的参与者。 绝大多数的 Linux 内核维护工作都花在了提交补丁和保存归档的繁琐事务上（1991－2002年间）。 到 2002 年，整个项目组开始启用一个专有的分布式版本控制系统 BitKeeper 来管理和维护代码。<br>到了 2005 年，开发 BitKeeper 的商业公司同 Linux 内核开源社区的合作关系结束，他们收回了 Linux 内核社区免费使用 BitKeeper 的权力。 这就迫使 Linux 开源社区（特别是 Linux 的缔造者 Linus Torvalds）基于使用 BitKeeper 时的经验教训，开发出自己的版本系统。 他们对新的系统制订了若干目标：</p><ul><li>速度</li><li>简单的设计</li><li>对非线性开发模式的强力支持（允许成千上万个并行开发的分支）</li><li>完全分布式</li><li>有能力高效管理类似 Linux 内核一样的超大规模项目（速度和数据量）</li></ul><p>自诞生于 2005 年以来，Git 日臻成熟完善，在高度易用的同时，仍然保留着初期设定的目标。 它的速度飞快，极其适合管理大项目，有着令人难以置信的非线性分支管理系统（参见 Git 分支）。</p><h1 id="Git-Basics-Git-基础"><a href="#Git-Basics-Git-基础" class="headerlink" title="Git Basics Git 基础"></a>Git Basics Git 基础</h1><p><strong>直接记录快照，而非差异比较</strong><br>其他版本控制软件的通常做法是将它们保存的信息看作是一组基本文件和每个文件随时间逐步累积的差异。<br><strong>近乎所有操作都是本地执行</strong><br><strong>Git 保证完整性</strong><br><strong>Git 一般只添加数据</strong><br><strong>三种状态</strong><br>如果你希望后面的学习更顺利，记住下面这些关于 Git 的概念。 Git 有三种状态，你的文件可能处于其中之一：<br>已提交（committed）：已提交表示数据已经安全的保存在本地数据库中<br>已修改（modified）：已修改表示修改了文件，但还没保存到数据库中<br>已暂存（staged）: 已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。<br>由此引入 Git 项目的三个工作区域的概念：Git 仓库、工作目录以及暂存区域。<br><img src="/archives/fcd6e7da/areas.png" alt></p><p>Figure 6. 工作目录、暂存区域以及 Git 仓库.<br>Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。 这是 Git 中最重要的部分，从其它计算机克隆仓库时，拷贝的就是这里的数据。<br>工作目录是对项目的某个版本独立提取出来的内容。 这些从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。<br>暂存区域是一个文件，保存了下次将提交的文件列表信息，一般在 Git 仓库目录中。 有时候也被称作`‘索引’’，不过一般说法还是叫暂存区域。<br>基本的 Git 工作流程如下：<br>1、在工作目录中修改文件。<br>2、暂存文件，将文件的快照放入暂存区域。<br>3、提交更新，找到暂存区域的文件，将快照永久性存储到 Git 仓库目录。<br>如果 Git 目录中保存着的特定版本文件，就属于已提交状态。 如果作了修改并已放入暂存区域，就属于已暂存状态。 如果自上次取出后，作了修改但还没有放到暂存区域，就是已修改状态。 在Git 基础一章，你会进一步了解这些状态的细节，并学会如何根据文件状态实施后续操作，以及怎样跳过暂存直接提交。</p><h1 id="The-Command-Line-命令行"><a href="#The-Command-Line-命令行" class="headerlink" title="The Command Line  命令行"></a>The Command Line 命令行</h1><p>Git 有多种使用方式。 你可以使用原生的命令行模式，也可以使用 GUI 模式，这些 GUI 软件也能提供多种功能。但是建议先学习命令行模式，因为只有在命令行模式下你才能执行 Git 的 所有 命令，而大多数的 GUI 软件只实现了 Git 所有功能的一个子集以降低操作难度。 如果你学会了在命令行下如何操作，那么你在操作 GUI 软件时应该也不会遇到什么困难，但是，反之则不成立。</p><h1 id="Installing-Git-安装-Git"><a href="#Installing-Git-安装-Git" class="headerlink" title="Installing Git 安装 Git"></a>Installing Git 安装 Git</h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>Redhat\CentOS系列可以直接使用基础软件包管理工具安装(版本略旧)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install git</span><br></pre></td></tr></table></figure><h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><p>使用Xcode Command Line Tools</p><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p>使用 Git for windows 或者 GitHub for Windows</p><h2 id="源代码安装"><a href="#源代码安装" class="headerlink" title="源代码安装"></a>源代码安装</h2><p>获取合适的版本 <a href="https://github.com/git/git/releases" target="_blank" rel="noopener">https://github.com/git/git/releases</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel   <span class="comment"># git依赖的库</span></span><br><span class="line">$ yum install asciidoc xmlto docbook2x      <span class="comment"># 为了能够添加更多格式的文档</span></span><br><span class="line">$ tar -zxf git-2.0.0.tar.gz                 <span class="comment"># 编译并安装即可</span></span><br><span class="line">$ <span class="built_in">cd</span> git-2.0.0</span><br><span class="line">$ make configure</span><br><span class="line">$ ./configure --prefix=/usr</span><br><span class="line">$ make all doc info</span><br><span class="line">$ sudo make install install-doc install-html install-info</span><br></pre></td></tr></table></figure><h1 id="First-Time-Git-Setup-初次运行Git前的配置"><a href="#First-Time-Git-Setup-初次运行Git前的配置" class="headerlink" title="First-Time Git Setup  初次运行Git前的配置"></a>First-Time Git Setup 初次运行Git前的配置</h1><p><strong>配置说明</strong><br>Git 自带一个 git config 的工具来帮助设置控制 Git 外观和行为的配置变量。 这些变量存储在三个不同的位置：<br>1、/etc/gitconfig 文件: 包含系统上每一个用户及他们仓库的通用配置。 如果使用带有 –system 选项的 git config 时，它会从此文件读写配置变量。<br>2、~/.gitconfig 或 ~/.config/git/config 文件：只针对当前用户。 可以传递 –global 选项让 Git 读写此文件。<br>3、当前使用仓库的 Git 目录中的 config 文件（就是 .git/config）：针对该仓库。<br>每一个级别覆盖上一级别的配置，所以 .git/config 的配置变量会覆盖 /etc/gitconfig 中的配置变量。<br>在 Windows 系统中，Git 会查找 $HOME 目录下（一般情况下是 C:\Users$USER）的 .gitconfig 文件。 Git 同样也会寻找 /etc/gitconfig 文件，但只限于 MSys 的根目录下，即安装 Git 时所选的目标位置。<br><strong>用户信息</strong><br>每一次Git提交都会使用这些信息，它会写入到你的每一次提交中，不可更改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"John Doe"</span></span><br><span class="line">$ git config --global user.email johndoe@example.com</span><br></pre></td></tr></table></figure><p><strong>文本编辑器</strong><br>根据自己习惯设置适当的文本编辑器，工欲善其事必先利其器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.editor emacs</span><br></pre></td></tr></table></figure><p><strong>检查配置信息</strong><br>如果想要检查你的配置，可以使用 git config –list 命令来列出所有 Git 当时能找到的配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list</span><br><span class="line">user.name=John Doe</span><br><span class="line">user.email=johndoe@example.com</span><br><span class="line">color.status=auto</span><br><span class="line">color.branch=auto</span><br><span class="line">color.interactive=auto</span><br><span class="line">color.diff=auto</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>你可能会看到重复的变量名，因为 Git 会从不同的文件中读取同一个配置（例如：/etc/gitconfig 与 ~/.gitconfig）。 这种情况下，Git 会使用它找到的每一个变量的最后一个配置。<br>你可以通过输入 git config<key>： 来检查 Git 的某一项配置</key></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config user.name</span><br><span class="line">John Doe</span><br></pre></td></tr></table></figure><h1 id="Getting-Help-获取帮助"><a href="#Getting-Help-获取帮助" class="headerlink" title="Getting Help 获取帮助"></a>Getting Help 获取帮助</h1><p>有三种方法可以找到 Git 命令的使用手册：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">help</span> &lt;verb&gt;</span><br><span class="line">$ git &lt;verb&gt; --<span class="built_in">help</span></span><br><span class="line">$ man git-&lt;verb&gt;</span><br></pre></td></tr></table></figure><h1 id="Summary-总结"><a href="#Summary-总结" class="headerlink" title="Summary 总结"></a>Summary 总结</h1><p>你应该已经对 Git 是什么、Git 与你可能正在使用的集中式版本控制系统有何区别等问题有了基本的了解。 现在，在你的个人系统中应该也有了一份能够工作的 Git 版本。 是时候开始学习有关 Git 的基础知识了。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fcd6e7da.html">https://mds1455975151.github.io/archives/fcd6e7da.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git技能大总结之总纲</title>
      <link href="/archives/ec0fb91b.html"/>
      <url>/archives/ec0fb91b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>查漏补缺，根据官网资料完善自己的Git技能</p></blockquote><p>1、<a href="http://www.mdslq.cn/archives/fcd6e7da.html" target="_blank" rel="noopener">Git技能大总结之Git入门</a><br>2、<a href="http://www.mdslq.cn/archives/68cb3bb5.html" target="_blank" rel="noopener">Git技能大总结之Git基础</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ec0fb91b.html">https://mds1455975151.github.io/archives/ec0fb91b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人工具合集</title>
      <link href="/archives/f6777761.html"/>
      <url>/archives/f6777761.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>工作中使用过比较好的各类软件、工具、网站大总结</p></blockquote><a id="more"></a><ul><li><a href="#浏览器">浏览器</a></li><li><a href="#终端仿真程序">终端仿真程序</a></li><li><a href="#mysql管理工具">MySQL管理工具</a></li><li><a href="#文本编辑器">文本编辑器</a></li><li><a href="#网络质量测试">网络质量测试</a></li><li><a href="#版本控制">版本控制</a></li><li><a href="#邮件">邮件</a></li><li><a href="#绘图">绘图</a></li><li><a href="#md5校验工具">MD5校验工具</a></li><li><a href="#密码管理">密码管理</a></li><li><a href="#云笔记">云笔记</a></li><li><a href="#即时通信">即时通信</a></li><li><a href="#开发工具">开发工具</a></li><li><a href="#文件配置对比">文件配置对比</a></li><li><a href="#鼠标键盘共享">鼠标键盘共享</a></li><li><a href="#远程管理">远程管理</a></li><li><a href="#虚拟机">虚拟机</a></li><li><a href="#获取出口ip地址">获取出口IP地址</a></li><li><a href="#网站综合类">网站综合类</a></li></ul><h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><p>Google Chrome、Firefox功能强大插件丰富</p><h2 id="终端仿真程序"><a href="#终端仿真程序" class="headerlink" title="终端仿真程序"></a>终端仿真程序</h2><p>SecureCRT：一款支持SSH（SSH1和SSH2）的终端仿真程序，简单地说是Windows下登录UNIX或Linux服务器主机的软件。<br>xshell：一个强大的安全终端模拟软件，它支持SSH1, SSH2, 以及Microsoft Windows 平台的TELNET 协议。<br>Cygwin：Cygwin是一个在windows平台上运行的类UNIX模拟环境.</p><h2 id="MySQL管理工具"><a href="#MySQL管理工具" class="headerlink" title="MySQL管理工具"></a>MySQL管理工具</h2><p>SQLyog、Navicat</p><h2 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h2><p>Notepad++、Atom、Vim、记事本<br>Atom下载镜像站点：<a href="http://npm.taobao.org/mirrors/atom" target="_blank" rel="noopener">http://npm.taobao.org/mirrors/atom</a></p><h2 id="网络质量测试"><a href="#网络质量测试" class="headerlink" title="网络质量测试"></a>网络质量测试</h2><p>WinMTR、</p><h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><p>客户端：Git for Windows、TortoiseSVN</p><h2 id="邮件"><a href="#邮件" class="headerlink" title="邮件"></a>邮件</h2><p>Foxmail：推荐几个比较好的功能邮件模板、定时收取、过滤器、查找重复邮件等<br>腾讯企业邮箱</p><h2 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h2><p>亿图、<a href="https://www.processon.com/" target="_blank" rel="noopener">ProcessOn</a>、Visio网络图、XMind思维导图、Axure RP产品原型图<br>LucidChart<br><a href="https://www.csdn.net/article/2015-02-12/2823939" target="_blank" rel="noopener">其他产品</a></p><h2 id="MD5校验工具"><a href="#MD5校验工具" class="headerlink" title="MD5校验工具"></a>MD5校验工具</h2><p>Hash.exe</p><h2 id="密码管理"><a href="#密码管理" class="headerlink" title="密码管理"></a>密码管理</h2><p>KeyPass</p><h2 id="云笔记"><a href="#云笔记" class="headerlink" title="云笔记"></a>云笔记</h2><p>有道云笔记、为知笔记、印象笔记、个人使用svn+Word做资料管理</p><h2 id="即时通信"><a href="#即时通信" class="headerlink" title="即时通信"></a>即时通信</h2><p>qq、微信、企业微信、RTX、钉钉</p><h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><p>JetBrains全家桶(JetBrains PyCharm、JetBrains PhpStorm)</p><h2 id="文件配置对比"><a href="#文件配置对比" class="headerlink" title="文件配置对比"></a>文件配置对比</h2><p>Beyond Compare、diff、vimdiff</p><h2 id="鼠标键盘共享"><a href="#鼠标键盘共享" class="headerlink" title="鼠标键盘共享"></a>鼠标键盘共享</h2><p>Synergy</p><h2 id="远程管理"><a href="#远程管理" class="headerlink" title="远程管理"></a>远程管理</h2><p>TeamViewer、OpenVPN+远程桌面</p><h2 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h2><pre><code>VMware Workstation、Oracle VM VirtualBox</code></pre><h2 id="开发语言环境"><a href="#开发语言环境" class="headerlink" title="开发语言环境"></a>开发语言环境</h2><p>Python2.7.x<br>Python3.x<br>Go</p><h2 id="获取出口IP地址"><a href="#获取出口IP地址" class="headerlink" title="获取出口IP地址"></a>获取出口IP地址</h2><p><a rel="noopener" href="http://httpbin.org/ip" target="_blank">http://httpbin.org/ip</a><br><a rel="noopener" href="http://www.ip138.com/" target="_blank">http://www.ip138.com/</a></p><h2 id="网站综合类"><a href="#网站综合类" class="headerlink" title="网站综合类"></a>网站综合类</h2><p>SSL检测：<a rel="noopener" href="http://www.sslsmart.com/" target="_blank">http://www.sslsmart.com/</a><br>站长工具：<a rel="noopener" href="http://tool.chinaz.com/" target="_blank">http://tool.chinaz.com/</a><br>网站测试：<a rel="noopener" href="https://www.17ce.com/" target="_blank">https://www.17ce.com/</a><br>网络安全：<a rel="noopener" href="https://www.shodan.io/" target="_blank">https://www.shodan.io/</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f6777761.html">https://mds1455975151.github.io/archives/f6777761.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人工具 </tag>
            
            <tag> 工作效率 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客Next主题SEO优化</title>
      <link href="/archives/91c0d0bf.html"/>
      <url>/archives/91c0d0bf.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如何针对Hexo博客的Next主题做SEO优化，提升个人博客排名？</p></blockquote><h1 id="SEO概念"><a href="#SEO概念" class="headerlink" title="SEO概念"></a>SEO概念</h1><p><a href="https://baike.baidu.com/item/SEO/102990?fr=aladdin" target="_blank" rel="noopener">SEO</a><br>本文所有的优化主要是两方面：1、针对个人网站的页面排版进行SEO的优化，2、针对搜索引擎进行主动的优化</p><a id="more"></a><h1 id="针对搜索引擎优化"><a href="#针对搜索引擎优化" class="headerlink" title="针对搜索引擎优化"></a>针对搜索引擎优化</h1><h2 id="添加sitemap"><a href="#添加sitemap" class="headerlink" title="添加sitemap"></a>添加sitemap</h2><p>参考之前文章<a href="http://www.mdslq.cn/archives/d2c4fc28.html" target="_blank" rel="noopener">Hexo博客添加sitemap</a></p><h2 id="添加蜘蛛协议robots"><a href="#添加蜘蛛协议robots" class="headerlink" title="添加蜘蛛协议robots"></a>添加蜘蛛协议robots</h2><h1 id="网站结构自身优化"><a href="#网站结构自身优化" class="headerlink" title="网站结构自身优化"></a>网站结构自身优化</h1><h2 id="出站链接添加nofollow标签"><a href="#出站链接添加nofollow标签" class="headerlink" title="出站链接添加nofollow标签"></a>出站链接添加nofollow标签</h2><p>[nofollow]概述(<a href="https://baike.baidu.com/item/Nofollow/2410595?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/Nofollow/2410595?fr=aladdin</a>)<br>Hexo的Next主题需要改以下几个地方:<br>1、footer.swig文件<br>目录位置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al your-hexo-site/themes/next/layout/_partials/footer.swig</span><br></pre></td></tr></table></figure><p>修改方法：<br>修改以下两处a标签添加rel=”external nofollow”属性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __(&apos;footer.powered&apos;, &apos;&lt;a class=&quot;theme-link&quot; rel=&quot;external nofollow&quot; href=&quot;https://hexo.io&quot;&gt;Hexo&lt;/a&gt;&apos;) &#125;&#125;</span><br><span class="line">&lt;a class=&quot;theme-link&quot; rel=&quot;external nofollow&quot; href=&quot;https://github.com/iissnan/hexo-theme-next&quot;&gt;</span><br></pre></td></tr></table></figure><p>2、sidebar.swig文件<br>文件位置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al your-hexo-site/themes/next/layout/_macro/sidebar.swig</span><br></pre></td></tr></table></figure><p>修改方法：<br>修改以下一处a标签添加rel=”external nofollow”属性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a rel=&quot;external nofollow&quot; href=&quot;https://creativecommons.org/&#123;% if theme.creative_commons === &apos;zero&apos; %&#125;publicdomain/zero/1.0&#123;% else %&#125;licenses/&#123;&#123; theme.creative_commons &#125;&#125;/4.0&#123;% endif %&#125;/&quot; class=&quot;cc-opacity&quot; target=&quot;_blank&quot;&gt;</span><br></pre></td></tr></table></figure><h2 id="添加keywords和description"><a href="#添加keywords和description" class="headerlink" title="添加keywords和description"></a>添加keywords和description</h2><p>在文章模板中scaffolds/post.md中添加如下代码，用于生成的文章中添加关键字和描述。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keywords:</span><br><span class="line">description:</span><br></pre></td></tr></table></figure><h2 id="首页title优化"><a href="#首页title优化" class="headerlink" title="首页title优化"></a>首页title优化</h2><p>更改index.swig文件，文件路径是</p><figure class="highlight plain"><figcaption><span>your-hexo-site\themes\next\layout```，将下面代码</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">``` text</span><br><span class="line">&#123;% block title %&#125;  &#123;&#123; config.title &#125;&#125;  &#123;% endblock %&#125;</span><br><span class="line">改成</span><br><span class="line">&#123;% block title %&#125;  &#123;&#123; config.title &#125;&#125; - &#123;&#123; theme.description &#125;&#125;  &#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><p></p><h2 id="修改文章链接"><a href="#修改文章链接" class="headerlink" title="修改文章链接"></a>修改文章链接</h2><p>参考之前的文章<a href="http://www.mdslq.cn/archives/e7a9455c.html" target="_blank" rel="noopener">Hexo之URL持久化</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/91c0d0bf.html">https://mds1455975151.github.io/archives/91c0d0bf.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT </tag>
            
            <tag> SEO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Atom之快捷键大全</title>
      <link href="/archives/2c0db0a4.html"/>
      <url>/archives/2c0db0a4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>键盘党的最爱，Atom快捷键大全，你值得有用.</p></blockquote><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>所有快捷键都可以在File–Settings–keybindings中查看对应关系，然后进行自定义设置.</p><a id="more"></a><h1 id="File"><a href="#File" class="headerlink" title="File"></a>File</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">New Window    Ctrl+Shift+N</span><br><span class="line">NeW File      Ctrl+N</span><br><span class="line">Open File     Ctrl+O</span><br><span class="line">Open Folder   Ctrl+Shift+O</span><br><span class="line">Save          Ctrl+S</span><br><span class="line">Save As ...   Ctrl+Shift+S</span><br><span class="line">Close Tab     Ctrl+W</span><br><span class="line">Close Window  Ctrl+Shift+W</span><br></pre></td></tr></table></figure><h1 id="Edit"><a href="#Edit" class="headerlink" title="Edit"></a>Edit</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Undo          Ctrl+Z</span><br><span class="line">Redo          Ctrl+Y</span><br><span class="line">Cut           Ctrl+Z</span><br><span class="line">Copy          Ctrl+C</span><br><span class="line">Paste         Ctrl+V</span><br><span class="line">Select All    Ctrl+A</span><br></pre></td></tr></table></figure><h1 id="View"><a href="#View" class="headerlink" title="View"></a>View</h1><p>待完善</p><h1 id="Selection"><a href="#Selection" class="headerlink" title="Selection"></a>Selection</h1><p>待完善</p><h1 id="Find"><a href="#Find" class="headerlink" title="Find"></a>Find</h1><p>待完善</p><h1 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h1><p>待完善</p><h1 id="Help"><a href="#Help" class="headerlink" title="Help"></a>Help</h1><h1 id="待完善"><a href="#待完善" class="headerlink" title="待完善"></a>待完善</h1><p>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2c0db0a4.html">https://mds1455975151.github.io/archives/2c0db0a4.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Atom之优秀的Atom插件整理(持续更新)</title>
      <link href="/archives/1505cb39.html"/>
      <url>/archives/1505cb39.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>优秀的Atom插件整理</p></blockquote><!--more><!-- MDTOC maxdepth:6 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 --><ul><li><a href="#常用类">常用类</a></li><li><a href="#HTML类">HTML类</a></li><li><a href="#Git类">Git类</a></li><li><a href="#Markdown类">Markdown类</a></li><li><a href="#内置浏览器">内置浏览器</a></li><li><a href="#Python插件推荐">Python插件推荐</a></li></ul><h1 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h1><p>01、simplified-chinese-menu Atom的简体中文语言包，完整汉化，兼容所有已发布的版本Atom。<br>02、tree-view-finder 左边菜单栏显示方式<br>03、minimap 类似sublim text右边的代码缩略图<br>04、file-types和file-types-icon file-types用来区分文件类型的，file-types-icon用来给不同的问题类型添加不同的图标。<br>05、Remote-FTP ftp管理工具，命令和图形化界面都支持<br>06、autocomplete-paths 文件路径自动提示<br>07、atom-beautify 代码格式化<br>08、color-picker 取色器<br>09、vim-mode vim模式<br>10、docblockr 代码注释<br>11、terminal-plus<br>12、platformio-ide-terminal 终端工具</p><h1 id="HTML类"><a href="#HTML类" class="headerlink" title="HTML类"></a>HTML类</h1><p>01、autoclose-html html标签自动补齐<br>02、atom-html-preview html页面预览<br>03、emmet 这款插件是用来支持zend-coding，Emmet的前身是大名鼎鼎的Zen coding，如果你从事Web前端开发的话，对该插件一定不会陌生。它使用仿CSS选择器的语法来生成代码，大大提高了HTML/CSS代码编写的速度<br>04、linter-jshint 代码检查<br>05、highlight-line 对光标所在行以高亮显示，从而可以准确定位光标所在的行</p><h1 id="Git类"><a href="#Git类" class="headerlink" title="Git类"></a>Git类</h1><p>01、git-control<br>02、git-log 查看git log</p><h1 id="Markdown类"><a href="#Markdown类" class="headerlink" title="Markdown类"></a>Markdown类</h1><p>01、markdown-preview-plus 增强预览功能<br>02、markdown-scroll-sync 同步滚动<br>03、language-markdown 代码增强<br>04、markdown-image-paste 图片粘贴<br>05、markdown-table-editor 表格编辑<br>06、markdown-themeable-pdf、pdf-view PDF导出<br>07、atom-mdtoc-sef 文章目录结构生成<br>08、markdown-preview-enhanced预览功能</p><h1 id="内置浏览器"><a href="#内置浏览器" class="headerlink" title="内置浏览器"></a>内置浏览器</h1><p>01、browser-plus 内置浏览器</p><h1 id="Python插件推荐"><a href="#Python插件推荐" class="headerlink" title="Python插件推荐"></a>Python插件推荐</h1><p>01、linter-pep8 Python编码规范检查<br>02、autocomplete-python Python代码自动补全<br>03、python-tools Python跳转插件</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1505cb39.html">https://mds1455975151.github.io/archives/1505cb39.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown生成文章目录索引</title>
      <link href="/archives/cf033661.html"/>
      <url>/archives/cf033661.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>使用Markdown书写的各类文档，如何快速生成目录索引？</p></blockquote><p>常用的几种生成工具<br>1、doctoc</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g doctoc --save</span><br></pre></td></tr></table></figure><p>2、markdown-toc</p><p>注：暂时没有找到个人人为简单高效的工具</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/cf033661.html">https://mds1455975151.github.io/archives/cf033661.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Atom之Markdown编辑器</title>
      <link href="/archives/924216b1.html"/>
      <url>/archives/924216b1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>[TOC]</p><blockquote><p>Atom是Github专门为程序员推出的一个跨平台文本编辑器。Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。平时写文档都是用Markdown，Atom内置对markdown的支持，能够方便的进行解析预览，那么使用Atom如何愉快的编写Markdown文档，把Atom打造成一个功能完善的Markdown编辑器，将经验分享给大家.</p></blockquote><a id="more"></a><h1 id="安装Atom"><a href="#安装Atom" class="headerlink" title="安装Atom"></a>安装Atom</h1><p><a href="https://atom.io/" target="_blank" rel="noopener">Atom</a><br><img src="/archives/924216b1/01.png" alt></p><h1 id="安装插件列表"><a href="#安装插件列表" class="headerlink" title="安装插件列表"></a>安装插件列表</h1><h2 id="markdown-preview-plus-增强预览功能"><a href="#markdown-preview-plus-增强预览功能" class="headerlink" title="markdown-preview-plus 增强预览功能"></a>markdown-preview-plus 增强预览功能</h2><p>支持预览实时渲染(Ctrl + Shift + M)<br>支持Latex公式(Ctrl + Shift + X)<br>注：使用该插件前，需要先禁用markdown-preview</p><h2 id="markdown-scroll-sync-同步滚动"><a href="#markdown-scroll-sync-同步滚动" class="headerlink" title="markdown-scroll-sync 同步滚动"></a>markdown-scroll-sync 同步滚动</h2><p>同步滚动是Markdown编辑器的必备功能，方便翻阅文档修改时能快速定位到预览的位置。markdown-scroll-sync不仅支持同步滚动，在光标位置发生变更时也会同步滚动，这个功能在很多Markdown编辑器中不具备。</p><h2 id="language-markdown-代码增强"><a href="#language-markdown-代码增强" class="headerlink" title="language-markdown 代码增强"></a>language-markdown 代码增强</h2><p>一般的Markdown编辑器提供了代码着色等基本功能，language-markdown除了能给代码着色，还提供了快捷的代码片段生成等功能。</p><h2 id="markdown-image-paste-图片粘贴"><a href="#markdown-image-paste-图片粘贴" class="headerlink" title="markdown-image-paste 图片粘贴"></a>markdown-image-paste 图片粘贴</h2><p>图片功能支持的好坏直接决定了我是否选择使用一个Markdown编辑器。也有不少编辑器和在线的图床绑定，但是这种方式受限于网络。虽然Markdown支持插入本地图片，但是每次插入新图片都是一堆重复操作：截图－命名－保存－插入。markdown-image-paste将这些操作一步完成：<br>1、使用截图工具将图片复制到系统剪切板。<br>2、在Markdown新起一行输入文件名。<br>3、Ctrl + V 会自动把图片保存到Markdown文件相同目录下(因此要求Markdown文件应该先保存)，并命名为刚输入的文件名，同时在刚才输入文件名行处生成img标签。<br>当然，如果想插入gif动图就不能这么简单了，还是老老实实地下载这个工具手工插入吧。<br>LICEcap: <a href="http://www.cockos.com/licecap/" target="_blank" rel="noopener">http://www.cockos.com/licecap/</a></p><h2 id="markdown-table-editor-表格编辑"><a href="#markdown-table-editor-表格编辑" class="headerlink" title="markdown-table-editor 表格编辑"></a>markdown-table-editor 表格编辑</h2><p>一直对Markdown的table语法很无爱，直到遇到了markdown-table-editor，这操作效率简直炸了！文字已经不能表达我的激动之情了，直接看图吧。</p><h2 id="markdown-themeable-pdf、pdf-view-PDF导出"><a href="#markdown-themeable-pdf、pdf-view-PDF导出" class="headerlink" title="markdown-themeable-pdf、pdf-view PDF导出"></a>markdown-themeable-pdf、pdf-view PDF导出</h2><p>不少Markdown编辑器都会提供pdf导出功能，甚至将其作为收费功能。而Atom的markdown-themeable-pdf、pdf-view插件可以轻松实现pdf导出和预览功能。</p><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>1、如何快捷安装这些插件？<br>请参考<a href="http://www.mdslq.cn/archives/81611243.html" target="_blank" rel="noopener">插件管理</a></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>以上介绍的Atom的Markdown插件，基本上满足了极客们对一个Markdown编辑器的所有幻想，实时渲染、同步滚动，公式、代码、图片、表格的快捷操作与支持，以及pdf文件导出、预览等。希望此文对你有所帮助。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/924216b1.html">https://mds1455975151.github.io/archives/924216b1.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atom </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客压缩优化</title>
      <link href="/archives/2ac3214e.html"/>
      <url>/archives/2ac3214e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Hexo博客生成的静态文件存在大量空白，不仅难看，而且在一定程度上影响用户网页加载，需要对js和css进行压缩。</p></blockquote><a id="more"></a><h1 id="部署设置"><a href="#部署设置" class="headerlink" title="部署设置"></a>部署设置</h1><h2 id="插件介绍"><a href="#插件介绍" class="headerlink" title="插件介绍"></a>插件介绍</h2><p><a href="https://github.com/Rozbo/hexo-neat" target="_blank" rel="noopener">hexo-neat</a><br>hexo-neat插件使用HTMLMinifier、clean-css、UglifyJS插件实现</p><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-neat --save</span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在站点配置增加如下属性，可以选择是否压缩HTML、CSS、Js文件，均有相应的开关选项。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'*.min.css'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'*.min.js'</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://segmentfault.com/a/1190000008082288" target="_blank" rel="noopener">hexo博客压缩优化</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2ac3214e.html">https://mds1455975151.github.io/archives/2ac3214e.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之Jenkins配置</title>
      <link href="/archives/a46f702f.html"/>
      <url>/archives/a46f702f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用之前，对Jenkins的相关配置有个基本了解，做一些基本的设置及优化，后期用到具体的功能再详细介绍.</p><h1 id="首页介绍"><a href="#首页介绍" class="headerlink" title="首页介绍"></a>首页介绍</h1><p><img src="/archives/a46f702f/01.png" alt><br>主要包含以下几个部分：<br>1、新建 新建job<br>2、用户 用户管理<br>3、任务历史 查看job的历史执行情况<br>4、My Views 用户视图<br>5、Credentials 密钥管理<br>6、New View 新建视图<br>7、构建队列<br>8、构建执行状态</p><h1 id="系统管理介绍"><a href="#系统管理介绍" class="headerlink" title="系统管理介绍"></a>系统管理介绍</h1><p><img src="/archives/a46f702f/02.png" alt><br>主要包含以下几个部分，相应功能都有说明：<br>01、系统设置<br>主要包含主目录、执行者数量、用法、生成前等待时间、SCM签出重试次数、Jenkins Location、Extended E-mail Notification<br>02、全局安全配置<br>03、Configure Credentials<br>04、全局工具配置<br>各类工具环境变量配置，例如：Ant、Maven、Docker、Git、JDK等等<br>05、读取设置<br>06、管理插件<br>07、系统信息<br>显示系统环境信息以帮助解决问题，主要包括以下几部分：系统属性、环境变量、插件版本信息、Thread Dumps<br>08、系统日志<br>09、负载统计<br>10、Jenkins CLI<br>可以通过命令行工具操作Jenkins的许多特性，案例：java -jar jenkins-cli.jar -s <a href="http://182.61.49.83:9090/" target="_blank" rel="noopener">http://182.61.49.83:9090/</a> help<br>11、脚本命令行<br>12、管理节点<br>13、关于Jenkins<br>14、Manage Old Data<br>15、管理用户<br>16、准备关机</p><h1 id="REST-API介绍"><a href="#REST-API介绍" class="headerlink" title="REST API介绍"></a>REST API介绍</h1><p>http://{IP}:{Port}/api/<br>API类型<br>1、XML API<br>2、JSON API<br>3、Python API</p><h1 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h1><p>系统管理–管理用户–新建用户–添加用户信息–点击新建用户即可<br><img src="/archives/a46f702f/03.png" alt></p><h1 id="设置几个重要的全局设置"><a href="#设置几个重要的全局设置" class="headerlink" title="设置几个重要的全局设置"></a>设置几个重要的全局设置</h1><p>系统管理–系统设置–系统消息、执行者数量、用法、生成前等待时间，SCM签出重试次数<br><img src="/archives/a46f702f/04.png" alt></p><h1 id="邮件配置"><a href="#邮件配置" class="headerlink" title="邮件配置"></a>邮件配置</h1><p>Email是Jenkins最常用的通知方式之一。什么情况下，需要Jenkins发送电子邮件，发送给哪些干系人员？例如：在构建成功或者失败的情况下，发送通知邮件。<br><img src="/archives/a46f702f/11.png" alt></p><h1 id="角色及权限管理"><a href="#角色及权限管理" class="headerlink" title="角色及权限管理"></a>角色及权限管理</h1><p>设置全局角色和项目角色，其中 Pattern 是用来设置构建作业名的命名规范，例如：规定了构建作业名的命名规范是{项目名称}_{业务类型名称}.{发布环境}<br>用户分配角色<br><img src="/archives/a46f702f/12.png" alt><br>项目用户权限划分<br><img src="/archives/a46f702f/13.png" alt><br>全局角色权限配置<br><img src="/archives/a46f702f/14.png" alt><br>角色权限配置<br><img src="/archives/a46f702f/15.png" alt></p><h1 id="创建一个简单的job"><a href="#创建一个简单的job" class="headerlink" title="创建一个简单的job"></a>创建一个简单的job</h1><p>案例：显示当前服务器时间<br>新建–输入job名称(建议各类job以特定前缀开始，后期做权限控制划分view都方便)–选择项目类型–确认<br><img src="/archives/a46f702f/05.png" alt><br>自由风格项目主要包含以下几类配置：<br>1、General 项目通用配置<br>2、源码管理<br>3、构建触发器<br>4、构建环境<br>5、构建<br>6、构建后操作<br>本项目比较简单，配置general和构建部分即可，<br><img src="/archives/a46f702f/06.png" alt><br><img src="/archives/a46f702f/07.png" alt><br>配置完成，点击构建<br><img src="/archives/a46f702f/08.png" alt><br>查看构建日志，查看输出结果<br><img src="/archives/a46f702f/09.png" alt><br>回到首页，查看现在的界面<br><img src="/archives/a46f702f/10.png" alt><br>如果不明白相关图例的含义，可以单击图例，里面有详细介绍</p><p><font color="red" size="3">注：所有功能的详细配置及使用在项目中进行配置</font></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a46f702f.html">https://mds1455975151.github.io/archives/a46f702f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之Jenkins部署</title>
      <link href="/archives/a8c286cc.html"/>
      <url>/archives/a8c286cc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>这里介绍两种常见环境的安装CentOS 7系统及Docker安装方式，其他安装方式参考官网说明即可.</p><h1 id="部署环境说明"><a href="#部署环境说明" class="headerlink" title="部署环境说明"></a>部署环境说明</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@instance-8q3jv2np ~]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># uname -r</span></span><br><span class="line">3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure><h1 id="RedHat-Linux-RPM-packages-for-Jenkins"><a href="#RedHat-Linux-RPM-packages-for-Jenkins" class="headerlink" title="RedHat Linux RPM packages for Jenkins"></a>RedHat Linux RPM packages for Jenkins</h1><h2 id="Jenkins安装"><a href="#Jenkins安装" class="headerlink" title="Jenkins安装"></a>Jenkins安装</h2><p><a href="https://pkg.jenkins.io/redhat-stable/" target="_blank" rel="noopener">官网资料</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># yum install -y java-1.8.0-openjdk</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># java -version</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># yum install -y jenkins</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># vim /etc/sysconfig/jenkins</span></span><br><span class="line">JENKINS_PORT=<span class="string">"9090"</span>   <span class="comment"># 修改启动端口，本机端口冲突可以考虑，默认8080</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># /etc/init.d/jenkins start</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># chkconfig jenkins on</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># netstat -tunlp|grep java</span></span><br><span class="line">tcp6       0      0 :::9090                 :::*                    LISTEN      28491/java</span><br></pre></td></tr></table></figure><h2 id="RPM安装内容"><a href="#RPM安装内容" class="headerlink" title="RPM安装内容"></a>RPM安装内容</h2><p>以CentOS 7 安装案例讲解：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># rpm -ql jenkins</span></span><br><span class="line">/etc/init.d/jenkins             <span class="comment"># 启动脚本</span></span><br><span class="line">/etc/logrotate.d/jenkins        <span class="comment"># 日志轮询配置</span></span><br><span class="line">/etc/sysconfig/jenkins          <span class="comment"># 相关变量配置文件，各类自定义配置，优化等等</span></span><br><span class="line">/usr/lib/jenkins                <span class="comment"># jenkins lib存储路径</span></span><br><span class="line">/usr/lib/jenkins/jenkins.war    <span class="comment"># Jenkins war包，后期升级替换该文件即可</span></span><br><span class="line">/usr/sbin/rcjenkins</span><br><span class="line">/var/cache/jenkins              <span class="comment"># war包解压目录</span></span><br><span class="line">/var/lib/jenkins                <span class="comment"># 默认工作目录**重要**需要备份，线上环境应该变更该目录到磁盘比较到的盘符</span></span><br><span class="line">/var/<span class="built_in">log</span>/jenkins                <span class="comment"># 运行日志</span></span><br></pre></td></tr></table></figure><h2 id="配置文件说明"><a href="#配置文件说明" class="headerlink" title="配置文件说明"></a>配置文件说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># grep "^[a-Z]" /etc/sysconfig/jenkins</span></span><br><span class="line">JENKINS_HOME=<span class="string">"/var/lib/jenkins"</span>     <span class="comment"># jenkins工作目录</span></span><br><span class="line">JENKINS_JAVA_CMD=<span class="string">""</span></span><br><span class="line">JENKINS_USER=<span class="string">"jenkins"</span>              <span class="comment"># jenkinx启动用户</span></span><br><span class="line">JENKINS_JAVA_OPTIONS=<span class="string">"-Djava.awt.headless=true"</span></span><br><span class="line">JENKINS_PORT=<span class="string">"8080"</span>                 <span class="comment"># 端口</span></span><br><span class="line">JENKINS_LISTEN_ADDRESS=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_PORT=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_KEYSTORE=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_KEYSTORE_PASSWORD=<span class="string">""</span></span><br><span class="line">JENKINS_HTTPS_LISTEN_ADDRESS=<span class="string">""</span></span><br><span class="line">JENKINS_DEBUG_LEVEL=<span class="string">"5"</span></span><br><span class="line">JENKINS_ENABLE_ACCESS_LOG=<span class="string">"no"</span></span><br><span class="line">JENKINS_HANDLER_MAX=<span class="string">"100"</span>           <span class="comment"># 最大连接</span></span><br><span class="line">JENKINS_HANDLER_IDLE=<span class="string">"20"</span></span><br><span class="line">JENKINS_ARGS=<span class="string">""</span></span><br></pre></td></tr></table></figure><h2 id="Web界面安装"><a href="#Web界面安装" class="headerlink" title="Web界面安装"></a>Web界面安装</h2><p>访问Jenkins页面，进行其他设置 http://{IP}:9090<br>根据提示获取密码并验证<br><img src="/archives/a8c286cc/01.png" alt></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># cat /var/lib/jenkins/secrets/initialAdminPassword</span></span><br><span class="line">97f6f25f09234b77b38b99e0836ff865</span><br></pre></td></tr></table></figure><p>选择安装插件，可以选择推荐或者自定义<br><img src="/archives/a8c286cc/02.png" alt><br>等待插件安装完成<br><img src="/archives/a8c286cc/03.png" alt><br>设置管理员账号密码<br><img src="/archives/a8c286cc/04.png" alt><br>设置完毕，点击开始使用Jenkins<br><img src="/archives/a8c286cc/05.png" alt><br>登录界面<br><img src="/archives/a8c286cc/06.png" alt><br>Jenkins登录后界面，到此为止安装完毕<br><img src="/archives/a8c286cc/07.png" alt></p><h1 id="Docker-Install-for-Jenkins"><a href="#Docker-Install-for-Jenkins" class="headerlink" title="Docker Install for Jenkins"></a>Docker Install for Jenkins</h1><p><a href="https://hub.docker.com/r/jenkins/jenkins/" target="_blank" rel="noopener">Jenkins docker hub地址</a><br><a href="https://github.com/jenkinsci/docker/blob/master/README.md" target="_blank" rel="noopener">Official Jenkins Docker image</a></p><h2 id="快速部署docker环境"><a href="#快速部署docker环境" class="headerlink" title="快速部署docker环境"></a>快速部署docker环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">yum remove -y docker docker-common docker-selinux docker-engine</span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> docker-ce-edge</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> docker-ce-test</span><br><span class="line">yum list docker-ce --showduplicates | sort -r |grep stable</span><br><span class="line">yum install -y docker-ce-17.06.2.ce</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line"></span><br><span class="line">mkdir -p /etc/docker                                            <span class="comment"># 为了后期方便添加阿里云的加速镜像站</span></span><br><span class="line">tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="string">"registry-mirrors"</span>: [<span class="string">"https://k9lgui7f.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="启动Jenkins-Docker容器"><a href="#启动Jenkins-Docker容器" class="headerlink" title="启动Jenkins Docker容器"></a>启动Jenkins Docker容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># docker pull jenkins/jenkins:lts</span></span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># docker run -p 9090:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts</span></span><br><span class="line">Running from: /usr/share/jenkins/jenkins.war</span><br><span class="line">webroot: EnvVars.masterEnvVars.get(<span class="string">"JENKINS_HOME"</span>)</span><br><span class="line">Dec 16, 2017 2:48:52 PM Main deleteWinstoneTempContents</span><br><span class="line">WARNING: Failed to delete the temporary Winstone file /tmp/winstone/jenkins.war</span><br><span class="line">Dec 16, 2017 2:48:52 PM org.eclipse.jetty.util.log.Log initialized</span><br><span class="line">INFO: Logging initialized @1787ms to org.eclipse.jetty.util.log.JavaUtilLog</span><br><span class="line">Dec 16, 2017 2:48:53 PM winstone.Logger logInternal</span><br><span class="line">INFO: Beginning extraction from war file</span><br><span class="line">Dec 16, 2017 2:48:57 PM org.eclipse.jetty.server.handler.ContextHandler setContextPath</span><br><span class="line">WARNING: Empty contextPath</span><br><span class="line">Dec 16, 2017 2:48:57 PM org.eclipse.jetty.server.Server doStart</span><br><span class="line">INFO: jetty-9.4.z-SNAPSHOT</span><br><span class="line">Dec 16, 2017 2:48:59 PM org.eclipse.jetty.webapp.StandardDescriptorProcessor visitServlet</span><br><span class="line">INFO: NO JSP Support <span class="keyword">for</span> /, did not find org.eclipse.jetty.jsp.JettyJspServlet</span><br><span class="line">Dec 16, 2017 2:48:59 PM org.eclipse.jetty.server.session.DefaultSessionIdManager doStart</span><br><span class="line">INFO: DefaultSessionIdManager workerName=node0</span><br><span class="line">Dec 16, 2017 2:48:59 PM org.eclipse.jetty.server.session.DefaultSessionIdManager doStart</span><br><span class="line">INFO: No SessionScavenger <span class="built_in">set</span>, using defaults</span><br><span class="line">Dec 16, 2017 2:48:59 PM org.eclipse.jetty.server.session.HouseKeeper startScavenging</span><br><span class="line">INFO: Scavenging every 660000ms</span><br><span class="line">Jenkins home directory: /var/jenkins_home found at: EnvVars.masterEnvVars.get(<span class="string">"JENKINS_HOME"</span>)</span><br><span class="line">Dec 16, 2017 2:49:02 PM org.eclipse.jetty.server.handler.ContextHandler doStart</span><br><span class="line">INFO: Started w.@493dfb8e&#123;/,file:///var/jenkins_home/war/,AVAILABLE&#125;&#123;/var/jenkins_home/war&#125;</span><br><span class="line">Dec 16, 2017 2:49:02 PM org.eclipse.jetty.server.AbstractConnector doStart</span><br><span class="line">INFO: Started ServerConnector@1fc0053e&#123;HTTP/1.1,[http/1.1]&#125;&#123;0.0.0.0:8080&#125;</span><br><span class="line">Dec 16, 2017 2:49:02 PM org.eclipse.jetty.server.Server doStart</span><br><span class="line">INFO: Started @11351ms</span><br><span class="line">Dec 16, 2017 2:49:02 PM winstone.Logger logInternal</span><br><span class="line">INFO: Winstone Servlet Engine v4.0 running: controlPort=disabled</span><br><span class="line">Dec 16, 2017 2:49:03 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Started initialization</span><br><span class="line">Dec 16, 2017 2:49:03 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Listed all plugins</span><br><span class="line">Dec 16, 2017 2:49:06 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Prepared all plugins</span><br><span class="line">Dec 16, 2017 2:49:06 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Started all plugins</span><br><span class="line">Dec 16, 2017 2:49:07 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Augmented all extensions</span><br><span class="line">Dec 16, 2017 2:49:09 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Loaded all <span class="built_in">jobs</span></span><br><span class="line">Dec 16, 2017 2:49:10 PM hudson.model.AsyncPeriodicWork<span class="variable">$1</span> run</span><br><span class="line">INFO: Started Download metadata</span><br><span class="line">Dec 16, 2017 2:49:10 PM jenkins.slaves.DeprecatedAgentProtocolMonitor initializerCheck</span><br><span class="line">WARNING: This Jenkins instance uses deprecated Remoting protocols: CLI-connect,CLI2-connect,JNLP-connect,JNLP2-connectIt may impact stability of the instance. If newer protocol versions are supported by all system components (agents, CLI and other clients), it is highly recommended to <span class="built_in">disable</span> the deprecated protocols.</span><br><span class="line">Dec 16, 2017 2:49:12 PM jenkins.util.groovy.GroovyHookScript execute</span><br><span class="line">INFO: Executing /var/jenkins_home/init.groovy.d/tcp-slave-agent-port.groovy</span><br><span class="line">Dec 16, 2017 2:49:13 PM jenkins.InitReactorRunner<span class="variable">$1</span> onAttained</span><br><span class="line">INFO: Completed initialization</span><br><span class="line">Dec 16, 2017 2:49:14 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh</span><br><span class="line">INFO: Refreshing org.springframework.web.context.support.StaticWebApplicationContext@4d13a46: display name [Root WebApplicationContext]; startup date [Sat Dec 16 14:49:14 UTC 2017]; root of context hierarchy</span><br><span class="line">Dec 16, 2017 2:49:14 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory</span><br><span class="line">INFO: Bean factory <span class="keyword">for</span> application context [org.springframework.web.context.support.StaticWebApplicationContext@4d13a46]: org.springframework.beans.factory.support.DefaultListableBeanFactory@6af42668</span><br><span class="line">Dec 16, 2017 2:49:14 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons</span><br><span class="line">INFO: Pre-instantiating singletons <span class="keyword">in</span> org.springframework.beans.factory.support.DefaultListableBeanFactory@6af42668: defining beans [authenticationManager]; root of factory hierarchy</span><br><span class="line">Dec 16, 2017 2:49:14 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh</span><br><span class="line">INFO: Refreshing org.springframework.web.context.support.StaticWebApplicationContext@63a30030: display name [Root WebApplicationContext]; startup date [Sat Dec 16 14:49:14 UTC 2017]; root of context hierarchy</span><br><span class="line">Dec 16, 2017 2:49:14 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory</span><br><span class="line">INFO: Bean factory <span class="keyword">for</span> application context [org.springframework.web.context.support.StaticWebApplicationContext@63a30030]: org.springframework.beans.factory.support.DefaultListableBeanFactory@1131f407</span><br><span class="line">Dec 16, 2017 2:49:14 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons</span><br><span class="line">INFO: Pre-instantiating singletons <span class="keyword">in</span> org.springframework.beans.factory.support.DefaultListableBeanFactory@1131f407: defining beans [filter,legacy]; root of factory hierarchy</span><br><span class="line">Dec 16, 2017 2:49:15 PM jenkins.install.SetupWizard init</span><br><span class="line">INFO:</span><br><span class="line"></span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line"></span><br><span class="line">Jenkins initial setup is required. An admin user has been created and a password generated.</span><br><span class="line">Please use the following password to proceed to installation:</span><br><span class="line"></span><br><span class="line">a2f85d4d845940e2a98824834e46aff3</span><br><span class="line"></span><br><span class="line">This may also be found at: /var/jenkins_home/secrets/initialAdminPassword</span><br><span class="line"></span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line">*************************************************************</span><br><span class="line"></span><br><span class="line">--&gt; setting agent port <span class="keyword">for</span> jnlp</span><br><span class="line">--&gt; setting agent port <span class="keyword">for</span> jnlp... <span class="keyword">done</span></span><br><span class="line">Dec 16, 2017 2:49:38 PM hudson.model.UpdateSite updateData</span><br><span class="line">INFO: Obtained the latest update center data file <span class="keyword">for</span> UpdateSource default</span><br><span class="line">Dec 16, 2017 2:49:38 PM hudson.WebAppMain<span class="variable">$3</span> run</span><br><span class="line">..................</span><br><span class="line">[root@instance-8q3jv2np ~]<span class="comment"># netstat -tunlp|grep 9090</span></span><br><span class="line">tcp6       0      0 :::9090                 :::*                    LISTEN      29588/docker-proxy</span><br></pre></td></tr></table></figure><p>Web界面安装和RPM安装一致不在赘述<br>由于启动时设置挂载目录，可以在宿主机看到容器内工作目录下的内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-8q3jv2np _data]<span class="comment"># cd /var/lib/docker/volumes/jenkins_home/_data</span></span><br><span class="line">[root@instance-8q3jv2np _data]<span class="comment"># ls -l</span></span><br><span class="line">total 92</span><br><span class="line">-rw-r--r--  1 1000 1000  1719 Dec 16 22:49 config.xml</span><br><span class="line">-rw-r--r--  1 1000 1000   102 Dec 16 22:48 copy_reference_file.log</span><br><span class="line">-rw-r--r--  1 1000 1000   156 Dec 16 22:49 hudson.model.UpdateCenter.xml</span><br><span class="line">-rw-r--r--  1 1000 1000   370 Dec 16 22:53 hudson.plugins.git.GitTool.xml</span><br><span class="line">-rw-------  1 1000 1000  1712 Dec 16 22:49 identity.key.enc</span><br><span class="line">drwxr-xr-x  2 1000 1000  4096 Dec 16 22:48 init.groovy.d</span><br><span class="line">-rw-r--r--  1 1000 1000    94 Dec 16 22:49 jenkins.CLI.xml</span><br><span class="line">-rw-r--r--  1 1000 1000     6 Dec 16 22:55 jenkins.install.InstallUtil.lastExecVersion</span><br><span class="line">-rw-r--r--  1 1000 1000     6 Dec 16 22:55 jenkins.install.UpgradeWizard.state</span><br><span class="line">drwxr-xr-x  2 1000 1000  4096 Dec 16 22:49 <span class="built_in">jobs</span></span><br><span class="line">drwxr-xr-x  3 1000 1000  4096 Dec 16 22:49 logs</span><br><span class="line">-rw-r--r--  1 1000 1000   907 Dec 16 22:49 nodeMonitors.xml</span><br><span class="line">drwxr-xr-x  2 1000 1000  4096 Dec 16 22:49 nodes</span><br><span class="line">drwxr-xr-x 74 1000 1000 12288 Dec 16 22:53 plugins</span><br><span class="line">-rw-r--r--  1 1000 1000    64 Dec 16 22:49 secret.key</span><br><span class="line">-rw-r--r--  1 1000 1000     0 Dec 16 22:49 secret.key.not-so-secret</span><br><span class="line">drwx------  4 1000 1000  4096 Dec 16 22:55 secrets</span><br><span class="line">drwxr-xr-x  2 1000 1000  4096 Dec 16 22:52 updates</span><br><span class="line">drwxr-xr-x  2 1000 1000  4096 Dec 16 22:49 userContent</span><br><span class="line">drwxr-xr-x  3 1000 1000  4096 Dec 16 22:55 users</span><br><span class="line">drwxr-xr-x 10 1000 1000  4096 Dec 16 22:48 war</span><br><span class="line">drwxr-xr-x  2 1000 1000  4096 Dec 16 22:53 workflow-libs</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://jenkins.io/download/" target="_blank" rel="noopener">官网资料</a><br><a href="https://www.cnblogs.com/clsn/archive/2017/12/01/7944116.html" target="_blank" rel="noopener">Jenkins与网站代码上线解决方案</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a8c286cc.html">https://mds1455975151.github.io/archives/a8c286cc.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之Jenkins介绍</title>
      <link href="/archives/d7b6ec3e.html"/>
      <url>/archives/d7b6ec3e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Jenkins简介"><a href="#Jenkins简介" class="headerlink" title="Jenkins简介"></a>Jenkins简介</h1><p><img src="/archives/d7b6ec3e/03.jpg" alt><br>Jenkins是一个CI工具。它可以持续编译，运行你的代码；运行UT或集成测试；将运行结果发送至邮件，或展示成报告。这样做的最终目的是： 让项目保持健康的状态。如果任何checkin break了build，每个人都会在最短的时间内通知到，然后问题被fix。接下来的开发将建立在一个健康正确的基础上，而不是任由问题累积最后失控。 最后，你的项目随时可以被deliver给用户，因为，你的项目每一天都在健康，茁壮的生长。这就是CI的意义所在。<br>Jenkins 官网：<a href="http://jenkins-ci.org/" target="_blank" rel="noopener">http://jenkins-ci.org/</a><br>官网文档：<a href="https://jenkins.io/doc/" target="_blank" rel="noopener">https://jenkins.io/doc/</a><br>安装说明：<a href="https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins" target="_blank" rel="noopener">https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins</a></p><a id="more"></a><p>主要用途：<br>1） 持续、自动的构建/测试软件项目<br>2） 监控一些定时执行的任务</p><p>Jenkins特性：<br>1、易安装：仅仅一个 java -jar jenkins.war，从官网下载该文件后，直接运行，无需额外的安装，更无需安装数据库；<br>2、易配置：提供友好的GUI配置界面；<br>3、变更支持：Jenkins能从代码仓库（Subversion/CVS）中获取并产生代码更新列表并输出到编译输出信息中；<br>4、支持永久链接：用户是通过web来访问Jenkins的，而这些web页面的链接地址都是永久链接地址，因此，你可以在各种文档中直接使用该链接；<br>5、集成E-Mail/RSS/IM：当完成一次集成时，可通过这些工具实时告诉你集成结果（据我所知，构建一次集成需要花费一定时间，有了这个功能，你就可以在等待结果过程中，干别的事情）；<br>6、JUnit/TestNG测试报告：也就是用以图表等形式提供详细的测试报表功能；<br>7、支持分布式构建：Jenkins可以把集成构建等工作分发到多台计算机中完成；<br>8、文件指纹信息：Jenkins会保存哪次集成构建产生了哪些jars文件，哪一次集成构建使用了哪个版本的jars文件等构建记录；<br>9、支持第三方插件：使得 Jenkins 变得越来越强大；</p><h1 id="Jenkins工作原理"><a href="#Jenkins工作原理" class="headerlink" title="Jenkins工作原理"></a>Jenkins工作原理</h1><p><img src="/archives/d7b6ec3e/02.png" alt><br>该系统的各个组成部分是按照如下顺序来发挥作用的：<br>1、开发者检入代码到源代码仓库<br>2、CI系统会为每一个项目创建了一个单独的工作区。当预设或请求一次新的构建时，它将把源代码仓库的源码存放在对应的工作区.<br>3、CI系统会在对应的工作区内执行构建过程<br>4、配置如果存在而且构建完成后，CI系统会在一个新的构建中执行定义的一套测试。完成后触发通知给相关的当事人。<br>5、配置如果存在而且构建成功后，这个构件会被打包并转移到一个部署目标或存储为软件仓库中的一个新版本。软件仓库可以是CI系统的一部分，也可以是一个外部的仓库，诸如一个文件服务器或者像java.net、SourceForge之类的网站。<br>6、CI系统通常会根据请求发起相应的操作，诸如即时构建、生成报告或者检索一些构建好的构件。</p><h1 id="Jenkins应用场景"><a href="#Jenkins应用场景" class="headerlink" title="Jenkins应用场景"></a>Jenkins应用场景</h1><p>Jenkins在企业应用中比较广泛，企业常用CI系统对自己的项目进行构建和测试，来减少开发的时间和精力，而jenkins就是这样的一个ci系统，用于对自己项目的构建和测试。<br>1、软件构建自动化：配置完成后，CI系统会依照预先制定的时间表，或者针对某一特定事件，对目标软件进行构建。<br>2、构建可持续的自动化检查：CI系统能持续地获取新增或修改后签入的源代码，也就是说，当软件开发团队需要周期性的检查新增或修改后的代码时，CI系统会不断确认这些新代码是否破坏了原有软件的成功构建。这减少了开发者们在检查彼此相互依存的代码中变化情况需要花费的时间和精力。<br>3、构建可持续的自动化测试：构建检查的扩展部分，构建后执行预先制定的一套测试规则，完成后触发通知(Email,RSS等等)给相关的当事人。<br>4、生成后后续过程的自动化：当自动化检查和测试成功完成，软件构建的周期中可能也需要一些额外的任务，诸如生成文档、打包软件、部署构件到一个运行环境或者软件仓库。这样，构件才能更迅速地提供给用户<br>使用。<br>注：部署一个 CI系统需要的最低要求是，一个可获取的源代码的仓库，一个包含构建脚本的项目。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/qq_29352959/article/details/53885948" target="_blank" rel="noopener">认识Jenkins，了解它在实际工作中的应用</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d7b6ec3e.html">https://mds1455975151.github.io/archives/d7b6ec3e.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之持续集成概念</title>
      <link href="/archives/bb3df754.html"/>
      <url>/archives/bb3df754.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>了解Jenkins之前，需要了解几个基本概念持续集成就是重要概念之一.</p><a id="more"></a><h1 id="持续集成概念"><a href="#持续集成概念" class="headerlink" title="持续集成概念"></a>持续集成概念</h1><h2 id="什么是持续集成"><a href="#什么是持续集成" class="headerlink" title="什么是持续集成?"></a>什么是持续集成?</h2><p>随着软件开发复杂度的不断提高,团队开发成员间如何更好的协同工作以确保软件开发的质量已经慢慢成为开发过程中不可回避的问题。尤其是近年来敏捷开发在软件领域越来越火，如何能在不间断变化的需求中快熟适应和保证软件的质量显得尤其的重要.持续集成正式针对这一类问题的一种软件开发实践。它倡导团队开发成员必须经常集成他们的工作，甚至每天都可能发生多次集成。而每次的集成都是通过自动化的构建来验证，包括自动编译、发布和测试，从而尽快的发现集成错误，让团队能更快的开发内聚的软件。<br><img src="/archives/bb3df754/01.jpg" alt></p><h2 id="持续集成的核心价值"><a href="#持续集成的核心价值" class="headerlink" title="持续集成的核心价值"></a>持续集成的核心价值</h2><p>1、持续集成中的任何一个环节都是自动完成的，无需太多人工干预，有利于减少重复过程以节省时间、费用和工作量；<br>2、持续集成保障每个时间点上团队成员提交的代码是能成功集成的。换言之，任何时间点都能第一时间发现软件的集成问题，使任意时间发布可部署软件成为可能；<br>3、持续集成还能利于软件本身的发展趋势，这点在需求不明确或是频繁性变更的情景中尤其重要，持续集成的质量能够帮助团队进行有效决策，同时提升团队对开发产品的信心。</p><p>VS</p><p>1、项目做模块集成的时候，发现很多接口不通—浪费大量时间<br>2、需要人手动去编译打包最新的代码—构建过程不透明<br>3、发布代码，上线，基本上靠手—脚本乱飞</p><h2 id="持续集成的原则"><a href="#持续集成的原则" class="headerlink" title="持续集成的原则"></a>持续集成的原则</h2><p>业界普遍认同的持续集成的原则包括:<br>1、需要版本控制软件保障团队成员提交的代码不会导致集成失败。常用的版本控制软件有cvs,subversion,git,sourcesafe等；<br>2、开发人员须及时向版本控制库中提交代码，也需经常性的从版本控制库中更新代码到本地；<br>3、需要有专门的集成服务器来执行集成构建。根据项目的具体实际，集成构建可以被软件的修改来直接触发,也可以定时启动，如每半小时构建一次；<br>4、必须保证构建的成功。如果构建失败，修复构建过程中的错误是优先级最高的工作。一旦修复，需手动启动一次构建。</p><h2 id="持续集成的组成"><a href="#持续集成的组成" class="headerlink" title="持续集成的组成"></a>持续集成的组成</h2><p>一个完整的构建系统必须包括:<br>1、一个自动构建过程，包括自动编译、分发、部署和测试等。<br>2、一个代码库，即需要版本控制软件来保障代码的可维护性，同时作为构建过程的素材库。<br>3、一个持续集成服务器。即将介绍的jenkins就是一个配置简单和使用方便的持续集成服务器。</p><h2 id="持续集成最佳实践"><a href="#持续集成最佳实践" class="headerlink" title="持续集成最佳实践"></a>持续集成最佳实践</h2><p>1、维护一个单一的代码库<br>2、使构建自动化<br>3、执行测试是构建的一部分<br>4、集成日志及历史记录<br>5、使用统一的依赖包管理库<br>6、每天至少集成一次</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>1、<a href="https://zhuanlan.zhihu.com/p/33206437" target="_blank" rel="noopener">微服务化的基石——持续集成</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/bb3df754.html">https://mds1455975151.github.io/archives/bb3df754.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 持续集成 </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLab应用总结</title>
      <link href="/archives/885609a5.html"/>
      <url>/archives/885609a5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="GitLab介绍"><a href="#GitLab介绍" class="headerlink" title="GitLab介绍"></a>GitLab介绍</h1><h2 id="GitLab简介"><a href="#GitLab简介" class="headerlink" title="GitLab简介"></a>GitLab简介</h2><p>GitLab 是一个用于仓库管理系统的开源项目。即使用git作为代码管理工具，并在此基础上搭建起来的web服务。</p><h2 id="GitLab特点"><a href="#GitLab特点" class="headerlink" title="GitLab特点"></a>GitLab特点</h2><p>1、web框架使用ruby on rails<br>2、基于MIT代码发布协议<br>3、需要gitolite协调工作</p><h2 id="GitLab架构"><a href="#GitLab架构" class="headerlink" title="GitLab架构"></a>GitLab架构</h2><p>1、前端：Nginx,用于git tool走http或https协议<br>2、后端：gitlab服务，采用ruby on Rails框架，通过unicorn实现后台服务及多进程<br>3、SSHD：开启sshd服务，用于用户上传ssh key进行版本克隆及上传。注：用户上传的ssh key是保存到git账户中<br>4、数据库：目前仅支持MySQL和PostgreSQL<br>5、Redis：用于存储用户session和任务，任务包括新建仓库、发送邮件等等<br>6、Sidekiq：Rails框架自带的，订阅redis中的任务并执行</p><a id="more"></a><h1 id="GitLab部署配置（RPM安装）"><a href="#GitLab部署配置（RPM安装）" class="headerlink" title="GitLab部署配置（RPM安装）"></a>GitLab部署配置（RPM安装）</h1><h2 id="GitLab资料"><a href="#GitLab资料" class="headerlink" title="GitLab资料"></a>GitLab资料</h2><p>官网部署说明：<br><a href="https://about.gitlab.com/downloads/#centos6" target="_blank" rel="noopener">https://about.gitlab.com/downloads/#centos6</a><br><a href="http://www.gitlab.cc/downloads/#centos6（中文）" target="_blank" rel="noopener">http://www.gitlab.cc/downloads/#centos6（中文）</a></p><p>手册：<a href="http://doc.gitlab.com/omnibus/" target="_blank" rel="noopener">http://doc.gitlab.com/omnibus/</a><br>资料：<a href="http://www.tuicool.com/articles/ZR7rmuz" target="_blank" rel="noopener">http://www.tuicool.com/articles/ZR7rmuz</a></p><p>官网支持的方式：<br>1）包含一切的rpm包（官方推荐）<br><a href="https://about.gitlab.com/downloads/" target="_blank" rel="noopener">https://about.gitlab.com/downloads/</a><br>2）手动安装（深入了解）<br><a href="https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md" target="_blank" rel="noopener">https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md</a><br>3）第三方docker镜像<br><a href="https://github.com/sameersbn/docker-gitlab" target="_blank" rel="noopener">https://github.com/sameersbn/docker-gitlab</a><br>资料：<a href="http://www.tuicool.com/articles/bYbi2mJ" target="_blank" rel="noopener">http://www.tuicool.com/articles/bYbi2mJ</a></p><h2 id="安装配置依赖项"><a href="#安装配置依赖项" class="headerlink" title="安装配置依赖项"></a>安装配置依赖项</h2><p>如果已经安装了Postfix来发送邮件请在安装期间选择 ‘Internet Site’. 你也可以用Sendmail或者使用自定义的SMTP服务器来代替Postfix. 如果希望使用 Exim, 请把它当做SMTP来配置.在Centos 6和7上, 下面的命令也会配置系统防火墙,把HTTP和SSH端口开放.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install curl openssh-server postfix cronie</span><br><span class="line">service postfix start</span><br><span class="line">chkconfig postfix on</span><br><span class="line">lokkit -s http -s ssh</span><br></pre></td></tr></table></figure><h2 id="添加并安装GitLab软件包"><a href="#添加并安装GitLab软件包" class="headerlink" title="添加并安装GitLab软件包"></a>添加并安装GitLab软件包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl http://packages.gitlab.cc/install/gitlab-ce/script.rpm.sh | sudo bash</span><br><span class="line">yum install gitlab-ce</span><br></pre></td></tr></table></figure><p>如果不习惯这种通过管道命令安装的方式,可以在这里找到完整的安装脚本.或者你可以选择对应系统的GitLab安装包 并使用下面的命令进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -LJO http://mirror.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6/gitlab-ce-XXX.rpm/download</span><br><span class="line">rpm -i gitlab-ce-XXX.rpm</span><br></pre></td></tr></table></figure><p>（推荐使用gitlab-ce镜像站，下载后保留使用300M左右）<br>国内yum源：<br><a href="https://mirror.tuna.tsinghua.edu.cn/gitlab-ce/" target="_blank" rel="noopener">https://mirror.tuna.tsinghua.edu.cn/gitlab-ce/</a></p><h2 id="配置和使用GitLab"><a href="#配置和使用GitLab" class="headerlink" title="配置和使用GitLab"></a>配置和使用GitLab</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><h2 id="在浏览器访问GitLab主机名"><a href="#在浏览器访问GitLab主机名" class="headerlink" title="在浏览器访问GitLab主机名"></a>在浏览器访问GitLab主机名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Username: root</span><br><span class="line">Password: 5iveL!fe</span><br></pre></td></tr></table></figure><h2 id="修改域名"><a href="#修改域名" class="headerlink" title="修改域名"></a>修改域名</h2><p>默认的配置文件保存在 /etc/gitlab/gitlab.rb ，执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/gitlab/gitlab.rb</span><br><span class="line">external_url <span class="string">'http://your.domain'</span></span><br><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><p>有一定概率出现 502 错误，刷新浏览器或者再次更新配置即可。</p><h2 id="界面汉化（测试通过）"><a href="#界面汉化（测试通过）" class="headerlink" title="界面汉化（测试通过）"></a>界面汉化（测试通过）</h2><p>问题：保证版本一致性，否则上传代码会触发bug<br>由于服务对象是广大师生，为了降低新手上手的难度，所有进行汉化也是非常有必要的。好在国内有人已经进行了这方面的工作，我们只需要共享其成果即可（欢迎向原项目提交高质量翻译）。<br>首先确认版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</span><br></pre></td></tr></table></figure><p>并确认当前汉化版本的VERSION 是否相同，当前最新的汉化版本为8.6。如果安装版本小于当前汉化版本，请先升级。如果安装版本大于当前汉化版本，请在本项目中提交新的issue。如果版本相同，首先在本地 clone 仓库。<br><strong>GitLab.com 仓库</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitlab.com/larryli/gitlab.git</span><br></pre></td></tr></table></figure><p><strong>Coding.net 镜像</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://git.coding.net/larryli/gitlab.git</span><br></pre></td></tr></table></figure><p>根据我的测试，Coding.net的镜像不完整，clone之后无法checkout。然后比较汉化分支和原分支，导出 patch用的diff文件。</p><p><strong>8.1 版本的汉化补丁</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff origin/8-6-stable..8-6-zh &gt; ../8.6.diff   （已经生成可以直接进行下面的操作）</span><br></pre></td></tr></table></figure><p>然后上传 8.6.diff 文件到服务器。<br><strong>停止 gitlab</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl stop</span><br><span class="line">patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; 8.6.diff</span><br></pre></td></tr></table></figure><p>确定没有.rej文件，重启 GitLab即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl start</span><br></pre></td></tr></table></figure><p>如果汉化中出现问题，请重新安装 GitLab（ 注意备份数据 ）。</p><h2 id="GitLab管理"><a href="#GitLab管理" class="headerlink" title="GitLab管理"></a>GitLab管理</h2><h3 id="启动、停止、重启组件"><a href="#启动、停止、重启组件" class="headerlink" title="启动、停止、重启组件"></a>启动、停止、重启组件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl start    启动所有 GitLab 组件</span><br><span class="line">gitlab-ctl stop     停止所有 GitLab 组件</span><br><span class="line">gitlab-ctl restart  重启所有 GitLab 组件</span><br></pre></td></tr></table></figure><h3 id="常用管理命令"><a href="#常用管理命令" class="headerlink" title="常用管理命令"></a>常用管理命令</h3><h4 id="相关操作"><a href="#相关操作" class="headerlink" title="相关操作"></a>相关操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure       如果更改了主配置文件 [gitlab.rb文件],使配置文件生效 但是会初始化除了gitlab.rb之外的所有文件</span><br><span class="line">gitlab-ctl show-config       验证配置文件</span><br><span class="line">gitlab-ctl restart           重启gitlab服务</span><br><span class="line">gitlab-ctl stop unicorn      停止组件内某一个服务</span><br><span class="line">gitlab-ctl status unicorn    查看状态</span><br><span class="line">gitlab-ctl <span class="built_in">kill</span> unicorn      <span class="built_in">kill</span>掉某一个服务</span><br><span class="line">gitlab-ctl status unicorn    再次查看状态</span><br><span class="line">gitlab-ctl start unicorn     启动服务</span><br><span class="line">gitlab-rake gitlab:env:info  系统信息监测</span><br><span class="line">gitlab-rake gitlab:check     各种状态监测</span><br></pre></td></tr></table></figure><h4 id="相关目录"><a href="#相关目录" class="headerlink" title="相关目录"></a>相关目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/var/opt/gitlab/git-data/repositories/root 库默认存储目录</span><br><span class="line">/opt/gitlab                                是gitlab的应用代码和相应的依赖程序</span><br><span class="line">/var/opt/gitlab                            此目录下是运行gitlab-ctl reconfigure命令编译后的应用数据和配置文件，不需要人为修改配置</span><br><span class="line">/etc/gitlab                                此目录下存放了以omnibus-gitlab包安装方式时的配置文件，这里的配置文件才需要管理员手动编译配置</span><br><span class="line">/var/<span class="built_in">log</span>/gitlab                            此目录下存放了gitlab各个组件产生的日志</span><br><span class="line">/var/opt/gitlab/backups/                   备份文件生成的目录</span><br></pre></td></tr></table></figure><h2 id="备份和恢复"><a href="#备份和恢复" class="headerlink" title="备份和恢复"></a>备份和恢复</h2><h3 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h3><p>备份GitLab repositories and GitLab metadata<br>在 crontab 中加入如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 * * * /usr/bin/gitlab-rake gitlab:backup:create</span><br></pre></td></tr></table></figure><p>案例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@vm10-253-26-148 gitlab-workhorse]<span class="comment"># /usr/bin/gitlab-rake gitlab:backup:create</span></span><br><span class="line">Dumping database ...</span><br><span class="line">Dumping PostgreSQL database gitlabhq_production ... [DONE]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Dumping repositories ...</span><br><span class="line"> * root/jsws ... [DONE]</span><br><span class="line"> * root/jsws.wiki ...  [SKIPPED]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Dumping uploads ...</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Dumping builds ...</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Dumping artifacts ...</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Dumping lfs objects ...</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Creating backup archive: 1461569556_gitlab_backup.tar ... <span class="keyword">done</span></span><br><span class="line">Uploading backup archive to remote storage  ... skipped</span><br><span class="line">Deleting tmp directories ... <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Deleting old backups ... Skipping</span><br></pre></td></tr></table></figure><p>默认生成备份文件的路径：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@vm10-253-26-148 gitlab-workhorse]<span class="comment"># cd /var/opt/gitlab/backups/</span></span><br><span class="line">[root@vm10-253-26-148 backups]<span class="comment"># ls -al</span></span><br><span class="line">total 88</span><br><span class="line">drwx------  2 git  root  4096 Apr 25 15:32 .</span><br><span class="line">drwxr-xr-x 13 root root  4096 Apr 22 15:25 ..</span><br><span class="line">-rw-------  1 git  git  81920 Apr 25 15:32 1461569556_gitlab_backup.tar</span><br></pre></td></tr></table></figure><p>注：备份文件是一个归档文件，且开头是unix时间<br>在实际的生产环境中备份策略建议：本地保留三天，在异地备份永久保存<br>这里以unix时间戳来标记备份的时间，这个时间戳对人来说不好读懂，可使用date命令把其转换成人可读的格式，如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@test1:~/backup<span class="comment"># date -d @1453432213</span></span><br><span class="line">2016年 01月 22日 星期五 11:10:13 CST</span><br></pre></td></tr></table></figure><p>修改备份目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@test1:~/backup<span class="comment"># vim /etc/gitlab/gitlab.rb：</span></span><br><span class="line">gitlab_rails[<span class="string">'backup_path'</span>] = <span class="string">"/data/git-backups"</span></span><br><span class="line"><span class="comment"># limit backup lifetime to 7 days - 604800 seconds</span></span><br><span class="line">gitlab_rails[<span class="string">'backup_keep_time'</span>] = 604800</span><br></pre></td></tr></table></figure><p>创建备份目录，修改属主和属组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@test1:~<span class="comment"># mkdir /data/git-backups</span></span><br><span class="line">chown -R git.git /data/git-backups</span><br></pre></td></tr></table></figure><p>手动进行一次备份，测试一下备份是否有效，测试备份正常，添加定时任务即可</p><h3 id="恢复"><a href="#恢复" class="headerlink" title="恢复"></a>恢复</h3><p>首先进入备份 GitLab 的目录，这个目录是配置文件中的 gitlab_rails[‘backup_path’] ，默认为 /var/opt/gitlab/backups 。然后停止 unicorn 和 sidekiq ，保证数据库没有新的连接，不会有写数据情况。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl stop unicorn</span><br><span class="line">gitlab-ctl stop sidekiq</span><br></pre></td></tr></table></figure><p>然后恢复数据，1406691018为备份文件的时间戳</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-rake gitlab:backup:restore BACKUP=1406691018</span><br></pre></td></tr></table></figure><h1 id="GitLab命令"><a href="#GitLab命令" class="headerlink" title="GitLab命令"></a>GitLab命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@vm10-253-26-148 ~]<span class="comment"># git</span></span><br><span class="line">git                </span><br><span class="line">gitk               </span><br><span class="line">gitlab-rails       </span><br><span class="line">git-receive-pack   </span><br><span class="line">git-upload-archive</span><br><span class="line">git-cvsserver      </span><br><span class="line">gitlab-ctl                    <span class="comment"># GitLab服务管理  </span></span><br><span class="line">gitlab-rake        </span><br><span class="line">git-shell          </span><br><span class="line">git-upload-pack</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@vm10-253-26-148 ~]<span class="comment"># gitlab-ctl</span></span><br><span class="line">I don\<span class="string">'t know that command.</span></span><br><span class="line"><span class="string">/opt/gitlab/embedded/bin/omnibus-ctl: command (subcommand)</span></span><br><span class="line"><span class="string">deploy-page</span></span><br><span class="line"><span class="string">  Put up the deploy page</span></span><br><span class="line"><span class="string">remove-accounts</span></span><br><span class="line"><span class="string">  Delete *all* users and groups used by this package</span></span><br><span class="line"><span class="string">upgrade</span></span><br><span class="line"><span class="string">  Run migrations after a package upgrade</span></span><br><span class="line"><span class="string">General Commands:</span></span><br><span class="line"><span class="string">  cleanse</span></span><br><span class="line"><span class="string">    Delete *all* gitlab data, and start from scratch.</span></span><br><span class="line"><span class="string">  help</span></span><br><span class="line"><span class="string">    Print this help message.</span></span><br><span class="line"><span class="string">  reconfigure</span></span><br><span class="line"><span class="string">    Reconfigure the application.</span></span><br><span class="line"><span class="string">  show-config</span></span><br><span class="line"><span class="string">    Show the configuration that would be generated by reconfigure.</span></span><br><span class="line"><span class="string">  uninstall</span></span><br><span class="line"><span class="string">    Kill all processes and uninstall the process supervisor (data will be preserved).</span></span><br><span class="line"><span class="string">Service Management Commands:</span></span><br><span class="line"><span class="string">  graceful-kill</span></span><br><span class="line"><span class="string">    Attempt a graceful stop, then SIGKILL the entire process group.</span></span><br><span class="line"><span class="string">  hup</span></span><br><span class="line"><span class="string">    Send the services a HUP.</span></span><br><span class="line"><span class="string">  int</span></span><br><span class="line"><span class="string">    Send the services an INT.</span></span><br><span class="line"><span class="string">  kill</span></span><br><span class="line"><span class="string">    Send the services a KILL.</span></span><br><span class="line"><span class="string">  once</span></span><br><span class="line"><span class="string">    Start the services if they are down. Do not restart them if they stop.</span></span><br><span class="line"><span class="string">  restart</span></span><br><span class="line"><span class="string">    Stop the services if they are running, then start them again.</span></span><br><span class="line"><span class="string">  service-list</span></span><br><span class="line"><span class="string">    List all the services (enabled services appear with a *.)</span></span><br><span class="line"><span class="string">  start</span></span><br><span class="line"><span class="string">    Start services if they are down, and restart them if they stop.</span></span><br><span class="line"><span class="string">  status</span></span><br><span class="line"><span class="string">    Show the status of all the services.</span></span><br><span class="line"><span class="string">  stop</span></span><br><span class="line"><span class="string">    Stop the services, and do not restart them.</span></span><br><span class="line"><span class="string">  tail</span></span><br><span class="line"><span class="string">    Watch the service logs of all enabled services.</span></span><br><span class="line"><span class="string">  term</span></span><br><span class="line"><span class="string">    Send the services a TERM.</span></span><br></pre></td></tr></table></figure><h2 id="gitlab-ce官方文档查看备录（重要）"><a href="#gitlab-ce官方文档查看备录（重要）" class="headerlink" title="gitlab-ce官方文档查看备录（重要）"></a>gitlab-ce官方文档查看备录（重要）</h2><p>文章地址：<a href="http://www.178linux.com/7985" target="_blank" rel="noopener">http://www.178linux.com/7985</a></p><h2 id="邮箱设置"><a href="#邮箱设置" class="headerlink" title="邮箱设置"></a>邮箱设置</h2><p>1）GitLab中使用postfix进行邮件发送。因此，可以卸载系统中自带的sendmail。<br>使用yum list installed查看系统中是否存在sendmail，若存在，则使用yum remove sendmail指令进行卸载。<br>2）测试系统是否可以正常发送邮件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Test mail from postfix"</span> | mail -s <span class="string">"Test Postfix"</span> xxx@xxx.com</span><br></pre></td></tr></table></figure><p>注：上面的<a href="mailto:xxx@xxx.com" target="_blank" rel="noopener">xxx@xxx.com</a>为你希望收到邮件的邮箱地址。</p><p>当邮箱收到系统发送来的邮件时，将系统的地址复制下来，如：<a href="mailto:root@iZ23syflhhzZ.localdomain" target="_blank" rel="noopener">root@iZ23syflhhzZ.localdomain</a>,打开/etc/gitlab/gitlab.rb,将<br>gitlab_rails[‘gitlab_email_from’] = ‘gitlab@example.com’<br>修改为<br>gitlab_rails[‘gitlab_email_from’] = ‘root@iZ23syflhhzZ.localdomain’<br>保存后，执行sudo gitlab-ctl reconfigure重新编译GitLab。如果邮箱的过滤功能较强，请添加系统的发件地址到邮箱的白名单中，防止邮件被过滤。<br>Note:系统中邮件发送的日志可通过<code>tail /var/log/maillog</code>命令进行查看。</p><h1 id="开启HTTPS"><a href="#开启HTTPS" class="headerlink" title="开启HTTPS"></a>开启HTTPS</h1><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>1）在浏览器中访问GitLab出现502错误<br>原因：内存不足。<br>解决办法：检查系统的虚拟内存是否随机启动了，如果系统无虚拟内存，则增加虚拟内存，再重新启动系统。<br>2）80端口冲突<br>原因：Nginx默认使用了80端口。<br>解决办法：为了使Nginx与Apache能够共存，并且为了简化GitLab的URL地址，Nginx端口保持不变，修改Apache的端口为4040。这样就可以直接用使用ip访问Gitlab。而禅道则可以使用4040端口进行访问，像这样：xxx.xx.xxx.xx:4040/zentao。具体修改的地方在/etc/httpd/conf/httpd.conf这个文件中，找到Listen 80这一句并将之注释掉，在底下添加一句Listen 4040，保存后执行service httpd restart重启apache服务即可。</p><p>#Listen 80<br>Listen 4040<br>3）8080端口冲突<br>原因：由于unicorn默认使用的是8080端口。<br>解决办法：打开/etc/gitlab/gitlab.rb,打开# unicorn[‘port’] = 8080的注释，将8080修改为9090，保存后运行sudo gitlab-ctl reconfigure即可。<br>4）STMP设置<br>配置无效，暂时不知道原因。<br>5）GitLab头像无法正常显示<br>原因：gravatar被墙<br>解决办法：<br>编辑 /etc/gitlab/gitlab.rb，将</p><p>#gitlab_rails[‘gravatar_plain_url’] = ‘<a href="http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&amp;d=identicon&#39;" target="_blank" rel="noopener">http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&amp;d=identicon&#39;</a><br>修改为：<br>gitlab_rails[‘gravatar_plain_url’] = ‘<a href="http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&amp;d=identicon&#39;" target="_blank" rel="noopener">http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&amp;d=identicon&#39;</a></p><p>然后在命令行执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br><span class="line">gitlab-rake cache:clear RAILS_ENV=production</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/885609a5.html">https://mds1455975151.github.io/archives/885609a5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> GitLab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitLab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python查看函数代码内容</title>
      <link href="/archives/4d9895b3.html"/>
      <url>/archives/4d9895b3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>方法1：使用help(random)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>help(random)</span><br><span class="line">Help on module random:</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">    random - Random variable generators.</span><br><span class="line"></span><br><span class="line">FILE</span><br><span class="line">    c:\python27\lib\random.py　　　　　　　　<span class="comment"># 文件存放位置</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>方法2：利用random.<strong>file</strong>查看位置，然后打开后缀名为.py的文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.__file__</span><br><span class="line"><span class="string">'C:\\Python27\\lib\\random.pyc'</span>            <span class="comment"># 文件存放位置</span></span><br></pre></td></tr></table></figure><p>方法3：命令行输入python -v,然后倒入模块时，会自动显示位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python -v</span><br><span class="line"><span class="comment"># installing zipimport hook</span></span><br><span class="line"><span class="keyword">import</span> zipimport <span class="comment"># builtin</span></span><br><span class="line"><span class="comment"># installed zipimport hook</span></span><br><span class="line"><span class="comment"># C:\Python27\lib\site.pyc matches C:\Python27\lib\site.py               # 文件存放位置</span></span><br><span class="line"><span class="keyword">import</span> site <span class="comment"># precompiled from C:\Python27\lib\site.pyc</span></span><br><span class="line"><span class="comment"># C:\Python27\lib\os.pyc matches C:\Python27\lib\os.py</span></span><br><span class="line"><span class="keyword">import</span> os <span class="comment"># precompiled from C:\Python27\lib\os.pyc</span></span><br><span class="line"><span class="keyword">import</span> errno <span class="comment"># builtin</span></span><br><span class="line">...............省略.......................................</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4d9895b3.html">https://mds1455975151.github.io/archives/4d9895b3.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux之保留yum安装软件后的RPM包</title>
      <link href="/archives/16b3634c.html"/>
      <url>/archives/16b3634c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>yum安装软件很方便，但是下载下来的rpm包在安装后默认会被删除掉.如果希望保留yum安装的软件包该如何做呢？</p><h1 id="设置方案详解"><a href="#设置方案详解" class="headerlink" title="设置方案详解"></a>设置方案详解</h1><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>1、GFW限制，国内无法顺利下载应用包，利用海外机器安装并保留相应软件包<br>2、公司或者现实应用场景无法连接互联网，只能在外网保存后使用</p><a id="more"></a><h2 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a>设置方法</h2><p>将/etc/yum.conf里对应的keepcache参数改为1即可，然后用yum安装软件，rpm包便会保留在cachedir对应的目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@awstats ~]<span class="comment"># cp /etc/yum.conf&#123;,.`date +%F`&#125;</span></span><br><span class="line">-rw-r--r-- 1 root root 969 Apr 14 16:19 /etc/yum.conf</span><br><span class="line">-rw-r--r-- 1 root root 969 Apr 14 16:19 /etc/yum.conf.20150414</span><br><span class="line">[root@awstats ~]<span class="comment"># sed -i 's#keepcache=0#keepcache=1#g' /etc/yum.conf</span></span><br><span class="line">[root@awstats ~]<span class="comment"># sed -n '2,3p' /etc/yum.conf</span></span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span></span><br><span class="line">keepcache=1</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/16b3634c.html">https://mds1455975151.github.io/archives/16b3634c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> yum </tag>
            
            <tag> rpm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何解读页游的自动挂机等类似功能？</title>
      <link href="/archives/3109eab0.html"/>
      <url>/archives/3109eab0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>网页游戏挂机是有什么目的？对游戏运营商有什么意义？</p><a id="more"></a><h1 id="解读"><a href="#解读" class="headerlink" title="解读"></a>解读</h1><p>1、让玩家在新手期可以减少操作<br>2、让玩家免去日常升级打怪获取经验、刷副本获取道具的手动操作<br>3、页游不像PC端游戏那么精和复杂，其实页游就是利用玩家的碎片时间.用户群体数基本为上班一族，上班时间挂着玩玩即可，又不能长时间手动，因而自动功能就孕育而生<br>之所以这样做，是因为玩页游的人大多数都没有足够的时间花在游戏上，但是同时这类人群也有很长的时间会开着电脑工作或是忙其他的，所以像这些砍怪的操作还是交给系统自动进行吧，偶尔闲下来了只需要到游戏里面做一些更重要的事。顺便说一下，自动寻路，也是此目的。因为目标用户没有时间花几分钟来手动跑几个地图……反过来，如果玩家不能自动挂机、不能自动寻路，手上又有别的事需要忙的话，角色只能呆呆的站在那几个小时。说不定玩家顺手就关闭了这个页面，再也不打开了……就算此时不关，过了一两天，跟其他玩家的等级、属性差距就拉开了。玩家又顺手就关闭了这个页面，再也不打开了……对于运营商来说，这些自动化的功能实际上还是为了减少玩家的流失。毕竟导入的用户都是钱啊！！！只有留下来的用户才会产生价值。</p><p>核心原因：方便玩家，留住玩家，刺激玩家，引导用户产生价值</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/3109eab0.html">https://mds1455975151.github.io/archives/3109eab0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 页游 </tag>
            
            <tag> 自动挂机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web资源加载问题</title>
      <link href="/archives/b791b27f.html"/>
      <url>/archives/b791b27f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Web资源加载过程中有很多资源链接带了”v=xxxx”(xxxx一般为201712161344类似的时间戳字符串)的标识.为什么要这么设置？有什么好处？</p></blockquote><a id="more"></a><h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>Web资源加载过程中有很多资源链接带了”v=xxxx”(xxxx一般为201712161344类似的时间戳字符串)的标识.为什么要这么设置？有什么好处？<br><img src="/archives/b791b27f/01.png" alt></p><h1 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h1><p><strong>错误理解：</strong><br>“v=xxxx”标识是请求该版本的资源，如果该资源版本变化则会重新请求另一个版本的资源.<br><strong>正确理解：</strong><br>这是为了避免css等资源缓存， 如果你每次都引用aa.css， 那么在客户端那里访问的时候，即使你的aa.css已经修改了，但是浏览器默认还是会使用本地缓存的aa.css，如果你修改css之后，引用aa.css？v=XX，每次修改css都改变XX的数值，那么，在客户端那里，浏览器如果检测到XX与本地缓存的css不一致，就会重新去服务器请求最新的css，这样你的css才能在客户端体现。</p><h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><p>Web游戏资源更新频繁，会使用类似方式做资源版本管理<br>常用两种方式：1)使用比较精确的时间戳信息 2)使用文件md5sum值信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://wgimg.xxxx.com.cn/wgsgqyz/tencent/assets/common/diamond.swf?m=3099bc6b712fd25ff80a5766372775e4</span><br><span class="line">http://wgimg.xxxx.com.cn/wgsgqyz/tencent/assets/zh_CN/ui/diamond.swf?m=35b78b01658b669b9f9599cb0b6fc451</span><br></pre></td></tr></table></figure><h1 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h1><p>使用该特性后一般需要关注下CDN厂商的相关配置项(过滤参数配置)<br>过滤参数配置简单来说就是控制是否对用户请求URL中？之后的参数进行过滤</p><h2 id="使用默认配置"><a href="#使用默认配置" class="headerlink" title="使用默认配置"></a>使用默认配置</h2><p>默认情况下，过滤参数的开关处于关闭状态，此时将不会忽略用户请求 URL 中 “?” 之后的参数。<br>假设用户请求 URL 为： <a href="http://www.test.com/1.jpg?version=1.1" target="_blank" rel="noopener">http://www.test.com/1.jpg?version=1.1</a> 的资源，接收此请求的节点未缓存该内容，则会进行回源获取，并缓存至节点。<br>假设用户再次请求 URL 为： <a href="http://www.test.com/1.jpg?version=1.1" target="_blank" rel="noopener">http://www.test.com/1.jpg?version=1.1</a> 的资源 ，此时节点已经存在该资源，则直接命中资源并返回给用户。<br>在进行过步骤1后，假设用户请求 URL 为： <a href="http://www.test.com/1.jpg?version=1.2" target="_blank" rel="noopener">http://www.test.com/1.jpg?version=1.2</a> 的资源，此时由于过滤参数已经关闭，则无法全路径匹配内容，因此会再次回源进行资源的拉取。</p><h2 id="开启过滤参数"><a href="#开启过滤参数" class="headerlink" title="开启过滤参数"></a>开启过滤参数</h2><p>当你开启了过滤参数配置时，此时将会忽略用户请求 URL 中 “?” 之后的参数。<br>假设用户请求 URL 为： <a href="http://www.test.com/1.jpg?version=1.1" target="_blank" rel="noopener">http://www.test.com/1.jpg?version=1.1</a> 的资源，接收此请求的节点未缓存该内容，则会进行回源获取，并缓存至节点，由于用户开启了过滤参数，因此节点存放的资源URL为 <a href="http://www.test.com/1.jpg。" target="_blank" rel="noopener">http://www.test.com/1.jpg。</a><br>假设用户再次请求 URL 为： <a href="http://www.test.com/1.jpg?version=1.1" target="_blank" rel="noopener">http://www.test.com/1.jpg?version=1.1</a> 的资源，此时在节点实际查找的资源为 <a href="http://www.test.com/1.jpg，节点已经缓存，因此会直接命中资源，并返回给用户。" target="_blank" rel="noopener">http://www.test.com/1.jpg，节点已经缓存，因此会直接命中资源，并返回给用户。</a><br>在进行过步骤1后，假设用户请求 URL 为： <a href="http://www.test.com/1.jpg?version=1.2" target="_blank" rel="noopener">http://www.test.com/1.jpg?version=1.2</a> 的资源，此时在节点实际查找的资源为 <a href="http://www.test.com/1.jpg，节点已经缓存，因此会直接命中资源，并返回给用户。" target="_blank" rel="noopener">http://www.test.com/1.jpg，节点已经缓存，因此会直接命中资源，并返回给用户。</a></p><p>修改策略后可以通过如下命令验证是否缓存成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -I http://wgimg.xxxx/wgsgqyz/tencent/assets/common/diamond.swf?m=3099bc6b712fd25ff80a5766372775e4</span></span><br><span class="line">http://wgimg.xxxx/wgsgqyz/tencent/assets/zh_CN/ui/diamond.swf?m=35b78b01658b669b9f9599cb0b6fc451HTTP/1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Content-Type: application/x-shockwave-flash</span><br><span class="line">Content-Length: 261725</span><br><span class="line">Last-Modified: Wed, 20 Dec 2017 06:21:28 GMT</span><br><span class="line">ETag: <span class="string">"1f20336-3fe5d-560bf97f52a00"</span></span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Cache-Control: s-maxage=43200</span><br><span class="line">X-Cache-Date: 1513838058 2017-12-21 14:34:18</span><br><span class="line">Date: Wed, 27 Dec 2017 02:59:01 GMT</span><br><span class="line">Age: 36974</span><br><span class="line">Powered-By-SpeedyCloud: HIT from ctc-dg-1-4-c1111, HIT from utn-hz-1-5-c1131</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Access-Control-Allow-Origin: *</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://cloud.tencent.com/document/product/228/6291" target="_blank" rel="noopener">什么是过滤参数？</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/b791b27f.html">https://mds1455975151.github.io/archives/b791b27f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> 资源更新 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络广告投放知识</title>
      <link href="/archives/914e681.html"/>
      <url>/archives/914e681.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>了解下网络广告投放知识</p><a id="more"></a><h1 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h1><p>CPA、CPC、CPS，都网络广告投放形式。网络广告是近几年来随着网络的兴起和普及才成长起来的新型广告模式，由于它借助Internet为媒体工具，因此在收费模式上有别于传统广告，在国外，有每行动成本〈CPA〉、每购买成本〈CPP〉、每千人印象〈CPM〉、单次点击成本〈CPC〉、LEAD。近几年来，网络广告的收费模式更有发展和创新之势，比如在我国继承传统的方式上提出了“包月制”以及Clickthrough ，hits，pageview等模式。<br>1、CPA（按行为付费）计价方式是指按广告投放实际效果，即按回应的有效问卷或定单来计费，而不限广告投放量。CPA广告是网络中最常见的一种广告形式，当用户点击某个网站上的cpa广告后，这个站的站长就会获得相应的收入。<br>2、CPC（按点击付费）是“Cost Per Click”的英文缩写，以每点击一次计费。这样的方法加上点击率限制可以加强作弊的难度，网民的每一次点击就会为广告主带来真实的流量或是潜在的消费者，是网络比较成熟的国家常见的收费方式之一。<br>3、CPS（按销售付费）广告是网络广告的一种，广告主为规避广告费用风险，按照广告点击之后产生的实际销售笔数付给广告站点销售提成费用。<br>4、CPM(Cost Per Mille) 每千人成本。CPM是一种展示付费广告，只要展示了广告主的广告内容，广告主就为此付费。<br>5、CPT(Cost Per Time) 每时间段成本。CPT是一种以时间来计费的广告，国内很多的网站都是按照“一个星期多少钱”这种固定收费模式来收费。<br>6、CPC(Cost Per Click) 每点击成本。CPC是一种点击付费广告，根据广告被点击的次数收费。如关键词广告一般采用这种定价模式，比较典型的有Google广告联盟的AdSense for Content和百度联盟的百度竞价广告。</p><p>通过以上信息我们知道：<br>（1）CPT和CPM只在第一步收取广告费用，即媒体只需要将广告对广告受众进行了展示，即可向广告商收取广告费用。<br>（2）CPC只收取第二步费用，消费者看到广告后并进行了点击行为以后，媒体向广告商收取广告费用。<br>（3）CPA和CPS处于第三步，即消费者有看到广告后并点击了广告，进一步了解活动情况后在广告主的网站完成某些特定行为（例如付款消费，填表注册等）。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/914e681.html">https://mds1455975151.github.io/archives/914e681.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 互联网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络广告投放 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用人性弱点的互联网服务</title>
      <link href="/archives/85011af.html"/>
      <url>/archives/85011af.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>逛知乎发现一张神图，总结了利用人性弱点的各类互联网服务，在这里分享给大家.</p><h1 id="祭图"><a href="#祭图" class="headerlink" title="祭图"></a>祭图</h1><a id="more"></a><p>人类社会发展的长河中，贪婪推动了这个社会的进步。无论是团购，点购，秒杀，还是抽奖，该类网站统一的制胜法宝就是价格极其低廉，巧妙的运用了低价这一特点，充分的激发人类贪婪的本性，一次次心甘情愿的点击购买。<br><img src="/archives/85011af/01.jpg" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a rel="noopener" href="https://www.zhihu.com/question/31317134" target="_blank">为什么现在还在推广传奇这款游戏？</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/85011af.html">https://mds1455975151.github.io/archives/85011af.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 互联网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 互联网 </tag>
            
            <tag> 人性弱点 </tag>
            
            <tag> 贪婪 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DevOps认识</title>
      <link href="/archives/9f2323d4.html"/>
      <url>/archives/9f2323d4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>什么是DevOps？未来发展趋势是咋样的？</p><h1 id="DevOps概述"><a href="#DevOps概述" class="headerlink" title="DevOps概述"></a>DevOps概述</h1><p>DevOps本质是一种闭环协作的文化，然后是一种连接各个环节的流程，其次才是工具链。实施DevOps不仅仅是引入DevOps工具链，更重要的是要在流程上进行贯通，逐步形成闭环协作的文化。但目前我们一直在强调和夸大DevOps工具链的价值，忽略或忽视了流程和文化建设的必要性和重要性，这应该是当前很多企业实施DevOps成效不好的原因所在。</p><a id="more"></a><p><img src="/archives/9f2323d4/02.jpg" alt></p><p>现在对实施DevOps有想法的公司，多半都是业务发展还不错，在研发和运维上都比较大的压力的公司，希望通过引入DevOps来提升公司IT部门的总体运作效率，来支撑业务的发展速度。<br>关于DevOps对效率的提升，Puppet出过一份调研报告，算是比较成体系的。</p><div class="row"><embed src="/archives/9f2323d4/2017.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="DevOps落地"><a href="#DevOps落地" class="headerlink" title="DevOps落地"></a>DevOps落地</h1><h1 id="DevOps文化"><a href="#DevOps文化" class="headerlink" title="DevOps文化"></a>DevOps文化</h1><h1 id="DevOps工具-游戏项目"><a href="#DevOps工具-游戏项目" class="headerlink" title="DevOps工具(游戏项目)"></a>DevOps工具(游戏项目)</h1><p>问题管理：Redmine，禅道.<br>功能：任务的管理，工作的分配<br>场景：游戏策划进行工作调度、QA发现bug提出修复请求等等<br>版本控制系统：SVN/Git/版本号规范<br>功能：所有项目代码、资源及文档等归档进行备份版本管理<br>场景：程序、策划和美术资源整合，版本控制，代码发版操作等等<br>持续集成：<br>功能：代码测试、打包、部署<br>场景：服务器端程序打包、客户端多渠道多平台打包、QA进行代码测试控制代码质量<br>自动化运维：<br>功能：结合CMDB、监控、日志系统等等各个运维子系统进行运维工作的自动化管理<br>场景：利用Jenkins选择某个语言版本、选择更新版本的包名、更新区服范围s1-s100、更新方式(更新程序、更新数据库、停服、启服等等)<br>日志收集：<br>功能：日志收集汇总，提供故障排除依据，分析客户端上报日志，用户分布等等<br>场景：客户端版本日志上报、cash信息汇总、游戏程序报错日志、服务器异常登录日志、MySQL错误日志慢查询日志等等</p><h1 id="DevOps相关资料"><a href="#DevOps相关资料" class="headerlink" title="DevOps相关资料"></a>DevOps相关资料</h1><p><a href="https://github.com/AliyunContainerService/DevOps" target="_blank" rel="noopener">阿里云容器服务持续交付</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/9f2323d4.html">https://mds1455975151.github.io/archives/9f2323d4.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DevOps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo支持https访问</title>
      <link href="/archives/40865889.html"/>
      <url>/archives/40865889.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>介绍如何设置Hexo支持https访问以及遇到的相关问题说明</p></blockquote><a id="more"></a><h1 id="为什么使用https协议？"><a href="#为什么使用https协议？" class="headerlink" title="为什么使用https协议？"></a>为什么使用https协议？</h1><p>1、提高网站访问安全性，网络连接都是加密的<br>2、目前越来越多的浏览器会提前当前站点支不支持https协议，提高用户信任度，体验好.例如：Google宣布了，从2017年1月份正式发布的Chrome 56开始，Google将把某些包含敏感内容的https页面标记为“不安全”。<br>3、使用了HTTPS之后，如果网站的访客是从其他已经使用了HTTPS的网站上跳转过来，你就能在Google Analytics中获取更完整的来源信息</p><h1 id="设置方法详解"><a href="#设置方法详解" class="headerlink" title="设置方法详解"></a>设置方法详解</h1><p>默认情况下使用GitHub Pages的给定域名则支持http和https两种协议，但是如果使用自定义域名，则只能通过http://访问，如何给我们的域名添加上?<br>目前方案有2种：<br>1、自己购买证书，部署到一台机器，机器部署nginx，stunnel等代理软件，反向代理到GitHub pages站点，域名指向代理机器IP(成本高、不建议使用)<br>2、使用CloudFlare提供方案1类似的设置(推荐)</p><p>GitHub Pages不支持上传SSL证书<br>CloudFlare 是一家CDN提供商，它提供了免费的https服务(但不是应用SSL证书)。实现模式就是，用户到CDN服务器的连接为https，而CDN服务器到GithubPage服务器的连接为http，就是在CDN服务器那里加上反向代理。<br>1、注册并登录CloudFlare，并将自己域名下的name server修改为CloudFlare的name server。<br>2、在CloudFlare的DNS设置域名匹配到自己的GithubPage(启用动态DNS加速)。<br>3、在CloudFlare的Crypto设置SSL为Flexible(等待一定时间实现建立连接后，就可以通过https来访问自己的 GithubPage )。<br>4、在CloudFlare的Page Rules中设置路由规则。一般情况下，利用Always use https设置两条规则，规则链接分别为http://域名/* 与http://域名/(开启https强制跳转)。</p><p>注：Cloudflare还提供免费的CDN和缓存技术，让浏览者有更好的体验</p><h1 id="设置效果"><a href="#设置效果" class="headerlink" title="设置效果"></a>设置效果</h1><p>查看本站点即可</p><p><strong>缺点</strong><br>最近忽然发现网站出现了百度云加速的安全检查提醒，经过排除发现CloudFlare和百度云加速有合作关系。经过研究发现可以在CloudFlare设置白名单或者直接调整安全级别(默认为中级)解决该问题。<br><img src="/archives/40865889/01.png" alt><br><img src="/archives/40865889/02.png" alt><br>调整方法：<br>Firewall–&gt;Security Level(设置安全级别)<br>or<br>Firewall–&gt;Firewall Events(查看被阻止的用户IP，设置白名单)</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/u011244202/article/details/57106544" target="_blank" rel="noopener">让个人域名下GithubPage完美支持https</a><br><a href="https://segmentfault.com/a/1190000007740693" target="_blank" rel="noopener">为自定义域名的GitHub Pages添加SSL 完整方案</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/40865889.html">https://mds1455975151.github.io/archives/40865889.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python常见报错</title>
      <link href="/archives/82e008c9.html"/>
      <url>/archives/82e008c9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>问题1:UnicodeEncodeError: ‘ascii’ codec can’t encode characters in position 32-34: ordinal not in range(128)<br>解决：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure><a id="more"></a><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/82e008c9.html">https://mds1455975151.github.io/archives/82e008c9.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> FQA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo主题搜集</title>
      <link href="/archives/9c1d5c6d.html"/>
      <url>/archives/9c1d5c6d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近在折腾Hexo博客，选择了Next主题.看到好多其他的主题，于是心血来潮用Python统计下比较受欢迎的Hexo博客主题.顺便练习练习Python和学习下GitHub的API.</p><a id="more"></a><h1 id="展示成果"><a href="#展示成果" class="headerlink" title="展示成果"></a>展示成果</h1><p>GitHub上stars排名前30的项目列表:</p><table><thead><tr><th>项目名称</th><th>stars量</th><th>GitHub地址</th></tr></thead><tbody><tr><td>iissnan/hexo-theme-next</td><td>10316</td><td><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">点我</a></td></tr><tr><td>litten/hexo-theme-yilia</td><td>4498</td><td><a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">点我</a></td></tr><tr><td>viosey/hexo-theme-material</td><td>2420</td><td><a href="https://github.com/viosey/hexo-theme-material" target="_blank" rel="noopener">点我</a></td></tr><tr><td>pinggod/hexo-theme-apollo</td><td>1209</td><td><a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank" rel="noopener">点我</a></td></tr><tr><td>LouisBarranqueiro/hexo-theme-tranquilpeak</td><td>1202</td><td><a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak" target="_blank" rel="noopener">点我</a></td></tr><tr><td>ppoffice/hexo-theme-icarus</td><td>1116</td><td><a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">点我</a></td></tr><tr><td>wuchong/jacman</td><td>876</td><td><a href="https://github.com/wuchong/jacman" target="_blank" rel="noopener">点我</a></td></tr><tr><td>forsigner/fexo</td><td>766</td><td><a href="https://github.com/forsigner/fexo" target="_blank" rel="noopener">点我</a></td></tr><tr><td>ppoffice/hexo-theme-hueman</td><td>717</td><td><a href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="noopener">点我</a></td></tr><tr><td>ahonn/hexo-theme-even</td><td>639</td><td><a href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">点我</a></td></tr><tr><td>A-limon/pacman</td><td>527</td><td><a href="https://github.com/A-limon/pacman" target="_blank" rel="noopener">点我</a></td></tr><tr><td>luuman/hexo-theme-spfk</td><td>514</td><td><a href="https://github.com/luuman/hexo-theme-spfk" target="_blank" rel="noopener">点我</a></td></tr><tr><td>Haojen/hexo-theme-Anisina</td><td>507</td><td><a href="https://github.com/Haojen/hexo-theme-Anisina" target="_blank" rel="noopener">点我</a></td></tr><tr><td>probberechts/cactus-dark</td><td>438</td><td><a href="https://github.com/probberechts/cactus-dark" target="_blank" rel="noopener">点我</a></td></tr><tr><td>SuperKieran/TKL</td><td>406</td><td><a href="https://github.com/SuperKieran/TKL" target="_blank" rel="noopener">点我</a></td></tr><tr><td>Kaijun/hexo-theme-huxblog</td><td>395</td><td><a href="https://github.com/Kaijun/hexo-theme-huxblog" target="_blank" rel="noopener">点我</a></td></tr><tr><td>letiantian/huno</td><td>356</td><td><a href="https://github.com/letiantian/huno" target="_blank" rel="noopener">点我</a></td></tr><tr><td>wzpan/hexo-theme-freemind</td><td>278</td><td><a href="https://github.com/wzpan/hexo-theme-freemind" target="_blank" rel="noopener">点我</a></td></tr><tr><td>hexojs/hexo-theme-light</td><td>260</td><td><a href="https://github.com/hexojs/hexo-theme-light" target="_blank" rel="noopener">点我</a></td></tr><tr><td>yuche/hexo-theme-kael</td><td>221</td><td><a href="https://github.com/yuche/hexo-theme-kael" target="_blank" rel="noopener">点我</a></td></tr><tr><td>ppoffice/hexo-theme-minos</td><td>217</td><td><a href="https://github.com/ppoffice/hexo-theme-minos" target="_blank" rel="noopener">点我</a></td></tr><tr><td>CodeDaraW/Hacker</td><td>216</td><td><a href="https://github.com/CodeDaraW/Hacker" target="_blank" rel="noopener">点我</a></td></tr><tr><td>Ben02/hexo-theme-Anatole</td><td>199</td><td><a href="https://github.com/Ben02/hexo-theme-Anatole" target="_blank" rel="noopener">点我</a></td></tr><tr><td>monniya/hexo-theme-new-vno</td><td>178</td><td><a href="https://github.com/monniya/hexo-theme-new-vno" target="_blank" rel="noopener">点我</a></td></tr><tr><td>heroicyang/hexo-theme-modernist</td><td>164</td><td><a href="https://github.com/heroicyang/hexo-theme-modernist" target="_blank" rel="noopener">点我</a></td></tr><tr><td>yanm1ng/hexo-theme-vexo</td><td>155</td><td><a href="https://github.com/yanm1ng/hexo-theme-vexo" target="_blank" rel="noopener">点我</a></td></tr><tr><td>hexojs/hexo-theme-landscape</td><td>152</td><td><a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" rel="noopener">点我</a></td></tr><tr><td>stkevintan/hexo-theme-material-flow</td><td>152</td><td><a href="https://github.com/stkevintan/hexo-theme-material-flow" target="_blank" rel="noopener">点我</a></td></tr><tr><td>GallenHu/hexo-theme-Daily</td><td>146</td><td><a href="https://github.com/GallenHu/hexo-theme-Daily" target="_blank" rel="noopener">点我</a></td></tr><tr><td>iTimeTraveler/hexo-theme-hiker</td><td>141</td><td><a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank" rel="noopener">点我</a></td></tr><tr><td>==============数据结果：截止到 2017.12.15 11:02:32============</td><td></td><td></td></tr><tr><td># 参考资料</td><td></td><td></td></tr><tr><td><a rel="noopener" href="https://developer.github.com/v3/search/#search-repositories" target="_blank">GitHub API文档</a></td><td></td><td></td></tr><tr><td><a rel="noopener" href="https://www.zhihu.com/question/24422335/answers/created" target="_blank">有哪些好看的 Hexo 主题？</a></td><td></td><td></td></tr></tbody></table><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/9c1d5c6d.html">https://mds1455975151.github.io/archives/9c1d5c6d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 主题 </tag>
            
            <tag> stars </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo之URL持久化</title>
      <link href="/archives/e7a9455c.html"/>
      <url>/archives/e7a9455c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>hexo默认生成的文章地址路径是[网站名称/年/月/日/文章名称].这种链接对搜索爬虫是很不友好的，第一它的url结构超过了三层，太深了. 如何优化呢？</p><a id="more"></a><h1 id="优化详解"><a href="#优化详解" class="headerlink" title="优化详解"></a>优化详解</h1><p>安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><p>在站点配置文件_config.yaml中添加如下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># permalink: :title/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">archives/:abbrlink.html</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>  <span class="comment"># 算法：crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span>    <span class="comment"># 进制：dec(default) and hex</span></span><br></pre></td></tr></table></figure><p>注：html前缀为：对标题+时间进行md5然后再转base64</p><h1 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h1><p>看本文URL即可，哈哈哈.</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://segmentfault.com/a/1190000005799711" target="_blank" rel="noopener">hexo-abbrlink介绍</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e7a9455c.html">https://mds1455975151.github.io/archives/e7a9455c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> URL </tag>
            
            <tag> 持久化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo在文章尾部插入当前文章链接</title>
      <link href="/archives/fcf53e2f.html"/>
      <url>/archives/fcf53e2f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>用hexo-addlink在文章尾部添加当前文章链接，注明版权，有利于SEO.</p><h1 id="部署详解"><a href="#部署详解" class="headerlink" title="部署详解"></a>部署详解</h1><p>安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-addlink --save</span><br></pre></td></tr></table></figure><p>在站点配置文件_config.yaml中添加如下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 版权信息</span></span><br><span class="line"><span class="attr">addlink:</span></span><br><span class="line">  <span class="attr">before_text:</span> <span class="string">__本文作者__：dongsheng&lt;br</span> <span class="string">/&gt;__本文地址__：</span></span><br><span class="line">  <span class="attr">after_text:</span> <span class="string">&lt;br</span> <span class="string">/&gt;__版权声明__：转载请注明出处！</span></span><br></pre></td></tr></table></figure><h1 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h1><p>看本文结尾即可，哈哈哈.</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/fcf53e2f.html">https://mds1455975151.github.io/archives/fcf53e2f.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 文章链接 </tag>
            
            <tag> 版权信息 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之插件</title>
      <link href="/archives/8dcdaa5.html"/>
      <url>/archives/8dcdaa5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Jenkins提供了非常丰富的插件支持，使得Jenkins变得越来越强大。我们可以方便的安装各种第三方插件，从而方便快捷的集成第三方的应用。插件是增强Jenkins环境功能以适应组织或用户特定需求的主要手段。有超过1k+不同插件，可以安装在Jenkins主机上，并集成各种构建工具，云提供商，分析工具等等。可以从更新中心自动下载插件及其依赖关系。更新中心是由Jenkins项目运营的服务，提供了由Jenkins社区的各种开发和维护的开源插件清单。</p><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>本节将介绍从Jenkins Web UI中管理插件的基础知识到在文件系统上进行更改的所有内容。<br>插件地址：<a href="https://plugins.jenkins.io/" target="_blank" rel="noopener">https://plugins.jenkins.io/</a><br>更新中心文档：<a href="https://jenkins.io/doc/book/glossary/#update-center" target="_blank" rel="noopener">https://jenkins.io/doc/book/glossary/#update-center</a></p><h1 id="插件管理"><a href="#插件管理" class="headerlink" title="插件管理"></a>插件管理</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>两种安装方式:</p><ul><li>Web UI简单易于管理</li><li>Jenkins CLI命令管理插件<br>每种方法都可以使Jenkins加载插件，但是可能需要不同级别的访问权限和权衡才能使用.两种方法要求Jenkins master能够从更新中心下载元数据，无论是Jenkins项目运行的主更新中心，还是自定义更新中心。<br>插件被打包为后缀为.hpi文件，他们具有插件需要成功运行的所有必须的代码，图像和其他资源。</li></ul><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>略</p><h2 id="移除"><a href="#移除" class="headerlink" title="移除"></a>移除</h2><p>操作略,注意插件卸载及旧数据删除即可</p><h2 id="禁用"><a href="#禁用" class="headerlink" title="禁用"></a>禁用</h2><p>略</p><h1 id="插件分类及常用插件"><a href="#插件分类及常用插件" class="headerlink" title="插件分类及常用插件"></a>插件分类及常用插件</h1><h2 id="插件分类"><a href="#插件分类" class="headerlink" title="插件分类"></a>插件分类</h2><p>插件分类已经覆盖了软件开发、测试、部署、上线等各个阶段，基本可以满足所有的集成需求.根据自身需求及业务特点进行选择，精选勿贪多.<br><strong>Platforms</strong></p><ul><li>iOS development</li><li>.NET</li><li>Android development</li><li>Ruby development</li></ul><p><strong>User interface</strong></p><ul><li>User Interface</li><li>List view column plugins</li></ul><p><strong>Administration</strong></p><ul><li>Agent controllers</li><li>Page decorators</li><li>Users and security</li><li>Cluster management</li><li>CLI extensions</li></ul><p><strong>Source code management</strong></p><ul><li>SCM connections</li><li>SCM related</li></ul><p><strong>Build management</strong></p><ul><li>Build triggers</li><li>Build wrappers</li><li>Build notifiers</li><li>Deployment plugins</li><li>Build parameters</li><li>Clean-up actions</li><li>Build tools</li><li>Build reports</li><li>Artifact uploaders</li></ul><h2 id="常用插件"><a href="#常用插件" class="headerlink" title="常用插件"></a>常用插件</h2><p>description setter plugin：用于修改Build描述信息，在描述信息中增加显示QRCode（二维码）等等自定义信息<br>Ansible plugin：Ansible集成<br>AnsiColor: 构建过程颜色支持<br>Build Environment Plugin：显示构建的各类变量，问题排查及定位<br>disk-usage plugin：磁盘使用情况<br>Email Extension Plugin：构建通知，非常好用<br>LDAP Plugin：与LDAP结合实现账号管理，规模稍大非常有用<br>Publish Over FTP：发送构建产物到FTP服务器，最佳实践游戏研发人员构建完成，如果是部署到线上则直接上传到运维提供的FTP服务器，运维可以直接在生产服务器进行拉去部署，省去各种中间环节，可以大大提升部署效率<br>Git plugin：获取项目源代码从Git仓库<br>Gradle Plugin: Java项目编译构建使用<br>Job Configuration History Plugin：Job配置文件记录、对比，很实用<br>Filesystem List Parameter Plug-in：获取目录下文件列表信息，在软件部署、包上传可以快速选择所需软件包，超喜欢<br>Role-based Authorization Strategy: Jenkins 角色及权限管理</p><h1 id="如何选择及管理插件"><a href="#如何选择及管理插件" class="headerlink" title="如何选择及管理插件"></a>如何选择及管理插件</h1><p>1、少而精，勿贪多<br>2、满足项目勿实时更新</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8dcdaa5.html">https://mds1455975151.github.io/archives/8dcdaa5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 插件 </tag>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo插入其他资源</title>
      <link href="/archives/492e1856.html"/>
      <url>/archives/492e1856.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Hexo插入音频/视频/PDF等资源，可以丰富博客表现内容.</p><a id="more"></a><h1 id="插入音频"><a href="#插入音频" class="headerlink" title="插入音频"></a>插入音频</h1><h2 id="iframe标签"><a href="#iframe标签" class="headerlink" title="iframe标签"></a>iframe标签</h2><p>从<a href="http://music.163.com/" target="_blank" rel="noopener">网易云音乐</a>或者<a href="http://www.xiami.com/widget" target="_blank" rel="noopener">虾米音乐</a>获取代码</p><p><img src="/archives/492e1856/01.png" alt><br><img src="/archives/492e1856/02.png" alt><br>将代码添加到Markdown文档中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">marginwidth</span>=<span class="string">"0"</span> <span class="attr">marginheight</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">330</span> <span class="attr">height</span>=<span class="string">86</span> <span class="attr">src</span>=<span class="string">"//music.163.com/outchain/player?type=2&amp;id=29750751&amp;auto=1&amp;height=66"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下:</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=29750751&auto=1&height=66"></iframe>注释：生成音乐链接过程中有些选项可以自己调节，例如是否直接播放、播放器尺寸大小等 ## embed标签 ![](/492e1856/03.png)<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">"//music.163.com/style/swf/widget.swf?sid=29750751&amp;type=2&amp;auto=1&amp;width=320&amp;height=66"</span> <span class="attr">width</span>=<span class="string">"340"</span> <span class="attr">height</span>=<span class="string">"86"</span>  <span class="attr">allowNetworking</span>=<span class="string">"all"</span>&gt;</span><span class="tag">&lt;/<span class="name">embed</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：<br><embed src="//music.163.com/style/swf/widget.swf?sid=29750751&type=2&auto=1&width=320&height=66" width="340" height="86" allownetworking="all"></p><h2 id="javascript标签举例"><a href="#javascript标签举例" class="headerlink" title="javascript标签举例"></a>javascript标签举例</h2><p><img src="/archives/492e1856/04.png" alt></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://www.xiami.com/widget/player-single?uid=5885327&amp;sid=1774273389&amp;mode=js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下:</p><script type="text/javascript" src="http://www.xiami.com/widget/player-single?uid=5885327&sid=1774273389&mode=js"></script><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>hexo-tag-aplayer：<a href="https://github.com/grzhan/hexo-tag-aplayer" target="_blank" rel="noopener">https://github.com/grzhan/hexo-tag-aplayer</a><br>使用方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure><p>Markdown文档中插入如下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayer title author url [picture_url, narrow, autoplay, width:xxx, lrc:xxx] %&#125;</span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li>title : music title</li><li>author: music author</li><li>url: music file url</li><li>picture_url: optional, music picture url</li><li>narrow: optional, narrow style</li><li>autoplay: optional, autoplay music, not supported by mobile browsers</li><li>width:xxx: optional, prefix width:, player’s width (default: 100%)</li><li>lrc:xxx: optional, prefix lrc:, LRC file url<br>效果如下：<script>console.error("Error: [hexo-tag-aplayer] Unrecognized tag argument(2): autoplay=false")</script></li></ul><h1 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h1><p>hexo-tag-dplayer： <a href="https://github.com/NextMoe/hexo-tag-dplayer" target="_blank" rel="noopener">https://github.com/NextMoe/hexo-tag-dplayer</a><br>使用方法:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-tag-dplayer</span><br></pre></td></tr></table></figure><p>Markdown文档中插入如下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% dplayer key=value ... %&#125;</span><br></pre></td></tr></table></figure><p><strong>key can be</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dplayer options:</span><br><span class="line">    &apos;autoplay&apos;, &apos;loop&apos;, &apos;screenshot&apos;, &apos;hotkey&apos;, &apos;mutex&apos;, &apos;dmunlimited&apos; : bool options, use &quot;yes&quot; &quot;y&quot; &quot;true&quot; &quot;1&quot; &quot;on&quot; or just without value to enable</span><br><span class="line">    &apos;preload&apos;, &apos;theme&apos;, &apos;lang&apos;, &apos;logo&apos;, &apos;url&apos;, &apos;pic&apos;, &apos;thumbnails&apos;, &apos;vidtype&apos;, &apos;suburl&apos;, &apos;subtype&apos;, &apos;subbottom&apos;, &apos;subcolor&apos;, &apos;subcolor&apos;, &apos;id&apos;, &apos;api&apos;, &apos;token&apos;, &apos;addition&apos;, &apos;dmuser&apos; : string arguments</span><br><span class="line">    &apos;volume&apos;, &apos;maximum&apos; : number arguments</span><br><span class="line">container options:</span><br><span class="line">    &apos;width&apos;, &apos;height&apos; : string, used in container element style</span><br><span class="line">other:</span><br><span class="line">    &apos;code&apos; : value of this key will be append to script tag</span><br></pre></td></tr></table></figure><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom:20px"></div><script>!function(){var e=new DPlayer({container:document.getElementById("dplayer0"),theme:"#FADFA3",loop:!0,video:{url:"http://home.ustc.edu.cn/~mmmwhy/GEM.mp4",pic:"http://home.ustc.edu.cn/~mmmwhy/GEM.jpg"}});window.dplayers||(window.dplayers=[]),window.dplayers.push(e)}()</script><div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom:20px"></div><script>!function(){var d=new DPlayer({container:document.getElementById("dplayer1"),theme:"#FADFA3",loop:!0,video:{url:"http://devtest.qiniudn.com/若能绽放光芒.mp4",pic:"http://devtest.qiniudn.com/若能绽放光芒.png"},danmaku:{id:"9E2E3368B56CDBB4",api:"http://dplayer.daoapp.io",token:"tokendemo",addition:["https://dplayer.daoapp.io/bilibili?aid=4157142"]}});window.dplayers||(window.dplayers=[]),window.dplayers.push(d)}()</script><h1 id="插入PDF"><a href="#插入PDF" class="headerlink" title="插入PDF"></a>插入PDF</h1><p><a href="https://github.com/superalsrk/hexo-pdf/" target="_blank" rel="noopener">hexo-pdf</a><br>使用方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save hexo-pdf</span><br></pre></td></tr></table></figure><p>在Markdown文档中添加如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Normal PDF</span><br><span class="line">  &#123;% pdf http://7xov2f.com1.z0.glb.clouddn.com/bash_freshman.pdf %&#125;</span><br><span class="line">or</span><br><span class="line">  &#123;% pdf ./bash_freshman.pdf %&#125;</span><br><span class="line">Google drive</span><br><span class="line">  &#123;% pdf https://drive.google.com/file/d/0B6qSwdwPxPRdTEliX0dhQ2JfUEU/preview %&#125;</span><br><span class="line">Slideshare</span><br><span class="line">  &#123;% pdf http://www.slideshare.net/slideshow/embed_code/key/8Jl0hUt2OKUOOE %&#125;</span><br></pre></td></tr></table></figure><div class="row"><embed src="http://7xov2f.com1.z0.glb.clouddn.com/bash_freshman.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="注：第一次用可能经常会报错，有报错直接F12调试资源加载链接报错修改资源目录即可，多数情况为目录设置不对"><a href="#注：第一次用可能经常会报错，有报错直接F12调试资源加载链接报错修改资源目录即可，多数情况为目录设置不对" class="headerlink" title="注：第一次用可能经常会报错，有报错直接F12调试资源加载链接报错修改资源目录即可，多数情况为目录设置不对"></a>注：第一次用可能经常会报错，有报错直接F12调试资源加载链接报错修改资源目录即可，多数情况为目录设置不对</h1><p>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/492e1856.html">https://mds1455975151.github.io/archives/492e1856.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 音频 </tag>
            
            <tag> 视频 </tag>
            
            <tag> pdf </tag>
            
            <tag> 资源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo中语法高亮</title>
      <link href="/archives/7266c682.html"/>
      <url>/archives/7266c682.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>hexo已实现代码高亮，代码封装在hexo-util插件中，使用的是hightlight.js，通过include_codetag标签来使用，功能已经很强大了，而且自带行号显示，可以满足大多数博主的需求。</p><a id="more"></a><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><p>1、确认主题配置是否已经开启语法高亮设置_config.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Code Highlight theme</span></span><br><span class="line"><span class="comment"># Available value:</span></span><br><span class="line"><span class="comment">#    normal | night | night eighties | night blue | night bright</span></span><br><span class="line"><span class="comment"># https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">normal</span></span><br></pre></td></tr></table></figure><p>2、在Markdown文本中使用<br>语法格式如下：<br><img src="/archives/7266c682/01.png" alt><br>案例：<br><img src="/archives/7266c682/02.png" alt></p><h1 id="Markdown格式实现代码高亮的方法"><a href="#Markdown格式实现代码高亮的方法" class="headerlink" title="Markdown格式实现代码高亮的方法"></a>Markdown格式实现代码高亮的方法</h1><p>1、使用双空格缩进(Hexo中代码不支持)<br>2、使用``` code block ```方式<br>3、使用代码块的语法，具体参考资料<a href="http://octopress.org/docs/plugins/codeblock/" target="_blank" rel="noopener">Codeblock - Octopress</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/melordljm/article/details/51991389" target="_blank" rel="noopener">Hexo高级教程之代码高亮</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/7266c682.html">https://mds1455975151.github.io/archives/7266c682.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 语法高亮 </tag>
            
            <tag> highlight </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo备份方案</title>
      <link href="/archives/f44e13b.html"/>
      <url>/archives/f44e13b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何在多个电脑上编辑同一个hexo博客？<br>如何有效的备份hexo源码，防止数据丢失？<br>如何共享已有的hexo配置给其他人？</p><a id="more"></a><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>使用分支的思路，如下:<br>hexo分支：用来存放Hexo生成的网站原始的文件(默认分支)<br>master分支：用来存放生成的静态网页</p><h2 id="部署流程"><a href="#部署流程" class="headerlink" title="部署流程"></a>部署流程</h2><h3 id="master分支配置"><a href="#master分支配置" class="headerlink" title="master分支配置"></a>master分支配置</h3><p>修改站点主配置_config.xml,确保静态网页是提交到master分支，与hexo源文件提交分支分离</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/mds1455975151/mds1455975151.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><h3 id="hexo分支配置"><a href="#hexo分支配置" class="headerlink" title="hexo分支配置"></a>hexo分支配置</h3><p>1、新建仓库mds1455975151.github.io<br>2、创建两个分支:master和hexo<br>3、设置hexo为默认分支(手动管理该分支上的Hexo网站源文件)<br>4、使用git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:mds1455975151/mds1455975151.github.io.git或者git clone <a href="https://github.com/mds1455975151/mds1455975151.github.io.git" target="_blank" rel="noopener">https://github.com/mds1455975151/mds1455975151.github.io.git</a> 拷贝仓库(ssh设置好密钥，http设置好免密码)<br>5、在本地mds1455975151.github.io文件夹下进行hexo init xxxx及进行各种配置(此时当前处于hexo分支)<br>6、修改hexo主配置_config.xml的deploy部分配置，设置静态页面的发布分支为master<br>7、添加.gitignore文件，将静态网页的目录及其他无需提交的源文件及目录排除掉<br>8、执行hexo g -d生成网站并部署到GitHub上<br>9、依次执行git add .、git commit -m ‘add xxx’、git push origin hexo提交网站源文件到hexo分支</p><h3 id="日常修改流程"><a href="#日常修改流程" class="headerlink" title="日常修改流程"></a>日常修改流程</h3><p>在本地对博客进行修改(增、删、修改博文)、设置插件、修改其他配置等等<br>1、提交hexo源代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout hexo</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">'add hexo source files'</span></span><br></pre></td></tr></table></figure><p>2、发布hexo静态文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h3 id="本地资料丢失或其他主机搭建环境流程"><a href="#本地资料丢失或其他主机搭建环境流程" class="headerlink" title="本地资料丢失或其他主机搭建环境流程"></a>本地资料丢失或其他主机搭建环境流程</h3><p>更换电脑或者本地资料丢失后<br>1、拷贝仓库到本地(默认hexo分支)<br>2、安装hexo及各类插件<br>3、调试测试即可</p><h1 id="其他方案"><a href="#其他方案" class="headerlink" title="其他方案"></a>其他方案</h1><p>1、使用svn备份Hexo源文件<br>2、使用同步软件例如百度云盘等等定时备份<br>3、hexo-git-backup插件</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a rel="noopener" href="https://www.zhihu.com/question/21193762" target="_blank">使用hexo，如果换了电脑怎么更新博客？</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f44e13b.html">https://mds1455975151.github.io/archives/f44e13b.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 备份 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客后台运行技巧</title>
      <link href="/archives/c3c4c28.html"/>
      <url>/archives/c3c4c28.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何配置Hexo一直在后台运行？</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>安装并运行hexo博客后，一般教程都会告诉运行命令是:hexo s,但是关掉Terminal，进程也就结束了，对于一个希望永远运行的服务器来说是不可接受的。<br>查阅一些资料后找到一个后台运行的命令: hexo s &amp; . 这个命令确实可以实现后台运行，但是从使用情况来看，每天hexo的服务进程都会死掉，还找不到原因。于是尝试使用nodejs里很流行的forever，可以实现当进程死掉时候自动重启。</p><h2 id="Forever介绍"><a href="#Forever介绍" class="headerlink" title="Forever介绍"></a>Forever介绍</h2><p>Forever全局安装命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g forever</span><br></pre></td></tr></table></figure><p>安装完成，需要在你的hexo根目录下新建一个js文件，比如app.js,代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var forever = require(<span class="string">'hexo'</span>);</span><br><span class="line">var child = forever.start([ <span class="string">'hexo'</span>, <span class="string">'s'</span>], &#123;</span><br><span class="line">  max : 1,</span><br><span class="line">  silent : <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>之后使用命令启动即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">forever start app.js</span><br><span class="line"></span><br><span class="line">报错待解决，方案可行</span><br><span class="line">D:\svn\192.168.200.104_devops_doc\hexo\app.js:2</span><br><span class="line">var child = forever.start([ <span class="string">'hexo'</span>, <span class="string">'s'</span>], &#123;</span><br><span class="line">                    ^</span><br><span class="line"></span><br><span class="line">TypeError: forever.start is not a <span class="keyword">function</span></span><br><span class="line">    at Object.&lt;anonymous&gt; (D:\svn\192.168.200.104_devops_doc\hexo\app.js:2:21)</span><br><span class="line">    at Module._compile (module.js:635:30)</span><br><span class="line">    at Object.Module._extensions..js (module.js:646:10)</span><br><span class="line">    at Module.load (module.js:554:32)</span><br><span class="line">    at tryModuleLoad (module.js:497:12)</span><br><span class="line">    at Function.Module._load (module.js:489:3)</span><br><span class="line">    at Function.Module.runMain (module.js:676:10)</span><br><span class="line">    at startup (bootstrap_node.js:187:16)</span><br><span class="line">    at bootstrap_node.js:608:3</span><br><span class="line">error: Forever detected script exited with code: 1</span><br></pre></td></tr></table></figure><p>查看forever进程命令 forever list, 更多命令输入forever -h</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://github.com/foreverjs/forever" target="_blank" rel="noopener">Forever项目</a><br><a href="http://www.tuijiankan.com/2015/05/08/hexo-forever-run/" target="_blank" rel="noopener">Hexo博客后台运行技巧</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c3c4c28.html">https://mds1455975151.github.io/archives/c3c4c28.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 后台运行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客添加分享功能</title>
      <link href="/archives/eba154a5.html"/>
      <url>/archives/eba154a5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>博客在前期需要大量推广，即使你写的文章再好，别人也不一定能看到，或者别人看到了也不会认真阅读，这是正常的。不妨主动自己主动一点，把自己的文章推广一下，也能帮助自己博客提高访问量。微博、微信和QQ空间都是很好的传播平台，需要利用好。多数人还是习惯了用QQ空间。所以就需要一键分享的功能。不少人用的百度的，但个人对JiaThis更感兴趣一点。样式多，支持平台多，重要的是方便。</p><a id="more"></a><h1 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a>设置方法</h1><p>1、注册<a href="http://www.jiathis.com/" target="_blank" rel="noopener">jiathis</a><br>2、将注册后id配置到主题的配置文件中</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Share 分享</span></span><br><span class="line"><span class="comment">#jiathis:</span></span><br><span class="line"><span class="comment"># Warning: JiaThis does not support https.</span></span><br><span class="line"><span class="attr">add_this_id:</span> <span class="string">xxx</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a><br><img src="/archives/eba154a5/01.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.jiathis.com/" target="_blank" rel="noopener">Jiathis的网站</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/eba154a5.html">https://mds1455975151.github.io/archives/eba154a5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 分享功能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单个GitHub账号添加多个GitHub Pages问题</title>
      <link href="/archives/71ec76f8.html"/>
      <url>/archives/71ec76f8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何在单个GitHub账号下添加多个GitHub Pages以达到新建多个站点目的？</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p><a href="https://pages.github.com/" target="_blank" rel="noopener">官网资料</a></p><h2 id="GitHub-Pages的分类和区别"><a href="#GitHub-Pages的分类和区别" class="headerlink" title="GitHub Pages的分类和区别"></a>GitHub Pages的分类和区别</h2><p>1、GitHub Pages分为两类:User or organization site、Project site<br>2、个人主页必须要和用户的GitHub帐号同名，所以每个用户有且只能有一个repo作为个人主页，且必须是<username>/<username>.github.io的形式；而项目主页的命名则没有这种限制，且数量有任意多个。<br>3、不考虑绑定的自定义域名的前提下，个人主页的GitHub二级域名为<username>.github.io;项目主页的GitHub二级域名为<username>.github.io/<projectname>,没有<projectname>.<username>.github.io这种方式<br>4、个人主页的展示内容以master分支里的文件为准；而项目主页的展示内容以gh-pages分支内的文件为准</username></projectname></projectname></username></username></username></username></p><h2 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h2><p>新建项目GitHub Pages即可解决以上需求，大体流程总结如下：<br>1、新建repo，名字自定义，例如：chongwu<br>2、repo设置修改GitHub Pages部分Source设置，选择master branch<br>3、访问测试<a href="https://mds1455975151.github.io/chongwu">https://mds1455975151.github.io/chongwu</a><br>4、设置自定义域名<a href="http://www.cwquery.com,设置方法：repo添加CNAME文件即可" target="_blank" rel="noopener">www.cwquery.com,设置方法：repo添加CNAME文件即可</a><br>5、访问测试 <a href="http://www.cwquery.com/" target="_blank" rel="noopener">http://www.cwquery.com/</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://segmentfault.com/a/1190000003946969" target="_blank" rel="noopener">单个GitHub帐号下添加多个GitHub Pages的相关问题</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/71ec76f8.html">https://mds1455975151.github.io/archives/71ec76f8.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> chongwu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站被搜索引擎降权</title>
      <link href="/archives/e2c90a53.html"/>
      <url>/archives/e2c90a53.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>引起被搜索引擎降权的各种原因总结：<br>1、服务器或空间不稳定，经常打不开，最主要原因<br>2、网站经常更换名称<br>3、网站改版，没有做好相应优化工作</p><a id="more"></a><p>4、各类违法内容(色情、赌博等)<br>5、相同IP下的网站降权，被牵连<br>6、网站在交换友情链接的时候不要和一些被k的站点交换<br>7、频繁更换目录，出现大量404链接<br>8、网站属于<a href="https://baike.baidu.com/item/%E7%AB%99%E7%BE%A4/6793013?fr=aladdin" target="_blank" rel="noopener">站群</a><br>9、网站被挂马<br>10、网站架构表达主题不清晰的，需要编辑的写作能力的和关键字的拓展穿插<br>11、垃圾内容的降权，比如网站有大量的转载、采集、伪原创以及与主题不相关的内容是网站优化中的大忌<br>12、多度优化，标题、meta标签中放置过多的关键词、回链数量太多、刻意的调整关键词密度等<br>13、垃圾链太多，记住宁缺毋滥<br>14、使用群发软件<br>15、挂广告，挂广告是很影响网站质量的，特别是不相关内容的广告，严重损害搜索引擎对网站的信任度。尤其恶劣的是弹窗广告，会严重影响网页的质量；<br>16、高权重链接增长过快。对新站而言，首页被K，首页降权的原因就是：首页在短期内添加友情链接过多，特别是高权重的链接，超出正常的新站发展程度，就会被认为作弊，导致被惩罚。所以，适度增加外链很重要，建议首月不要添加超过8个友链；<br>17、页面的重复度过高。如发布了很多重复的标题，没有删除，都被收录了，网站就会受到处罚；<br>18、死链接过多。原来被收录的页面删除了，就会出现死链接。如何查找死链接，最准确的就是通过日志来看，由蜘蛛、机器人来判断。死链接过多就会降低搜索引擎对网站的信任度，增加用户跳出率，导致被降权的；<br>19、同时开拓了过多的二级域名，超过5个以上，搜索引擎就会认为是作弊。中小型网站二级域名过多，会导致关键词的相关性下降，网站的收录就可能清零；<br>20、大批量重复页面和无内容页面的产生。例如：打印页、会话ID、个人资料页、评论页等，都是一个独立的动态地址，都会导致网站降权的；<br>21、页面质量下降。例如：页面的打开速度过慢，JS调用过多：加入了过多的客服、站长统计、天气预报等，都严重影响用户的体验，都是导致网站降权的因素。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e2c90a53.html">https://mds1455975151.github.io/archives/e2c90a53.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEO </tag>
            
            <tag> 搜索引擎 </tag>
            
            <tag> 降权 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo绑定自定义域名</title>
      <link href="/archives/82234085.html"/>
      <url>/archives/82234085.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>GitHub Pages如何绑定自定义域名？</p><a id="more"></a><h1 id="设置步骤详解"><a href="#设置步骤详解" class="headerlink" title="设置步骤详解"></a>设置步骤详解</h1><h2 id="设置网站域名"><a href="#设置网站域名" class="headerlink" title="设置网站域名"></a>设置网站域名</h2><p>在source目录下新建CNAME文件，在首行添加网站域名，如<a href="www.mdslq.cn">www.mdslq.cn</a>.注意前面没有https://、http:// 以及www等信息，然后重新重新生成并部署站点</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2 id="设置域名解析"><a href="#设置域名解析" class="headerlink" title="设置域名解析"></a>设置域名解析</h2><p>1、先添加一个CNAME，主机记录写@，后面记录值写上你的<a href="mds1455975151.github.io">mds1455975151.github.io</a><br>2、再添加一个CNAME，主机记录写www，后面记录值也是<a href="mds1455975151.github.io">mds1455975151.github.io</a><br>这样别人用www和不用www都能访问你的网站（其实www的方式，会先解析成<a href="https://mds1455975151.github.io">https://mds1455975151.github.io</a>，然后根据CNAME再变成<a href="http://www.mdslq.com" target="_blank" rel="noopener">http://www.mdslq.com</a>，即中间是经过一次转换的）。<br>注：除了使用CNAME记录也有人使用A记录，后面的记录值是写github page里面的ip地址，但有时候IP地址会更改，导致最后解析不正确，所以还是推荐用CNAME别名记录要好些，不建议用IP。<br>3、等待10分钟左右，域名生效后刷新浏览器，使用自定义域名访问网站即可</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a rel="noopener" href="https://help.github.com/articles/about-supported-custom-domains/" target="_blank">官网相关资料</a><br><a rel="noopener" href="https://www.zhihu.com/question/31377141" target="_blank">github怎么绑定自己的域名？</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/82234085.html">https://mds1455975151.github.io/archives/82234085.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 自定义域名 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo渲染时排除部分文件或目录</title>
      <link href="/archives/6165ee44.html"/>
      <url>/archives/6165ee44.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>搜索引擎确认网站所有权时往往会提供一个html文件来进行验证，要是这个文件被渲染了，验证自然就会失败了。或者，有时候会写一些简单的html示例页面，这也是不希望Hexo渲染的。因此有必要针对某个文件或者目录进行排除。Hexo的配置文件中提供了配置项skip_render，可以解决以上问题。</p><a id="more"></a><h1 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h1><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>只有source目录下的文件才会发布到public（能够在网络上访问到），因此Hexo只渲染source目录下的文件。skip_render参数设置的路径是相对于source目录的路径。</p><h2 id="设置排除项"><a href="#设置排除项" class="headerlink" title="设置排除项"></a>设置排除项</h2><p>假设source目录下文件如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span></span><br><span class="line"> _data</span><br><span class="line"> _posts</span><br><span class="line"> about</span><br><span class="line"> categories</span><br><span class="line"> tags</span><br><span class="line"> works</span><br><span class="line"> 404.html</span><br><span class="line"> baidu_verify_84yQGJByTM.html</span><br><span class="line"> BingSiteAuth.html</span><br><span class="line"> googleec6843bf1010ba92.html</span><br></pre></td></tr></table></figure><h2 id="排除单个文件"><a href="#排除单个文件" class="headerlink" title="排除单个文件"></a>排除单个文件</h2><p>排除baidu的html验证文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skip_render: <span class="string">' baidu_verify_84yQGJByTM.html'</span></span><br></pre></td></tr></table></figure><h2 id="排除多个文件"><a href="#排除多个文件" class="headerlink" title="排除多个文件"></a>排除多个文件</h2><p>排除所有的html验证文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">skip_render:</span><br><span class="line">  - <span class="string">'baidu_verify_84yQGJByTM.html'</span></span><br><span class="line">  - <span class="string">'BingSiteAuth.html'</span></span><br><span class="line">  - <span class="string">'googleec6843bf1010ba92.html'</span></span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skip_render: <span class="string">'*.html'</span></span><br></pre></td></tr></table></figure><h2 id="完成后验证效果"><a href="#完成后验证效果" class="headerlink" title="完成后验证效果"></a>完成后验证效果</h2><p>wget修改前后的html页面对比即可</p><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://www.maoxuner.cn/2017/03/10/hexo-skip-render.html" target="_blank" rel="noopener">Hexo渲染时排除部分文件或目录</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/6165ee44.html">https://mds1455975151.github.io/archives/6165ee44.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 完整所有权验证 </tag>
            
            <tag> Google </tag>
            
            <tag> Baidu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tinyproxy</title>
      <link href="/archives/c61668f5.html"/>
      <url>/archives/c61668f5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="http://tinyproxy.github.io/" target="_blank" rel="noopener">官网</a><br>privoxy+ss<br>squid<br>stunel</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c61668f5.html">https://mds1455975151.github.io/archives/c61668f5.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>AWS</title>
      <link href="/archives/8981f538.html"/>
      <url>/archives/8981f538.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Amazon-EC2设置"><a href="#Amazon-EC2设置" class="headerlink" title="Amazon EC2设置"></a>Amazon EC2设置</h1><p>1、注册AWS<br>2、创建IAM用户<br>3、创建密钥对<br>4、创建VPC<br>5、创建安全组</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8981f538.html">https://mds1455975151.github.io/archives/8981f538.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>责任</title>
      <link href="/archives/4254578.html"/>
      <url>/archives/4254578.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/archives/4254578/01.jpg" alt><br>如果拉车的是你，<br>上有爹和妈，下有妻和娃，<br>一不小心打个滑，<br>你能给家人留点啥？<br>也许你是别人眼里的草，<br>但你却是家人的天，<br>作为一个男人，要活出担当。<br>作为一个女人，要活出责任。</p><p>男人累了，那是因为<br>背后沒有助推的女人。<br>女人累了，那是因为<br>没有拉车的男人。<br>父母累了，那是因为<br>没有了能担当的儿女。<br>孩子累了，那是因为<br>没有了该像个家的家。<br>所以你活着，<br>不要让自己太轻松，<br>因为他们需要你的真实存在，<br>而不仅仅是一个称呼而已。</p><p>别觉得自己活得苦，<br>活得累，活得委屈，<br>其实每个人活得都不容易。<br>只不过别人的难处，<br>别人的辛苦，<br>你没有看到罢了。</p><p>累就对了，<br>舒坦是留给死人的；<br>苦就对了，<br>谁不是在苦中作乐品尝幸福。<br>所以活着就有疲惫，<br>就有汗水，就要奋斗，就要折腾，<br>就要历经风雨，<br>就要担起肩上的责任！</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4254578.html">https://mds1455975151.github.io/archives/4254578.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 责任 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis keys事件</title>
      <link href="/archives/2cea4ba1.html"/>
      <url>/archives/2cea4ba1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>昨天发了一篇Redis常见问题的文章，同事看后发现一个问题，即：线上一般禁止使用keys命令。之前都没了解过这块，马上查了查资料，完善下自己的知识体系。</p><h1 id="keys命令概述"><a href="#keys命令概述" class="headerlink" title="keys命令概述"></a>keys命令概述</h1><p>version 1.0.0.+ 功能</p><h2 id="keys命令使用"><a href="#keys命令使用" class="headerlink" title="keys命令使用"></a>keys命令使用</h2><p>功能：Find all keys matching the given pattern<br><a href="https://redis.io/commands/keys" target="_blank" rel="noopener">详细使用参考官网文档</a></p><a id="more"></a><p>简单用法举例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; keys pattern</span><br><span class="line">127.0.0.1:6379&gt; MSET firstname Jack lastname Stuntman age 35</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *name*</span><br><span class="line">1) <span class="string">"lastname"</span></span><br><span class="line">2) <span class="string">"firstname"</span></span><br><span class="line">127.0.0.1:6379&gt; keys a??</span><br><span class="line">1) <span class="string">"age"</span></span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="string">"age"</span></span><br><span class="line">2) <span class="string">"lastname"</span></span><br><span class="line">3) <span class="string">"firstname"</span></span><br></pre></td></tr></table></figure><p>Supported glob-style patterns:</p><ul><li>h?llo matches hello, hallo and hxllo</li><li>h*llo matches hllo and heeeello</li><li>h[ae]llo matches hello and hallo, but not hillo</li><li>h[^e]llo matches hallo, hbllo, … but not hello</li><li>h[a-b]llo matches hallo and hbllo<br>Use \ to escape special characters if you want to match them verbatim.</li></ul><h2 id="关于keys的使用官方建议"><a href="#关于keys的使用官方建议" class="headerlink" title="关于keys的使用官方建议"></a>关于keys的使用官方建议</h2><p>Warning: consider KEYS as a command that should only be used in production environments with extreme care. It may ruin performance when it is executed against large databases. This command is intended for debugging and special operations, such as changing your keyspace layout. Don’t use KEYS in your regular application code. If you’re looking for a way to find keys in a subset of your keyspace, consider using SCAN or sets.<br>警告：在生产环境中慎用keys命令，当对大型数据库执行操作可能导致性能下降。此命令可以用于调试和特殊操作，例如修改键盘空间布局。不要在你的应用程序代码中使用keys*.如果你正在寻找一种方法在您的keys空间的子集中查找keys,请考虑使用SCAN or sets.</p><h2 id="如何在生产环境禁用keys命令"><a href="#如何在生产环境禁用keys命令" class="headerlink" title="如何在生产环境禁用keys命令"></a>如何在生产环境禁用keys命令</h2><p>在配置中增加如下配置,其他危险操作禁用方法类似：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rename-command FLUSHALL <span class="string">""</span></span><br><span class="line">rename-command FLUSHDB <span class="string">""</span></span><br><span class="line">rename-command KEYS <span class="string">""</span></span><br></pre></td></tr></table></figure><h2 id="生产故障案例"><a href="#生产故障案例" class="headerlink" title="生产故障案例"></a>生产故障案例</h2><p><a href="http://blog.csdn.net/a930716/article/details/53074247" target="_blank" rel="noopener">迅雷动魄惊心的redis keys事件</a><br><a href="http://blog.csdn.net/asdfsadfasdfsa/article/details/60144412" target="_blank" rel="noopener">redis禁用keys命令做模糊匹配</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2cea4ba1.html">https://mds1455975151.github.io/archives/2cea4ba1.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> keys </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django</title>
      <link href="/archives/c0eb71d0.html"/>
      <url>/archives/c0eb71d0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://docs.djangoproject.com/en/2.0/" target="_blank" rel="noopener">官网</a> 你需要知道关于Django的一切</p><h1 id="How-the-documentation-is-organized-文档是如何组织"><a href="#How-the-documentation-is-organized-文档是如何组织" class="headerlink" title="How the documentation is organized 文档是如何组织"></a>How the documentation is organized 文档是如何组织</h1><ul><li>教程通过一系列步骤来帮助您创建web应用程序。</li><li>主题指南</li><li>参考指南</li><li>如何做的指南</li></ul><h1 id="First-steps-第一步"><a href="#First-steps-第一步" class="headerlink" title="First steps 第一步"></a>First steps 第一步</h1><h2 id="From-scratch-从头开始"><a href="#From-scratch-从头开始" class="headerlink" title="From scratch 从头开始"></a>From scratch 从头开始</h2><h3 id="Overview-概述"><a href="#Overview-概述" class="headerlink" title="Overview 概述"></a>Overview 概述</h3><h3 id="Installation-安装"><a href="#Installation-安装" class="headerlink" title="Installation 安装"></a>Installation 安装</h3><p>Quick install guide<br>Install Python<br>Set up a database<br>Remove any old versions of Django<br>Install Django<br>Verifying<br>That’s it!<br>Browse</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c0eb71d0.html">https://mds1455975151.github.io/archives/c0eb71d0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 自动化开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> web框架 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>http/https/socks5代理</title>
      <link href="/archives/7ac04cb9.html"/>
      <url>/archives/7ac04cb9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="代理IP按照隐藏代理用户级别划分"><a href="#代理IP按照隐藏代理用户级别划分" class="headerlink" title="代理IP按照隐藏代理用户级别划分"></a>代理IP按照隐藏代理用户级别划分</h1><p>代理IP分为透明代理IP、匿名代理IP和高匿代理IP。</p><ul><li>透明代理IP，对方知道你使用的代理IP也看得到你的真实IP；</li><li>匿名代理IP，对方知道你使用了代理IP，但是无法直接看到你真实IP地址；当然通过一些手段还是可以看到的;</li><li>高匿代理IP，不改变客户机的请求，在服务器看来就是有个真正的客户浏览器在访问它，此时客户的真实IP是隐藏的，服务器端更不会认为我们使用了代理。</li></ul><a id="more"></a><h1 id="如何分辨一个代理IP是否高级匿名代理呢？"><a href="#如何分辨一个代理IP是否高级匿名代理呢？" class="headerlink" title="如何分辨一个代理IP是否高级匿名代理呢？"></a>如何分辨一个代理IP是否高级匿名代理呢？</h1><p>对于老鸟来说，要想识别IP代理的等级并不复杂，只需要通过脚本程序（如ASP PHP JSP等）即可在服务器端识别出来，识别的办法就是抓数据包里的相关字段：REMOTE_ADDR，HTTP_VIA以及HTTP_X_FORWARDED_FOR。</p><ul><li>透明代理<ul><li>REMOTE_ADDR = Proxy IP</li><li>HTTP_VIA = Proxy IP</li><li>HTTP_X_FORWARDED_FOR = Your IP</li></ul></li><li>普通匿名代理<ul><li>REMOTE_ADDR = proxy IP</li><li>HTTP_VIA = proxy IP</li><li>HTTP_X_FORWARDED_FOR = proxy IP</li></ul></li><li>高匿代理<ul><li>REMOTE_ADDR = Proxy IP</li><li>HTTP_VIA = not determined</li><li>HTTP_X_FORWARDED_FOR = not determined<br>当然，对于新手来说，可能有一定的困难，需要借助代理IP工具去分辨。</li></ul></li></ul><h1 id="代理IP应用场景"><a href="#代理IP应用场景" class="headerlink" title="代理IP应用场景"></a>代理IP应用场景</h1><ul><li>当你发现某个网站必须要本地人才能注册访问时，你是否很郁闷；</li><li>当你参加了一个活动，想要投很多票的时候，发现一天只能一票，难道就不能多投几票吗；</li><li>当你想访问一些特殊的网站时，发现没有权限，是否很纠结；</li><li>当你想注册一个网站时，被告知24小时一个IP只能注册一次，是否很纳闷……</li></ul><p>总之，在互联网这个行业待久了，你会发现有很多时候非常的无奈，当老板指责你时，你能说“我能怎么办呢，我也很绝望啊”这句话吗？</p><p>其实，这些问题并不是不能解决，只需要使用代理IP就可以完美的避开这些雷区。<br>当遇到地区限制时，找一个该地区的代理IP，用浏览器设置下，或者放在相应的软件里，就可以了；<br>当要投很多票的时候，完全可以找很多代理IP，投一票切换一个代理IP，第一名还会远吗。<br>有了代理IP，这些问题都不再是问题……<br>总结：</p><ul><li>突破网站限制</li><li>突破地域限制</li><li>隐藏真实身份</li><li>提高下载速度</li></ul><h1 id="什么是代理IP的响应速度和稳定性？"><a href="#什么是代理IP的响应速度和稳定性？" class="headerlink" title="什么是代理IP的响应速度和稳定性？"></a>什么是代理IP的响应速度和稳定性？</h1><p>选择代理IP时经常看到两个参数：稳定时长和响应速度。那么，什么是代理IP的响应速度，什么是代理IP的稳定时长呢？</p><p>代理IP的响应速度是指我们用这个代理去访问百度首页所需要的时间。响应速度根据使用代理的机器所在的地理位置不同而有差异。响应时间越短，速度越快！</p><p>代理IP的稳定时长顾名思义就是代理IP的有效时间有多长，比如动态高质量代理，稳定时长是2分钟，也就是说，2分钟后，代理IP就会失效，不能再用了，需要重新提取；普通代理时长几分钟、几小时、几天，甚至更长，因服务器扫描，IP存活时间不定，可以筛选。</p><h1 id="代理IP按用途可以分为哪几类"><a href="#代理IP按用途可以分为哪几类" class="headerlink" title="代理IP按用途可以分为哪几类"></a>代理IP按用途可以分为哪几类</h1><p>代理IP按用途分类可以分哪几类呢？下面我们一起来看看，有些我们经常用，有些非常少用。</p><ul><li>Http代理：最常用的代理，代理客户机的http访问，主要代理浏览器访问网页，它的端口一般为80、8080、3128等。</li><li>SSL代理也叫HTTPS代理，支持最高128位加密强度的http代理，可以作为访问加密网站的代理。加密网站是指以https//开始的网站。ssl的标准端口为443。</li><li>HTTP CONNECT代理：允许用户建立TCP连接到任何端口的代理服务器，这种代理不仅可用于HTTP，还包括FTP、IRC、RM流服务等。</li><li>FTP代理：代理客户机上的ftp软件访问ftp服务器，其端口一般为21、2121。</li><li>POP3代理：代理客户机上的邮件软件用pop3方式收邮件，其端口一般为110。</li><li>Telnet代理：能够代理通信机的telnet，用于远程控制，入侵时经常使用。其端口一般为23。</li><li>Socks代理：是全能代理，就像有很多跳线的转接板，它只是简单地将一端的系统连接到另外一端。支持多种协议，包括http、ftp请求及其它类型的请求。它分socks 4 和socks 5两种类型，socks 4只支持TCP协议而socks 5支持TCP/UDP协议，还支持各种身份验证机制等协议。其标准端口为1080。</li><li>TUNNEL代理：经HTTPTunnet程序转换的数据包封装成http请求（Request）来穿透防火墙，允许利用HTTP服务器做任何TCP可以做的事情，功能相当于Socks5。</li><li>文献代理：可以用来查询数据库的代理，通过这些代理，可以获得互联网的相关科研学术的数据库资源，例如查询Sciencedirect网站（简称SD）、Academic Press、IEEE，SPRINGER等数据库。</li><li>教育网代理：指学术教育机构局域网通过特定的代理服务器可使无出国权限或无访问某IP段权限的计算机访问相关资源。</li><li>跳板代理：应用于跳板程序，可以看作一种具有动态加密的特殊socks5代理，，也可直接用于PSD软件。其端口一般为1813。</li><li>Ssso代理：代理客户机上的ssso程序访问远程网站，具有SSL加密强度的超级代理，支持socks。</li><li>Flat代理：代理客户机上的flatsurfer程序访问远程网站，具有高强度加密数据流的特殊代理，支持socks，最大可设置三次级联，可以设置穿越代理。其端口一般为6700。</li><li>SoftE代理：代理客户机上的SoftEther程序访问远程网站，应用虚拟集线器HUB和虚拟网卡技术，具备VPN功能及多种认证方式的代理，符合https协议。</li></ul><h1 id="浏览器切换代理软件"><a href="#浏览器切换代理软件" class="headerlink" title="浏览器切换代理软件"></a>浏览器切换代理软件</h1><p>火狐浏览器：AutoProxy<br>Chrome浏览器： SwitchyOmega</p><h1 id="常见反爬虫策略"><a href="#常见反爬虫策略" class="headerlink" title="常见反爬虫策略"></a>常见反爬虫策略</h1><p>抓取稍微正规一点的网站，都会有反爬虫的制约。反爬虫主要有以下几种方式：</p><ul><li>通过UA判断。这是最低级的判断，一般反爬虫不会用这个做唯一判断，因为反反爬虫非常容易，直接随机UA即可解决。</li><li>通过单IP频繁访问判断。这个判断简单，而且反爬虫比较费力，反爬虫绝佳方案。需采用多IP抓取。</li><li>通过Cookie判断，例如通过会员制账号密码登陆，判断单账号短时间抓取次数判断。这个反爬虫也很费力。需采用多账号抓取。</li><li>动态页面加载。这个考验前端工程师的功底，如果前端写的好，各种JS判断，各种逻辑，像百度、淘宝一样，post登录很难。较好的方法，但是对于大牛，还是防不胜防。反爬虫多采用渲染浏览器抓取，效率低下。</li><li>采用验证码。这里要么是登录的时候有验证码，要么是判断是爬虫时，不封IP，而是采用验证码验证，例如链家网。验证码是反爬虫性价比较高的方案。反反爬虫一般接入OCR验证码识别平台或者人工打码平台，亦或者利用Tesseract OCR识别，亦或者采用神经网络训练识别验证码等。</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/7ac04cb9.html">https://mds1455975151.github.io/archives/7ac04cb9.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> https </tag>
            
            <tag> http </tag>
            
            <tag> socks5 </tag>
            
            <tag> 代理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2017 书单</title>
      <link href="/archives/53ee90ce.html"/>
      <url>/archives/53ee90ce.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>凤凰项目 一个IT运维的传奇故事<br><img src="/archives/53ee90ce/01.jpg" alt><br>持续交付 发布可靠软件的系统方法<br>企业管理小说成功典范：目标（第3版）（白金版）<br>精益创业<br>DevOps实践：驭DevOps之力强化技术栈并优化IT运行<br>Jenkins权威指南<br><img src="/archives/53ee90ce/05.jpg" alt><br>思考，快与慢<br>金字塔原理大全集（套装共2册）<br>培训师成长手册：课程开发实用技巧与工具（第3版）</p><p>《时间管理——给系统管理员》<br>第一章：时间管理原则</p><ul><li>时间管理很困难吗？</li><li>系统管理员的时间管理原则</li><li>并不简单</li><li>本章总结<br>第二章 专心对待干扰</li><li>专注的大脑</li><li>促进专心的环境</li><li>干扰</li><li>引导干扰远离你</li><li>你可以说走开而不必当个混蛋</li><li>本章总结<br>第三章 例行公事</li><li>例行公事范例</li><li>如何开发自己的例行公事</li><li>删除老旧的例行公事</li><li>本章总结<br>第四章 循环系统</li><li>别信赖你的大脑</li><li>为何其他系统失败</li><li>成功的系统</li><li>循环</li><li>本章总结<br>第五章 循环系统：工作表与时间表</li><li>示范的一天</li><li>其他秘诀</li><li>设定PAA供循环系统使用</li><li>设定PDA供循环系统使用</li><li>本章总结<br>第六章 循环系统：日程表管理</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/53ee90ce.html">https://mds1455975151.github.io/archives/53ee90ce.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 生活记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 书单 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建本地pypi源方法</title>
      <link href="/archives/10d12fcf.html"/>
      <url>/archives/10d12fcf.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如何快速搭建本地pypi源？</p></blockquote><p>1）创建存放pypi软件包的目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop-01 ~]<span class="comment"># mkdir -p /data/pypi</span></span><br></pre></td></tr></table></figure><p>2）安装pip2pi软件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop-01 ~]<span class="comment"># pip install pip2pi</span></span><br></pre></td></tr></table></figure><p>3）配置要同步的pypi源（豆瓣）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop-01 ~]<span class="comment"># vim .pip/.pip.conf</span></span><br><span class="line">[global]</span><br><span class="line">index-url = http://pypi.douban.com/simple</span><br></pre></td></tr></table></figure><p>4）同步软件（单个或者批量同步）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">单个软件</span><br><span class="line">[root@hadoop-01 ~]<span class="comment"># pip2tgz /data/pypi pip==7.1.2</span></span><br><span class="line">批量同步</span><br><span class="line">[root@hadoop-01 ~]<span class="comment"># cat requirements.txt</span></span><br><span class="line">pbr&gt;=0.6,&lt;1.0</span><br><span class="line">SQLAlchemy&gt;=0.7.8,&lt;=0.9.99</span><br><span class="line">amqplib&gt;=0.6.1</span><br><span class="line">anyjson&gt;=0.3.3</span><br><span class="line">argparse</span><br><span class="line">boto&gt;=2.12.0,!=2.13.0</span><br><span class="line">eventlet&gt;=0.13.0</span><br><span class="line">[root@hadoop-01 ~]<span class="comment"># pip2tgz /data/pypi -r ./requirements.txt</span></span><br></pre></td></tr></table></figure><p>5）同步后建立索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop-01 ~]<span class="comment"># dir2pi /data/pypi/</span></span><br><span class="line">或者对指定的软件包更新其索引</span><br><span class="line">[root@hadoop-01 ~]<span class="comment"># pip2acmeco name</span></span><br><span class="line">[root@hadoop-01 ~]<span class="comment"># pip2acmeco -r requirements.txt</span></span><br></pre></td></tr></table></figure><p>6）配置web访问界面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop-01 ~]<span class="comment"># ln -s /pypi /var/www/html/pypi</span></span><br></pre></td></tr></table></figure><p>7）测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop-01 ~]<span class="comment"># cat .pip/.pip.conf</span></span><br><span class="line">[global]</span><br><span class="line">index-url=http://172.16.1.171/pypi/simple</span><br><span class="line"></span><br><span class="line">[root@hadoop-01 ~]<span class="comment"># pip install argparse</span></span><br><span class="line">Collecting argparse</span><br><span class="line">/usr/lib/python2.6/site-packages/pip-7.1.2-py2.6.egg/pip/_vendor/requests/packages/urllib3/util/ssl_.py:90:InsecurePlatformWarning: A <span class="literal">true</span> SSLContext object is not available. Thisprevents urllib3 from configuring SSL appropriately and may cause certain SSLconnections to fail. For more information, seehttps://urllib3.readthedocs.org/en/latest/security.html<span class="comment">#insecureplatformwarning.</span></span><br><span class="line">  InsecurePlatformWarning</span><br><span class="line">  Using cached argparse-1.4.0-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: argparse</span><br><span class="line">Successfully installed argparse-1.4.0</span><br></pre></td></tr></table></figure><p>8）其他pip源<br><a href="http://mirrors.aliyun.com/pypi/simple/" target="_blank" rel="noopener">阿里云</a><br><a href="https://pypi.mirrors.ustc.edu.cn/simple/" target="_blank" rel="noopener">中国科技大学</a><br><a href="http://pypi.douban.com/simple/" target="_blank" rel="noopener">豆瓣(douban)</a><br><a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" rel="noopener">清华大学</a><br><a href="https://pypi.python.org/simple/" target="_blank" rel="noopener">Python官方</a><br><a href="http://pypi.mirrors.opencas.cn/simple/" target="_blank" rel="noopener">中国科学院</a><br><a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" rel="noopener">清华大学</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/10d12fcf.html">https://mds1455975151.github.io/archives/10d12fcf.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> pypi </tag>
            
            <tag> 源 </tag>
            
            <tag> 本地源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Fabric</title>
      <link href="/archives/6a4f7595.html"/>
      <url>/archives/6a4f7595.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Fabric简介"><a href="#Fabric简介" class="headerlink" title="Fabric简介"></a>Fabric简介</h1><p>　　Fabric是一个Python库，可以通过SSH在多个host上批量执行任务。你可以编写任务脚本，然后通过Fabric在本地就可以使用SSH在大量远程服务器上自动运行。这些功能非常适合应用的自动化部署，或者执行系统管理任务。<br><a href="http://www.fabfile.org/" target="_blank" rel="noopener">官网</a> <a href="http://fabric-chs.readthedocs.io/zh_CN/chs/" target="_blank" rel="noopener">中文站点</a></p><h1 id="Fabric常用环境变量"><a href="#Fabric常用环境变量" class="headerlink" title="Fabric常用环境变量"></a>Fabric常用环境变量</h1><p>fabric的环境变量有很多，存放在一个字典中，fabric.state.env，而它包含在fabric.api中，为了方便，我们一般使用env来指代环境变量。env环境变量可以控制很多fabric的行为，一般通过env.xxx可以进行设置。<br>fabric默认使用本地用户通过ssh进行连接远程机器，不过你可以通过env.user变量进行覆盖。当你进行ssh连接时，fabric会让你交互的让你输入远程机器密码，如果你设置了env.password变量，则就不需要交互的输入密码。</p><h2 id="常用的环境变量"><a href="#常用的环境变量" class="headerlink" title="常用的环境变量"></a>常用的环境变量</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> fabric.api</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> fabric.api.env:</span><br><span class="line"><span class="meta">... </span>    print(i)</span><br><span class="line">...</span><br><span class="line">disable_known_hosts     <span class="comment"># 默认是false，如果是true，则会跳过用户知道的hosts文件</span></span><br><span class="line">effective_roles</span><br><span class="line">tasks</span><br><span class="line">linewise</span><br><span class="line">show</span><br><span class="line">password　　　　　　　　　　<span class="comment"># 定义密码</span></span><br><span class="line">key_filename</span><br><span class="line">abort_on_prompts</span><br><span class="line">skip_unknown_tasks</span><br><span class="line">reject_unknown_hosts</span><br><span class="line">skip_bad_hosts                  <span class="comment"># 默认false，为ture时，会导致fab跳过无法连接的主机</span></span><br><span class="line">use_ssh_config</span><br><span class="line">roledefs　　　　　　　　　　<span class="comment"># 定义角色分组，例如：区分DB主机与web主机</span></span><br><span class="line">gateway　　　　　　　　　　<span class="comment"># 定义网关（中转，堡垒机）IP</span></span><br><span class="line">gss_auth</span><br><span class="line">keepalive</span><br><span class="line">eagerly_disconnect</span><br><span class="line">rcfile</span><br><span class="line">path_behavior</span><br><span class="line">hide</span><br><span class="line">sudo_prefix</span><br><span class="line">lcwd</span><br><span class="line">no_agent</span><br><span class="line">forward_agent</span><br><span class="line">remote_interrupt</span><br><span class="line">port　　　　　　　　　　<span class="comment"># 定义目标主机的端口</span></span><br><span class="line">shell</span><br><span class="line">version</span><br><span class="line">use_exceptions_for</span><br><span class="line">connection_attempts</span><br><span class="line">hosts　　　　　　<span class="comment"># 定义目标主机</span></span><br><span class="line">gss_deleg</span><br><span class="line">cwd</span><br><span class="line">abort_exception</span><br><span class="line">real_fabfile</span><br><span class="line">passwords　　　　　　<span class="comment"># 与password功能一致，区别在于不同主机不同密码的应用场景</span></span><br><span class="line">sudo_password</span><br><span class="line">host_string</span><br><span class="line">shell_env</span><br><span class="line">always_use_pty</span><br><span class="line">colorize_errors</span><br><span class="line">exclude_hosts   <span class="comment"># 排除指定主机</span></span><br><span class="line">all_hosts</span><br><span class="line">sudo_prompt</span><br><span class="line">again_prompt</span><br><span class="line">echo_stdin</span><br><span class="line">user　　　　　　　　<span class="comment"># 定义ssh使用哪个用户登录远程主机</span></span><br><span class="line">gss_kex</span><br><span class="line">command_timeout</span><br><span class="line">path</span><br><span class="line">local_user</span><br><span class="line">combine_stderr</span><br><span class="line">command_prefixes</span><br><span class="line">dedupe_hosts</span><br><span class="line">warn_only</span><br><span class="line">no_keys</span><br><span class="line">sudo_passwords</span><br><span class="line">roles</span><br><span class="line">fabfile</span><br><span class="line">use_shell</span><br><span class="line">host</span><br><span class="line">pool_size</span><br><span class="line">system_known_hosts</span><br><span class="line">prompts</span><br><span class="line">output_prefix</span><br><span class="line">command</span><br><span class="line">timeout　　　　　　　　<span class="comment"># 默认10 网络连接的超时时间</span></span><br><span class="line">default_port</span><br><span class="line">ssh_config_path</span><br><span class="line">parallel</span><br><span class="line">sudo_user</span><br><span class="line">ok_ret_codes</span><br></pre></td></tr></table></figure><h1 id="Fabric执行模式"><a href="#Fabric执行模式" class="headerlink" title="Fabric执行模式"></a>Fabric执行模式</h1><p>执行策略：fabric默认是单一的，串行的执行函数，虽然有一个paralle模式可供你选择。默认的行为遵循以下优先级规则：<br>1、一个task列表被创建，通过命令行传递给fab<br>2、针对每一个task，都有一个主机列表通过变量设置<br>3、task列表按顺序执行每个task在主机列表中的主机上执行一遍<br>4、如果主机列表为空，则默认在本地执行，也是执行一次</p><h1 id="Fabric常用API"><a href="#Fabric常用API" class="headerlink" title="Fabric常用API"></a>Fabric常用API</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon fabric]<span class="comment"># python</span></span><br><span class="line">Python <span class="number">2.6</span><span class="number">.6</span> (r266:<span class="number">84292</span>, Jul <span class="number">23</span> <span class="number">2015</span>, <span class="number">14</span>:<span class="number">41</span>:<span class="number">34</span>)</span><br><span class="line">[GCC <span class="number">4.4</span><span class="number">.7</span> <span class="number">20120313</span> (Red Hat <span class="number">4.4</span><span class="number">.7</span><span class="number">-11</span>)] on linux2</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> tab</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> fabric.api</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> dir(fabric.api):</span><br><span class="line"><span class="meta">... </span>    print(i)</span><br><span class="line">...</span><br><span class="line">__builtins__</span><br><span class="line">__doc__</span><br><span class="line">__file__</span><br><span class="line">__name__</span><br><span class="line">__package__</span><br><span class="line">abort</span><br><span class="line">cd                 <span class="comment"># 切换远程目录</span></span><br><span class="line">env</span><br><span class="line">execute</span><br><span class="line">fastprint</span><br><span class="line">get              <span class="comment"># 从远程主机下载文件到本地</span></span><br><span class="line">hide</span><br><span class="line">hosts</span><br><span class="line">lcd              <span class="comment"># 切换本地目录</span></span><br><span class="line">local           <span class="comment"># 执行本地命令</span></span><br><span class="line">open_shell</span><br><span class="line">output</span><br><span class="line">parallel</span><br><span class="line">path</span><br><span class="line">prefix</span><br><span class="line">prompt          <span class="comment"># 获取用户输入信息</span></span><br><span class="line">put               <span class="comment"># 上传本地文件到远程主机</span></span><br><span class="line">puts</span><br><span class="line">quiet</span><br><span class="line">reboot</span><br><span class="line">remote_tunnel</span><br><span class="line">require</span><br><span class="line">roles</span><br><span class="line">run                    <span class="comment"># 执行远程命令</span></span><br><span class="line">runs_once          <span class="comment"># 函数修饰符 标识的函数只会执行一次，不收多台主机影响</span></span><br><span class="line">serial</span><br><span class="line">settings</span><br><span class="line">shell_env</span><br><span class="line">show</span><br><span class="line">sudo              <span class="comment"># sudo方式执行远程命令</span></span><br><span class="line">task              <span class="comment"># 函数修饰符，标识的函数为fab可以调用</span></span><br><span class="line">warn</span><br><span class="line">warn_only</span><br><span class="line">with_settings</span><br></pre></td></tr></table></figure><p>API应用场景案例<br>案例1：同时查看本地及远程主机信息<br>案例2：动态获取远程目录列表<br>案例3：网关模式文件的上传与下载</p><h1 id="Fabric安装及使用"><a href="#Fabric安装及使用" class="headerlink" title="Fabric安装及使用"></a>Fabric安装及使用</h1><h2 id="Fabric安装"><a href="#Fabric安装" class="headerlink" title="Fabric安装"></a>Fabric安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install fabric</span><br><span class="line">easy_install fabric</span><br><span class="line">or</span><br><span class="line">源码安装</span><br></pre></td></tr></table></figure><p>fab命令默认被安装到Python的目录下，需要创建软链接</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack ~]<span class="comment"># find / -type f -name "fab"</span></span><br><span class="line">/usr/local/python2<span class="number">.7</span><span class="number">.10</span>/bin/fab</span><br><span class="line">[root@saltstack ~]<span class="comment"># ln -s /usr/local/python2.7.10/bin/fab /usr/bin/fab</span></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -h</span></span><br><span class="line">Usage: fab [options] &lt;command&gt;[:arg1,arg2=val2,host=foo,hosts=<span class="string">'h1;h2'</span>,...] ...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -h, --help            show this help message <span class="keyword">and</span> exit</span><br><span class="line">  -d NAME, --display=NAME <span class="keyword">print</span> detailed info about command NAME</span><br><span class="line">  -F FORMAT, --list-format=FORMAT formats --list, choices: short, normal, nested</span><br><span class="line">  -I, --initial-password-prompt  Force password prompt up-front</span><br><span class="line">  --initial-sudo-password-prompt  Force sudo password prompt up-front</span><br><span class="line">  -l, --list            <span class="keyword">print</span> list of possible commands <span class="keyword">and</span> exit                   <span class="comment"># 显示一个脚本中可用的task（命令）</span></span><br><span class="line">  --set=KEY=VALUE,...   comma separated KEY=VALUE pairs to set Fab env vars</span><br><span class="line">  --shortlist           alias <span class="keyword">for</span> -F short --list</span><br><span class="line">  -V, --version         show program<span class="string">'s version number and exit</span></span><br><span class="line"><span class="string">  -a, --no_agent        don'</span>t use the running SSH agent</span><br><span class="line">  -A, --forward-agent   forward local agent to remote end</span><br><span class="line">  --abort-on-prompts    abort instead of prompting (<span class="keyword">for</span> password, host, etc)</span><br><span class="line">  -c PATH, --config=PATH specify location of config file to use</span><br><span class="line">  --colorize-errors     Color error output</span><br><span class="line">  -D, --disable-known-hosts  do <span class="keyword">not</span> load user known_hosts file</span><br><span class="line">  -e, --eagerly-disconnect disconnect <span class="keyword">from</span> hosts <span class="keyword">as</span> soon <span class="keyword">as</span> possible</span><br><span class="line">  -f PATH, --fabfile=PATH  python module file to <span class="keyword">import</span>, e.g. <span class="string">'../other.py'</span>   <span class="comment"># 指定入口文件，fab默认入口文件是：fabfile/fabfile.py</span></span><br><span class="line">  -g HOST, --gateway=HOST  gateway host to connect through　　　　　　<span class="comment"># 指定网关（中转）设备，比如堡垒机环境，填写堡垒机IP即可</span></span><br><span class="line">  --gss-auth            Use GSS-API authentication</span><br><span class="line">  --gss-deleg           Delegate GSS-API client credentials <span class="keyword">or</span> <span class="keyword">not</span></span><br><span class="line">  --gss-kex             Perform GSS-API Key Exchange <span class="keyword">and</span> user authentication</span><br><span class="line">  --hide=LEVELS         comma-separated list of output levels to hide</span><br><span class="line">  -H HOSTS, --hosts=HOSTS   comma-separated list of hosts to operate on      <span class="comment"># 指定host，支持多host逗号分开</span></span><br><span class="line">  -i PATH               path to SSH private key file. May be repeated.</span><br><span class="line">  -k, --no-keys         don<span class="string">'t load private key files from ~/.ssh/</span></span><br><span class="line"><span class="string">  --keepalive=N         enables a keepalive every N seconds</span></span><br><span class="line"><span class="string">  --linewise            print line-by-line instead of byte-by-byte</span></span><br><span class="line"><span class="string">  -n M, --connection-attempts=M make M attempts to connect before giving up</span></span><br><span class="line"><span class="string">  --no-pty              do not use pseudo-terminal in run/sudo</span></span><br><span class="line"><span class="string">  -p PASSWORD, --password=PASSWORD  password for use with authentication and/or sudo</span></span><br><span class="line"><span class="string">  -P, --parallel        default to parallel execution method    # 以异步并行方式运行多主机任务，默认是串行</span></span><br><span class="line"><span class="string">  --port=PORT           SSH connection port</span></span><br><span class="line"><span class="string">  -r, --reject-unknown-hosts   reject unknown hosts</span></span><br><span class="line"><span class="string">  --sudo-password=SUDO_PASSWORD  password for use with sudo only</span></span><br><span class="line"><span class="string">  --system-known-hosts=SYSTEM_KNOWN_HOSTS  load system known_hosts file before reading user known_hosts</span></span><br><span class="line"><span class="string">  -R ROLES, --roles=ROLES comma-separated list of roles to operate on    # 指定role，支持多个，即以角色名区分不同业务组设备</span></span><br><span class="line"><span class="string">  -s SHELL, --shell=SHELL  specify a new shell, defaults to '</span>/bin/bash -l -c<span class="string">'</span></span><br><span class="line"><span class="string">  --show=LEVELS         comma-separated list of output levels to show</span></span><br><span class="line"><span class="string">  --skip-bad-hosts      skip over hosts that can'</span>t be reached</span><br><span class="line">  --skip-unknown-tasks  skip over unknown tasks</span><br><span class="line">  --ssh-config-path=PATH   Path to SSH config file</span><br><span class="line">  -t N, --timeout=N     set connection timeout to N seconds　　　　<span class="comment"># 设置设备连接超时时间（秒）</span></span><br><span class="line">  -T N, --command-timeout=N  set remote command timeout to N seconds   <span class="comment"># 设置远程主机命令执行超时时间（秒）</span></span><br><span class="line">  -u USER, --user=USER  username to use when connecting to remote hosts　　</span><br><span class="line">  -w, --warn-only       warn, instead of abort, when commands fail     <span class="comment"># warn_only，默认是碰到异常直接abort退出，该设置为发出告警，但不退出</span></span><br><span class="line">  -x HOSTS, --exclude-hosts=HOSTS  comma-separated list of hosts to exclude</span><br><span class="line">  -z INT, --pool-size=INT  number of concurrent processes to use <span class="keyword">in</span> parallel mode</span><br></pre></td></tr></table></figure><h1 id="Fabric应用案例"><a href="#Fabric应用案例" class="headerlink" title="Fabric应用案例"></a>Fabric应用案例</h1><h2 id="案例1：本地执行一组操作"><a href="#案例1：本地执行一组操作" class="headerlink" title="案例1：本地执行一组操作"></a>案例1：本地执行一组操作</h2><p>直接用命令行的形式执行远程命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon fabric]<span class="comment"># fab -p 'strong' -H 192.168.80.128 -- 'uname -m'</span></span><br><span class="line">[192.168.80.128] Executing task <span class="string">'&lt;remainder&gt;'</span></span><br><span class="line">[192.168.80.128] run: uname -m</span><br><span class="line">[192.168.80.128] out: i686</span><br><span class="line">[192.168.80.128] out:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line">Disconnecting from 192.168.80.128... <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_8.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from fabric.api import <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line">def prepare_deploy():</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">"./manage.py test my_app"</span>)</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">"git add -p &amp;&amp; git commit"</span>)</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">"git push"</span>)</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -f fabric_8.py prepare_deploy     # 报错是因为测试环境不足所致</span></span><br><span class="line">[localhost] <span class="built_in">local</span>: ./manage.py <span class="built_in">test</span> my_app</span><br><span class="line">/bin/sh: ./manage.py: 没有那个文件或目录</span><br><span class="line"></span><br><span class="line">Fatal error: <span class="built_in">local</span>() encountered an error (<span class="built_in">return</span> code 127) <span class="keyword">while</span> executing <span class="string">'./manage.py test my_app'</span></span><br><span class="line"></span><br><span class="line">Aborting.</span><br></pre></td></tr></table></figure><h2 id="案例2：远程查看服务器类型"><a href="#案例2：远程查看服务器类型" class="headerlink" title="案例2：远程查看服务器类型"></a>案例2：远程查看服务器类型</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_1.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from fabric.api import run</span><br><span class="line"></span><br><span class="line">def host_type():</span><br><span class="line">    run(<span class="string">'uname -s'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注：fabfile.py为fab默认识别的文件名，如果不是该文件名需要使用-f参数说明要执行的文件名</span></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -H localhost -f fabric_1.py host_type</span></span><br><span class="line">[localhost] Executing task <span class="string">'host_type'</span></span><br><span class="line">[localhost] run: uname -s</span><br><span class="line">[localhost] out: Linux</span><br><span class="line">[localhost] out:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line">Disconnecting from localhost... <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><h2 id="案例3：远程传递参数（本地执行原理一致）"><a href="#案例3：远程传递参数（本地执行原理一致）" class="headerlink" title="案例3：远程传递参数（本地执行原理一致）"></a>案例3：远程传递参数（本地执行原理一致）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_2.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from fabric.api import run</span><br><span class="line"></span><br><span class="line">def host_type(name):</span><br><span class="line">    run(<span class="string">'uname -s'</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello %s !!!"</span> % name)</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -H localhost -f fabric_2.py host_type:name=mads</span></span><br><span class="line">[localhost] Executing task <span class="string">'host_type'</span></span><br><span class="line">[localhost] run: uname -s</span><br><span class="line">[localhost] out: Linux</span><br><span class="line">[localhost] out:</span><br><span class="line"></span><br><span class="line">Hello mads !!!</span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line">Disconnecting from localhost... <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><h2 id="案例4：多台服务器批量执行相同的操作"><a href="#案例4：多台服务器批量执行相同的操作" class="headerlink" title="案例4：多台服务器批量执行相同的操作"></a>案例4：多台服务器批量执行相同的操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_3.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from fabric.api import run,<span class="built_in">cd</span>,env,hosts</span><br><span class="line">env.hosts=[<span class="string">'192.168.20.140:22'</span>,<span class="string">'172.16.1.150:22'</span>]   <span class="comment"># env.hosts=['user@ip:port',] ssh要用到的参数格式</span></span><br><span class="line">env.password=<span class="string">'strong'</span></span><br><span class="line"></span><br><span class="line">def host_type():</span><br><span class="line">    with <span class="built_in">cd</span>(<span class="string">'/tmp/'</span>):</span><br><span class="line">        run(<span class="string">'du -ksh *'</span>)</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -f fabric_3.py host_type</span></span><br><span class="line">[192.168.20.140:22] Executing task <span class="string">'host_type'</span></span><br><span class="line">[192.168.20.140:22] run: du -ksh *</span><br><span class="line">[192.168.20.140:22] out: 36K    hsperfdata_rundeck</span><br><span class="line">[192.168.20.140:22] out: 8.0K   pip-3wB4vO-unpack</span><br><span class="line">[192.168.20.140:22] out: 4.0K   rundeck</span><br><span class="line">[192.168.20.140:22] out: 4.0K   yum_save_tx-2016-07-30-20-49HgACou.yumtx</span><br><span class="line">[192.168.20.140:22] out:</span><br><span class="line"></span><br><span class="line">[172.16.1.150:22] Executing task <span class="string">'host_type'</span></span><br><span class="line">[172.16.1.150:22] run: du -ksh *</span><br><span class="line">[172.16.1.150:22] out: 4.0K     uname.txt</span><br><span class="line">[172.16.1.150:22] out:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line">Disconnecting from 172.16.1.150... <span class="keyword">done</span>.</span><br><span class="line">Disconnecting from 192.168.20.140... <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><h2 id="案例5：多台服务器混合，需要在不同服务器进行不同操作时"><a href="#案例5：多台服务器混合，需要在不同服务器进行不同操作时" class="headerlink" title="案例5：多台服务器混合，需要在不同服务器进行不同操作时"></a>案例5：多台服务器混合，需要在不同服务器进行不同操作时</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_4.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from fabric.api import env,roles,run,execute</span><br><span class="line"></span><br><span class="line">env.roledefs = &#123;</span><br><span class="line"><span class="string">'server1'</span>: [<span class="string">'root@172.16.1.140:22'</span>,],</span><br><span class="line"><span class="string">'server2'</span>: [<span class="string">'root@172.16.1.150:22'</span>, ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">env.password = <span class="string">'strong'</span></span><br><span class="line">@roles(<span class="string">'server1'</span>)</span><br><span class="line">def task1():</span><br><span class="line">    run(<span class="string">'ls /home/ -l | wc -l'</span>)</span><br><span class="line"></span><br><span class="line">@roles(<span class="string">'server2'</span>)</span><br><span class="line">def task2():</span><br><span class="line">    run(<span class="string">'du -sh /home'</span>)</span><br><span class="line"></span><br><span class="line">def <span class="built_in">test</span>():               <span class="comment"># 调节主机组和主机组执行操作的顺序</span></span><br><span class="line">    execute(task2)</span><br><span class="line">    execute(task1)</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -f fabric_4.py test</span></span><br><span class="line">[root@172.16.1.150:22] Executing task <span class="string">'task2'</span></span><br><span class="line">[root@172.16.1.150:22] run: du -sh /home</span><br><span class="line">[root@172.16.1.150:22] out: 4.0K        /home</span><br><span class="line">[root@172.16.1.150:22] out:</span><br><span class="line"></span><br><span class="line">[root@172.16.1.140:22] Executing task <span class="string">'task1'</span></span><br><span class="line">[root@172.16.1.140:22] run: ls /home/ -l | wc -l</span><br><span class="line">[root@172.16.1.140:22] out: 3</span><br><span class="line">[root@172.16.1.140:22] out:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line">Disconnecting from 172.16.1.150... <span class="keyword">done</span>.</span><br><span class="line">Disconnecting from 172.16.1.140... <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><h1 id="Fabric扩展"><a href="#Fabric扩展" class="headerlink" title="Fabric扩展"></a>Fabric扩展</h1><h2 id="扩展1：打印颜色"><a href="#扩展1：打印颜色" class="headerlink" title="扩展1：打印颜色"></a>扩展1：打印颜色</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_5.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from fabric.colors import *</span><br><span class="line"></span><br><span class="line">def show():</span><br><span class="line">    <span class="built_in">print</span> green(<span class="string">'success'</span>)</span><br><span class="line">    <span class="built_in">print</span> red(<span class="string">'fail'</span>)</span><br><span class="line">    <span class="built_in">print</span> yellow(<span class="string">'yellow'</span>)</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -f fabric_5.py show</span></span><br><span class="line">success</span><br><span class="line">fail</span><br><span class="line">yellow</span><br><span class="line"></span><br><span class="line">Done.</span><br></pre></td></tr></table></figure><p>效果图：<br><img src="/archives/6a4f7595/01.png" alt></p><h2 id="扩展2：错误及异常"><a href="#扩展2：错误及异常" class="headerlink" title="扩展2：错误及异常"></a>扩展2：错误及异常</h2><p>默认，一组命令，上一个命令执行失败后，不会接着往下执行，失败后也可以进行不一样的处理，详解文档<br>默认情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_6.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#from fabric.api import run</span></span><br><span class="line">from fabric.api import <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line">def host_type():</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">'uname -s'</span>)</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">'tt'</span>)</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">'hostname'</span>)</span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -H localhost -f fabric_6.py host_type</span></span><br><span class="line">[localhost] Executing task <span class="string">'host_type'</span></span><br><span class="line">[localhost] <span class="built_in">local</span>: uname -s</span><br><span class="line">Linux</span><br><span class="line">[localhost] <span class="built_in">local</span>: tt</span><br><span class="line">/bin/sh: tt: <span class="built_in">command</span> not found</span><br><span class="line"></span><br><span class="line">Fatal error: <span class="built_in">local</span>() encountered an error (<span class="built_in">return</span> code 127) <span class="keyword">while</span> executing <span class="string">'tt'</span></span><br><span class="line"></span><br><span class="line">Aborting.</span><br><span class="line"><span class="comment"># 注：由于tt执行报错，后面的hostname命令没有被执行</span></span><br><span class="line"></span><br><span class="line">[root@saltstack fabric]<span class="comment"># cat fabric_7.py</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line">from __future__ import with_statement</span><br><span class="line">from fabric.api import <span class="built_in">local</span>, settings, abort</span><br><span class="line">from fabric.colors import *</span><br><span class="line">from fabric.contrib.console import confirm</span><br><span class="line"></span><br><span class="line">def host_type():</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">'uname -s'</span>)</span><br><span class="line">    with settings(warn_only=True):</span><br><span class="line">        result = <span class="built_in">local</span>(<span class="string">'tt'</span>, capture=True)</span><br><span class="line">    <span class="keyword">if</span> result.failed and not confirm(red(<span class="string">"tt cmd failed. Continue anyway?"</span>)):</span><br><span class="line">        abort(<span class="string">"Aborting at user request."</span>)</span><br><span class="line">    <span class="built_in">local</span>(<span class="string">'hostname'</span>)</span><br><span class="line">[root@saltstack fabric]<span class="comment"># fab -H localhost -f fabric_7.py host_type</span></span><br><span class="line">[localhost] Executing task <span class="string">'host_type'</span></span><br><span class="line">[localhost] <span class="built_in">local</span>: uname -s</span><br><span class="line">Linux</span><br><span class="line">[localhost] <span class="built_in">local</span>: tt</span><br><span class="line"></span><br><span class="line">Warning: <span class="built_in">local</span>() encountered an error (<span class="built_in">return</span> code 127) <span class="keyword">while</span> executing <span class="string">'tt'</span></span><br><span class="line"></span><br><span class="line">tt cmd failed. Continue anyway? [Y/n] y        <span class="comment"># 判断上一步执行有无异常，异常给予提示，确认是否继续</span></span><br><span class="line">[localhost] <span class="built_in">local</span>: hostname</span><br><span class="line">saltstack</span><br><span class="line"></span><br><span class="line">Done.</span><br></pre></td></tr></table></figure><h2 id="扩展3：密码管理"><a href="#扩展3：密码管理" class="headerlink" title="扩展3：密码管理"></a>扩展3：密码管理</h2><p>1）Fabric既支持ssh公钥认证也支持管理密码的机制<br>2）Fabric的密码管理机制提供了两层密码。如果你的server有相同的密码，可以在env.password中设置默认的密码；如果server密码不同，还可以在env.passwords中设置(host,password）对，为每个server设置单独的ssh密码。</p><h1 id="Fabric小结"><a href="#Fabric小结" class="headerlink" title="Fabric小结"></a>Fabric小结</h1><p>　　使用Fabric，你可以管理一系列host的SSH连接（包括主机名，用户，密码），定义一系列的任务函数，然后灵活的指定在哪些host上执行哪些任务。这非常使用于需要管理大量host的场景，比如运维，私有云管理，应用自动化部署等。<br>　　本文只是一篇入门文档，远没有体现出Fabric的强大。实际上，Fabric还包括大量的功能，比如Role的定义，远程交互及异常处理，并发执行，文件操作等，并且不仅仅局限于命令行方式，可以在你的应用中调用Fabric。<br>　　希望本文能够引起你对Fabric的兴趣，并在你的实际应用中解决问题。</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/6a4f7595.html">https://mds1455975151.github.io/archives/6a4f7595.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Fabric </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>clustershell</title>
      <link href="/archives/9357d8a6.html"/>
      <url>/archives/9357d8a6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="http://cea-hpc.github.io/clustershell/" target="_blank" rel="noopener">官网</a><br><a href="https://github.com/cea-hpc/clustershell" target="_blank" rel="noopener">Github Docs Repo</a><br><a href="http://clustershell.readthedocs.io/en/latest/" target="_blank" rel="noopener">Github Docs</a></p><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># yum install clustershell</span><br><span class="line">clush</span><br><span class="line">cluset</span><br><span class="line">nodeset</span><br><span class="line">clubak</span><br></pre></td></tr></table></figure><h1 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/clustershell/groups.d/local.cfg</span><br><span class="line"># nodeset -L</span><br><span class="line">@all</span><br><span class="line"># nodeset -LL</span><br><span class="line">@all 127.0.0.1,172.16.0.2</span><br><span class="line"></span><br><span class="line">ssh-copy-id 127.0.0.1</span><br><span class="line">ssh-copy-id 172.16.0.2</span><br><span class="line"></span><br><span class="line"># clush -a &apos;free -g&apos;</span><br><span class="line">127.0.0.1:               total        used        free      shared  buff/cache   available</span><br><span class="line">127.0.0.1: Mem:              0           0           0           0           0           0</span><br><span class="line">127.0.0.1: Swap:             0           0           0</span><br><span class="line">172.16.0.2:               total        used        free      shared  buff/cache   available</span><br><span class="line">172.16.0.2: Mem:              0           0           0           0           0           0</span><br><span class="line">172.16.0.2: Swap:             0           0           0</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/9357d8a6.html">https://mds1455975151.github.io/archives/9357d8a6.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> clustershell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis常见问题</title>
      <link href="/archives/657c705c.html"/>
      <url>/archives/657c705c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="取值报错"><a href="#取值报错" class="headerlink" title="取值报错"></a>取值报错</h1><p>报错信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="string">"proxy_zset"</span></span><br><span class="line">127.0.0.1:6379&gt; get proxy_zset</span><br><span class="line">(error) WRONGTYPE Operation against a key holding the wrong kind of value</span><br></pre></td></tr></table></figure><p>解决：<br>先判断存储的数据类型，然后根据数据类型获取内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">type</span> proxy_zset</span><br><span class="line">zset</span><br><span class="line">127.0.0.1:6379&gt; zrange proxy_zset 0 55</span><br><span class="line"> 1) <span class="string">"1.197.200.195:808"</span></span><br><span class="line"> 2) <span class="string">"101.37.79.125:3128"</span></span><br><span class="line"> 3) <span class="string">"110.73.31.7:8123"</span></span><br><span class="line"> 4) <span class="string">"110.73.7.37:8123"</span></span><br><span class="line"> 5) <span class="string">"111.235.158.14:808"</span></span><br><span class="line"> 6) <span class="string">"112.114.96.45:8118"</span></span><br><span class="line"> 7) <span class="string">"112.114.97.50:8118"</span></span><br><span class="line"> 8) <span class="string">"112.95.191.160:9797"</span></span><br><span class="line"> 9) <span class="string">"113.109.248.30:9797"</span></span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/657c705c.html">https://mds1455975151.github.io/archives/657c705c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> proxy </tag>
            
            <tag> zrange </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo设置阅读全文功能</title>
      <link href="/archives/122492c.html"/>
      <url>/archives/122492c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Hexo如何设置提供一个链接阅读全文来进入文章的详情页。</p><h1 id="设置方法讲解"><a href="#设置方法讲解" class="headerlink" title="设置方法讲解"></a>设置方法讲解</h1><h2 id="文章中使用设置手动截断-推荐"><a href="#文章中使用设置手动截断-推荐" class="headerlink" title="文章中使用设置手动截断(推荐)"></a>文章中使用设置手动截断(推荐)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 前言</span><br><span class="line">&amp;emsp;&amp;emsp;GitHub为广大开发者提供了一个非常好的平台，不仅是代码的开源，同时GitHub还提供了开发者可以在GitHub上建立自己的站点（GithubPage）的一个非常有意思的功能。它功能有限只能创建静态的网站。</span><br><span class="line">&amp;emsp;&amp;emsp;本文整理自己的部署过程，意在帮助那些刚刚接触GitHub的新手同学，可以利用GitHub快速创建高逼格的个人博客站点。</span><br><span class="line"></span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line"># 准备工作</span><br><span class="line">- GitHub账号，创建一个仓库，规则为：例如我的账号为mds1455975151，则新建仓库名称为mds1455975151.github.io</span><br><span class="line">- NodeJS环境及相关基本知识，我的环境如下：</span><br><span class="line"> - os: Windows_NT 6.1.7601 win32 x64</span><br><span class="line"> - node: 8.9.2</span><br><span class="line">- Git基本使用及git for windows安装使用。</span><br><span class="line"> - git version: 2.15.0.windows.1</span><br></pre></td></tr></table></figure><h2 id="设置并显示文章摘要"><a href="#设置并显示文章摘要" class="headerlink" title="设置并显示文章摘要"></a>设置并显示文章摘要</h2><p>设置description属性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Git常见问题解决</span><br><span class="line">date: 2017-12-08 21:40:28</span><br><span class="line">categories: 技术</span><br><span class="line">tags: [Git,常见问题]</span><br><span class="line">description: 日常使用git遇到的各种报错及问题详解</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="自动形成摘要设置截断长度"><a href="#自动形成摘要设置截断长度" class="headerlink" title="自动形成摘要设置截断长度"></a>自动形成摘要设置截断长度</h2><p>在主题配置文件中添加如下配置,默认截取的长度为150 字符，可以根据需要自行设定.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">150</span></span><br></pre></td></tr></table></figure><p>** 建议使用(第一种方式)，可以精确控制需要显示的摘录内容， 这种方式也可以让Hexo中的插件更好的识别。**</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://theme-next.iissnan.com/faqs.html#%E9%A6%96%E9%A1%B5%E6%98%BE%E7%A4%BA%E6%96%87%E7%AB%A0%E6%91%98%E5%BD%95" target="_blank" rel="noopener">官网说明</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/122492c.html">https://mds1455975151.github.io/archives/122492c.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 阅读全文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Blog to list</title>
      <link href="/archives/59137b8e.html"/>
      <url>/archives/59137b8e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>网站备案<br>一套可行的广告投放方案<br><del>JiaThis分享</del><br><del>个性域名</del><br><del>评论系统 畅言 disqus</del><br><del>设置阅读全文</del><br>hexo+Travis-ci+github构建自动化博客<br>网站如何被各大搜索引擎收录<br>SEO</p><ul><li>搜索引擎收录<ul><li><del>Bing</del></li><li>百度</li><li><del>Google</del></li><li><del>360搜索</del></li><li><del>搜狗</del></li></ul></li></ul><p><del>HTTPS</del><br>相册<br>返回顶部<br>自定义首页<br>技能专题：Jenkins、Git、Ansible、SaltStack、GitLab、Docker、K8S<br>每篇文章添加阅读量统计</p><h1 id="http-blog-csdn-net-qq-33699981-article-details-72716951"><a href="#http-blog-csdn-net-qq-33699981-article-details-72716951" class="headerlink" title="http://blog.csdn.net/qq_33699981/article/details/72716951"></a><a href="http://blog.csdn.net/qq_33699981/article/details/72716951" target="_blank" rel="noopener">http://blog.csdn.net/qq_33699981/article/details/72716951</a></h1><p>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/59137b8e.html">https://mds1455975151.github.io/archives/59137b8e.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> to list </tag>
            
            <tag> 分享 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win7清理Thumbs.db文件</title>
      <link href="/archives/8c6011d0.html"/>
      <url>/archives/8c6011d0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>平常使用svn或者git时管理个人资料的时候经常会发现存在Thumbs.db文件，这些文件如何产生及如何清理呢？</p><h1 id="是什么？"><a href="#是什么？" class="headerlink" title="是什么？"></a>是什么？</h1><p>操作系统的缩略图文件（数据库文件），且还会随着这个文件夹的图片增多而加大Thumbs.db文件的体积。<br>它长这个样子<br><img src="/archives/8c6011d0/01.png" alt></p><h1 id="如何清理"><a href="#如何清理" class="headerlink" title="如何清理"></a>如何清理</h1><p>新建bat脚本，添加如下命令，如果盘符有区别修改盘符即可。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOR</span> <span class="variable">%%a</span> <span class="keyword">IN</span> ( D: ) <span class="keyword">DO</span> <span class="built_in">DEL</span> /f/s/q/a <span class="variable">%%a</span>\Thumbs.db</span><br></pre></td></tr></table></figure><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8c6011d0.html">https://mds1455975151.github.io/archives/8c6011d0.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> Windows </tag>
            
            <tag> Thumbs.db </tag>
            
            <tag> svn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SVN常见问题解决</title>
      <link href="/archives/49ae30e1.html"/>
      <url>/archives/49ae30e1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/49ae30e1.html">https://mds1455975151.github.io/archives/49ae30e1.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> svn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常见问题 </tag>
            
            <tag> SVN </tag>
            
            <tag> 版本控制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git常见问题解决</title>
      <link href="/archives/dec5fbd3.html"/>
      <url>/archives/dec5fbd3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="报错1：-git-warning-LF-will-be-replaced-by-CRLF-fatal-CRLF-would-be-replaced-by-LF"><a href="#报错1：-git-warning-LF-will-be-replaced-by-CRLF-fatal-CRLF-would-be-replaced-by-LF" class="headerlink" title="报错1：[git] warning: LF will be replaced by CRLF | fatal: CRLF would be replaced by LF"></a>报错1：[git] warning: LF will be replaced by CRLF | fatal: CRLF would be replaced by LF</h4><p>原因：<br>遇到这两个问题是因为Git的换行符检查功能core.safecrlf.<br>这个功能有如下选项：</p><ul><li>false - 不做任何检查</li><li>warn - 在提交时检查并警告</li><li>true - 在提交时检查，如果发现混用则拒绝提交<br>建议使用最严格的true选项<br>假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。</li></ul><p>解决：<br>Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>Linux或Mac系统使用LF作为行结束符，因此你不想 Git 在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉 Git 在提交时把CRLF转换成LF，签出时不转换：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf input</span><br></pre></td></tr></table></figure><p>这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。</p><p>如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf false</span><br></pre></td></tr></table></figure><h4 id="问题2-windows-git-bash操作记住密码"><a href="#问题2-windows-git-bash操作记住密码" class="headerlink" title="问题2: windows git bash操作记住密码"></a>问题2: windows git bash操作记住密码</h4><p><a href="http://blog.csdn.net/u013399093/article/details/47278169" target="_blank" rel="noopener">解决方案</a></p><h4 id="问题3：git提交时忽略特定的的文件或某类文件"><a href="#问题3：git提交时忽略特定的的文件或某类文件" class="headerlink" title="问题3：git提交时忽略特定的的文件或某类文件"></a>问题3：git提交时忽略特定的的文件或某类文件</h4><p>解决方案：添加配置文件.gitignore</p><h4 id="问题4：git-clone-时显示Filename-too-long"><a href="#问题4：git-clone-时显示Filename-too-long" class="headerlink" title="问题4：git clone 时显示Filename too long"></a>问题4：git clone 时显示Filename too long</h4><p>解决：<br>在git bash中，运行下列命令就可以解决该问题。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.longpaths true</span><br></pre></td></tr></table></figure><h4 id="问题5：fatal-destination-path-‘文件夹名称’-already-exists-and-is-not-an-empty-directory"><a href="#问题5：fatal-destination-path-‘文件夹名称’-already-exists-and-is-not-an-empty-directory" class="headerlink" title="问题5：fatal: destination path ‘文件夹名称’ already exists and is not an empty directory."></a>问题5：fatal: destination path ‘文件夹名称’ already exists and is not an empty directory.</h4><p>解决办法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin https://xxx@xx.git</span><br><span class="line">git fetch</span><br><span class="line">git branch master origin/master</span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure><h4 id="问题6：modified-xxx-modified-content-untracked-content"><a href="#问题6：modified-xxx-modified-content-untracked-content" class="headerlink" title="问题6：modified: xxx(modified content, untracked content)"></a>问题6：modified: xxx(modified content, untracked content)</h4><p>解决方法：<br>提示的目录下已经存在.git目录，将目录删除，重新git add . 即可.出现这类问题原因可能是项目中直接引用了其他git库的代码.</p><h4 id="问题7：git中出现sign-and-send-pubkey-signing-failed-agent-refused-operation"><a href="#问题7：git中出现sign-and-send-pubkey-signing-failed-agent-refused-operation" class="headerlink" title="问题7：git中出现sign_and_send_pubkey: signing failed: agent refused operation"></a>问题7：git中出现sign_and_send_pubkey: signing failed: agent refused operation</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(ssh-agent -s)</span>"</span></span><br><span class="line">ssh-add</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/leoeitail/article/details/60962637" target="_blank" rel="noopener">https://blog.csdn.net/leoeitail/article/details/60962637</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/dec5fbd3.html">https://mds1455975151.github.io/archives/dec5fbd3.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> 常见问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdowm入门</title>
      <link href="/archives/5d3f2cbe.html"/>
      <url>/archives/5d3f2cbe.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>[TOC]</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Markdown 是一种轻量级的标记语言，其用简单的标记语法便可达到排版的目的，其可以使我们更加专注于内容的编写，而不需过多关注排版。本文主要整理了 Markdown 中的常用的标记语法，以便自己与他人以后查用。</p><h1 id="Markdown编辑器"><a href="#Markdown编辑器" class="headerlink" title="Markdown编辑器"></a>Markdown编辑器</h1><p>推荐：Atom<br>使用Markdown格式的场景: Hexo博客，简书<br><a href="http://www.williamlong.info/archives/4319.html" target="_blank" rel="noopener">其他Markdown编辑器产品</a></p><h1 id="Atom介绍"><a href="#Atom介绍" class="headerlink" title="Atom介绍"></a>Atom介绍</h1><p>Atom 是 Github 官方开发的一款可定制化的、跨平台的文本编辑器。有两点需要注意一下，一是 Atom 是由 Github 官方开发，二是其定制化程度非常高。前者的结果是编辑器对 Github 非常友好，如果项目托管在 Github 上的话，用 Atom 可以很方便地进行 Git 操作。后者的结果就是我们可以根据自己的需要定制自己的编辑器，使得自己的效率最大化，也让自己舒舒服服、开开心心地码代码。<br>Atom预览Markdown快捷键：Ctrl+Shift+M<br>Atom相关资料</p><ul><li><a href="https://github.com/CompileYouth/front-end-study/blob/master/tool/atom/%E7%A3%A8%E5%88%80%E4%B8%8D%E8%AF%AF%E7%A0%8D%E6%9F%B4%E5%B7%A5%EF%BC%9AAtom%20%E4%BB%8B%E7%BB%8D.md" target="_blank" rel="noopener">Atom介绍</a></li><li><a href="https://atom-china.org/t/atom/62" target="_blank" rel="noopener">Atom基础使用</a></li><li><a href="https://npm.taobao.org/mirrors/atom" target="_blank" rel="noopener">Atom镜像站</a></li><li><a href="https://atom-china.org/t/faq/326" target="_blank" rel="noopener">Atom官方博客/手册索引、插件推荐专题</a></li></ul><h1 id="Markdown语法介绍"><a href="#Markdown语法介绍" class="headerlink" title="Markdown语法介绍"></a>Markdown语法介绍</h1><p><a href="http://www.jianshu.com/p/q81RER#" target="_blank" rel="noopener">献给写作者的 Markdown 新手指南</a><br><a href="http://wowubuntu.com/markdown/" target="_blank" rel="noopener">Markdown 语法说明 (简体中文版)</a></p><h2 id="段落与换行"><a href="#段落与换行" class="headerlink" title="段落与换行"></a>段落与换行</h2><p>Markdown中段落指连续的一段文字，编写时段落之间至少一个<strong>空行</strong>隔开，段落内多个空格被视为一个空格，段首不支持缩进。<br>如何想要在显示时显示多个空行，可以插入<br>实现，注意的是，插入的<br>应与前后的段落中间至少空一行。</p><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>Markdown支持两种类型的标题<br>方法1：只能表示两个级别</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一级标题</span><br><span class="line">========</span><br><span class="line">二级标题</span><br><span class="line">--------</span><br></pre></td></tr></table></figure><p>方法2：推荐</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure><h2 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h2><p>星号或者下划线都可以，单是斜体，双是粗体，符号可以跨行，符号可加空格</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">** 我是被强调的字段 **</span><br><span class="line">__ 我是被强调的字段__</span><br><span class="line"></span><br><span class="line">**</span><br><span class="line">跨行</span><br><span class="line">跨行</span><br><span class="line">**</span><br><span class="line"></span><br><span class="line">*斜体*</span><br><span class="line">_ 斜体_</span><br></pre></td></tr></table></figure><p>效果如下：<br>** 我是被强调的字段 **<br>__ 我是被强调的字段__</p><p>**<br>跨行<br>跨行<br>**</p><p><em>斜体</em><br>_ 斜体_</p><h2 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h2><p>三个或更多-_*，必须单独一行，可含空格</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- - -</span><br><span class="line">***</span><br><span class="line">___</span><br></pre></td></tr></table></figure><p>效果如下：</p><hr><hr><hr><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;引用</span><br><span class="line"> &gt;&gt; 引用中的引用</span><br></pre></td></tr></table></figure><p>效果：</p><blockquote><p>引用</p><blockquote><p>引用中的引用</p></blockquote></blockquote><h2 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h2><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p>符号之后的空格不能少，-+*效果一样，但不能混合使用，因混合是嵌套列表，内容可超长</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- 无序列表</span><br><span class="line">- 无序列表</span><br><span class="line">- 无序列表</span><br><span class="line">- 无序列表：我很长。我也很长！那比一比啊？比就比！我有这么长，你有我长吗？我有这么这么长！就是这么长！</span><br><span class="line"></span><br><span class="line">* 无序列表</span><br><span class="line">* 无序列表</span><br><span class="line">* 无序列表</span><br><span class="line">* 无序列表：我很长。我也很长！那比一比啊？比就比！我有这么长，你有我长吗？我有这么这么长！就是这么长！</span><br><span class="line"></span><br><span class="line">+ 无序列表</span><br><span class="line">+ 无序列表</span><br><span class="line">+ 无序列表</span><br><span class="line">+ 无序列表：我很长。我也很长！那比一比啊？比就比！我有这么长，你有我长吗？我有这么这么长！就是这么长！</span><br></pre></td></tr></table></figure><p>三种效果都是一样的，如下：</p><ul><li>无序列表</li><li>无序列表</li><li>无序列表</li><li>无序列表：我很长。我也很长！那比一比啊？比就比！我有这么长，你有我长吗？我有这么这么长！就是这么长！</li></ul><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p>数字不能省略但可无序，点号之后的空格不能少</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 有序列表</span><br><span class="line">2. 有序列表</span><br><span class="line">3. 有序列表</span><br><span class="line">4. 有序列表</span><br></pre></td></tr></table></figure><p>效果：</p><ol><li>有序列表</li><li>有序列表</li><li>有序列表</li><li>有序列表</li></ol><h3 id="嵌套列表"><a href="#嵌套列表" class="headerlink" title="嵌套列表"></a>嵌套列表</h3><p>-+*可循环使用，但符号之后的空格不能少，符号之前的空格也不能少</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- 嵌套列表1</span><br><span class="line"> + 嵌套列表2</span><br><span class="line"> + 嵌套列表3</span><br><span class="line">  - 嵌套列表4</span><br><span class="line">   * 嵌套列表5</span><br><span class="line">- 嵌套列表6</span><br></pre></td></tr></table></figure><p>效果如下：</p><ul><li>嵌套列表1<ul><li>嵌套列表2</li><li>嵌套列表3</li></ul><ul><li>嵌套列表4<ul><li>嵌套列表5</li></ul></li></ul></li><li>嵌套列表6</li></ul><h2 id="文字超链"><a href="#文字超链" class="headerlink" title="文字超链"></a>文字超链</h2><p>Tooltips可省略</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[不如](http://bruce-sha.github.io &quot;不如的博客&quot;)</span><br></pre></td></tr></table></figure><p>效果如下：<br><a href="http://bruce-sha.github.io" title="不如的博客" target="_blank" rel="noopener">不如</a></p><h2 id="图片超链"><a href="#图片超链" class="headerlink" title="图片超链"></a>图片超链</h2><p>多个感叹号，Tooltips可省略，要设置大小只能借助HTML标记</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![GitHub Mark](http://github.global.ssl.fastly.net/images/modules/logos_page/GitHub-Mark.png &quot;GitHub Mark&quot;)</span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="http://github.global.ssl.fastly.net/images/modules/logos_page/GitHub-Mark.png" alt="GitHub Mark" title="GitHub Mark"></p><h2 id="索引超链"><a href="#索引超链" class="headerlink" title="索引超链"></a>索引超链</h2><p>索引，1 可以是任意字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[不如][1]</span><br><span class="line">[1]:http://bruce-sha.github.io</span><br><span class="line">效果如下：</span><br></pre></td></tr></table></figure><p>[不如][1]<br>[1]:<a href="http://bruce-sha.github.io" target="_blank" rel="noopener">http://bruce-sha.github.io</a></p><h2 id="自动链接"><a href="#自动链接" class="headerlink" title="自动链接"></a>自动链接</h2><p>尖括号</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;http://ibruce.info&gt;</span><br><span class="line">&lt;bu.ru@qq.com&gt;</span><br></pre></td></tr></table></figure><p>效果如下：<br><a href="http://ibruce.info" target="_blank" rel="noopener">http://ibruce.info</a><br><a href="mailto:&#x62;&#x75;&#x2e;&#x72;&#117;&#x40;&#x71;&#113;&#46;&#x63;&#111;&#109;" target="_blank" rel="noopener">&#x62;&#x75;&#x2e;&#x72;&#117;&#x40;&#x71;&#113;&#46;&#x63;&#111;&#109;</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="行内代码"><a href="#行内代码" class="headerlink" title="行内代码"></a>行内代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">``` python</span><br><span class="line">@requires_authorization</span><br><span class="line">def somefunc(param1=&apos;&apos;, param2=0):</span><br><span class="line">    &apos;&apos;&apos;A docstring&apos;&apos;&apos;</span><br><span class="line">    if param1 &gt; param2: # interesting</span><br><span class="line">        print &apos;Greater&apos;</span><br><span class="line">    return (param2 - param1 + 1) or None</span><br><span class="line">class SomeClass:</span><br><span class="line">    pass</span><br><span class="line">&gt;&gt;&gt; message = &apos;&apos;&apos;interpreter</span><br><span class="line">... prompt&apos;&apos;&apos;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">可代码高亮</span><br><span class="line">``` python</span><br><span class="line">@requires_authorization</span><br><span class="line">def somefunc(param1=&apos;&apos;, param2=0):</span><br><span class="line">    &apos;&apos;&apos;A docstring&apos;&apos;&apos;</span><br><span class="line">    if param1 &gt; param2: # interesting</span><br><span class="line">        print &apos;Greater&apos;</span><br><span class="line">    return (param2 - param1 + 1) or None</span><br><span class="line">class SomeClass:</span><br><span class="line">    pass</span><br><span class="line">&gt;&gt;&gt; message = &apos;&apos;&apos;interpreter</span><br><span class="line">... prompt&apos;&apos;&apos;</span><br></pre></td></tr></table></figure><h3 id="段落代码"><a href="#段落代码" class="headerlink" title="段落代码"></a>段落代码</h3><p>每行文字前加4个空格或者1个Tab</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val s = &quot;hello Markdown&quot;</span><br><span class="line">println( s )</span><br><span class="line">val s = &quot;hello Markdown&quot;</span><br><span class="line">println( s )</span><br></pre></td></tr></table></figure><p>效果如下：<br>val s = “hello Markdown”<br>println( s )<br>val s = “hello Markdown”<br>println( s )</p><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>用html的注释</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 用html的注释 --&gt;</span><br></pre></td></tr></table></figure>这有内容就是被注释了，所以未显示<h2 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h2><p>用html的注释，好像只有这样？<br>Markdown中的转义字符为\，转义的有：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">\\ 反斜杠</span><br><span class="line">\` 反引号</span><br><span class="line">\* 星号</span><br><span class="line">\_ 下划线</span><br><span class="line">\&#123;\&#125; 大括号</span><br><span class="line">\[\] 中括号</span><br><span class="line">\(\) 小括号</span><br><span class="line">\# 井号</span><br><span class="line">\+ 加号</span><br><span class="line">\- 减号</span><br><span class="line">\. 英文句号</span><br><span class="line">\! 感叹号</span><br></pre></td></tr></table></figure><p>效果如下：<br>\ 反斜杠<br>` 反引号<br>* 星号<br>_ 下划线<br>{} 大括号<br>[] 中括号<br>() 小括号<br># 井号<br>+ 加号<br>- 减号<br>. 英文句号<br>! 感叹号</p><h2 id="删除线语法"><a href="#删除线语法" class="headerlink" title="删除线语法"></a>删除线语法</h2><p>支持两种方法:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~~我是被删除的~~</span><br><span class="line">&lt;del&gt; 我是被删除的 &lt;/del&gt;</span><br></pre></td></tr></table></figure><p>效果如下<br><del>我是被删除的</del></p><h2 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h2><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](/68cb3bb5/lifecycle.png)</span><br></pre></td></tr></table></figure><p>效果如下：<br><img src="/archives/68cb3bb5/lifecycle.png" alt><br>注：相关内容扩展，如何控制图片显示大小等等</p><h2 id="生成表格"><a href="#生成表格" class="headerlink" title="生成表格"></a>生成表格</h2><h3 id="md原生"><a href="#md原生" class="headerlink" title="md原生"></a>md原生</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 水果        | 价格    |  数量  |</span><br><span class="line">| --------   | -----:   | :----: |</span><br><span class="line">| 香蕉        | $1      |   5    |</span><br><span class="line">| 苹果        | $1      |   6    |</span><br><span class="line">| 草莓        | $1      |   7    |</span><br></pre></td></tr></table></figure><p>效果如下：</p><table><thead><tr><th>水果</th><th>价格</th><th>数量</th></tr></thead><tbody><tr><td>香蕉</td><td>$1</td><td>5</td></tr><tr><td>苹果</td><td>$1</td><td>6</td></tr><tr><td>草莓</td><td>$1</td><td>7</td></tr></tbody></table><h3 id="HTML表格"><a href="#HTML表格" class="headerlink" title="HTML表格"></a>HTML表格</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>设备<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>设备文件名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>文件描述符<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>类型<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>键盘<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>/dev/stdin<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>0<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>标准输入<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>显示器<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>/dev/stdout<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>标准输出<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>显示器<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>/dev/stderr<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>标准错误输出<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><table><tr><th>设备</th><th>设备文件名</th><th>文件描述符</th><th>类型</th></tr><tr><th>键盘</th><th>/dev/stdin</th><th>0</th><th>标准输入</th></tr><tr><th>显示器</th><th>/dev/stdout</th><th>1</th><th>标准输出</th></tr><tr><th>显示器</th><th>/dev/stderr</th><th>2</th><th>标准错误输出</th></tr></table>### execl表格 项目地址：https://github.com/fanfeilong/exceltk 有兴趣的同学可以自己测试下，未测试.<h2 id="段落缩进（空格）"><a href="#段落缩进（空格）" class="headerlink" title="段落缩进（空格）"></a>段落缩进（空格）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">半方大的空白&amp;ensp;或&amp;#8194;看，飞碟</span><br><span class="line">全方大的空白&amp;emsp;或&amp;#8195;看，飞碟</span><br><span class="line">不断行的空白格&amp;nbsp;或&amp;#160;看，飞碟</span><br><span class="line">&amp;emsp;&amp;emsp;段落从此开始。</span><br></pre></td></tr></table></figure><p>效果如下：<br>半方大的空白&ensp;或&#8194;看，飞碟<br>全方大的空白&emsp;或&#8195;看，飞碟<br>不断行的空白格&nbsp;或&#160;看，飞碟<br>&emsp;&emsp;段落从此开始。</p><h2 id="字体、字号、颜色、背景色"><a href="#字体、字号、颜色、背景色" class="headerlink" title="字体、字号、颜色、背景色"></a>字体、字号、颜色、背景色</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;font face=&quot;黑体&quot;&gt;我是黑体字&lt;/font&gt;</span><br><span class="line">&lt;font face=&quot;微软雅黑&quot;&gt;我是微软雅黑&lt;/font&gt;</span><br><span class="line">&lt;font face=&quot;STCAIYUN&quot;&gt;我是华文彩云&lt;/font&gt;</span><br><span class="line">&lt;font color=#0099ff size=12 face=&quot;黑体&quot;&gt;黑体&lt;/font&gt;</span><br><span class="line">&lt;font color=#00ffff size=3&gt;null&lt;/font&gt;</span><br><span class="line">&lt;font color=gray size=5&gt;gray&lt;/font&gt;</span><br><span class="line">&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#FF4500&gt;这里的背景色是：OrangeRed，  十六进制颜色值：#FF4500， rgb(255, 69, 0)&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</span><br></pre></td></tr></table></figure><p>效果如下：<br><font face="黑体">我是黑体字</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="#0099ff" size="12" face="黑体">黑体</font><br><font color="#00ffff" size="3">null</font><br><font color="gray" size="5">gray</font></p><table><tr><td bgcolor="#FF4500">这里的背景色是：OrangeRed， 十六进制颜色值：#FF4500， rgb(255, 69, 0)</td></tr></table>## 标签 ### 行内标签<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">快捷键 `Ctrl + D` 来收藏本页</span><br></pre></td></tr></table></figure><p>效果如下：<br>快捷键 <code>Ctrl + D</code> 来收藏本页</p><h2 id="注脚"><a href="#注脚" class="headerlink" title="注脚"></a>注脚</h2><p>不是标准 MarkDown的范畴,各个扩展的定义可能有所不同.</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.jianshu.com/p/abaff828100d" target="_blank" rel="noopener">Markdown 快速生成表格</a><br><a href="http://blog.csdn.net/fan_yufan/article/details/45957985" target="_blank" rel="noopener">markdown 语法之字体、字号、颜色以及背景色</a><br><a href="http://blog.csdn.net/u011419965/article/details/50536937#字体字号颜色" target="_blank" rel="noopener">markdown语法实例</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/5d3f2cbe.html">https://mds1455975151.github.io/archives/5d3f2cbe.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> 标记语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Atom之插件管理</title>
      <link href="/archives/81611243.html"/>
      <url>/archives/81611243.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>用好Atom插件不可少，让我们玩转Atom插件</p></blockquote><a id="more"></a><h1 id="Atom安装插件"><a href="#Atom安装插件" class="headerlink" title="Atom安装插件"></a>Atom安装插件</h1><h2 id="方法1：使用apm安装工具-推荐"><a href="#方法1：使用apm安装工具-推荐" class="headerlink" title="方法1：使用apm安装工具(推荐)"></a>方法1：使用apm安装工具(推荐)</h2><p>apm(Atom Package Manager)是atom的包管理工具，可以方便的管理Atom的插件.</p><p>下面以安装插件autoclose-html为例</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">Administrator</span>&gt;<span class="title">apm</span> -<span class="title">v</span>                   # 查看<span class="title">apm</span>工具版本</span></span><br><span class="line"><span class="function"><span class="title">apm</span>  1.18.11</span></span><br><span class="line"><span class="function"><span class="title">npm</span>  3.10.10</span></span><br><span class="line"><span class="function"><span class="title">node</span> 6.9.5 <span class="title">x64</span></span></span><br><span class="line"><span class="function"><span class="title">atom</span> 1.23.1</span></span><br><span class="line"><span class="function"><span class="title">python</span> 2.7.11</span></span><br><span class="line"><span class="function"><span class="title">git</span> 2.15.0.<span class="title">windows</span>.1</span></span><br><span class="line"><span class="function"><span class="title">visual</span> <span class="title">studio</span></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\<span class="title">Administrator</span>&gt;<span class="title">apm</span> <span class="title">install</span> <span class="title">autoclose</span>-<span class="title">html</span></span></span><br><span class="line"><span class="function"><span class="title">Installing</span> <span class="title">autoclose</span>-<span class="title">html</span> <span class="title">to</span> <span class="title">C</span>:\<span class="title">Users</span>\<span class="title">Administrator</span>\.<span class="title">atom</span>\<span class="title">packages</span> <span class="title">done</span></span></span><br></pre></td></tr></table></figure><p>批量安装插件</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ cat atom_packages.txt</span><br><span class="line">emmet</span><br><span class="line">minimap</span><br><span class="line">file-icons</span><br><span class="line">​docblockr</span><br><span class="line">autoclose-html</span><br><span class="line">highlight-line</span><br><span class="line">highlight-selected</span><br><span class="line">simplified-chinese-menu</span><br><span class="line">sublime-style-column-selection</span><br><span class="line">markdown-preview-plus</span><br><span class="line">markdown-scroll-sync</span><br><span class="line">language-markdown</span><br><span class="line">markdown-image-paste</span><br><span class="line">markdown-table-editor</span><br><span class="line">markdown-themeable-pdf</span><br><span class="line">pdf-view</span><br><span class="line">$ apm install --packages-file atom_packages.txt</span><br></pre></td></tr></table></figure><h2 id="方法2：使用git-clone整个插件的仓库"><a href="#方法2：使用git-clone整个插件的仓库" class="headerlink" title="方法2：使用git clone整个插件的仓库"></a>方法2：使用git clone整个插件的仓库</h2><p>这种方法可能会少相关依赖，需要自行在package里运行npm install<node-package>安装相关的依赖。<br>在atom.io上(或者在atom设置界面中跳转到插件的网页)找到插件页面，点击Repo跳到插件的github仓库，将替换为仓库的地址，然后在packages目录下运行下列命令：</node-package></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone &lt;repo-url&gt;</span><br></pre></td></tr></table></figure><h2 id="方法3：使用自己创建的仓库"><a href="#方法3：使用自己创建的仓库" class="headerlink" title="方法3：使用自己创建的仓库"></a>方法3：使用自己创建的仓库</h2><p>为了保证各个设备的Atom设置同步，可以自己新建一个git仓库，把自己的插件及配置文件(config.cson,snippets.cson等等…) 提交上去，今后就可以方便的安装自己提交上去的插件啦！</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/alucardlockon/MyAtomPackagesAndConfig</span><br></pre></td></tr></table></figure><h1 id="Atom卸载插件"><a href="#Atom卸载插件" class="headerlink" title="Atom卸载插件"></a>Atom卸载插件</h1><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">svn</span>\192.168.200.104<span class="title">_devops_doc</span>\<span class="title">trunk</span>\<span class="title">Editor</span>\<span class="title">atom</span>&gt;<span class="title">apm</span> <span class="title">uninstall</span> <span class="title">simplified</span>-<span class="title">chi</span></span></span><br><span class="line"><span class="function"><span class="title">nese</span>-<span class="title">menu</span></span></span><br><span class="line"><span class="function"><span class="title">Uninstalling</span> <span class="title">simplified</span>-<span class="title">chinese</span>-<span class="title">menu</span> <span class="title">done</span></span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://blog.csdn.net/alucardlockon/article/details/52195774" target="_blank" rel="noopener">Atom安装插件的几个方法</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/81611243.html">https://mds1455975151.github.io/archives/81611243.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Linux运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atom </tag>
            
            <tag> 插件管理 </tag>
            
            <tag> apm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客加密功能</title>
      <link href="/archives/93862d36.html"/>
      <url>/archives/93862d36.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何给博客内容添加访问限制，保证信息安全？</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>Github地址:<a href="https://github.com/MikeCoder/hexo-blog-encrypt" target="_blank" rel="noopener">https://github.com/MikeCoder/hexo-blog-encrypt</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo</span><br><span class="line">npm install hexo-blog-encrypt --save</span><br></pre></td></tr></table></figure><h2 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h2><p><a href="https://github.com/MikeCoder/hexo-blog-encrypt" target="_blank" rel="noopener">参考插件官网说明</a></p><h2 id="查看修改效果"><a href="#查看修改效果" class="headerlink" title="查看修改效果"></a>查看修改效果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a></p><h2 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h2><p><img src="/archives/93862d36/01.png" alt></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/93862d36.html">https://mds1455975151.github.io/archives/93862d36.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> encrypt </tag>
            
            <tag> 加密 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo添加RSS</title>
      <link href="/archives/77130092.html"/>
      <url>/archives/77130092.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如何设置RSS源，别人可以订阅你的博客更新？</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo</span><br><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><h2 id="查看修改效果"><a href="#查看修改效果" class="headerlink" title="查看修改效果"></a>查看修改效果</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <a href="http://127.0.0.1:4000" target="_blank" rel="noopener">http://127.0.0.1:4000</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/77130092.html">https://mds1455975151.github.io/archives/77130092.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> rss </tag>
            
            <tag> Rss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人简历</title>
      <link href="/archives/e860cc2d.html"/>
      <url>/archives/e860cc2d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=29750751&auto=1&height=66"></iframe>//其中的width=298 height=52 均改为0就看不到了，依然可以播放音乐<p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/e860cc2d.html">https://mds1455975151.github.io/archives/e860cc2d.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      
        <tags>
            
            <tag> 个人简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Next添加Disqus评论</title>
      <link href="/archives/f5e10446.html"/>
      <url>/archives/f5e10446.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>给博客添加评论系统，可以和用户交流分享文章内容，不断优化博客内容.</p><h1 id="Disqus配置"><a href="#Disqus配置" class="headerlink" title="Disqus配置"></a>Disqus配置</h1><p><a href="https://disqus.com/" target="_blank" rel="noopener">Disqus官网</a><br>登录官网，可以使用Facebook，Twitter以及Google登录，也可以用邮箱注册后登录.</p><h2 id="添加site"><a href="#添加site" class="headerlink" title="添加site"></a>添加site</h2><p>登录后，点击图标按钮<br><img src="/archives/Hexo-f5e10446/01.png" alt></p><p>Create a new site<br><img src="/archives/f5e10446/02.png" alt><br>根据提示输入website name这个后期会用到即shortname,选择相应的分类和显示语言</p><h2 id="Hexo-Next配置"><a href="#Hexo-Next配置" class="headerlink" title="Hexo Next配置"></a>Hexo Next配置</h2><p>修改主题配置，其他如果支持配置应该是类似的</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Disqus 评论功能</span></span><br><span class="line"><span class="attr">disqus_shortname:</span> <span class="string">your_shortname</span></span><br></pre></td></tr></table></figure><h2 id="验证效果"><a href="#验证效果" class="headerlink" title="验证效果"></a>验证效果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>在本地访问 <code>text http://127.0.0.1:4000</code><br><img src="/archives/f5e10446/03.png" alt></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.jianshu.com/p/d68de067ea74?open_source=weibo_search" target="_blank" rel="noopener">Hexo搭建博客系列：（六）Hexo添加Disqus评论</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f5e10446.html">https://mds1455975151.github.io/archives/f5e10446.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Disqus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins之最佳实践:游戏开服</title>
      <link href="/archives/d239f4f2.html"/>
      <url>/archives/d239f4f2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>应用场景描述：运营提供开服邮件，运维利用开服信息大批量设置开服操作(添加游戏服务器列表显示给用户)</p><h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><h2 id="需求案例"><a href="#需求案例" class="headerlink" title="需求案例"></a>需求案例</h2><p>运营需求邮件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[xxx][IOS]开服需求如下，烦请帮忙操作，感谢！</span><br><span class="line"></span><br><span class="line">【项目】xxx</span><br><span class="line">【GameID】xxx</span><br><span class="line">【端口】8080</span><br><span class="line">【修改服务器列表】IOS服务器列表：serverlist_com.xxx.xxx_1.1.1.xml</span><br><span class="line"></span><br><span class="line">开服日期    开服时间    服务器编号 服务器名称 ServerID  外网IP    内网IP      域名</span><br><span class="line">2017-12-5   10:00       S399    大吉大利    2222      1.1.1.1   2.2.2.2   s399.xxx.xxx.com</span><br><span class="line"></span><br><span class="line">规则: 最新服为推荐5，前一服为畅通4，其余服为爆满2</span><br></pre></td></tr></table></figure><blockquote><p>邮件内容截图显示异常修改为文字版本</p></blockquote><p>实现效果：<br>&emsp;&emsp;将运营邮件部分直接粘贴到Jenkins中进行解析，获取各项信息，然后拼接开服所需信息。</p><h2 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h2><p>新建自由格式的新jobs–设置参数构建–新建参数开服信息–编写解析脚本</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'host_info'</span>, <span class="string">'w'</span>)</span><br><span class="line">game_info = os.getenv(<span class="string">"game_info"</span>).split(<span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> game_info:</span><br><span class="line">    line = data.split(<span class="string">'\t'</span>)</span><br><span class="line">    date = line[<span class="number">0</span>]</span><br><span class="line">    time = line[<span class="number">1</span>]</span><br><span class="line">    name = line[<span class="number">2</span>]</span><br><span class="line">    sid = line[<span class="number">3</span>]</span><br><span class="line">    wanip = line[<span class="number">4</span>]</span><br><span class="line">    lanip = line[<span class="number">5</span>]</span><br><span class="line">    domain = line[<span class="number">6</span>]</span><br><span class="line">    channel = line[<span class="number">7</span>]</span><br><span class="line">    info_str = <span class="string">"%s %s %s %s %s %s %s %s"</span> % (date, time, name, sid, wanip, lanip, domain, channel)</span><br><span class="line">    <span class="keyword">print</span> info_str</span><br><span class="line">    f.write(<span class="string">'info_str'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>后期可以通过写Python脚本读取host_info文本信息，拼接xml信息添加的服务器列表的xml文件中.</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d239f4f2.html">https://mds1455975151.github.io/archives/d239f4f2.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> 游戏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>技术变现思路(挣点零花钱)</title>
      <link href="/archives/f7ea3e07.html"/>
      <url>/archives/f7ea3e07.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>IT同学如何利用自己的IT技能实现技能变现?</p></blockquote><h1 id="实践方法总结"><a href="#实践方法总结" class="headerlink" title="实践方法总结"></a>实践方法总结</h1><ul><li>个人站长</li><li>游戏私服</li><li>电脑类(维修、装机等)</li><li>Google Adsense</li><li>百度联盟</li><li>自行购买服务器部署VPN，提供给有需求的用户</li><li>http/https/socks代理</li><li>免流</li><li>云服务器推广</li><li>淘宝联盟</li><li>京东联盟</li><li>VPN</li><li>内网穿透ngrok</li><li>技术咨询</li><li>视频课程</li></ul><p>==============================================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/f7ea3e07.html">https://mds1455975151.github.io/archives/f7ea3e07.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 思维 </tag>
            
            <tag> 理财 </tag>
            
            <tag> 变现 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用GitHub+Hexo+Next搭建静态博客</title>
      <link href="/archives/1d0ef806.html"/>
      <url>/archives/1d0ef806.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><img src="/archives/1d0ef806/01.png" alt><br>&emsp;&emsp;GitHub为广大开发者提供了一个非常好的平台，不仅是代码的开源，同时GitHub还提供了开发者可以在GitHub上建立自己的站点（GithubPage）的一个非常有意思的功能。它功能有限只能创建静态的网站。<br>&emsp;&emsp;本文整理自己的部署过程，意在帮助那些刚刚接触GitHub的新手同学，可以利用GitHub快速创建高逼格的个人博客站点。<br>GitHub Pages 有以下几个优点：<br>1、轻量级的博客系统，没有麻烦的配置<br>2、免费空间，享受 Git 版本管理功能<br>3、使用标记语言，比如 Markdown<br>4、无需自己搭建服务器<br>5、可以绑定自己的域名<br>当然他也有缺点：<br>1、搭配模板系统，相当于静态页发布，每运行生成一次都必须遍历全部的文本文件，网站越大，生成时间越长<br>2、动态程序的部分相当局限，比如没有评论，不过有解决方案<br>3、基于 Git，很多东西需要定制，不像 Wordpress 有强大的后台<br>要想搭建漂亮的 blog，还需要模板系统，官方推荐的是 jekyll，但是配置稍复杂，今天推荐另一个选择 —— hexo，一个简单地、轻量地、基于 Node 的一个静态博客框架。</p><p>下面介绍下如何使用 hexo 和 github pages 搭建个人博客。</p><a id="more"></a><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ul><li>GitHub账号，创建一个仓库，规则为：例如我的账号为mds1455975151，则新建仓库名称为mds1455975151.github.io</li><li>NodeJS环境及相关基本知识，我的环境如下：<ul><li>os: Windows_NT 6.1.7601 win32 x64</li><li>node: 8.9.2</li></ul></li><li>Git基本使用及git for windows安装使用。<ul><li>git version: 2.15.0.windows.1</li></ul></li></ul><h1 id="关于Hexo"><a href="#关于Hexo" class="headerlink" title="关于Hexo"></a>关于Hexo</h1><h2 id="Hexo基本介绍"><a href="#Hexo基本介绍" class="headerlink" title="Hexo基本介绍"></a>Hexo基本介绍</h2><p>&emsp;&emsp;官网:<a href="https://hexo.io/" target="_blank" rel="noopener">https://hexo.io/</a><br>&emsp;&emsp;GitHub:<a href="https://github.com/hexojs/hexo" target="_blank" rel="noopener">https://github.com/hexojs/hexo</a><br>A fast, simple &amp; powerful blog framework(快速、简单而高效的静态博客框架)<br>- Blazing Fast(超快速度)<br>Node.js brings you incredible generating speed. Hundreds of files take only seconds to build.<br>- Markdown Support(支持Markdown)<br>All features of GitHub Flavored Markdown are supported. You can even use most Octopress plugins in Hexo.<br>- One-Command Deployment(一键部署)<br>You only need one command to deploy your site to GitHub Pages, Heroku or other sites.<br>- Various Plugins(丰富的插件)<br>Hexo has a powerful plugin system. You can install more plugins for Jade, CoffeeScript plugins.</p><h2 id="Hexo工作原理"><a href="#Hexo工作原理" class="headerlink" title="Hexo工作原理"></a>Hexo工作原理</h2><p>&emsp;&emsp;由于github pages存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以hexo所做的就是将这些md文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到github。</p><h1 id="关于NexT"><a href="#关于NexT" class="headerlink" title="关于NexT"></a>关于NexT</h1><p>&emsp;&emsp;即Hexo的主题插件<br>&emsp;&emsp;官网:<a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">http://theme-next.iissnan.com/</a><br>&emsp;&emsp;Github:<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next</a></p><h1 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h1><h2 id="安装Git-for-for-windows"><a href="#安装Git-for-for-windows" class="headerlink" title="安装Git for for windows"></a>安装Git for for windows</h2><p><a href="https://desktop.github.com/" target="_blank" rel="noopener">官网</a><br>安装简单，安装过程中尽量选择图形界面和命令行都有的，我个人更喜欢命令行操作，So Easy</p><h2 id="安装Node-JS"><a href="#安装Node-JS" class="headerlink" title="安装Node.JS"></a>安装Node.JS</h2><p>在window平台下，Linux平台类似<br><a href="https://nodejs.org/en/" target="_blank" rel="noopener">官网</a><br>我选的是8.9.3 LTS版本，安装完成环境变量就添加好了，无需手动设置，另外操作需要管理员权限.</p><h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>Hexo安装和部署依赖Nodejs和Git，自行安装即可，很简单。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure><h2 id="初始化框架"><a href="#初始化框架" class="headerlink" title="初始化框架"></a>初始化框架</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line">.</span><br><span class="line">├── _config.yml     // 网站的配置信息，您可以在此配置大部分的参数。</span><br><span class="line">├── package.json    // 应用程序的信息</span><br><span class="line">├── scaffolds       // 模版文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。</span><br><span class="line">├── source          // 资源文件夹是存放用户资源的地方。</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes          // 主题 文件夹 Hexo会根据主题来生成静态页面。</span><br><span class="line">cd blog</span><br><span class="line">hexo g</span><br><span class="line">hexo s              // 开启本地预览服务，打开浏览器访问http://localhost:4000即可看到内容&lt;/span&gt;&lt;/pre&gt;</span><br></pre></td></tr></table></figure><h2 id="主配置讲解"><a href="#主配置讲解" class="headerlink" title="主配置讲解"></a>主配置讲解</h2><h3 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- title        // 网站标题</span><br><span class="line">- subtitle    // 网站副标题</span><br><span class="line">- description  // 网站描述</span><br><span class="line">- author      // 您的名字</span><br><span class="line">- language    // 网站使用的语言</span><br><span class="line">- timezone    // 网站时区。Hexo 预设使用您电脑的时区。时区列表</span><br></pre></td></tr></table></figure><h3 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- url               // 网址</span><br><span class="line">- root             // 网站根目录</span><br><span class="line">- permalink         // 文章的 永久链接 格式:year/:month/:day/:title/</span><br><span class="line">- permalink_default // 永久链接中各部分的默认值</span><br></pre></td></tr></table></figure><p><strong>网站存放在子目录</strong><br>如果您的网站存放在子目录中，例如 <a href="http://yoursite.com/blog，则请将您的" target="_blank" rel="noopener">http://yoursite.com/blog，则请将您的</a> url 设为 <a href="http://yoursite.com/blog" target="_blank" rel="noopener">http://yoursite.com/blog</a> 并把 root 设为 /blog/。</p><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- source_dir   // 资源文件夹，这个文件夹用来存放内容。source</span><br><span class="line">- public_dir   // 公共文件夹，这个文件夹用于存放生成的站点文件。public</span><br><span class="line">- tag_dir       // 标签文件夹tags</span><br><span class="line">- archive_dir   // 归档文件夹archives</span><br><span class="line">- category_dir // 分类文件夹categories</span><br><span class="line">- code_dir     // Include code 文件夹downloads/code</span><br><span class="line">- i18n_dir     // 国际化（i18n）文件夹:lang</span><br><span class="line">- skip_render   // 跳过指定文件的渲染，您可使用 glob 来配置路径。</span><br></pre></td></tr></table></figure><h3 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- new_post_name    // 新文章的文件名称:title.md</span><br><span class="line">- default_layout  // 预设布局post</span><br><span class="line">- auto_spacing    // 在中文和英文之间加入空格false</span><br><span class="line">- titlecase        // 把标题转换为 title casefalse</span><br><span class="line">- external_link    // 在新标签中打开链接true</span><br><span class="line">- filename_case    // 把文件名称转换为 (1) 小写或 (2) 大写0</span><br><span class="line">- render_drafts    // 显示草稿false</span><br><span class="line">- post_asset_folder// 启动 Asset 文件夹false</span><br><span class="line">- relative_link    // 把链接改为与根目录的相对位址false</span><br><span class="line">- future          // 显示未来的文章true</span><br><span class="line">- highlight        // 代码块的设置</span><br></pre></td></tr></table></figure><h3 id="分类-amp-标签"><a href="#分类-amp-标签" class="headerlink" title="分类 &amp; 标签"></a>分类 &amp; 标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- default_category// 默认分类uncategorized</span><br><span class="line">- category_map    // 分类别名</span><br><span class="line">- tag_map          // 标签别名</span><br></pre></td></tr></table></figure><h3 id="日期-时间格式"><a href="#日期-时间格式" class="headerlink" title="日期 / 时间格式"></a>日期 / 时间格式</h3><p>Hexo 使用 Moment.js 来解析和显示时间.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- date_format // 日期格式MMM D YYYY</span><br><span class="line">- time_format// 时间格式H:mm:ss</span><br></pre></td></tr></table></figure><h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- per_page       // 每页显示的文章量 (0 = 关闭分页功能)10</span><br><span class="line">- pagination_dir // 分页目录page</span><br></pre></td></tr></table></figure><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- theme  // 当前主题名称</span><br><span class="line">- deploy// 部署</span><br></pre></td></tr></table></figure><h2 id="Hexo使用"><a href="#Hexo使用" class="headerlink" title="Hexo使用"></a>Hexo使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"postName"</span>       // 新建文章</span><br><span class="line">hexo new page <span class="string">"pageName"</span>  // 新建页面</span><br><span class="line">hexo generate             //生成静态页面至public目录</span><br><span class="line">hexo server               //开启预览访问端口（默认端口4000，<span class="string">'ctrl + c'</span>关闭server）</span><br><span class="line">hexo deploy               //将.deploy目录部署到GitHub</span><br><span class="line">hexo <span class="built_in">help</span>                 //查看帮助</span><br><span class="line">hexo version              //查看Hexo的版本&lt;/span&gt;&lt;/pre&gt;</span><br><span class="line">hexo s -p 5000            //更改端口</span><br><span class="line">hexo s -i 192.168.1.1     //自定义 IP</span><br><span class="line">hexo g --watch            //监视文件变动</span><br></pre></td></tr></table></figure><h2 id="安装NexT主题"><a href="#安装NexT主题" class="headerlink" title="安装NexT主题"></a>安装NexT主题</h2><p>拷贝主题代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo</span><br><span class="line">git clone --branch v5.1.2 https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>启用主题<br>在博客根目录下找到_config.yml文件，修改主题设置，修改完成hexo s查看主题效果</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure><h2 id="部署网站"><a href="#部署网站" class="headerlink" title="部署网站"></a>部署网站</h2><p>修改主配置文件_config.yml.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:YourRepository.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>修改完成，在git bash中使用如下命令进行发布：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>更多内容可以参考本博客其他文章<a href="http://www.mdslq.cn/categories/Hexo/" target="_blank" rel="noopener">点我</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://pages.github.com/" target="_blank" rel="noopener">官网GitHub Pages资料</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a> <img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/1d0ef806.html">https://mds1455975151.github.io/archives/1d0ef806.html</a><br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> GitHub </tag>
            
            <tag> NexT </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
